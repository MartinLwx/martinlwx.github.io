

<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="noodp" />
    <title>ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim) - MartinLwx&#39;s Blog</title><meta name="Description" content="ä»é›¶å¼€å§‹é…ç½® Neovim ä¸ºä¸€ä¸ªè½»é‡çº§çš„ IDE"><meta property="og:title" content="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)" />
<meta property="og:description" content="ä»é›¶å¼€å§‹é…ç½® Neovim ä¸ºä¸€ä¸ªè½»é‡çº§çš„ IDE" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" /><meta property="og:image" content="https://martinlwx.github.io/logo.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-08T15:01:42+08:00" />
<meta property="article:modified_time" content="2024-04-04T22:00:42+08:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://martinlwx.github.io/logo.png" /><meta name="twitter:title" content="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)"/>
<meta name="twitter:description" content="ä»é›¶å¼€å§‹é…ç½® Neovim ä¸ºä¸€ä¸ªè½»é‡çº§çš„ IDE"/>
<meta name="application-name" content="MartinLwx&#39;s blog">
<meta name="apple-mobile-web-app-title" content="MartinLwx&#39;s blog">

<meta name="theme-color" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" href="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" /><link rel="prev" href="https://martinlwx.github.io/zh-cn/type-hints-in-python/" /><link rel="next" href="https://martinlwx.github.io/zh-cn/linear-regression-model-guide-theory/" />
<link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/color.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/fontawesome-free/all.min.css">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/animate/animate.min.css">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/"
        },"genre": "posts","keywords": "Vim-Neovim","wordcount":  4823 ,
        "url": "https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/","datePublished": "2023-02-08T15:01:42+08:00","dateModified": "2024-04-04T22:00:42+08:00","license": "\u003ca rel=\"license noopener\" href=\"https://creativecommons.org/licenses/by-nc-nd/4.0/\" target=\"_blank\"\u003eCC BY-NC-ND 4.0\u003c/a\u003e","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "MartinLwx"
            },"description": "ä»é›¶å¼€å§‹é…ç½® Neovim ä¸ºä¸€ä¸ªè½»é‡çº§çš„ IDE"
    }
    </script></head>

<body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">
        function setTheme(theme) {document.body.setAttribute('theme', theme); document.documentElement.style.setProperty('color-scheme', theme === 'light' ? 'light' : 'dark'); window.theme = theme;   window.isDark = window.theme !== 'light' }
        function saveTheme(theme) {window.localStorage && localStorage.setItem('theme', theme);}
        function getMeta(metaName) {const metas = document.getElementsByTagName('meta'); for (let i = 0; i < metas.length; i++) if (metas[i].getAttribute('name') === metaName) return metas[i]; return '';}
        if (window.localStorage && localStorage.getItem('theme')) {let theme = localStorage.getItem('theme');theme === 'light' || theme === 'dark' || theme === 'black' ? setTheme(theme) : (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light')); } else { if ('auto' === 'light' || 'auto' === 'dark' || 'auto' === 'black') setTheme('auto'), saveTheme('auto'); else saveTheme('auto'), window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? setTheme('dark') : setTheme('light');}
        let metaColors = {'light': '#f8f8f8','dark': '#252627','black': '#000000'}
        getMeta('theme-color').content = metaColors[document.body.getAttribute('theme')];
        window.switchThemeEventSet = new Set()
    </script>
    <div id="back-to-top"></div>
    <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/zh-cn/" title="MartinLwx&#39;s Blog"><span id="desktop-header-typeit" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/zh-cn/posts/"> æ‰€æœ‰æ–‡ç«  </a><a class="menu-item" href="/zh-cn/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/zh-cn/categories/"> åˆ†ç±» </a><a class="menu-item" href="https://github.com/MartinLwx" title="GitHub" rel="noopener noreferrer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="é€‰æ‹©è¯­è¨€">ç®€ä½“ä¸­æ–‡<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" title="é€‰æ‹©è¯­è¨€" id="language-select-desktop" onchange="location = this.value;"><option value="/en/config-neovim-from-scratch/">English</option><option value="/zh-cn/config-neovim-from-scratch/" selected>ç®€ä½“ä¸­æ–‡</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-select" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw"></i>
                    <select class="color-theme-select" id="theme-select-desktop" title="åˆ‡æ¢ä¸»é¢˜">
                        <option value="light">æµ…è‰²</option>
                        <option value="dark">æ·±è‰²</option>
                        <option value="black">é»‘è‰²</option>
                        <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                    </select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/zh-cn/" title="MartinLwx&#39;s Blog"><span id="mobile-header-typeit" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/zh-cn/posts/" title="">æ‰€æœ‰æ–‡ç« </a><a class="menu-item" href="/zh-cn/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/zh-cn/categories/" title="">åˆ†ç±»</a><a class="menu-item" href="https://github.com/MartinLwx" title="GitHub" rel="noopener noreferrer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-select" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw"></i>
                <select class="color-theme-select" id="theme-select-mobile" title="åˆ‡æ¢ä¸»é¢˜">
                    <option value="light">æµ…è‰²</option>
                    <option value="dark">æ·±è‰²</option>
                    <option value="black">é»‘è‰²</option>
                    <option value="auto">è·Ÿéšç³»ç»Ÿ</option>
                </select>
            </a><a href="javascript:void(0);" class="menu-item" title="é€‰æ‹©è¯­è¨€">ç®€ä½“ä¸­æ–‡<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" title="é€‰æ‹©è¯­è¨€" onchange="location = this.value;"><option value="/en/config-neovim-from-scratch/">English</option><option value="/zh-cn/config-neovim-from-scratch/" selected>ç®€ä½“ä¸­æ–‡</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
            <div class="container"><div class="toc" id="toc-auto">
        <h2 class="toc-title">ç›®å½•</h2>
        <div class="toc-content" id="toc-content-auto"><nav id="TableOfContents">
  <ul>
    <li><a href="#ç‰ˆæœ¬ä¿¡æ¯">ç‰ˆæœ¬ä¿¡æ¯</a></li>
    <li><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-neovim">ä¸ºä»€ä¹ˆé€‰æ‹© Neovim</a></li>
    <li><a href="#nvim-é…ç½®åŸºç¡€çŸ¥è¯†">Nvim é…ç½®åŸºç¡€çŸ¥è¯†</a>
      <ul>
        <li><a href="#lua-è¯­è¨€">Lua è¯­è¨€</a></li>
        <li><a href="#é…ç½®æ–‡ä»¶è·¯å¾„">é…ç½®æ–‡ä»¶è·¯å¾„</a></li>
        <li><a href="#é€‰é¡¹é…ç½®">é€‰é¡¹é…ç½®</a></li>
        <li><a href="#æŒ‰é”®é…ç½®">æŒ‰é”®é…ç½®</a></li>
      </ul>
    </li>
    <li><a href="#ä»é›¶å¼€å§‹é…ç½®-nvim">ä»é›¶å¼€å§‹é…ç½® Nvim</a>
      <ul>
        <li><a href="#å®‰è£…-nvim">å®‰è£… Nvim</a></li>
        <li><a href="#é€‰é¡¹é…ç½®-1">é€‰é¡¹é…ç½®</a></li>
        <li><a href="#æŒ‰é”®é…ç½®-1">æŒ‰é”®é…ç½®</a></li>
        <li><a href="#å®‰è£…æ’ä»¶ç®¡ç†å™¨">å®‰è£…æ’ä»¶ç®¡ç†å™¨</a></li>
        <li><a href="#ä¸»é¢˜é…ç½®">ä¸»é¢˜é…ç½®</a></li>
        <li><a href="#è‡ªåŠ¨è¡¥å…¨æŒ‡å—">è‡ªåŠ¨è¡¥å…¨æŒ‡å—</a>
          <ul>
            <li><a href="#nvim-cmp-é‡Œé¢çš„æŒ‰é”®æ˜ å°„">nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„</a></li>
            <li><a href="#nvim-cmp-é‡Œé¢çš„è¡¥å…¨èœå•">nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•</a></li>
            <li><a href="#lsp">LSP</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
  </ul>
</nav></div>
    </div><script>document.getElementsByTagName("main")[0].setAttribute("autoTOC", "true")</script><article class="page single"><h1 class="single-title animate__animated animate__flipInX">ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)</h1><div class="post-meta">
            <div class="post-meta-line">
                <span class="post-author"><span class="author fas fa-user-circle fa-fw"></span><a href="https://github.com/MartinLwx" title="Author" target="_blank" rel="noopener noreferrer author" class="author">MartinLwx</a>
                </span>&nbsp;<span class="post-category">æ”¶å½•äº </span>&nbsp;<span class="post-category">ç±»åˆ« <a href="/zh-cn/categories/vim-neovim/"><i class="far fa-folder fa-fw"></i>Vim-Neovim</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2023-02-08">2023-02-08</time>&nbsp;<i class="far fa-edit fa-fw"></i>&nbsp;<time datetime="2024-04-04">2024-04-04</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;çº¦ 4823 å­—&nbsp;<i class="far fa-clock fa-fw"></i>&nbsp;é¢„è®¡é˜…è¯» 10 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#ç‰ˆæœ¬ä¿¡æ¯">ç‰ˆæœ¬ä¿¡æ¯</a></li>
    <li><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-neovim">ä¸ºä»€ä¹ˆé€‰æ‹© Neovim</a></li>
    <li><a href="#nvim-é…ç½®åŸºç¡€çŸ¥è¯†">Nvim é…ç½®åŸºç¡€çŸ¥è¯†</a>
      <ul>
        <li><a href="#lua-è¯­è¨€">Lua è¯­è¨€</a></li>
        <li><a href="#é…ç½®æ–‡ä»¶è·¯å¾„">é…ç½®æ–‡ä»¶è·¯å¾„</a></li>
        <li><a href="#é€‰é¡¹é…ç½®">é€‰é¡¹é…ç½®</a></li>
        <li><a href="#æŒ‰é”®é…ç½®">æŒ‰é”®é…ç½®</a></li>
      </ul>
    </li>
    <li><a href="#ä»é›¶å¼€å§‹é…ç½®-nvim">ä»é›¶å¼€å§‹é…ç½® Nvim</a>
      <ul>
        <li><a href="#å®‰è£…-nvim">å®‰è£… Nvim</a></li>
        <li><a href="#é€‰é¡¹é…ç½®-1">é€‰é¡¹é…ç½®</a></li>
        <li><a href="#æŒ‰é”®é…ç½®-1">æŒ‰é”®é…ç½®</a></li>
        <li><a href="#å®‰è£…æ’ä»¶ç®¡ç†å™¨">å®‰è£…æ’ä»¶ç®¡ç†å™¨</a></li>
        <li><a href="#ä¸»é¢˜é…ç½®">ä¸»é¢˜é…ç½®</a></li>
        <li><a href="#è‡ªåŠ¨è¡¥å…¨æŒ‡å—">è‡ªåŠ¨è¡¥å…¨æŒ‡å—</a>
          <ul>
            <li><a href="#nvim-cmp-é‡Œé¢çš„æŒ‰é”®æ˜ å°„">nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„</a></li>
            <li><a href="#nvim-cmp-é‡Œé¢çš„è¡¥å…¨èœå•">nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•</a></li>
            <li><a href="#lsp">LSP</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><!-- LSP & æ€»ç»“å·²ç»æ›´æ”¹äº†å¼ºè°ƒé£æ ¼-->
<div class="details admonition info open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-info-circle fa-fw"></i>ä¿¡æ¯<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p><strong>æ›´æ–°</strong>ï¼š</p>
<ul>
<li><em>2024-04-04</em>ï¼Œé‡å†™éƒ¨åˆ†ç« èŠ‚ï¼ŒPackage Manager ä» <a href="https://github.com/wbthomason/packer.nvim" target="_blank" rel="noopener noreferrer">packer.nvim</a> æ¢æˆäº† <a href="https://github.com/folke/lazy.nvim" target="_blank" rel="noopener noreferrer">lazy.nvim</a> &#x1f917;ã€‚
<ul>
<li>å¦‚æœä¹‹å‰è·Ÿç€æœ¬ç¯‡æ•™ç¨‹é‡‡ç”¨ <code>packer.nvim</code> è¿›è¡Œå®‰è£…çš„è¯ï¼Œå¯ä»¥å‚è€ƒæˆ‘è¿ç§»çš„æ—¶å€™çš„ <a href="https://github.com/MartinLwx/dotfiles/commit/63f21a50a1bc2b48d4ca3f7a9c6d1ea77505ea58" target="_blank" rel="noopener noreferrer">commit</a>ï¼Œä¿®æ”¹å®Œä¹‹åè®°å¾—ç”¨ <code>:checkhealth lazy</code> æ£€æŸ¥ä¸‹ï¼Œå› ä¸ºè¿˜éœ€è¦åˆ é™¤ <code>packer.nvim</code> çš„ä¸€äº›æ—§æ–‡ä»¶</li>
</ul>
</li>
</ul>
<p><strong>è¿›ä¸€æ­¥é˜…è¯»</strong>:</p>
<ul>
<li>å¦‚ä½•ä¸ºä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€é…ç½® Neovim ï¼Œä»¥åŠæ”¯æŒç¬¬ä¸‰æ–¹ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œè§<a href="https://martinlwx.github.io/zh-cn/neovim-setup-for-ocaml/" target="_blank" rel="noopener noreferrer">ä¸‹ç¯‡æ–‡ç« </a></li>
</ul>
</div>
        </div>
    </div>
<h2 id="ç‰ˆæœ¬ä¿¡æ¯" class="headerLink">
    <a href="#%e7%89%88%e6%9c%ac%e4%bf%a1%e6%81%af" class="header-mark"></a>ç‰ˆæœ¬ä¿¡æ¯</h2><p>æˆ‘ä½¿ç”¨çš„æ˜¯ Macbook pro 2020 Intel ç‰ˆæœ¬ï¼Œç³»ç»Ÿç‰ˆæœ¬ä¸º macOS 14.3.1ã€‚æˆ‘çš„ <code>Nvim</code> ç‰ˆæœ¬ä¿¡æ¯å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">NVIM v0.9.5
</span></span><span class="line"><span class="cl">Build type: Release
</span></span><span class="line"><span class="cl">LuaJIT 2.1.1710088188
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   system vimrc file: &#34;$VIM/sysinit.vim&#34;
</span></span><span class="line"><span class="cl">  fall-back for $VIM: &#34;/usr/local/Cellar/neovim/0.9.5/share/nvim&#34;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">Run :checkhealth for more info
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-neovim" class="headerLink">
    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%8b%a9-neovim" class="header-mark"></a>ä¸ºä»€ä¹ˆé€‰æ‹© Neovim</h2><p>åœ¨ä½¿ç”¨ <code>Vim</code> ä¸€å¹´å¤šä¹‹åï¼Œæˆ‘è¶Šå‘è§‰å¾— <code>Vim</code> çš„é…ç½®éº»çƒ¦ï¼Œå¯åŠ¨åŠ è½½é€Ÿåº¦ä¹Ÿä¸å°½äººæ„ã€‚æˆ‘ä¹Ÿå¾ˆä¸å–œæ¬¢ Vimscript çš„å†™æ³•ï¼Œè¿™å¯¼è‡´æˆ‘å†³å®šä½¿ç”¨ <code>Neovim(Nvim)</code>ã€‚æˆ‘å†³å®š<strong>é‡æ–°é…ç½®</strong> <code>Nvim</code>ã€‚ä¸ºä»€ä¹ˆä¼šæƒ³è¦<strong>é‡æ–°é…ç½®</strong>è€Œä¸æ˜¯<strong>è¿ç§»é…ç½®</strong>å‘¢ï¼Ÿå› ä¸ºæˆ‘æƒ³é¡ºä¾¿è¶ç€è¿™ä¸ªæœºä¼šï¼Œ<strong>é‡æ–°å®¡è§†</strong>æˆ‘æœ¬æ¥ <code>Vim</code> çš„é…ç½®ï¼Œä»¥åŠå°†æœ¬æ¥ç”¨åˆ°çš„çš„æ’ä»¶æ›¿æ¢ä¸ºç°åœ¨çš„ SOTA(State-of-the-art)ã€‚<del>æˆ‘è‡ªä»çœ‹å®Œ MIT çš„ Missing semester çš„è¯¾é…ç½®äº† <code>~/.vimrc</code> ä¹‹åå°±å¾ˆé•¿æ—¶é—´éƒ½æ²¡æœ‰å†ç¼–è¾‘ <code>~/.vimrc</code> æ–‡ä»¶äº†</del></p>
<p>æˆ‘è®¤ä¸ºåœ¨é…ç½® <code>Nvim</code> çš„æ—¶å€™å¼„æ¸…æ¥šæ¯ä¸€ä¸ªé€‰é¡¹çš„æ„æ€æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› æ­¤æˆ‘åœ¨è¿™ç¯‡åšå®¢ä¸­ä¼šå°½é‡è§£é‡Šæ¸…æ¥šæ¯ä¸ªé€‰é¡¹çš„å«ä¹‰ï¼ŒåŒæ—¶å°†è§£é‡Šæ”¾åœ¨æ³¨é‡Šé‡Œé¢ï¼Œå³æˆ‘å°½é‡è®©æˆ‘è‡ªå·±çš„é…ç½®æ–‡ä»¶æ˜¯ <strong>self-contained</strong> è€Œä¸”å¯è¯»æ€§å¼ºçš„</p>
<blockquote>
<p>ğŸ’¡ å½“ç„¶ï¼Œè¿™éš¾å…æœ‰ç–æ¼ã€‚åˆ«å¿˜äº†æˆ‘ä»¬æ°¸è¿œå¯ä»¥åœ¨ <code>Nvim</code> é‡Œé¢è¾“å…¥ <code>:h &lt;name&gt;</code> æ¥çœ‹åˆ°æ›´ä¸ºè¯¦ç»†çš„è§£é‡Š</p>
</blockquote>
<blockquote>
<p>ğŸ’¡ è¯¥ç¯‡åšå®¢<strong>å‡å®š</strong>ä½ å¯¹ <code>Vim</code> æœ‰åŸºæœ¬äº†è§£</p>
</blockquote>
<h2 id="nvim-é…ç½®åŸºç¡€çŸ¥è¯†" class="headerLink">
    <a href="#nvim-%e9%85%8d%e7%bd%ae%e5%9f%ba%e7%a1%80%e7%9f%a5%e8%af%86" class="header-mark"></a>Nvim é…ç½®åŸºç¡€çŸ¥è¯†</h2><h3 id="lua-è¯­è¨€" class="headerLink">
    <a href="#lua-%e8%af%ad%e8%a8%80" class="header-mark"></a>Lua è¯­è¨€</h3><p>åœ¨é…ç½® <code>Nvim</code> çš„æ—¶å€™ï¼Œæˆ‘ä¼š<strong>å°½å¯èƒ½</strong>ç”¨ Lua è¯­è¨€å†™é…ç½®ï¼Œå› æ­¤ä½ æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ Lua çš„åŸºæœ¬è¯­æ³•å’Œè¯­ä¹‰ã€‚å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹ <a href="https://learnxinyminutes.com/docs/lua/" target="_blank" rel="noopener noreferrer">Learn Lua in Y minutes</a> äº†è§£å¤§æ¦‚</p>
<h3 id="é…ç½®æ–‡ä»¶è·¯å¾„" class="headerLink">
    <a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%b7%af%e5%be%84" class="header-mark"></a>é…ç½®æ–‡ä»¶è·¯å¾„</h3><p><code>Nvim</code> çš„é…ç½®ç›®å½•åœ¨ <code>~/.config/nvim</code> ä¸‹ã€‚åœ¨ Linux/Mac ç³»ç»Ÿä¸Šï¼Œ<code>Nvim</code> ä¼šé»˜è®¤è¯»å– <code>~/.config/nvim/init.lua</code> æ–‡ä»¶ï¼Œ<strong>ç†è®ºä¸Š</strong>æ¥è¯´å¯ä»¥å°†æ‰€æœ‰é…ç½®çš„ä¸œè¥¿éƒ½æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œä½†è¿™æ ·ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ï¼Œå› æ­¤æˆ‘åˆ’åˆ†ä¸åŒçš„æ–‡ä»¶å’Œç›®å½•æ¥åˆ†ç®¡ä¸åŒçš„é…ç½®</p>
<p>é¦–å…ˆçœ‹ä¸‹æŒ‰ç…§æœ¬ç¯‡æ•™ç¨‹é…ç½® <code>Nvim</code> ä¹‹åï¼Œç›®å½•ç»“æ„çœ‹èµ·æ¥ä¼šæ˜¯æ€ä¹ˆæ ·â¬‡ï¸</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">nvim
</span></span><span class="line"><span class="cl">â”œâ”€â”€ init.lua
</span></span><span class="line"><span class="cl">â””â”€â”€ lua
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ colorscheme.lua
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ config
</span></span><span class="line"><span class="cl">    â”‚Â Â  â””â”€â”€ nvim-cmp.lua
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ keymaps.lua
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ lsp.lua
</span></span><span class="line"><span class="cl">    â”œâ”€â”€ options.lua
</span></span><span class="line"><span class="cl">    â””â”€â”€ plugins.lua
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>è§£é‡Šå¦‚ä¸‹</strong></p>
<ul>
<li><code>init.lua</code> ä¸º <code>Nvim</code> é…ç½®çš„ Entry pointï¼Œæˆ‘ä»¬ä¸»è¦<strong>ç”¨æ¥å¯¼å…¥å…¶ä»– <code>*.lua</code> æ–‡ä»¶</strong>
<ul>
<li><code>colorscheme.lua</code> é…ç½®ä¸»é¢˜</li>
<li><code>keymaps.lua</code> é…ç½®æŒ‰é”®æ˜ å°„</li>
<li><code>lsp.lua</code> é…ç½® LSP</li>
<li><code>options.lua</code> é…ç½®é€‰é¡¹</li>
<li><code>plugins.lua</code> é…ç½®æ’ä»¶</li>
</ul>
</li>
<li><code>config</code> ç”¨äº<strong>å­˜æ”¾å„ç§æ’ä»¶è‡ªèº«çš„é…ç½®</strong>ï¼Œæ–‡ä»¶åä¸ºæ’ä»¶çš„åå­—ï¼Œè¿™æ ·æ¯”è¾ƒå¥½æ‰¾ã€‚<em>è¿™é‡Œçš„ <code>nvim-cmp.lua</code> å°±æ˜¯ <code>nvim-cmp</code> æ’ä»¶çš„é…ç½®æ–‡ä»¶</em></li>
<li><code>lua</code> ç›®å½•ã€‚å½“æˆ‘ä»¬åœ¨ Lua é‡Œé¢è°ƒç”¨ <code>require</code> åŠ è½½æ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨ <code>lua</code> æ–‡ä»¶å¤¹é‡Œé¢è¿›è¡Œæœç´¢
<ul>
<li><strong>å°†è·¯å¾„åˆ†éš”ç¬¦ä» <code>/</code> æ›¿æ¢ä¸º <code>.</code>ï¼Œç„¶åå»æ‰ <code>.lua</code> åç¼€å°±å¾—åˆ°äº† <code>require</code> çš„å‚æ•°æ ¼å¼</strong></li>
<li><em>æ¯”å¦‚è¦å¯¼å…¥ä¸Šé¢çš„ <code>nvim-cmp.lua</code> æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ <code>require('config.nvim-cmp')</code></em></li>
</ul>
</li>
</ul>
<h3 id="é€‰é¡¹é…ç½®" class="headerLink">
    <a href="#%e9%80%89%e9%a1%b9%e9%85%8d%e7%bd%ae" class="header-mark"></a>é€‰é¡¹é…ç½®</h3><p>ä¸»è¦ç”¨åˆ°çš„å°±æ˜¯ <code>vim.g</code>ã€<code>vim.opt</code>ã€<code>vim.cmd</code> ç­‰ï¼Œæˆ‘åˆ¶é€ äº†ä¸€ä¸ªå¿«é€Ÿå‚ç…§å¯¹æ¯”çš„è¡¨æ ¼</p>
<table>
<thead>
<tr>
<th>In <code>Vim</code></th>
<th>In <code>Nvim</code></th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>let g:foo = bar</code></td>
<td><code>vim.g.foo = bar</code></td>
<td></td>
</tr>
<tr>
<td><code>set foo = bar</code></td>
<td><code>vim.opt.foo = bar</code></td>
<td><code>set foo</code> = <code>vim.opt.foo = true</code></td>
</tr>
<tr>
<td><code>some_vimscript</code></td>
<td><code>vim.cmd(some_vimscript)</code></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="æŒ‰é”®é…ç½®" class="headerLink">
    <a href="#%e6%8c%89%e9%94%ae%e9%85%8d%e7%bd%ae" class="header-mark"></a>æŒ‰é”®é…ç½®</h3><p>åœ¨ <code>Nvim</code> é‡Œé¢è¿›è¡ŒæŒ‰é”®ç»‘å®šçš„è¯­æ³•å¦‚ä¸‹ï¼Œå…·ä½“çš„è§£é‡Šå¯ä»¥çœ‹ <code>:h vim.keymap.set</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="o">&lt;</span><span class="n">mode</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">key</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">action</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">opts</span><span class="o">&gt;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ä»é›¶å¼€å§‹é…ç½®-nvim" class="headerLink">
    <a href="#%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e9%85%8d%e7%bd%ae-nvim" class="header-mark"></a>ä»é›¶å¼€å§‹é…ç½® Nvim</h2><p>åœ¨é˜…è¯»äº†å‰é¢ä¸€äº›é…ç½®åŸºç¡€ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä»å¤´å¼€å§‹ï¼Œç”±ç®€åˆ°æ˜“ä¸€æ­¥æ­¥é…ç½® <code>Nvim</code> äº†</p>
<h3 id="å®‰è£…-nvim" class="headerLink">
    <a href="#%e5%ae%89%e8%a3%85-nvim" class="header-mark"></a>å®‰è£… Nvim</h3><p>æˆ‘ç”¨çš„æ˜¯ Macï¼Œç”¨ Homebrew å®‰è£… <code>Nvim</code> éå¸¸å®¹æ˜“ï¼Œåªè¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ brew install neovim 
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨å®‰è£…å®Œæˆä¹‹åï¼Œå¦‚æœ <code>~/.config/nvim</code> ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•å¹¶æ–°å»º <code>init.lua</code> æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ mkdir ~/.config/nvim
</span></span><span class="line"><span class="cl">$ mkdir ~/.config/nvim/lua
</span></span><span class="line"><span class="cl">$ touch ~/.config/nvim/init.lua
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ğŸ’¡ <strong>é…ç½®æ–‡ä»¶ç¼–è¾‘ä¿å­˜ä¹‹åï¼Œé‡å¯ <code>Nvim</code> å°±èƒ½çœ‹åˆ°æ•ˆæœï¼Œåé¢é»˜è®¤æ¯æ¬¡å°ç« èŠ‚é…ç½®å®Œæˆåå°±é‡å¯</strong></p>
</blockquote>
<h3 id="é€‰é¡¹é…ç½®-1" class="headerLink">
    <a href="#%e9%80%89%e9%a1%b9%e9%85%8d%e7%bd%ae-1" class="header-mark"></a>é€‰é¡¹é…ç½®</h3><p>é€‰é¡¹é…ç½®åŠŸèƒ½ä¸€è§ˆï¼š</p>
<ul>
<li>é»˜è®¤é‡‡ç”¨ç³»ç»Ÿå‰ªè´´æ¿ï¼ŒåŒæ—¶æ”¯æŒé¼ æ ‡æ“æ§ <code>Nvim</code></li>
<li>Tab å’Œç©ºæ ¼çš„æ¢ç®—</li>
<li>UI ç•Œé¢</li>
<li>â€œæ™ºèƒ½â€æœç´¢</li>
</ul>
<p>æ–°å»º <code>~/.config/nvim/lua/options.lua</code> æ–‡ä»¶å¹¶åŠ å…¥å¦‚ä¸‹å†…å®¹â¬‡ï¸</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="c1">-- Hint: use `:h &lt;option&gt;` to figure out the meaning if needed</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">clipboard</span> <span class="o">=</span> <span class="s1">&#39;unnamedplus&#39;</span> <span class="c1">-- use system clipboard</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">completeopt</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;menu&#39;</span><span class="p">,</span> <span class="s1">&#39;menuone&#39;</span><span class="p">,</span> <span class="s1">&#39;noselect&#39;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">mouse</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="c1">-- allow the mouse to be used in Nvim</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Tab</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">tabstop</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1">-- number of visual spaces per TAB</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">softtabstop</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1">-- number of spacesin tab when editing</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">shiftwidth</span> <span class="o">=</span> <span class="mi">4</span> <span class="c1">-- insert 4 spaces on a tab</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">expandtab</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- tabs are spaces, mainly because of python</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- UI config</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">number</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- show absolute number</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">relativenumber</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- add numbers to each line on the left side</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">cursorline</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- highlight cursor line underneath the cursor horizontally</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">splitbelow</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- open new vertical split bottom</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">splitright</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- open new horizontal splits right</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- vim.opt.termguicolors = true        -- enabl 24-bit RGB color in the TUI</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">showmode</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">-- we are experienced, wo don&#39;t need the &#34;-- INSERT --&#34; mode hint</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Searching</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">incsearch</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- search as characters are entered</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">hlsearch</span> <span class="o">=</span> <span class="kc">false</span> <span class="c1">-- do not highlight matches</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">ignorecase</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- ignore case in searches by default</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">smartcase</span> <span class="o">=</span> <span class="kc">true</span> <span class="c1">-- but make it case sensitive if an uppercase is entered</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæ‰“å¼€ <code>init.lua</code>ï¼Œç”¨ <code>require</code> å¯¼å…¥åˆšæ‰å†™çš„ <code>options.lua</code> æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;options&#39;</span><span class="p">)</span>        
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŒ‰é”®é…ç½®-1" class="headerLink">
    <a href="#%e6%8c%89%e9%94%ae%e9%85%8d%e7%bd%ae-1" class="header-mark"></a>æŒ‰é”®é…ç½®</h3><p>æŒ‰é”®åŠŸèƒ½ä¸€è§ˆï¼š</p>
<ul>
<li>ç”¨ <code>&lt;C-h/j/k/l&gt;</code> å¿«é€Ÿåœ¨å¤šçª—å£ä¹‹é—´ç§»åŠ¨å…‰æ ‡</li>
<li>ç”¨ <code>Ctrl</code> + æ–¹å‘é”®è¿›è¡Œçª—å£å¤§å°çš„è°ƒæ•´</li>
<li>é€‰æ‹©æ¨¡å¼ä¸‹å¯ä»¥ä¸€ç›´ç”¨ <code>Tab</code> æˆ–è€… <code>Shift-Tab</code> æ”¹å˜ç¼©è¿›</li>
</ul>
<p>æ–°å»º <code>~/.config/nvim/lua/keymaps.lua</code> æ–‡ä»¶å¹¶æ”¾å…¥å¦‚ä¸‹å†…å®¹â¬‡ï¸</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="c1">-- define common options</span>
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>      <span class="c1">-- non-recursive</span>
</span></span><span class="line"><span class="cl">    <span class="n">silent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>       <span class="c1">-- do not show message</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-----------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- Normal mode --</span>
</span></span><span class="line"><span class="cl"><span class="c1">-----------------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Hint: see `:h vim.map.set()`</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- Better window navigation</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-h&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-w&gt;h&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-j&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-w&gt;j&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-k&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-w&gt;k&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-l&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-w&gt;l&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Resize with arrows</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- delta: 2 lines</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-Up&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;:resize -2&lt;CR&gt;&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-Down&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;:resize +2&lt;CR&gt;&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-Left&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;:vertical resize -2&lt;CR&gt;&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-Right&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;:vertical resize +2&lt;CR&gt;&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-----------------</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- Visual mode --</span>
</span></span><span class="line"><span class="cl"><span class="c1">-----------------</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Hint: start visual mode with the same area as the previous area and the same mode</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;gv&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;v&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;gv&#39;</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶ååœ¨ <code>init.lua</code> æ–‡ä»¶é‡Œé¢å†æ¬¡åŠ ä¸Šä¸€è¡Œå¯¼å…¥è¿™ä¸ªæ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;keymaps&#39;</span><span class="p">)</span>        
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ğŸ’¡ <code>...</code> è¡¨ç¤ºçœç•¥äº†å…¶ä»–éƒ¨åˆ†çš„ä»£ç ï¼ˆä¸ºäº†èŠ‚çœåšå®¢çš„ç¯‡å¹…ï¼‰</p>
</blockquote>
<h3 id="å®‰è£…æ’ä»¶ç®¡ç†å™¨" class="headerLink">
    <a href="#%e5%ae%89%e8%a3%85%e6%8f%92%e4%bb%b6%e7%ae%a1%e7%90%86%e5%99%a8" class="header-mark"></a>å®‰è£…æ’ä»¶ç®¡ç†å™¨</h3><p>ä¸€ä¸ªå¼ºå¤§çš„ <code>Nvim</code> ç¦»ä¸å¼€æ’ä»¶çš„æ”¯æŒã€‚æˆ‘é€‰ç”¨çš„æ˜¯å½“ä¸‹æœ€ä¸ºæµè¡Œ <a href="https://github.com/folke/lazy.nvim" target="_blank" rel="noopener noreferrer">lazy.nvim</a>ã€‚å®ƒæ”¯æŒå¦‚ä¸‹è®¸å¤šç‰¹æ€§ï¼š</p>
<ul>
<li>æ­£ç¡®å¤„ç†ä¸åŒæ’ä»¶ä¹‹é—´çš„ä¾èµ–</li>
<li>æ”¯æŒå®šåˆ¶ Lazy loadingï¼Œæ¯”å¦‚åŸºäº Eventã€Filetype ç­‰</li>
<li>&hellip;</li>
</ul>
<p>æ–°å»º <code>~/.config/nvim/lua/plugins.lua</code> æ–‡ä»¶å¹¶æ”¾å…¥å¦‚ä¸‹å†…å®¹ã€‚ä¸‹é¢çš„æ¨¡æ¿åªå®Œæˆäº† <code>lazy.nvim</code> è‡ªèº«çš„å®‰è£…ï¼Œ<strong>è¿˜æ²¡æœ‰æŒ‡å®šå…¶ä»–ç¬¬ä¸‰æ–¹æ’ä»¶</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">lazypath</span> <span class="o">=</span> <span class="n">vim.fn</span><span class="p">.</span><span class="n">stdpath</span><span class="p">(</span><span class="s2">&#34;data&#34;</span><span class="p">)</span> <span class="o">..</span> <span class="s2">&#34;/lazy/lazy.nvim&#34;</span>
</span></span><span class="line"><span class="cl"><span class="kr">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">vim.uv</span> <span class="ow">or</span> <span class="n">vim.loop</span><span class="p">).</span><span class="n">fs_stat</span><span class="p">(</span><span class="n">lazypath</span><span class="p">)</span> <span class="kr">then</span>
</span></span><span class="line"><span class="cl">  <span class="n">vim.fn</span><span class="p">.</span><span class="n">system</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;git&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;clone&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;--filter=blob:none&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;https://github.com/folke/lazy.nvim.git&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;--branch=stable&#34;</span><span class="p">,</span> <span class="c1">-- latest stable release</span>
</span></span><span class="line"><span class="cl">    <span class="n">lazypath</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="kr">end</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.opt</span><span class="p">.</span><span class="n">rtp</span><span class="p">:</span><span class="n">prepend</span><span class="p">(</span><span class="n">lazypath</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s2">&#34;lazy&#34;</span><span class="p">).</span><span class="n">setup</span><span class="p">({})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ğŸ’¡ åœ¨ <code>lazy.nvim</code> æŒ‡å®šç¬¬ä¸‰æ–¹æ’ä»¶å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ <code>require(&quot;lazy&quot;).setup({ ... })</code> çš„ <code>...</code> é‡Œé¢å£°æ˜æ’ä»¶</p>
</blockquote>
<p>ç„¶ååœ¨ <code>init.lua</code> æ–‡ä»¶é‡Œé¢å†æ¬¡åŠ ä¸Šä¸€è¡Œå¯¼å…¥è¿™ä¸ªæ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;plugins&#39;</span><span class="p">)</span>        
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ­¤æ—¶ä½ é‡å¯ <code>Nvim</code> ä¼šå‘ç°é»‘å±æ²¡æ˜¾ç¤ºï¼Œè¿™æ˜¯å› ä¸º <code>lazy.nvim</code> åœ¨å®‰è£…è‡ªå·±ï¼Œé™å¾…ç‰‡åˆ»å³å¯â˜•ï¸ã€‚ç­‰å¾… Dashboard å‡ºç°ä¹‹åï¼Œå¯ä»¥è¾“å…¥ <code>:Lazy</code> è¯•è¯•ï¼Œå¦‚æœçœ‹åˆ°äº†å¼¹å‡ºäº† <code>lazy.nvim</code> çš„çª—å£ï¼Œé‚£å°±å®‰è£…æˆåŠŸäº†ğŸ‰</p>
<blockquote>
<p>ğŸ’¡ <em>Tip</em>ï¼šç”¨ <code>:q</code> é€€å‡º <code>lazy.nvim</code> çš„çª—å£</p>
</blockquote>
<h3 id="ä¸»é¢˜é…ç½®" class="headerLink">
    <a href="#%e4%b8%bb%e9%a2%98%e9%85%8d%e7%bd%ae" class="header-mark"></a>ä¸»é¢˜é…ç½®</h3><p>æˆ‘å–œæ¬¢çš„ä¸»é¢˜æ˜¯ <a href="https://github.com/tanvirtin/monokai.nvim" target="_blank" rel="noopener noreferrer">monokai.nvim</a>ï¼Œåœ¨ <code>plugins.lua</code> è¿›è¡Œä¿®æ”¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s2">&#34;lazy&#34;</span><span class="p">).</span><span class="n">setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;tanvirtin/monokai.nvim&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¿å­˜æ›´æ”¹å¹¶<em>é‡å¯</em>å°±å¯ä»¥çœ‹åˆ° <code>lazy.nvim</code> åœ¨å¸®æˆ‘ä»¬å®‰è£…æ’ä»¶äº†ï¼Œæ–°å»ºå¹¶ç¼–è¾‘ <code>~/.config/nvim/lua/colorscheme.lua</code> æ–‡ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="c1">-- define your colorscheme here</span>
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">colorscheme</span> <span class="o">=</span> <span class="s1">&#39;monokai_pro&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">is_ok</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">pcall</span><span class="p">(</span><span class="n">vim.cmd</span><span class="p">,</span> <span class="s2">&#34;colorscheme &#34;</span> <span class="o">..</span> <span class="n">colorscheme</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">if</span> <span class="ow">not</span> <span class="n">is_ok</span> <span class="kr">then</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.notify</span><span class="p">(</span><span class="s1">&#39;colorscheme &#39;</span> <span class="o">..</span> <span class="n">colorscheme</span> <span class="o">..</span> <span class="s1">&#39; not found!&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="kr">return</span>
</span></span><span class="line"><span class="cl"><span class="kr">end</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œç”¨åˆ°çš„ <code>pcall</code> æ˜¯ Lua é‡Œé¢çš„ protected callï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª <code>bool</code> å˜é‡è¡¨ç¤ºæ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼ˆè·Ÿ Go è¯­è¨€çš„ <code>err</code> åŠŸèƒ½ç±»ä¼¼ï¼‰ã€‚è¿™é‡Œé‡‡ç”¨ <code>pcall</code> è€Œä¸æ˜¯ç›´æ¥åœ¨ <code>init.lua</code> æ–‡ä»¶é‡Œé¢åŠ ä¸Š <code>vim.cmd('colorscheme monokai_pro')</code> æ˜¯ä¸ºäº†é¿å…ä¸»é¢˜æ²¡æœ‰å®‰è£…çš„æƒ…å†µä¸‹æ‰“å¼€ <code>Nvim</code> çœ‹åˆ°ä¸€å¤§å †æŠ¥é”™ä¿¡æ¯<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup></p>
<p>æœ€ååœ¨ <code>init.lua</code> æ–‡ä»¶é‡Œé¢å¯¼å…¥å°±è¡Œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;colorscheme&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è‡ªåŠ¨è¡¥å…¨æŒ‡å—" class="headerLink">
    <a href="#%e8%87%aa%e5%8a%a8%e8%a1%a5%e5%85%a8%e6%8c%87%e5%8d%97" class="header-mark"></a>è‡ªåŠ¨è¡¥å…¨æŒ‡å—</h3><p>è‡ªå·±æ‰‹åŠ¨é…ç½®è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½çš„è¯ä¼šæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å€ŸåŠ©äºä¸€äº›æ’ä»¶æ¥å¸®å¿™ï¼Œä¸‹é¢æˆ‘è®²è®²<strong>æˆ‘æ‘¸ç´¢å‡ºæ¥çš„æœ€ç®€å•é…ç½®æ–¹æ³•</strong></p>
<p>é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªè¦ç”¨åˆ°çš„æ’ä»¶æ˜¯ <a href="https://github.com/hrsh7th/nvim-cmp" target="_blank" rel="noopener noreferrer">nvim-cmp</a>ï¼Œå®ƒå¯ä»¥ç®¡ç†å„ç§è¡¥å…¨å€™é€‰é¡¹æ¥æºï¼Œç„¶åå±•ç¤ºåœ¨è¡¥å…¨èœå•é‡Œé¢ï¼Œè¿˜æ”¯æŒæˆ‘ä»¬å¯¹å¤–è§‚ç­‰è¿›è¡Œå®šåˆ¶åŒ–ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ–°å»º <code>~/.config/nvim/lua/config/nvim-cmp.lua</code> æ–‡ä»¶é…ç½® <code>nvim-cmp</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">has_words_before</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">unpack</span> <span class="o">=</span> <span class="n">unpack</span> <span class="ow">or</span> <span class="n">table.unpack</span>
</span></span><span class="line"><span class="cl">    <span class="kd">local</span> <span class="n">line</span><span class="p">,</span> <span class="n">col</span> <span class="o">=</span> <span class="n">unpack</span><span class="p">(</span><span class="n">vim.api</span><span class="p">.</span><span class="n">nvim_win_get_cursor</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="kr">return</span> <span class="n">col</span> <span class="o">~=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">vim.api</span><span class="p">.</span><span class="n">nvim_buf_get_lines</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">line</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="kc">true</span><span class="p">)[</span><span class="mi">1</span><span class="p">]:</span><span class="n">sub</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span><span class="n">match</span><span class="p">(</span><span class="s2">&#34;%s&#34;</span><span class="p">)</span> <span class="o">==</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="kr">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">luasnip</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s2">&#34;luasnip&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">cmp</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s2">&#34;cmp&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">cmp.setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="n">snippet</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">-- REQUIRED - you must specify a snippet engine</span>
</span></span><span class="line"><span class="cl">        <span class="n">expand</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">require</span><span class="p">(</span><span class="s1">&#39;luasnip&#39;</span><span class="p">).</span><span class="n">lsp_expand</span><span class="p">(</span><span class="n">args.body</span><span class="p">)</span> <span class="c1">-- For `luasnip` users.</span>
</span></span><span class="line"><span class="cl">        <span class="kr">end</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="n">mapping</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">.</span><span class="n">preset.insert</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="c1">-- Use &lt;C-b/f&gt; to scroll the docs</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s1">&#39;&lt;C-b&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">.</span><span class="n">scroll_docs</span><span class="p">(</span> <span class="o">-</span><span class="mi">4</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s1">&#39;&lt;C-f&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">.</span><span class="n">scroll_docs</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="c1">-- Use &lt;C-k/j&gt; to switch in items</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s1">&#39;&lt;C-k&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">.</span><span class="n">select_prev_item</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s1">&#39;&lt;C-j&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">.</span><span class="n">select_next_item</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">        <span class="c1">-- Use &lt;CR&gt;(Enter) to confirm selection</span>
</span></span><span class="line"><span class="cl">        <span class="c1">-- Accept currently selected item. Set `select` to `false` to only confirm explicitly selected items.</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s1">&#39;&lt;CR&gt;&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">.</span><span class="n">confirm</span><span class="p">({</span> <span class="n">select</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">-- A super tab</span>
</span></span><span class="line"><span class="cl">        <span class="c1">-- sourc: https://github.com/hrsh7th/nvim-cmp/wiki/Example-mappings#luasnip</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s2">&#34;&lt;Tab&gt;&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">(</span><span class="kr">function</span><span class="p">(</span><span class="n">fallback</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1">-- Hint: if the completion menu is visible select next one</span>
</span></span><span class="line"><span class="cl">            <span class="kr">if</span> <span class="n">cmp.visible</span><span class="p">()</span> <span class="kr">then</span>
</span></span><span class="line"><span class="cl">                <span class="n">cmp.select_next_item</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="kr">elseif</span> <span class="n">has_words_before</span><span class="p">()</span> <span class="kr">then</span>
</span></span><span class="line"><span class="cl">                <span class="n">cmp.complete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="kr">else</span>
</span></span><span class="line"><span class="cl">                <span class="n">fallback</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="kr">end</span>
</span></span><span class="line"><span class="cl">        <span class="kr">end</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&#34;i&#34;</span><span class="p">,</span> <span class="s2">&#34;s&#34;</span> <span class="p">}),</span> <span class="c1">-- i - insert mode; s - select mode</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="s2">&#34;&lt;S-Tab&gt;&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="n">cmp.mapping</span><span class="p">(</span><span class="kr">function</span><span class="p">(</span><span class="n">fallback</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="kr">if</span> <span class="n">cmp.visible</span><span class="p">()</span> <span class="kr">then</span>
</span></span><span class="line"><span class="cl">                <span class="n">cmp.select_prev_item</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="kr">elseif</span> <span class="n">luasnip.jumpable</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="kr">then</span>
</span></span><span class="line"><span class="cl">                <span class="n">luasnip.jump</span><span class="p">(</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="kr">else</span>
</span></span><span class="line"><span class="cl">                <span class="n">fallback</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="kr">end</span>
</span></span><span class="line"><span class="cl">        <span class="kr">end</span><span class="p">,</span> <span class="p">{</span> <span class="s2">&#34;i&#34;</span><span class="p">,</span> <span class="s2">&#34;s&#34;</span> <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">}),</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">-- Let&#39;s configure the item&#39;s appearance</span>
</span></span><span class="line"><span class="cl">  <span class="c1">-- source: https://github.com/hrsh7th/nvim-cmp/wiki/Menu-Appearance</span>
</span></span><span class="line"><span class="cl">  <span class="n">formatting</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">-- Set order from left to right</span>
</span></span><span class="line"><span class="cl">      <span class="c1">-- kind: single letter indicating the type of completion</span>
</span></span><span class="line"><span class="cl">      <span class="c1">-- abbr: abbreviation of &#34;word&#34;; when not empty it is used in the menu instead of &#34;word&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="c1">-- menu: extra text for the popup menu, displayed after &#34;word&#34; or &#34;abbr&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="n">fields</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;abbr&#39;</span><span class="p">,</span> <span class="s1">&#39;menu&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">-- customize the appearance of the completion menu</span>
</span></span><span class="line"><span class="cl">      <span class="n">format</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">vim_item</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="n">vim_item.menu</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">              <span class="n">nvim_lsp</span> <span class="o">=</span> <span class="s1">&#39;[Lsp]&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">luasnip</span> <span class="o">=</span> <span class="s1">&#39;[Luasnip]&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">buffer</span> <span class="o">=</span> <span class="s1">&#39;[File]&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;[Path]&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">})[</span><span class="n">entry.source</span><span class="p">.</span><span class="n">name</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">          <span class="kr">return</span> <span class="n">vim_item</span>
</span></span><span class="line"><span class="cl">      <span class="kr">end</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">-- Set source precedence</span>
</span></span><span class="line"><span class="cl">  <span class="n">sources</span> <span class="o">=</span> <span class="n">cmp.config</span><span class="p">.</span><span class="n">sources</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;nvim_lsp&#39;</span> <span class="p">},</span>    <span class="c1">-- For nvim-lsp</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;luasnip&#39;</span> <span class="p">},</span>     <span class="c1">-- For luasnip user</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;buffer&#39;</span> <span class="p">},</span>      <span class="c1">-- For buffer word completion</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;path&#39;</span> <span class="p">},</span>        <span class="c1">-- For path completion</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ <code>plugins.lua</code> æ–‡ä»¶æ·»åŠ ç›¸å…³çš„æ’ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s2">&#34;lazy&#34;</span><span class="p">).</span><span class="n">setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">	<span class="c1">-- Vscode-like pictograms</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s2">&#34;onsails/lspkind.nvim&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">event</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;VimEnter&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="c1">-- Auto-completion engine</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s2">&#34;hrsh7th/nvim-cmp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">dependencies</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;lspkind.nvim&#34;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">		<span class="n">config</span> <span class="o">=</span> <span class="kr">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">			<span class="n">require</span><span class="p">(</span><span class="s2">&#34;config.nvim-cmp&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="kr">end</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span> <span class="s2">&#34;hrsh7th/cmp-nvim-lsp&#34;</span><span class="p">,</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;nvim-cmp&#34;</span> <span class="p">}</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span> <span class="s2">&#34;hrsh7th/cmp-buffer&#34;</span><span class="p">,</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;nvim-cmp&#34;</span> <span class="p">}</span> <span class="p">},</span> <span class="c1">-- buffer auto-completion</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span> <span class="s2">&#34;hrsh7th/cmp-path&#34;</span><span class="p">,</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;nvim-cmp&#34;</span> <span class="p">}</span> <span class="p">},</span> <span class="c1">-- path auto-completion</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span> <span class="s2">&#34;hrsh7th/cmp-cmdline&#34;</span><span class="p">,</span> <span class="n">dependencies</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&#34;nvim-cmp&#34;</span> <span class="p">}</span> <span class="p">},</span> <span class="c1">-- cmdline auto-completion</span>
</span></span><span class="line"><span class="cl">	<span class="c1">-- Code snippet engine</span>
</span></span><span class="line"><span class="cl">	<span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="s2">&#34;L3MON4D3/LuaSnip&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="n">version</span> <span class="o">=</span> <span class="s2">&#34;v2.*&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>è§£é‡Šå¦‚ä¸‹</strong></p>
<ul>
<li><code>cmp.setup</code> å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª Lua çš„ Tableï¼Œç”¨äºè®¾ç½®å„ä¸ªé€‰é¡¹ï¼ˆä¸‹é¢ä¼šè§£é‡Šï¼‰ã€‚åé¢ä½ ä¼šå‘ç°å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶éƒ½ç”¨ <code>setup</code> ä¼ å…¥ä¸€ä¸ª Lua table çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œ<strong>è¿™ä¸ªæ˜¯ <code>Nvim</code> çš„ Lua æ’ä»¶çš„æƒ¯ä¾‹</strong></li>
<li><code>LuaSnip</code> æ˜¯ code snippet å¼•æ“ï¼Œå› ä¸º<code>nvim-cmp</code> è¦æ±‚æˆ‘ä»¬å¿…é¡»æŒ‡å®š<strong>è‡³å°‘ä¸€ä¸ª</strong> code snippet å¼•æ“æ¥æºã€‚ä½ æš‚æ—¶ç”¨ä¸åˆ°å½“å®ƒä¸å­˜åœ¨ä¹Ÿæ²¡æœ‰å…³ç³»</li>
<li><code>lazy.nvim</code> æ”¯æŒç”¨ <code>config = function() ... end</code> æŒ‡å®šå¯¹åº”æ’ä»¶è¢«åŠ è½½ä¹‹åè¦è¿è¡Œçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è®© Lua å¯¼å…¥å‰é¢å†™å¥½çš„ <code>nvim-cmp.lua</code> é…ç½®æ–‡ä»¶</li>
<li>ä¸è¦è¢«ä¸Šé¢çš„è¿™ä¹ˆå¤šæ’ä»¶å“åˆ°ï¼Œ<code>nvim-cmp</code> ä¸ºä¸»ï¼Œå…¶ä»– <code>cmp-...</code> çš„æ’ä»¶æ˜¯ç”¨äºåœ¨å€™é€‰é¡¹æ¥æºå’Œ <code>nvim-cmp</code> ä¹‹é—´äº¤äº’ï¼Œ<code>lspkind.nvim</code> æ˜¯ç¾åŒ–ç”¨çš„</li>
</ul>
<h4 id="nvim-cmp-é‡Œé¢çš„æŒ‰é”®æ˜ å°„" class="headerLink">
    <a href="#nvim-cmp-%e9%87%8c%e9%9d%a2%e7%9a%84%e6%8c%89%e9%94%ae%e6%98%a0%e5%b0%84" class="header-mark"></a>nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„</h4><p>æŒ‰é”®æ˜ å°„ç”¨çš„æ˜¯ <code>mapping = ...</code> ï¼Œæ¯ä¸ªæŒ‰é”®ç»‘å®šçš„æ ¼å¼æ˜¯ <code>['&lt;key-binding&gt;'] = cmp.mapping.xxx,</code>ï¼Œä¸åŒçš„ <code>cmp.mapping.xxx</code> çš„å«ä¹‰å¯ä»¥ç”¨ <code>:h</code> æŸ¥çœ‹ã€‚<strong>å¦‚æœä½ æƒ³è¦ç”¨å…¶ä»–çš„æŒ‰é”®ï¼Œåªè¦ä¿®æ”¹ <code>[...]</code> é‡Œé¢çš„æŒ‰é”®å³å¯</strong></p>
<p>æŒ‰ç…§æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œè®¾ç½®äº†</p>
<ol>
<li><code>&lt;C-k/j&gt;</code> æˆ–è€… <code>&lt;Tab&gt;/&lt;Shift-Tab&gt;</code> åœ¨å„ç§å€™é€‰é¡¹é‡Œé¢ç§»åŠ¨</li>
<li><code>&lt;C-b/f&gt;</code> åœ¨å€™é€‰é¡¹çš„æ–‡æ¡£é‡Œé¢ç§»åŠ¨</li>
<li><code>&lt;CR&gt;</code> ä¹Ÿå°±æ˜¯å›è½¦é”®ç¡®å®šè¡¥å…¨</li>
</ol>
<h4 id="nvim-cmp-é‡Œé¢çš„è¡¥å…¨èœå•" class="headerLink">
    <a href="#nvim-cmp-%e9%87%8c%e9%9d%a2%e7%9a%84%e8%a1%a5%e5%85%a8%e8%8f%9c%e5%8d%95" class="header-mark"></a>nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•</h4><p>è¡¥å…¨èœå•çš„å®šåˆ¶åŒ–ç”¨çš„æ˜¯ <code>formatting = ...</code></p>
<ul>
<li><code>fields</code> å­—æ®µè§„å®šäº†æ¯ä¸ªå€™é€‰é¡¹è¦æ˜¾ç¤ºä»€ä¹ˆä¸œè¥¿</li>
<li><code>format = function(...)</code> è®¾ç½®äº†ä¸åŒçš„å€™é€‰é¡¹çš„æ¥æºæ˜¾ç¤ºï¼Œåœ¨ <code>sources = ...</code> é‡Œé¢å£°æ˜æ¥æº</li>
</ul>
<blockquote>
<p>ğŸ™ï¸ åˆ°è¿™ä¸ºæ­¢ï¼Œé‡æ–°å¯åŠ¨ <code>Nvim</code> åï¼Œç­‰å¾…æ’ä»¶å®‰è£…å®Œæˆååº”è¯¥å°±èƒ½å¤Ÿç”¨åˆæ­¥çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½äº†ï½</p>
</blockquote>
<h4 id="lsp" class="headerLink">
    <a href="#lsp" class="header-mark"></a>LSP</h4><p>è¦æŠŠ <code>Nvim</code> å˜æˆ IDE å°±åŠ¿å¿…è¦å€ŸåŠ©äº LSP<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>ï¼Œè‡ªå·±å®‰è£…å’Œé…ç½® LSP æ˜¯æ¯”è¾ƒç¹ççš„ã€‚ä¸åŒçš„ LSP å®‰è£…æ–¹æ³•ä¸åŒï¼Œä¹Ÿä¸æ–¹ä¾¿åç»­ç®¡ç†ã€‚<a href="https://github.com/williamboman/mason.nvim" target="_blank" rel="noopener noreferrer">mason.nvim</a> å’Œé…å¥—çš„ <a href="https://github.com/williamboman/mason-lspconfig.nvim" target="_blank" rel="noopener noreferrer">mason-lspconfig.nvim</a> è¿™ä¸¤ä¸ªæ’ä»¶å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ &#x1f917;</p>
<p>é¦–å…ˆä¿®æ”¹ <code>plugins.lua</code> æ–‡ä»¶ï¼Œå¢åŠ å¯¹åº”çš„æ’ä»¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s2">&#34;lazy&#34;</span><span class="p">).</span><span class="n">setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">	<span class="c1">-- LSP manager</span>
</span></span><span class="line"><span class="cl">	<span class="s2">&#34;williamboman/mason.nvim&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="s2">&#34;williamboman/mason-lspconfig.nvim&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="s2">&#34;neovim/nvim-lspconfig&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ–°å»ºä¸€ä¸ª <code>~/.config/nvim/lua/lsp.lua</code> æ–‡ä»¶å¹¶ç¼–è¾‘ï¼Œé¦–å…ˆé…ç½® <code>mason</code> å’Œ <code>mason-lspconfig</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;mason&#39;</span><span class="p">).</span><span class="n">setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="n">ui</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">icons</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">package_installed</span> <span class="o">=</span> <span class="s2">&#34;âœ“&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">package_pending</span> <span class="o">=</span> <span class="s2">&#34;âœ&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">package_uninstalled</span> <span class="o">=</span> <span class="s2">&#34;âœ—&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;mason-lspconfig&#39;</span><span class="p">).</span><span class="n">setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="c1">-- A list of servers to automatically install if they&#39;re not already installed</span>
</span></span><span class="line"><span class="cl">    <span class="n">ensure_installed</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">&#39;pylsp&#39;</span><span class="p">,</span> <span class="s1">&#39;lua_ls&#39;</span><span class="p">,</span> <span class="s1">&#39;rust_analyzer&#39;</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ğŸ’¡ æˆ‘ä»¬æƒ³è¦ç”¨ä»€ä¹ˆè¯­è¨€çš„ LSP å°±åœ¨ <code>ensure_installed</code> é‡Œé¢åŠ ä¸Šï¼Œå®Œæ•´çš„åˆ—è¡¨å¯ä»¥çœ‹ <a href="https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md" target="_blank" rel="noopener noreferrer">server_configurations</a>ã€‚æˆ‘ä¸ªäººå¸¸ç”¨çš„å°± <code>python/rust</code> è¿™ä¸¤ä¸ªç¼–ç¨‹è¯­è¨€ï¼Œè€Œå› ä¸ºæˆ‘ä»¬éƒ½ç”¨ Lua è¯­è¨€æ¥é…ç½® <code>Nvim</code>ï¼Œæ‰€ä»¥ä¹ŸåŠ ä¸Šäº† <code>lua_ls</code></p>
</blockquote>
<p>é…ç½®å¥½ <code>mason-lspconfig</code> ä¹‹åï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥é…ç½® <code>nvim-lspconfig</code> äº†ã€‚å› ä¸ºé…ç½®çš„ä»£ç æ¯”è¾ƒé•¿ï¼Œä¸‹é¢åªå±•ç¤ºäº† <code>pylsp</code> çš„é…ç½®ï¼Œå…¶ä»–è¯­è¨€çš„é…ç½®å¤§åŒå°å¼‚ã€‚å¦‚æœæœ‰ç–‘æƒ‘ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥æ–‡ä»¶çš„<a href="https://github.com/MartinLwx/dotfiles/blob/main/nvim/lua/lsp.lua" target="_blank" rel="noopener noreferrer">æœ€æ–°ç‰ˆæœ¬</a></p>
<blockquote>
<p>ğŸ’¡ æ¯ä¸ª LSP éƒ½å­˜åœ¨è‡ªå·±å¯ä»¥é…ç½®çš„é€‰é¡¹ï¼Œä½ å¯ä»¥è‡ªå·±å»å¯¹åº” LSP çš„ GitHub ä»“åº“æŸ¥é˜…æ›´å¤šä¿¡æ¯ã€‚å¦‚æœè¦ç”¨é»˜è®¤é…ç½®çš„è¯ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸€ä¸ªæ–°çš„è¯­è¨€éƒ½åªéœ€è¦è®¾ç½® <code>on_attach = on_attach</code></p>
</blockquote>
<p>ç¼–è¾‘ <code>~/.config/nvim/lua/lsp.lua</code> æ–‡ä»¶æ–°å¢å¦‚ä¸‹å†…å®¹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- Set different settings for different languages&#39; LSP</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- LSP list: https://github.com/neovim/nvim-lspconfig/blob/master/doc/server_configurations.md</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- How to use setup({}): https://github.com/neovim/nvim-lspconfig/wiki/Understanding-setup-%7B%7D</span>
</span></span><span class="line"><span class="cl"><span class="c1">--     - the settings table is sent to the LSP</span>
</span></span><span class="line"><span class="cl"><span class="c1">--     - on_attach: a lua callback function to run after LSP atteches to a given buffer</span>
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">lspconfig</span> <span class="o">=</span> <span class="n">require</span><span class="p">(</span><span class="s1">&#39;lspconfig&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Customized on_attach function</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- See `:help vim.diagnostic.*` for documentation on any of the below functions</span>
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span> <span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">silent</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;e&#39;</span><span class="p">,</span> <span class="n">vim.diagnostic</span><span class="p">.</span><span class="n">open_float</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;[d&#39;</span><span class="p">,</span> <span class="n">vim.diagnostic</span><span class="p">.</span><span class="n">goto_prev</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;]d&#39;</span><span class="p">,</span> <span class="n">vim.diagnostic</span><span class="p">.</span><span class="n">goto_next</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;q&#39;</span><span class="p">,</span> <span class="n">vim.diagnostic</span><span class="p">.</span><span class="n">setloclist</span><span class="p">,</span> <span class="n">opts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Use an on_attach function to only map the following keys</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- after the language server attaches to the current buffer</span>
</span></span><span class="line"><span class="cl"><span class="kd">local</span> <span class="n">on_attach</span> <span class="o">=</span> <span class="kr">function</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">bufnr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1">-- Enable completion triggered by &lt;c-x&gt;&lt;c-o&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.api</span><span class="p">.</span><span class="n">nvim_buf_set_option</span><span class="p">(</span><span class="n">bufnr</span><span class="p">,</span> <span class="s1">&#39;omnifunc&#39;</span><span class="p">,</span> <span class="s1">&#39;v:lua.vim.lsp.omnifunc&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">-- See `:help vim.lsp.*` for documentation on any of the below functions</span>
</span></span><span class="line"><span class="cl">    <span class="kd">local</span> <span class="n">bufopts</span> <span class="o">=</span> <span class="p">{</span> <span class="n">noremap</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">silent</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="n">buffer</span> <span class="o">=</span> <span class="n">bufnr</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;gD&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.declaration</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;gd&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.definition</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.hover</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;gi&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.implementation</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;C-k&gt;&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.signature_help</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;wa&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.add_workspace_folder</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;wr&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.remove_workspace_folder</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;wl&#39;</span><span class="p">,</span> <span class="kr">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">print</span><span class="p">(</span><span class="n">vim.inspect</span><span class="p">(</span><span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.list_workspace_folders</span><span class="p">()))</span>
</span></span><span class="line"><span class="cl">    <span class="kr">end</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;D&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.type_definition</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;rn&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.rename</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;space&gt;ca&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.code_action</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;gr&#39;</span><span class="p">,</span> <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.references</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">vim.keymap</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&#34;n&#34;</span><span class="p">,</span> <span class="s2">&#34;&lt;space&gt;f&#34;</span><span class="p">,</span> <span class="kr">function</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">vim.lsp</span><span class="p">.</span><span class="n">buf.format</span><span class="p">({</span> <span class="n">async</span> <span class="o">=</span> <span class="kc">true</span> <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="kr">end</span><span class="p">,</span> <span class="n">bufopts</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="kr">end</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">-- Configure each language</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- How to add LSP for a specific language?</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- 1. use `:Mason` to install corresponding LSP</span>
</span></span><span class="line"><span class="cl"><span class="c1">-- 2. add configuration below</span>
</span></span><span class="line"><span class="cl"><span class="n">lspconfig.pylsp</span><span class="p">.</span><span class="n">setup</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">	<span class="n">on_attach</span> <span class="o">=</span> <span class="n">on_attach</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸Šé¢çš„æŒ‰é”®ç»‘å®šçš„æ„æ€æ˜¯å¾ˆç›´è§‚çš„ï¼Œè¿™é‡Œå°±ä¸å¤šè§£é‡Šå•¦</p>
<p>æœ€ååœ¨ <code>init.lua</code> æ–‡ä»¶é‡Œé¢åŠ ä¸Š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-lua" data-lang="lua"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="n">require</span><span class="p">(</span><span class="s1">&#39;lsp&#39;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‡å¯ <code>Nvim</code> ä¹‹åï¼Œä½ åº”è¯¥å¯ä»¥åœ¨ä¸‹é¢çš„çŠ¶æ€æ çœ‹åˆ° <code>Mason</code> æ­£åœ¨ä¸‹è½½å¹¶å®‰è£…å‰é¢æˆ‘ä»¬æŒ‡å®šçš„ LSPï¼ˆ<strong>æ³¨æ„æ­¤æ—¶ä¸èƒ½å…³é—­ <code>Nvim</code></strong>ï¼‰ï¼Œå¯ä»¥è¾“å…¥ <code>:Mason</code> æŸ¥çœ‹å®‰è£…è¿›åº¦ã€‚åœ¨ä½ ç­‰å¾…å®‰è£…çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥è¾“å…¥ <code>g?</code> æŸ¥çœ‹æ›´å¤šå¸®åŠ©ä¿¡æ¯äº†è§£å¦‚ä½•ä½¿ç”¨ <code>mason</code> æ’ä»¶</p>
<p>å¤§åŠŸå‘ŠæˆğŸ‰ğŸ‰ğŸ‰</p>
<h2 id="æ€»ç»“" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>æ€»ç»“</h2><p>è¿™æ ·é…ç½®ä¸‹æ¥ï¼Œæˆ‘ä»¬æˆåŠŸæŠŠ <code>Nvim</code> å˜æˆäº†ä¸€ä¸ªè½»é‡çº§çš„ IDEï¼Œå®ƒæ”¯æŒä»£ç é«˜äº®ã€ä»£ç è¡¥å…¨ã€è¯­æ³•æ£€æŸ¥ç­‰åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯<em>å®Œå…¨å¼€æºå…è´¹çš„</em>ï¼Œè™½ç„¶è¿˜æœ‰äº›ç®€é™‹ï¼Œä½†å·²ç»æ˜¯å¯ä»¥ç”¨çš„äº† &#x1f917;</p>
<p>æˆ‘å‘ç°è‡ªä»å­¦äº† Vim ä¹‹åï¼Œæˆ‘æ€»åœ¨å…¶ä»–å„ç§ä»£ç ç¼–è¾‘å™¨ã€IDE çœ‹æ˜¯ä¸æ˜¯æ”¯æŒ Vimã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯¹ Vim çš„æ”¯æŒéƒ½ä¸æ˜¯å¾ˆè®©äººæ»¡æ„ï¼Œè¿˜å®¹æ˜“æœ‰å¿«æ·é”®å†²çªç­‰é—®é¢˜ã€‚å› æ­¤æˆ‘é€‰æ‹©å°† <code>Nvim</code> å˜æˆ IDEï¼Œå¹¶å°†é…ç½®æ–‡ä»¶æ‰˜ç®¡åœ¨æˆ‘çš„ <a href="https://github.com/MartinLwx/dotfiles" target="_blank" rel="noopener noreferrer">Martinlwx/dotfiles</a> ä¸Šã€‚è¿™æ ·åœ¨æ–°çš„æœºå™¨ä¸Šåªè¦å®‰è£…å¥½ <code>Nvim</code> å¹¶å…‹éš†é…ç½®ï¼Œé™å¾…ç‰‡åˆ»ä¹‹åå°±å¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šè·å¾—<em>ä¸€æ ·çš„</em>ç¼–ç¨‹ä½“éªŒ</p>
<p>æ‰“ç£¨å®šåˆ¶åŒ–å·¥å…·æ˜¯éœ€è¦ä»˜å‡ºä¸€å®šç²¾åŠ›çš„ã€‚ä¸ºäº†ç†è§£æ¯ä¸ªé€‰é¡¹éƒ½åœ¨å¹²å•¥ï¼Œæˆ‘ä¸å¾—ä¸æŸ¥æ‰¾å„ç§èµ„æ–™ã€‚ä½†æˆ‘ä»ç›¸ä¿¡è¿™æ˜¯<em>å€¼å¾—çš„</em>ï¼Œ<em>ç†è§£</em>ä½ çš„å·¥å…·åˆ©äºä½ åšæ‰©å±•å’Œå®šåˆ¶åŒ–ã€‚æœ¬æ–‡å·²ç»å°½å¯èƒ½é‡‡ç”¨äº†æ¯”è¾ƒç®€å•çš„é…ç½®ï¼Œè¿˜æœ‰å¾ˆå¤šç¾åŒ–ã€ç§äººå®šåˆ¶åŒ–çš„å†…å®¹å¯ä»¥é…ç½®ï¼Œæ›´åˆ«æå…¶ä»–å¾ˆå¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ’ä»¶éƒ½è¿˜æ²¡æœ‰æåŠï¼Œè¿™äº›å°±ç•™ç»™è¯»è€…è‡ªå·±å»æ¢ç´¢å‘ç°äº†</p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p><a href="https://github.com/neovim/neovim/wiki/Installing-Neovim" target="_blank" rel="noopener noreferrer">Installing-Neovim</a>&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p><a href="https://www.youtube.com/watch?v=Ow03haHO1NE&amp;list=RDCMUCS97tchJDq17Qms3cux8wcA&amp;index=4" target="_blank" rel="noopener noreferrer">Adding a colorscheme/theme</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p><a href="https://en.wikipedia.org/wiki/Language_Server_Protocol" target="_blank" rel="noopener noreferrer">Language Server Protocol - Wiki</a>&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</div>

        <div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2024-04-04</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share"><button title="åˆ†äº«åˆ° Twitter" data-sharer="twitter" data-url="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" data-title="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)" data-hashtags="Vim-Neovim"><span class="fab fa-twitter fa-fw"></span></button><button title="åˆ†äº«åˆ° Facebook" data-sharer="facebook" data-url="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" data-hashtag="Vim-Neovim"><span class="fab fa-facebook-square fa-fw"></span></button><button title="åˆ†äº«åˆ° Hacker News" data-sharer="hackernews" data-url="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" data-title="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)"><span class="fab fa-hacker-news fa-fw"></span></button><button title="åˆ†äº«åˆ° Line" data-sharer="line" data-url="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" data-title="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)"><span data-svg-src="/lib/simple-icons/icons/line.min.svg"></span></button><button title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" data-title="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)"><span class="fab fa-weibo fa-fw"></span></button><button title="åˆ†äº«åˆ° Telegram" data-sharer="telegram" data-url="https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/" data-title="ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)" data-web><span class="fab fa-telegram-plane fa-fw"></span></button><script>
        function shareOnMastodon(title, link) {
            const SHARE_MASTODON_DOMAIN = "share_mastodon_domain"
            const savedDomain = localStorage.getItem(SHARE_MASTODON_DOMAIN) ?? "mastodon.social";
            const domain = prompt("Enter your Mastodon domain", savedDomain);
            if (domain === null) {
                return;
            }
            localStorage.setItem(SHARE_MASTODON_DOMAIN, domain)
            const text = title + "\n\n" + link;
            const url = new URL("https://" + domain)
            url.pathname = "share"
            url.searchParams.append('text', text)
            window.open(url, '_blank', "width=500,height=500,left=500,toolbar=0,status=0");
        }
    </script>
    <button title="åˆ†äº«åˆ° Mastodon"onclick="javascript:shareOnMastodon(&#34;ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)&#34;, &#34;https://martinlwx.github.io/zh-cn/config-neovim-from-scratch/&#34;)"><span class="fab fa-mastodon fa-fw"></span></button></div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/zh-cn/tags/vim-neovim/">Vim-Neovim</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/zh-cn/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/zh-cn/type-hints-in-python/" class="prev" rel="prev" title="Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ"><i class="fas fa-angle-left fa-fw"></i>Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ</a>
            <a href="/zh-cn/linear-regression-model-guide-theory/" class="next" rel="next" title="çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†">çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="giscus"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app/">giscus</a>.
            </noscript></div></article></div>
        </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">
                    ç”± <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.124.1">Hugo</a> å¼ºåŠ›é©±åŠ¨&nbsp;|&nbsp;ä¸»é¢˜ - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.4.0"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/MartinLwx" target="_blank" rel="noopener noreferrer">MartinLwx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line"></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

    <div id="fixed-buttons"><a href="#back-to-top" id="back-to-top-button" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
            <i class="fas fa-arrow-up fa-fw"></i>
        </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
            <i class="fas fa-comment fa-fw"></i>
        </a>
    </div><div class="assets"><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="preload" as="style" onload="this.onload=null;this.rel='stylesheet'" href="/lib/katex/copy-tex.min.css">
        <noscript><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"></noscript><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":25},"comment":{"giscus":{"darkTheme":"dark","dataCategory":"Announcements","dataCategoryId":"DIC_kwDOGfB5nc4Ccjd0","dataEmitMetadata":"0","dataInputPosition":"bottom","dataLang":"en","dataLoading":"lazy","dataMapping":"pathname","dataReactionsEnabled":"1","dataRepo":"MartinLwx/martinlwx.github.io","dataRepoId":"R_kgDOGfB5nQ","dataStrict":"0","lightTheme":"preferred_color_scheme"}},"data":{"desktop-header-typeit":"MartinLwx's blog","mobile-header-typeit":"MartinLwx's blog"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"distance":100,"findAllMatches":false,"fuseIndexURL":"/zh-cn/index.json","highlightTag":"em","ignoreFieldNorm":false,"ignoreLocation":true,"isCaseSensitive":false,"location":0,"maxResultLength":10,"minMatchCharLength":2,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":30,"threshold":0.1,"type":"fuse","useExtendedSearch":false},"sharerjs":true,"table":{"sort":true},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"desktop-header-typeit":["desktop-header-typeit"],"mobile-header-typeit":["mobile-header-typeit"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/lib/tablesort/tablesort.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/typeit/typeit.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js" defer></script><script type="text/javascript" src="/lib/katex/auto-render.min.js" defer></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js" defer></script><script type="text/javascript" src="/lib/katex/mhchem.min.js" defer></script><script type="text/javascript" src="/js/katex.min.js" defer></script><script type="text/javascript" src="/js/theme.min.js" defer></script><script type="text/javascript" src="/js/giscus.min.js" defer></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-7RY6742J2F', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-7RY6742J2F" async></script></div>
</body>

</html>
