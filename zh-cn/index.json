[{"categories":["Python"],"content":"Python çš„ç±»å‹æç¤ºçš„ç®€å•ä»‹ç»","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å¼•è¨€ ä¸€å¼€å§‹å¸å¼•æˆ‘å­¦ä¹  Python çš„æ˜¯å®ƒçš„åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼Œä»¥åŠå®ƒçš„é¸­å­ç±»å‹ï¼ˆDuck typingï¼‰ç³»ç»Ÿâ€”â€”æˆ‘ä»¬ä¸å…³å¿ƒå…·ä½“çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åªå…³å¿ƒå®ƒçš„è¡Œä¸ºã€‚å¾—ç›Šäº Python çš„åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦å£°æ˜å…·ä½“ç±»å‹ï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸ŠåŠ å¿«äº†å¼€å‘é€Ÿåº¦ï¼Œè€Œä¸”å»æ‰äº†ä¸å°‘å¿ƒæ™ºè´Ÿæ‹…ï¼Œå†åŠ ä¸Šå¼ºå¤§çš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒï¼ŒPython æˆä¸ºäº†æˆ‘æœ€çˆ±ç”¨çš„ç¼–ç¨‹è¯­è¨€ğŸ˜º è€Œéšç€ PEP 4841 çš„æå‡ºï¼ŒPython å†³å®šå¼•å…¥ç±»å‹æç¤ºï¼ˆType hintï¼‰ï¼Œè¿™ä¼¼ä¹åˆå‘é™æ€ç±»å‹è¯­è¨€çœ‹é½äº†ï¼Ÿä½†å…¶å®éä¹Ÿï¼ŒPython ä»ç„¶æ˜¯ä¸€é—¨åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒçš„ç±»å‹æç¤ºæ˜¯å¯é€‰é¡¹ï¼ŒåŠ ä¸åŠ éƒ½å¯ä»¥ï¼Œä¸ä¼šå¯¹ç¨‹åºè¿è¡Œäº§ç”Ÿå½±å“ã€‚ è¿™æ ·å¬èµ·æ¥ä¼¼ä¹æ²¡æœ‰å¿…è¦ä¸“é—¨å†™è¿™ç¯‡åšå®¢æ¥ä»‹ç» Python çš„ç±»å‹æç¤ºç‰¹æ€§ï¼Œä½†æˆ‘å‘ç°å†™ç±»å‹æç¤ºè¿˜æ˜¯æœ‰ä¸å°‘å¥½å¤„çš„ï¼š å¯ä»¥ä½¿ç”¨ç±»å‹æ£€æŸ¥å·¥å…·å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ¯”å¦‚ Mypy IDE çš„ä»£ç è¡¥å…¨ä¼šæ›´åŠ æ™ºèƒ½ï¼Œæ¨èçš„ API æ›´å‡†ç¡®ï¼Œæˆ‘ä»¬ç”¨é”™äº† API ä¹Ÿèƒ½åŠæ—¶å‘ç°ã€‚è¿™å¯èƒ½æ˜¯æˆ‘é€‰æ‹©å†™ç±»å‹æç¤ºçš„æœ€å¤§åŠ¨åŠ› å¯¹æŠ—ä»£ç å¤æ‚æ€§ã€‚ç±»å‹æç¤ºæš´éœ²äº† API çš„ä¸å°‘ä¿¡æ¯ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬åªè¦çœ‹ä¸€ä¸‹è¿™æ ·çš„å‡½æ•°ç­¾åå°±èƒ½çŸ¥é“ä¸ªå¤§æ¦‚ï¼Œè€Œä¸ç”¨ç»å¸¸å»çœ‹æ–‡æ¡£ ! python --version Python 3.11.0\r","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:1:0","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å‡½æ•°çš„ç±»å‹æç¤ºè¯­æ³• æ—©åœ¨ Python 3.0ï¼Œç±»å‹æç¤ºçš„è¯­æ³•å°±å·²ç»ç¡®å®šäº†ä¸‹æ¥2ï¼š å‡½æ•°å‚æ•°ï¼šname[: type] [ = default_val ]ï¼Œå…¶ä¸­ [] è¡¨ç¤ºè¿™æ˜¯å¯é€‰é¡¹ å‡½æ•°è¿”å›ç±»å‹ï¼šç”¨ -\u003e return_type è¡¨ç¤º æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°çš„ __annotations__ å±æ€§è®¿é—®åˆ°å‚æ•°çš„ç±»å‹ä¿¡æ¯ï¼Œè¯¥å±æ€§è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œkey ä¸ºå‚æ•°åï¼Œvalue ä¸ºç±»å‹ã€‚==ä¸æ¨èç›´æ¥è®¿é—®è¯¥å±æ€§ï¼Œè€Œåº”è¯¥é€šè¿‡ inspect æ¨¡å—ï¼ˆ\u003e Python 3.10ï¼‰æˆ–è€… typing æ¨¡å—ï¼ˆPython 3.5 ~ 3.9ï¼‰é‡Œé¢çš„å¯¹åº”æ–¹æ³•æ¥è·å–è¿™ä¸ªä¿¡æ¯==ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š def maximum(a: float, b: float) -\u003e float: \"\"\" A simple function to return the maximum elements of two floats\"\"\" return max(a, b) # \u003e= Python 3.10, do this import inspect assert inspect.get_annotations(maximum) == maximum.__annotations__ # Python 3.5 ~ 3.9 import typing assert typing.get_type_hints(maximum) == maximum.__annotations__ inspect.get_annotations(maximum) {'a': float, 'b': float, 'return': float} ğŸ“’ å†æ¬¡å¼ºè°ƒï¼Œç±»å‹æç¤ºä¿¡æ¯ä¸ä¼šå¯¹ç¨‹åºçš„è¿è¡Œäº§ç”Ÿä»»ä½•å½±å“ï¼Œè¿™æ„å‘³ç€å³ä½¿æˆ‘ä»¬è¿èƒŒäº†ç±»å‹æç¤ºä¿¡æ¯ï¼Œç¨‹åºä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œã€‚åªæ˜¯é™æ€ä»£ç æ£€æŸ¥å·¥å…·ä¼šå¯¹æ­¤æŠ›å‡ºè­¦å‘Š # returns the maximum of two strings # , but we declared the arguments should be float! maximum('hello', 'world') 'world' ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:2:0","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å˜é‡çš„ç±»å‹æç¤ºè¯­æ³• åœ¨ Python 3.6 ä¹‹å‰ï¼Œå¦‚æœè¦ç»™ä¸€ä¸ªå˜é‡åŠ ä¸Šç±»å‹æç¤ºåªèƒ½ä½¿ç”¨ Type commentsï¼Œä¹Ÿå°±æ˜¯åœ¨æ³¨é‡Šé‡Œé¢ç”¨ # type ... å£°æ˜1ï¼Œä½†åœ¨ PEP 526 ä¸­æå‡ºäº†å˜é‡çš„ç±»å‹æç¤ºè¯­æ³•ï¼Œå’Œå‡½æ•°å‚æ•°çš„è¯­æ³•æ˜¯ç±»ä¼¼çš„3 a: int # undefined typed value a: int = 0 # typed value with default value a 0 ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ module çš„ __annotations__ å±æ€§è®¿é—®ç±»å‹æç¤ºä¿¡æ¯ __annotations__ {'a': int} ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:3:0","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å¸¸è§ä½¿ç”¨åœºæ™¯ ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:0","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"ç®€å•çš„å†…å»ºç±»å‹ è¿™é‡Œè¯´çš„ç®€å•å†…å»ºç±»å‹å°±æ˜¯ï¼šintã€str ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹åº“é‡Œé¢å®šä¹‰çš„ç±»å‹ã€‚å‰é¢æåˆ°çš„ maximum å‡½æ•°çš„ 2 ä¸ªå‚æ•°å°±æ˜¯ç”¨ float ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:1","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"Any ç±»å‹ Any è¡¨ç¤ºä»€ä¹ˆç±»å‹éƒ½æœ‰å¯èƒ½ã€‚ä½†å®ƒè·Ÿ object å¹¶ä¸ç›¸åŒ1 åŸºæœ¬ä¸Šæˆ‘ä»¬å¯ä»¥è®¤ä¸ºä¸€ä¸ªä¸åŒ…å«ç±»å‹æç¤ºçš„å‡½æ•°çš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹éƒ½æ˜¯ Any def foo(x): ... # it assumes: def foo(x: Any) -\u003e Any: ... ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:2","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"é›†åˆç±»å‹å’Œæ˜ å°„ç±»å‹ æˆ‘ä»¬ç§°é›†åˆé‡Œé¢çš„æ¯ä¸ªä¸œè¥¿ä¸º itemï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç»™é›†åˆå’Œ item éƒ½åŠ ä¸Šç±»å‹æç¤ºä¿¡æ¯ï¼Ÿ==Python é‡‡ç”¨ [] è®°å·æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼Œ[] é‡Œé¢æŒ‡å®š item çš„ç±»å‹==ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„åˆ—è¡¨è¿™ä¸ªç±»å‹å¯ä»¥å†™ä½œ list[str]ï¼Œéå¸¸æ¸…æ¥šã€‚ æ³¨æ„ï¼šPython 3.9 å‘å¸ƒäº† PEP 585 4ï¼Œå…è®¸æˆ‘ä»¬ç›´æ¥ä½¿ç”¨è‡ªå¸¦çš„ listã€dict ç­‰è€Œæ— éœ€ä½¿ç”¨ typing æ¨¡å—å¯¹åº”çš„ç±»å‹ã€‚ä¸‹é¢æˆ‘åˆ—å‡ºäº†ä¸åŒï¼Œæ›´ä¸ºè¯¦ç»†çš„è¯·æŸ¥é˜…åŸæ–‡ 4ï¼š \u003c Python 3.9 \u003e= Python 3.9 typing.Tuple tuple typing.Dict dict typing.List list typing.Set set typing.Frozenset frozenset typing.Type type typing.AbstractSet collections.abc.Set typing.ContextManager contextlib.AbstractContextManager typing.AsyncContextManager contextlib.AbstractAsyncContextManager typing.Pattern, typing.re.Pattern re.Pattern typing.Match, typing.re.Match re.Match ğŸ“’ typing æ¨¡å—çš„éƒ¨åˆ†ç‰¹æ€§å°†æ¥ä¼šè¢«ç§»é™¤ã€‚æ‰€ä»¥æˆ‘åé¢ä¼šä½¿ç”¨æœ€æ–°çš„è¯­æ³•âœï¸ string_list: list[str] = ['hello', 'world'] # tuple[type1, type2, ..., typen] with fixed size date: tuple[int, int, int] = (2023, 1, 11) string_count: dict[str, int] = { 'hello': 1, 'world': 2, } __annotations__ {'a': int, 'string_list': list[str], 'date': tuple[int, int, int], 'string_count': dict[str, int]} ä¸‹é¢çš„ join_str_list å‡½æ•°æ¥å—ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œç”¨ç©ºæ ¼å°†ä»–ä»¬è¿æ¥èµ·æ¥ï¼Œç„¶åè¿”å›è¿™ä¸ªå­—ç¬¦ä¸² def join_str_list(string_list: list[str]) -\u003e str: \"\"\" join all string in a list\"\"\" return ' '.join(string_list) print(join_str_list(string_list)) print(inspect.get_annotations(join_str_list)) hello world {'string_list': list[str], 'return': \u003cclass 'str'\u003e} ğŸ“’ åœ¨ Python 3.9+ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ tuple[type1, ...] è¡¨ç¤ºç±»å‹å…¨éƒ½æ˜¯ type1 çš„ä»»æ„é•¿åº¦çš„ tuple def sum_variable_integers(data: tuple[int, ...]): \"\"\" Sum all integers of a tuple\"\"\" sum_val = 0 for integer in data: sum_val += integer return sum_val print(sum_variable_integers((1, 2, 3))) print(sum_variable_integers((3,))) 6 3 ä¼—æ‰€å‘¨çŸ¥ï¼ŒPython çš„ list å¯ä»¥æ”¾ç½®ä»»ä½•ç±»å‹ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨ç±»å‹æç¤ºè¯´æ˜è¿™ä¸€ç‚¹å‘¢ï¼Ÿå¯ä»¥ç”¨å‰é¢çš„ Any ç±»å‹ï¼š list[Any] å…¶å®ç›´æ¥ç”¨ list å°±å¯ä»¥ï¼Œè€Œä¸”æ›´ä¸ºç®€æ´ ğŸ“’ å¦‚æœè¿™ 3 ä¸ªåŸºæœ¬çš„é›†åˆç±»å‹ä¸èƒ½æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œå¯ä»¥æŸ¥é˜… collections.abc çš„æ–‡æ¡£äº†è§£æ›´å¤š ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:3","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"ç±»å‹åˆ«åï¼ˆType aliasï¼‰ æœ‰æ—¶å€™ï¼Œç±»å‹ä¼šå˜å¾—å¾ˆå¤æ‚è€Œä¸”å¾ˆé•¿ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³è¦åœ¨æ¯ä¸€ä¸ªåœ°æ–¹éƒ½å†™ä¸Šä¸€é•¿ä¸²çš„ç±»å‹æç¤ºã€‚é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿä¸€ä¸ªé€šå¸¸çš„åšæ³•æ˜¯ä¸ºå…¶å–ä¸€ä¸ªæœ‰æ„ä¹‰çš„åˆ«åã€‚å®šä¹‰åˆ«åçš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š AliasName = Type æ‹¿å‰é¢çš„ date æ—¥æœŸç±»å‹ä½œä¸ºä¾‹å­ã€‚date ç±»å‹è¢«æˆ‘å®šä¹‰ä¸ºä¸€ä¸ª tupleï¼Œæ¯ä¸ªä½ç½®ä¸Šçš„ç±»å‹éƒ½æ˜¯ intã€‚é‚£ä¹ˆï¼Œlist[tuple[int, int, int] è¡¨ç¤ºä¸€ä¸ªæ—¥æœŸçš„åˆ—è¡¨è¿™ä¸ªç±»å‹ã€‚ä¸ºäº†è®©ä»£ç æ›´æœ‰å¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–èµ·ä¸ªåˆ«åå«åš Dateï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š Date = tuple[int, int, int] DateList = list[Date] def print_date_list(l: DateList): \"\"\" Print all dates in the format `year-month-day` in the date list\"\"\" for year, month, day in l: print(f'{year}-{month}-{day}') print_date_list([(2022, 1, 1), (2023, 1, 3)]) print(inspect.get_annotations(print_date_list)) 2022-1-1 2023-1-3 {'l': list[tuple[int, int, int]]} ç±»å‹åˆ«åçš„è¯­æ³•å¾ˆå®¹æ˜“å’Œå®šä¹‰å…¨å±€å˜é‡æ··æ·†ï¼Œæ‰€ä»¥ PEP 163ï¼ˆ\u003e= Python 3.10ï¼‰æå‡ºäº†æ›´åŠ  explicit çš„æ–¹å¼5ï¼š AliasName: TypeAlias = Type from typing import TypeAlias Date: TypeAlias = tuple[int, int, int] ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:4","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å‚æ•°åŒ–çš„æ³›å‹ å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ç»å¸¸ä½¿ç”¨å¤§å†™å­—æ¯æ¯”å¦‚ T ç­‰è¡¨ç¤ºå‚æ•°åŒ–çš„æ³›å‹ï¼Œåœ¨ Python é‡Œé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ TypeVar å…³é”®å­—ï¼Œå¦‚åŒæ–‡æ¡£æ‰€è¯´ï¼Œä¸€å…±æœ‰ 3 ç§ç”¨æ³•ï¼š T = TypeVar('T') # Can be anything S = TypeVar('S', bound=str) # Can be any subtype of str A = TypeVar('A', str, bytes)# Must be exactly str or bytes æ€»çš„æ¥è¯´ï¼ŒTypeVar æä¾›äº† 2 ç§æ–¹å¼è®©æˆ‘ä»¬å¯¹æ³›å‹ä½œå‡ºé™åˆ¶ï¼š ç”¨ bound=some_typeï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åªèƒ½ä¼ å…¥ some_type çš„ subtype ç›´æ¥æŒ‡å®šå…è®¸çš„ç±»å‹ ğŸ“’ å…³äº subtype çš„å®šä¹‰å¯ä»¥å‚è€ƒ PEP 4836ï¼Œæ¦‚æ‹¬æ¥è¯´ä¸º 2 ç‚¹ï¼šaï¼‰æ¯ä¸ªç±»å‹éƒ½æ˜¯è‡ªå·±çš„ subtypeã€‚bï¼‰OOP ä¸­ï¼Œå­ç±»æ˜¯çˆ¶ç±»çš„ subtype from typing import TypeVar GenericString = TypeVar('GenericString', str, bytes) def process(s: GenericString): \"\"\" The GenericString can be either str or bytes\"\"\" ... ğŸ“’ å®é™…ä¸Š Python å·²ç»å¸®ä½ å®šä¹‰å¥½äº†å¯èƒ½æ˜¯ str ä¹Ÿå¯èƒ½æ˜¯ bytes çš„ç±»å‹â€”â€”typing.AnyStr ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:5","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"Optional å’Œ Union ç±»å‹ Optional[type1] ç”¨äºè¡¨ç¤ºç±»å‹å¯èƒ½æ˜¯ type1 ä¹Ÿå¯èƒ½æ˜¯ Noneã€‚ Union[type1, type2, ...] è¡¨ç¤ºå…è®¸çš„ç±»å‹å¯èƒ½æ˜¯æˆ‘ä»¬æŒ‡å®šçš„å¤šä¸ªå¯èƒ½ç±»å‹çš„çš„ä»»æ„ä¸€ç§ï¼Œä¹Ÿå°±æ˜¯é€»è¾‘ä¸Šçš„ã€Œæˆ–ã€å…³ç³»**ã€‚å› æ­¤ï¼ŒOptional[type1] å…¶å®å’Œ Union[type1, None] æ˜¯ä¸€ä¸ªæ„æ€ from typing import Optional, Union def parse(s: Union[str, int]) -\u003e Optional[int]: \"\"\" Parse `s` and get an integer value. The `s` may be a string. Return None if fail \"\"\" if isinstance(s, str): if not s.isdigit(): return None else: return int(s) elif isinstance(s, int): return s assert parse('foo') is None assert parse('123') == 123 assert parse(123) == 123 inspect.get_annotations(parse) {'s': typing.Union[str, int], 'return': typing.Optional[int]} åœ¨ Python 3.10 é‡Œé¢ï¼Œæ–°å¼•å…¥äº† |ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿ Union çš„å†™æ³•7ã€‚å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå¯ä»¥è§åˆ°è¿™ç§ç”¨æ³•ï¼šæ¯”å¦‚ Rust çš„ pattern matching ä¹Ÿé‡‡ç”¨äº† | åˆ†éš”å¤šä¸ªå¯èƒ½çš„ patternã€‚é‚£ä¹ˆæˆ‘ä»¬å‰é¢å†™çš„ parse å‡½æ•°å°±å¯ä»¥å†™æˆä¸‹é¢è¿™ç§å½¢å¼ï¼š def parse(s: str | int) -\u003e int | None: \"\"\" Parse `s` and get an integer value. The `s` may be a string. Return None if fail \"\"\" if isinstance(s, str): if not s.isdigit(): return None else: return int(s) elif isinstance(s, int): return s inspect.get_annotations(parse) {'s': str | int, 'return': int | None} ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:6","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å¯è°ƒç”¨å¯¹è±¡ï¼ˆCallableï¼‰ ä¸‹é¢ç”¨å‡½æ•°ä½œä¸ºä¾‹å­ï¼ŒPython çš„å‡½æ•°æ˜¯ first-class objectï¼Œæ‰€ä»¥å‡½æ•°å¯ä»¥æ˜¯å¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›å€¼ã€‚ç±»å‹æç¤ºå¯¹æ­¤çš„æ”¯æŒæ˜¯ï¼š Callable[[ParamType1, ParamType2], ReturnType] è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª apply å‡½æ•°ï¼Œå…¥å‚ä¸ºå¯è°ƒç”¨å¯¹è±¡å’Œè¦å¤„ç†çš„æ•°æ®ï¼Œå°†è¿™ä¸ªå¯è°ƒç”¨å¯¹è±¡åº”ç”¨åœ¨æ•°æ®ä¸Š # from typing import Callable # Python \u003c 3.9 from collections.abc import Callable def apply(f: Callable[[str | int], int | None], data: list): \"\"\" Apply callable object on data. The `Callable[[str | int], int | None]` is the type hints of `parse` we aforementioned \"\"\" for d in data: print(f(d)) apply(parse, ['hello', 123]) None 123 ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:7","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"æ€»ç»“ ä»¥ä¸Šå°±æ˜¯æœ¬ç¯‡åšå®¢çš„å…¨éƒ¨å†…å®¹ï¼Œæˆ‘å…¶å®åªè°ˆåˆ°äº†æˆ‘è®¤ä¸ºæ¯”è¾ƒæœ‰ç”¨çš„ä¸€äº›ç±»å‹æç¤ºä½¿ç”¨åœºæ™¯ï¼Œä¸å°‘çš„é«˜çº§ç‰¹æ€§æ¯”å¦‚ Static protocol8 ç­‰æ²¡æœ‰æåˆ°ï¼Œè¿™äº›å†…å®¹ç•™ç»™è¯»è€…è‡ªå·±æ¢ç´¢ã€‚ æˆ‘å¯¹ç±»å‹æç¤ºçš„æ€åº¦ä»ç„¶æ˜¯ï¼šå½“å®ƒå˜å¾—å¤æ‚çš„æ—¶å€™å°±ä¸ç”¨ï¼Œé™¤éè¿™ä¸ªä»£ä»·æ˜¯å€¼å¾—çš„ã€‚ æ ¹æ®æˆ‘çš„å¼€å‘ç»éªŒï¼Œä¸‹é¢é™„ä¸Šå…³äºç±»å‹æç¤ºçš„å‡ ç‚¹å»ºè®®ğŸ¯ï¼š å†³å®šè¦åŠ ä¸Šä»€ä¹ˆç±»å‹æç¤ºçš„æ—¶å€™ï¼Œè€ƒè™‘è¿™ä¸ªç±»å‹èƒ½å¤Ÿåšä»€ä¹ˆã€‚Python 3.8 æå‡ºçš„ static protocols å°±å¾ˆå¥½è§£å†³äº†è¿™ç‚¹8ã€‚æ„Ÿè§‰æœ‰ç‚¹åƒ Rust ä¸­çš„ traits å¯¹äºå‡½æ•°è¿”å›ç±»å‹ï¼ŒåŠ›æ±‚è¿”å›çš„ç±»å‹è¶Šç²¾ç¡®è¶Šå¥½ã€‚è®¾æƒ³ä¸€ä¸ªè¿”å›ç±»å‹ä¸º Union[str, int]ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è‡ªå·±æ‰‹åŠ¨å†è¿›è¡Œä¸€æ¬¡ç±»å‹æ£€æŸ¥ï¼Œå°±æ˜¾å¾—è¿™ä¸ªç±»å‹æç¤ºä¸æ˜¯å¾ˆæœ‰å¿…è¦ é€šè¿‡äº†ä»£ç é™æ€ç±»å‹æ£€æŸ¥ä¹Ÿä¸æ„å‘³ç€ç¨‹åºå°±æ²¡æœ‰ bug äº†ï¼Œè½¯ä»¶æµ‹è¯•æ‰æ˜¯è½¯ä»¶å·¥ç¨‹é¢†åŸŸä¿è¯è½¯ä»¶è´¨é‡çš„æ ‡å‡†åšæ³•ï½ å°†è¿™ä»½ cheatsheet åŠ å…¥ä½ çš„ä¹¦ç­¾ğŸ‘ ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:5:0","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"å‚è€ƒ PEP 484. Type HintsÂ â†©ï¸Â â†©ï¸Â â†©ï¸ PEP 3107. Function AnnotationsÂ â†©ï¸ PEP 526. Syntax for Variable AnnotationsÂ â†©ï¸ PEP 585. Type Hinting Generics In Standard CollectionsÂ â†©ï¸Â â†©ï¸ PEP 613. Explicit Type AliasesÂ â†©ï¸ PEP 483. The Theory of Type HintsÂ â†©ï¸ PEP 604. Allow writing union types as X | YÂ â†©ï¸ PEP 544. Protocols: Structural subtyping (static duck typing)Â â†©ï¸Â â†©ï¸ ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:6:0","tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Python"],"content":"Python ä¸­çš„è§£åŒ…æ“ä½œç¬¦çš„ç®€å•ä»‹ç»","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":" è¿™ä¸€ç¯‡åšå®¢ä¸€å¼€å§‹æ˜¯å†™åœ¨ jupyter notebook é‡Œé¢è€Œåè½¬æˆ markdown çš„ã€‚å¦‚æœæƒ³è¦è®¿é—®å’Œè¿è¡Œæœ¬æ¥çš„ notebookï¼Œè¯·æŸ¥é˜…è¿™ä¸ªä»“åº“ ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:0:0","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"å¼•è¨€ ä»Šå¤©æˆ‘æƒ³è¦èŠèŠ Python ä¸­ç”¨äºè§£åŒ…ï¼ˆUnpackingï¼‰çš„ä¸¤ä¸ªæ“ä½œç¬¦å·â€”â€”* å’Œ ** ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:1:0","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"åŸºæœ¬ç”¨æ³• * æœ€ä¸ºå¸¸è§çš„ç”¨æ³•æ˜¯ç”¨æ¥è¡¨ç¤ºä¹˜æ³•ã€‚ä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† * ç”¨äºä»»æ„ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆiterable objectï¼‰1ä¸Šï¼Œè¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æå–é‡Œé¢æ‰€æœ‰çš„å€¼ ğŸ“’ Python è‡ªå¸¦çš„å¯è¿­ä»£å¯¹è±¡åŒ…æ‹¬ï¼šlist, tuple, set, å’Œ dict ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:2:0","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"Starred assignment/expression éšç€ Python 3.0 çš„å‘å¸ƒï¼ŒPython æ”¯æŒä½¿ç”¨ * æ¥è§£åŒ…ä»»æ„å¯è¿­ä»£å¯¹è±¡2ã€‚è¿™ä¸ªè¢«ç§°ä¹‹ä¸º Starred assignmentï¼Œä¹Ÿå«åš Starred expressionsã€‚æˆ‘ä¹Ÿæœ‰çœ‹åˆ°ç§°ä¹‹ä¸º parallel assignment çš„ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ = å·¦è¾¹å£°æ˜ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡è¡¨ç¤ºæ•è·*æ‰€æœ‰å˜é‡**ã€‚çœ‹ä¸‹é¢è¿™ä¸ªç›´è§‚çš„ä¾‹å­ï¼š \u003e\u003e\u003e first, *rest, last = [1, 2, 3, 4, 5] \u003e\u003e\u003e first 1 \u003e\u003e\u003e rest [2, 3, 4] \u003e\u003e\u003e last 5 ğŸ“’ è¯­æ³•å¾ˆç®€å•ï¼šä¸€ä¸ªæ˜Ÿå·åé¢ç´§è·Ÿç€å˜é‡å - *fooã€‚æˆ‘ä»¬å¯ä»¥åœ¨ = å·¦è¾¹ä»»æ„ä½ç½®æ”¾ç½®å®ƒï¼Œä½†æ˜¯åªèƒ½æœ€å¤šä½¿ç”¨ä¸€æ¬¡è¿™æ ·çš„å˜é‡ã€‚ä»¥åŠï¼Œfoo çš„ç±»å‹ä¸º list åœ¨æˆ‘çœ‹æ¥ï¼ŒPython çš„è¿™ä¸ªç‰¹æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†ä»£ç çš„å¯è¯»æ€§ ä¸è¿‡å®ƒä¹Ÿæœ‰ä¸€äº›å±€é™ï¼š æˆ‘ä»¬ä¸èƒ½ä»…ä»…åœ¨ = å·¦è¾¹ä½¿ç”¨ä¸€ä¸ª *foo å½“æˆå”¯ä¸€çš„è¢«èµ‹å€¼ç›®æ ‡ã€‚= å·¦ä¾§å¿…é¡»æ˜¯ä¸€ä¸ª list æˆ–è€…æ˜¯ tuple å¦‚æœ = å³è¾¹çš„å€¼ä¸å¤Ÿç”¨äºè§£åŒ…çš„è¯ï¼Œç¨‹åºå°±ä¼šæŠ¥é”™ ä¸‹é¢çš„ä¾‹å­è¯æ˜äº†è¿™ä¸¤ç‚¹ï¼š *first = [1, 2, 3] Cell In [1], line 1 *first = [1, 2, 3] ^ SyntaxError: starred assignment target must be in a list or tuple # just add `,` would be fine # now the LHS is a tuple *first, = [1, 2, 3] first [1, 2, 3] first, second, *rest = [1] --------------------------------------------------------------------------- ValueError Traceback (most recent call last) Cell In [3], line 1 ----\u003e 1 first, second, *rest = [1] ValueError: not enough values to unpack (expected at least 2, got 1) ğŸ“’ å¸¸è§çš„ä¸€ä¸ªåšæ³•æ˜¯å°† * å’Œ _ ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼ˆä¹Ÿå°±æ˜¯ *_ï¼‰ï¼Œè¡¨ç¤ºæˆ‘ä»¬ä¸å…³å¿ƒå®ƒæ•è·çš„å˜é‡ first, *_ = [1, 2, 3] first ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:2:1","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"æ›´è¿›ä¸€æ­¥ ä» Python 3.5 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ›´å¤šçš„æƒ…å†µä¸‹ä½¿ç”¨ * å’Œ **3 æƒ…å†µ1âƒ£ï¸ï¼šåœ¨å‡½æ•°è°ƒç”¨é‡Œé¢ï¼Œæˆ‘ä»¬æƒ³è¦ä½¿ç”¨å‡ æ¬¡å°±å¯ä»¥ä½¿ç”¨å‡ æ¬¡ foo, bar = {'a': 1, 'b': 2}, {'c': 3, 'd': 4} dict(**foo, **bar) # dict is a function ğŸ“’dict ä¸­çš„ keys çš„ä¼˜å…ˆçº§æ˜¯å³è¾¹å¤§äºå·¦è¾¹ã€‚æ¢å¥è¯è¯´ï¼Œåé¢å‡ºç°çš„ key çš„å€¼æ€»æ˜¯ä¼šè¦†ç›–å‰é¢å‡ºç°çš„ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ {**{'a': 1, 'b': 2}, **{'a': 3}} {'a': 3, 'b': 2} ğŸ“’å½“æˆ‘ä»¬åœ¨å‡½æ•°è°ƒç”¨é‡Œé¢ä½¿ç”¨ ** çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦ç¡®ä¿æ²¡æœ‰é‡å¤çš„ key dict(**{'a': 1, 'b': 2}, **{'a': 3}) --------------------------------------------------------------------------- TypeError Traceback (most recent call last) Cell In [5], line 1 ----\u003e 1 dict(**{'a': 1, 'b': 2}, **{'a': 3}) TypeError: dict() got multiple values for keyword argument 'a' æƒ…å†µ2âƒ£ï¸ï¼šæˆ‘ä»¬å¯ä»¥åœ¨ tuple/list/set/dict å­—é¢å€¼ä¸­ä½¿ç”¨ã€‚ä½†æ˜¯ä¸èƒ½åœ¨ list/set/dict comprehensions é‡Œé¢ä½¿ç”¨ğŸ˜º # an example drawn from PEP 448 \u003e\u003e\u003e *range(4), 4 (0, 1, 2, 3, 4) \u003e\u003e\u003e [*range(4), 4] [0, 1, 2, 3, 4] \u003e\u003e\u003e {*range(4), 4} {0, 1, 2, 3, 4} \u003e\u003e\u003e {'x': 1, **{'y': 2}} {'x': 1, 'y': 2} {'x': 1, 'y': 2} matrix = [ [1, 2, 3] [4, 5, 6] ] [*sublist for sublist in matrix] Cell In [7], line 5 [*sublist for sublist in matrix] ^ SyntaxError: iterable unpacking cannot be used in comprehension ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:2:2","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"æ€»ç»“ Python çš„è§£åŒ…æ“ä½œç¬¦è®©ç¼–ç¨‹è½»æ¾å¾ˆå¤šã€‚å®ƒæä¾›äº†ä¸€ç§ç›´è§‚çš„è§£æ„å¯è¿­ä»£å¯¹è±¡çš„æ‰‹æ®µã€‚åœ¨è¿™ä¸ªæ“ä½œç¬¦çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…ä¸€äº›æ„šè ¢çš„ç´¢å¼•é”™è¯¯ğŸ™… ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:3:0","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"å‚è€ƒ Python iteratorsÂ â†©ï¸ PEP 3132. Extended Iterable UnpackingÂ â†©ï¸ PEP 448. Additional Unpacking GeneralizationsÂ â†©ï¸ ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:4:0","tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Python"],"content":"Python 3.6 å¼•å…¥çš„ f-strings çš„ç®€å•ä»‹ç»","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":" è¿™ä¸€ç¯‡åšå®¢ä¸€å¼€å§‹æ˜¯å†™åœ¨ jupyter notebook é‡Œé¢è€Œåè½¬æˆ markdown çš„ã€‚å¦‚æœæƒ³è¦è®¿é—®å’Œè¿è¡Œæœ¬æ¥çš„ notebookï¼Œè¯·æŸ¥é˜…è¿™ä¸ªä»“åº“ ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:0:0","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"å¼•è¨€ å­—ç¬¦ä¸²æ ¼å¼åŒ–ç»å¯¹å¯ä»¥ç®—å¾—ä¸Šæ—¥å¸¸ç”Ÿæ´»ä¸­æœ€ä¸ºå¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è¾“å‡ºå„ç§å­—ç¬¦ä¸²è¿˜éœ€è¦ç²¾ç¡®æ§åˆ¶å…¶æ ¼å¼ åœ¨ä¸€äº›è¿‡æ—¶çš„ Python æ•™ç¨‹ä¸Šï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä½¿ç”¨ % æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚ä½†å…¶å®åœ¨ Python 3.6 ä¹‹åï¼Œf-strings å·²ç»æˆäº†æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æœ€ä¼˜è§£ï¼Œä¼˜ç‚¹åŒ…æ‹¬ï¼š å¯ä»¥åœ¨å­—ç¬¦ä¸²å­—é¢å€¼ï¼ˆString literalï¼‰é‡Œé¢å†…åµŒè¡¨è¾¾å¼ å¯è¯»æ€§éå¸¸å¼º ä¸‹é¢çš„ç®€å•å¯¹æ¯”å°±å¯ä»¥çœ‹å‡º f-strings åœ¨å¯è¯»æ€§ä¸Šçš„ä¼˜åŠ¿ï¼š name = \"Martin\" f\"My name is {name}\" 'My name is Martin' name = \"Martin\" \"My name is %s\" % name 'My name is Martin' åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸¤ç§æ–¹å¼å®ç°äº†åŒæ ·åŠŸèƒ½çš„å­—ç¬¦ä¸²è¾“å‡ºã€‚ çœ‹ä¸€çœ¼ f-strings å°±çŸ¥é“è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯è¦è¾“å‡ºåå­—ï¼ˆå½“ç„¶è¿™è¦æ±‚ä½ ç”¨çš„æ˜¯æœ‰æ„ä¹‰çš„å˜é‡ï¼Œæ¯”å¦‚è¿™é‡Œç”¨çš„æ˜¯ nameï¼‰ã€‚è€Œå¦‚æœç”¨æ—§çš„ % å­—ç¬¦ä¸²æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œåˆ™ç¨å¾®æ˜¾å¾—ä¸é‚£ä¹ˆè‡ªç„¶ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šçœ‹åˆ° %s å ä½ç¬¦ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å‘å³çœ‹æ‰çŸ¥é“è¿™é‡Œä¼šæ”¾ç½®ä»€ä¹ˆå˜é‡ã€‚ è¿™é‡Œçš„ä¾‹å­ä¸é•¿æ‰€ä»¥æ²¡å•¥å·®åˆ«ï¼Œä½†æ˜¯å¦‚æœç”¨ % æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²å¾ˆé•¿çš„è¯ï¼Œçœ‹ä»£ç å°±ä¼šæœ‰å‰²è£‚æ„Ÿï¼Œä½ çš„çœ¼ç›éœ€è¦æ¥å›å·¦å³ç§»åŠ¨ã€‚è€Œä¸”è¿™ä¸ä»…ä»…æ˜¯é˜…è¯»ä»£ç ä¸Šä¸å¤§è‡ªç„¶ï¼Œå¦‚æœæ˜¯è‡ªå·±å†™å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¾—æ ¸å¯¹ä¸€éå ä½ç¬¦å’Œå˜é‡çš„é¡ºåºæ˜¯å¦ä¸€è‡´ï¼Œè¿™æ— ç–‘æ˜¯ä¸€ä¸ªè´Ÿæ‹…ã€‚ğŸ˜« ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:1:0","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"è¯­æ³•è§„åˆ™ f-strings çš„è¯­æ³•è§„åˆ™å¾ˆç®€å•ï¼Œä¸‹é¢æˆ‘å€Ÿç”¨1é‡Œé¢çš„å®šä¹‰ï¼š f'\u003ctext\u003e{\u003cexpression\u003e\u003coptional !s, !r, or !a\u003e \u003coptional:format_specifier\u003e }\u003ctext\u003e...' æ•´ä½“ä¸Šæ¥çœ‹å¯ä»¥å°†å…¶å½’çº³ä¸º f\"...\" æˆ–è€… f'...' è¿™ç§å½¢å¼ã€‚ åƒæ™®é€šçš„å­—ç¬¦ä¸²é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ç”¨å•å¼•å· '' æˆ–è€…åŒå¼•å· \"\" å°†å­—ç¬¦ä¸²çš„å†…å®¹æ‹¬èµ·æ¥ï¼Œå½“ç„¶ \"\"\"...\"\"\" è¿™ç§ä¸‰ä¸ªå¼•å·çš„ä¹Ÿæ˜¯ OK çš„ è‡³äºå…¶ä»–éƒ¨åˆ†ï¼Œæˆ‘ä»¬åˆ†æˆå‡ ä¸ªå°èŠ‚è¿›è¡Œè®²è§£ï¼š ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:2:0","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"\u003ctext\u003e æ”¾ç½®å­—ç¬¦ä¸²å­—é¢å€¼ï¼Œæœ€ç®€å•çš„ä½¿ç”¨åœºæ™¯æ˜¯ä¸å¸¦ä»»ä½•è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ï¼Œæ­¤æ—¶ f-strings å°±é€€åŒ–æˆäº†æ™®é€šå­—ç¬¦ä¸²ã€‚æ¯”å¦‚ f\"Hello world\"ã€‚å½“ç„¶è¿™å®Œå…¨æ²¡æœ‰å¿…è¦ç”¨ f-strings ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:2:1","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"{\u003cexpression\u003e} æˆ‘ä»¬å…ˆè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼š ä¸åŒ…å«ä»»ä½•å¯é€‰éƒ¨åˆ†ï¼ˆå³ä¸Šé¢è¯­æ³•ä¸­çš„ \u003coption...\u003e ï¼‰çš„ {expression} ä¸Šé¢å…¶å®å·²ç»æŒ‡æ˜äº†å¦‚ä½•åœ¨ f-strings é‡Œé¢åµŒå…¥è¡¨è¾¾å¼ï¼šåªè¦å°†å…¶æ”¾åœ¨ {} é‡Œé¢å³å¯ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ left, right = 3, 5 f\"{left} + {right} = {left + right}\" '3 + 5 = 8' ç”¨ {} æ¥å……å½“å ä½ç¬¦å°±å¾ˆè‡ªç„¶å¼•ç”³å‡ºä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœè¦åœ¨å­—ç¬¦ä¸²é‡Œé¢è¾“å‡º {} è¿™ä¸¤ä¸ªå­—ç¬¦æ€ä¹ˆåŠï¼Ÿ ç­”æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦ç”¨ {{expression}} è¿™ç§æ ¼å¼å³å¯ # 'hello' is an expression too. # Note that we need to use different quote syntax inside {} f\"{{'hello'}}\" \"{'hello'}\" å€¼å¾—ä¸€æçš„è¿˜æœ‰ï¼Œexpression é‡Œé¢ä¸å…è®¸å‡ºç° : å’Œ ! å’Œ \\ å®é™…ä¸Š expression é‡Œé¢ä¹Ÿå¾ˆå°‘ä¼šåŒ…å«è¿™å‡ ä¸ªå­—ç¬¦ã€‚\\ çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ç”¨æ¥è½¬ä¹‰ ' æˆ–è€… \"ï¼Œä½†å…¶å®åªè¦æˆ‘ä»¬å†…å¤–ç”¨çš„æ˜¯ä¸åŒçš„å¼•å·æ ¼å¼å³å¯ã€‚è‡³äº :ï¼Œåœ¨ PEP1 é‡Œé¢ä¸¾ä¾‹å¯èƒ½åº”ç”¨åœºæ™¯æ˜¯ lambda è¡¨è¾¾å¼ï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€ç”¨ä¸€å¯¹æ‹¬å·å°† lambda è¡¨è¾¾å¼æ‹¬èµ·æ¥å³å¯ï¼š # note that we need to add () around the lambda expression f\"{(lambda x: x + 1)(3)}\" '4' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:2:2","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"\u003coption...\u003e \u003coptional !s, !r, or !a\u003e è¿™å‡ ä¸ªæ˜¯ç”¨æ¥å¯¹ \u003cexpression\u003e åšç±»å‹è½¬æ¢çš„ {foo:!s} # it's equal to call str(foo) first {foo:!r} # similarily, call repr(foo) first {foo:!a} # similarilyï¼Œcall ascii(foo) first è¿™ä¸‰ä¸ªäº†è§£å³å¯ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šæ€ä¹ˆç”¨åˆ°ï¼ŒçœŸè¦ç”¨çš„è¯è¿˜æ˜¯è‡ªå·±ç›´æ¥è°ƒç”¨å¯¹åº”çš„å‡½æ•°ä¼šæ¯”è¾ƒç›´è§‚ï¼ŒPEP 4981 é‡Œé¢è‡ªå·±ä¹Ÿè¯´äº†è¿™ä¸‰ä¸ªåªæ˜¯ä¸ºäº†æœ€å°åŒ–å’Œä¹‹å‰çš„ str.format çš„å·®åˆ« \u003coptional:format_specifier\u003e è¿™ä¸€éƒ¨åˆ†å°±æ˜¯å¯¹å‰é¢ expression çš„å€¼è¿›è¡Œâ€œä¿®é¥°â€ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ§åˆ¶å°æ•°çš„ç²¾åº¦ï¼Œæˆ–è€…åšå­—ç¬¦ä¸²å¯¹é½ç­‰ç­‰ã€‚ä¸‹é¢æˆ‘ä¼šç®€å•è®²è®²å…¶ä¸­å‡ ä¸ªéƒ¨åˆ†ã€‚æ›´ä¸ºè¯¦ç»†çš„å®Œæ•´æ”¯æŒé€‰é¡¹å¯ä»¥å‚è€ƒ2 æ³¨æ„è¿™ä¸ªéƒ¨åˆ†çš„å¼€å¤´ç”¨çš„æ˜¯ :ï¼ˆè¿™ä¹Ÿä¸€å®šç¨‹åº¦ä¸Šè§£é‡Šäº†ä¸ºä»€ä¹ˆ Python ä¸å…è®¸ expression é‡Œé¢å‡ºç° :ï¼‰ å¯ä»¥å…ˆçœ‹çœ‹ format_specifier çš„è¯­æ³•æè¿°ï¼š [[fill]align][sign][z][#][0][width][,][grouping_option][.precision][type] åœ¨è¯­æ³•é‡Œé¢ï¼Œ[] è¡¨ç¤ºæ˜¯å¯é€‰é¡¹ [[fill]align] ä¸»è¦ç”¨æ¥å¯¹å­—ç¬¦ä¸²è¿›è¡Œè¾“å‡ºå¯¹é½ï¼Œè¿™é‡Œçš„ fill å¯ä»¥æ˜¯ä»»æ„çš„å­—ç¬¦ï¼ˆé»˜è®¤æƒ…å†µä¸‹æ˜¯ç©ºæ ¼ï¼‰ç”¨äºå¡«å……å‰©ä¸‹çš„éƒ¨åˆ† æ³¨æ„ï¼š[[fill]align] éœ€è¦å’Œ width ä¸€èµ·æ­é…ä½¿ç”¨ï¼Œæ²¡æœ‰æŒ‡å®šè¾“å‡ºå®½åº¦çš„æƒ…å†µä¸‹æ˜¯æ²¡æœ‰ç”¨çš„ align æ”¯æŒä¸‹é¢è¿™å‡ ç§å¯¹é½æ–¹å¼ï¼š \u003c # left-aligned \u003e # right-aligned ^ # centered = # only valid for numeric types, pad between sign and digits f\"{-1:*^9}\" # set `fill` to *, and set width to 9 '***-1****' f\"{-1:*\u003e9}\" # set `fill` to *, and set width to 9 '*******-1' f\"{-1:*\u003c9}\" # set `fill` to *, and set width to 9 '-1*******' f\"{-1:*=9}\" # set `fill` to *, and set width to 9 '-*******1' [sign] ç”¨äºæ§åˆ¶æ•°å€¼ç±»å‹çš„ç¬¦å·ä½æ˜¾ç¤ºï¼Œæ”¯æŒä¸‹é¢è¿™å‡ ç§ + # both positive and negative - # only negative (default) space # a leading spaces for positive and minus sign for negative f\"{1:+}\" '+1' f\"{-1:+}\" '-1' assert f\"{1}\" == f\"{1:-}\" # because it's the default behavior [z] åœ¨ Python 3.11 é‡Œé¢ï¼Œå¢åŠ äº†å¯é€‰çš„ z ç”¨æ¥å¤„ç† -0.ã€‚å› ä¸ºè°ƒæŸ¥æ˜¾ç¤º3ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¸æƒ³å¾—åˆ° -0.0 è¿™æ ·çš„è¾“å‡º x = -0.0001 f\"{x:.1f}\" # set the precision to 1, so it will round to -0.0 '-0.0' x = -0.0001 f\"{x:z.1f}\" # with z, we will get 0.0 rather than -0.0 '0.0' [#] å’Œ [type] [#] åªå¯¹ integerã€float å’Œ complex ç±»å‹æœ‰æ•ˆ integerï¼šä¼šæ ¹æ®ä½ é€‰æ‹©è¾“å‡ºçš„è¿›åˆ¶å¢åŠ ç›¸åº”çš„å‰ç¼€ï¼Œæ¯”å¦‚äºŒè¿›åˆ¶å°±å¢åŠ  0b float å’Œ complexï¼šæ€»æ˜¯è¾“å‡ºå°æ•°ç‚¹ï¼Œå°±ç®—å°æ•°ç‚¹ä¹‹åæ²¡æœ‰æ•°å­— å¦‚ä½•ç”¨ä¸åŒçš„è¿›åˆ¶æ˜¾ç¤ºï¼Ÿè¿™å°±æ˜¯ [type] çš„å·¥ä½œï¼š b # base 2 o # base 8 d # base 10 x # base 16, low-case letters X # base 16, upper-case letters f\"{15:#b}\" # represent 15 in base 2, use # to add prefix 0b '0b1111' f\"{15:#X}\" # represent 15 in base 16, use # to add prefix 0X '0XF' f\"{3:.0f}\" '3' f\"{3:#.0f}\" '3.' [0][width] width æ˜¯ç”¨æ¥æ§åˆ¶æ˜¾ç¤ºçš„æœ€å°é•¿åº¦ï¼Œå¦‚æœåŠ ä¸Š 0ï¼Œé‚£ä¹ˆå°±ä¼šåœ¨æ•°å€¼å‰é¢è¡¥ 0 f\"{123:5}\" # width 5 ' 123' f\"{123:05}\" # width 5 with leading 0 '00123' f\"{123.1:5}\" # Note: the width includes the decimal point char '123.1' [grouping_option] æŒ‡å®šåƒåˆ†ä½åˆ†éš”ç¬¦ï¼Œæœ‰ä¸¤ç§é€‰é¡¹45ï¼š _ , åœ¨æ•°å­—å¾ˆå¤§çš„æ—¶å€™ï¼Œè¿™ä¸¤ä¸ªåƒåˆ†ä½åˆ†éš”ç¬¦éƒ½ä¼šè®©å¯è¯»æ€§å¤§å¤§å¢å¼ºï¼ f\"{123456789:,}\" '123,456,789' f\"{1234.56789:,}\" '1,234.56789' f\"{123456789:_}\" '123_456_789' f\"{1234.56789:_}\" '1_234.56789' [.precision] æŒ‡å®šå°æ•°ç‚¹ä¹‹åè¦ä¿ç•™å‡ ä½ï¼Œä¼šè‡ªåŠ¨èˆå…¥ f\"{123.456:.2f}\" '123.46' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:2:3","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"æ€»ç»“ åœ¨æˆ‘åˆšå¼€å§‹å­¦ä¹  Python çš„æ—¶å€™ï¼Œå½“æ—¶çš„æ•™ç¨‹éƒ½æ˜¯åœ¨ç”¨ % æ¥æ ¼å¼åŒ–è¾“å‡ºï¼Œåæ¥çš„æ¨èæ˜¯ str.format æ–¹æ³•ã€‚è€Œåˆ°äº† f-string éšç€ Python 3.6 å‘å¸ƒä¹‹åï¼Œä¼¼ä¹ç»Ÿä¸€äº†å­—ç¬¦ä¸²è¾“å‡ºçš„ Best practiceï¼Œå¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ªã€‚è¿™ä¹Ÿæ˜¯ç¬¦åˆ Python è®¾è®¡å“²å­¦çš„â€”â€”åº”è¯¥åªæœ‰ä¸€ç§æ˜¾è€Œæ˜“è§çš„æ–¹å¼åšåˆ°ä¸€ä»¶äº‹ğŸš€ ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:0","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"å‚è€ƒ PEP 498. Literal String InterpolationÂ â†©ï¸Â â†©ï¸Â â†©ï¸ Format SpecificationsÂ â†©ï¸ PEP 682. Format Specifier for Signed ZeroÂ â†©ï¸ PEP 378. Format Specifier for Thousands SeparatorÂ â†©ï¸ PEP 515. Underscores in Numeric LiteralsÂ â†©ï¸ ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:4:0","tags":["Python"],"title":"f-strings in Python 3.6","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Python"],"content":"æµ·è±¡è¡¨è¾¾å¼çš„ç®€å•ä»‹ç»","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":" è¿™ä¸€ç¯‡åšå®¢ä¸€å¼€å§‹æ˜¯å†™åœ¨ jupyter notebook é‡Œé¢è€Œåè½¬æˆ markdown çš„ã€‚å¦‚æœæƒ³è¦è®¿é—®å’Œè¿è¡Œæœ¬æ¥çš„ notebookï¼Œè¯·æŸ¥é˜…è¿™ä¸ªä»“åº“ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:0:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"å¼•è¨€ ä»Šå¤©è¦è¯´çš„æ˜¯åœ¨ Python3.8 ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§ï¼šæµ·è±¡è¿ç®—ç¬¦ï¼ˆWalrus operatorï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤‡å—äº‰è®®çš„ç‰¹æ€§ï¼Œä½†å®ƒæœ€åè¿˜æ˜¯é€šè¿‡å¹¶å‘å¸ƒäº†ğŸ¤” åœ¨ Python ä¸­ï¼Œèµ‹å€¼è¯­å¥ï¼ˆ=ï¼‰å¹¶ä¸æ˜¯ expression è€Œæ˜¯ statementã€‚æµ·è±¡è¡¨è¾¾å¼åˆ™æ˜¯ expressionã€‚å…³äº statement å’Œ expression çš„åŒºåˆ«å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šexpression æ€»æ˜¯ä¼šè¿”å›å€¼ï¼Œè€Œ statement ä¸è¿”å›å€¼ã€‚ ä¸¤è€…çš„åŒºåˆ«å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š # `=` is a statement, so it will print no value x = 5 # `:=` is an expression, so it will evaluate to a value # not recommended :) (x := 5) 5 ğŸ“’ è¿™é‡Œæµ·è±¡è¡¨è¾¾å¼éœ€è¦åŠ ä¸Š () æ˜¯ä¸ºäº†é¿å…é€ æˆæ··æ·†ã€‚æ¯•ç«Ÿåœ¨ Pythonè®¾è®¡å“²å­¦-Zen é‡Œé¢æåˆ°äº†ä¸€æ¡ï¼šâ€œThere should be oneâ€“ and preferably only one â€“obvious way to do it.\"ã€‚å¦‚æœä¸åŠ  () å°±èƒ½ä½¿ç”¨çš„è¯ï¼Œå¼€å‘è€…å°±ä¼šé™·å…¥åˆ°è¯¥ç”¨å“ªä¸€ä¸ªçš„å›°æƒ‘ä¹‹ä¸­ğŸ¤•ï¸ åœ¨ C/C++ ä¸­ï¼Œ= æ˜¯ expressionã€‚å¦‚æœä½ æœ‰ç›¸å…³çš„ç¼–ç¨‹èƒŒæ™¯çš„è¯ï¼Œä½ å¯èƒ½å¯¹ä¸‹é¢çš„ä»£ç ä¸é™Œç”Ÿ // = will store the value in the LHS(left-hand-side) variable. // , and it has the value of the LHS // so we store the result of `foo` function call to `a` // , then we check if `a` \u003e 0 while ( (a = foo(...)) \u003e 0 ) { ... } ä½†æ˜¯åœ¨ Python 3.8 ä¹‹å‰æ˜¯æ— æ³•åšåˆ°ç±»ä¼¼çš„äº‹æƒ…çš„ï¼Œå› ä¸º = åœ¨ Python é‡Œé¢æ˜¯ä¸€ä¸ª statementï¼Œå¹¶ä¸ä¼šè¿”å›å€¼ã€‚è¿™å°±æ˜¯æµ·è±¡è¡¨è¾¾å¼å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ ğŸ¤© ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:1:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"è¯­æ³•è§„åˆ™ æµ·è±¡è¡¨è¾¾å¼çš„è¯­æ³•å¾ˆç®€å•ï¼šNAME := EXPRESSIONã€‚:= å·¦è¾¹æ”¾å˜é‡åï¼Œå³è¾¹åˆ™æ˜¯è¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼çš„å€¼ä¼šè¢«ç»‘å®šåˆ° NAME ä¸Šã€‚ è¿™é‡Œçš„ NAME ä¸èƒ½æ˜¯å±æ€§æˆ–è€…ç´¢å¼• # a dummy example. we bind `1 + 2 + 3` to `res` for future usage if (res := 1 + 2 + 3) \u003e 5: print(f\"res is {res}\") res is 6 class foo: val: int = 0 some_foo = foo() (some_foo.val := 1) Input In [4] (some_foo.val := 1) ^ SyntaxError: cannot use assignment expressions with attribute x = [1, 2, 3] (x[1] := 3) Input In [5] (x[1] := 3) ^ SyntaxError: cannot use assignment expressions with subscript å…³äº NAME çš„ä½œç”¨åŸŸ æµ·è±¡è¡¨è¾¾å¼ä¸ä¼šå¼•å…¥æ–°çš„ä½œç”¨åŸŸ ğŸ¤© NAME å¯ä»¥åœ¨å½“å‰çš„ä½œç”¨åŸŸä½¿ç”¨ï¼ŒåŒæ—¶æœ‰ä¸ªä¾‹å¤–ï¼šå¦‚æœæ˜¯åœ¨ list/dict/set comprehension é‡Œé¢ä½¿ç”¨ã€‚åˆ™æ˜¯æ˜¯åœ¨ enclosing scope é‡Œé¢. å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š s = [1, 2, 3] # the list comprehension forms a new scope. # its enclosing scope is the global scope double_s = [item * 2 for item in s] # `item` is not in the global scope :) print(item) --------------------------------------------------------------------------- NameError Traceback (most recent call last) Input In [6], in \u003ccell line: 7\u003e() 4 double_s = [item * 2 for item in s] 6 # `item` is not in the global scope :) ----\u003e 7 print(item) NameError: name 'item' is not defined s = [1, 2, 3] # the list comprehension forms a new scope. # its enclosing scope is the global scope double_s = [last := item * 2 for item in s] # so we can use `last` variable here print(last) ä¼˜å…ˆçº§è§„åˆ™ï¼šé™¤äº†æ¯” , é«˜ï¼Œæ¯”å…¶ä»–çš„éƒ½ä½ x = 1, 2 x (1, 2) (x := 1, 2) x 1 ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:2:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"é€‚ç”¨åœºæ™¯ ğŸ“’ ç»“åˆå‚è€ƒäº†1çš„å†…å®¹å’Œå¹³å¸¸çš„ç¼–ç¨‹ç»éªŒã€‚æ„Ÿè§‰æµ·è±¡è¡¨è¾¾å¼æœ€æ–¹ä¾¿çš„è¿˜æ˜¯ï¼šå¤„ç†è¿”å›å€¼å¯èƒ½ä¸º None çš„å‡½æ•° å¯¹äºè¿”å›å€¼å¯èƒ½ä¸º None çš„å‡½æ•°ï¼Œä»¥å‰ç»å¸¸æ˜¯å…ˆç”¨ = èµ‹å€¼è¯­å¥ä¿å­˜å‡½æ•°çš„è¿”å›ç»“æœã€‚ä¸ä¸º None çš„æ—¶å€™è¦ä½¿ç”¨è¿”å›å€¼æ¥è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚æ­¤æ—¶ä»£ç çœ‹èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·ï¼š some_thing = foo(....) if some_thing: ... else: ... ä¸‹é¢ç”¨ re åº“ä¸¾ä¾‹å­ import re # define a regex pattern to extract digits in a string DIGIT_PATTERN = r'\\d+' text = 'There are 10 dogs' # re.search will return None if no match was found. match = re.search(DIGIT_PATTERN, text) if match: # group(0) will return the entire match print(f\"Find match: {match.group(0)}\") else: print(\"Not match was found\") Find match: 10 ä¸ºäº†èƒ½åœ¨åé¢ä½¿ç”¨ match.group() çš„æ—¶å€™ Python è§£é‡Šå™¨ä¸ä¼šè¿”å› AttributeError: 'NoneType' object has no attribute 'group' é”™è¯¯ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ç”¨ä¸€ä¸ªä¸­é—´å˜é‡ match æš‚æ—¶ä¿å­˜ re.search çš„è¿”å›å€¼å¯¹å…¶è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¾å¾—ä¼¼ä¹æœ‰ç‚¹å†—ä½™ã€‚æˆ‘ä»¬æ— æ³•ç›´æ¥å°†ä»–ä»¬è¿èµ·æ¥ï¼šre.search(DIGIT_PATTERN, text).group(0) ğŸ“’ æ’ç‚¹é¢˜å¤–è¯ï¼šåœ¨ Rust é‡Œé¢ï¼Œå¯èƒ½è¿”å› None çš„è¿”å›ç±»å‹æ˜¯ Option\u003cT\u003eã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ? æ¥å¤„ç†è¿™ç§æƒ…å†µï¼Œå®ƒä¼šå°è¯•æå–é‡Œé¢çš„å€¼ï¼Œå¦‚æœå¤±è´¥äº†å°±ä¼šå°½æ—©ç»ˆæ­¢æŠ¥é”™ã€‚æ‰€ä»¥åœ¨ Rust é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼ˆå‡è®¾ Rust ä¹Ÿæœ‰ç±»ä¼¼çš„ APIï¼‰ï¼šre.search(DIGIT_PATTERN, text)?.group(0) ğŸº å¦å¤–ä¸€ç‚¹æ˜¯ï¼šå¯è¯»æ€§ç¨å¼±ï¼Œå½“ç„¶è¿™æ˜¯ä¸ªäººçš„ä¸»è§‚æ„Ÿå—ã€‚æœ‰ä¸€ç‚¹ä¸èˆ’æœæ˜¯ï¼šåªæœ‰å¯èƒ½åœ¨ match is not None çš„æ—¶å€™æˆ‘ä»¬æ‰ä¼šä½¿ç”¨ match å˜é‡ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨ else åˆ†æ”¯é‡Œé¢ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœå¾ˆå¿«åœ°ä»ä¸Šå¾€ä¸‹çœ‹ä»£ç çš„è¯ï¼Œå•ç‹¬å¦èµ·ä¸€è¡Œçš„ match = ... å°±åƒæ˜¯åé¢éƒ½å¯ä»¥ä½¿ç”¨ä¸€æ ·ğŸ¤£ æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç”¨ := æ¥ç»‘å®šå…¶è¿”å›å€¼ if match := re.search(DIGIT_PATTERN, text): # group(0) will return the entire match print(f\"Find match: {match.group(0)}\") else: print(\"Not match was found\") Find match: 10 1 é‡Œé¢æåˆ°æ”¯æŒ := çš„ä¸€ä¸ªç†ç”±æ˜¯ï¼šè°ƒæŸ¥æ˜¾ç¤ºï¼Œå¼€å‘è€…å¾€å¾€å–œæ¬¢å†™æ¯”è¾ƒå°‘è¡Œçš„ä»£ç è€Œä¸æ˜¯è®©ä»£ç æ›´çŸ­ã€‚è¿™é‡Œæˆ‘ä»¬å°±å°‘å†™äº†ä¸€è¡Œä»£ç ã€‚åŒæ—¶çœ‹ä¸€çœ¼å°±çŸ¥é“ match çš„ä½œç”¨åŸŸğŸ‘ ç±»ä¼¼çš„ï¼Œåœ¨ while å¾ªç¯ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥å€Ÿç”¨è¿™ä¸ªç‰¹æ€§ val = foo(...) while val: # do something while val is not None val = foo(...) ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:3:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"ğŸ†š = å‡ ä¸ªå€¼å¾—ä¸€æçš„ä¸åŒï¼š = æ˜¯ statementï¼Œ:= æ˜¯ expressionã€‚è¿™ä¹Ÿå†³å®šäº†ä»–ä»¬çš„é€‚ç”¨åœºæ™¯æ˜¯ä¸åŒçš„ åªæœ‰ = æ”¯æŒfoo = bar = 1 è¿™ç§è¿ç»­ä½¿ç”¨çš„æƒ…å†µï¼›è€Œä¸” = å·¦è¾¹å¯ä»¥æ˜¯ foo.bar è¿™ç§å±æ€§ï¼Œæˆ–è€…æ˜¯ foo[1] è¿™ç§ç´¢å¼•çš„å½¢å¼ï¼Œä½†æ˜¯ := å·¦è¾¹åªèƒ½æ˜¯ä¸€ä¸ªç®€å•çš„å˜é‡å = æ”¯æŒ += è¿™ç§ augmented çš„å½¢å¼ï¼Œä½†æ˜¯ := ä¸è¡Œ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:4:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"æ€»ç»“ åœ¨æˆ‘çœ‹æ¥ï¼Œæµ·è±¡è¡¨è¾¾å¼åœ¨æˆ‘å‰é¢æåˆ°çš„å¼•ç”¨åœºæ™¯ä¸­æ˜¯æŒºæœ‰ç”¨çš„ï¼ˆæ¨èä½¿ç”¨ğŸ‘ï¼‰ï¼Œå¯è¯»æ€§æé«˜ä¸å°‘ğŸš€ã€‚ä½†æ˜¯1ä¸­çš„æŸäº›ä¾‹å­æˆ‘è§‰å¾—å¯èƒ½æ˜¯è´Ÿä¼˜åŒ–äº†ğŸ‘€ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:5:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"å‚è€ƒ PEP 572. Assignment ExpressionsÂ â†©ï¸Â â†©ï¸Â â†©ï¸ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:6:0","tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Python"],"content":"Python 3.10 çš„ pattern matching çš„ç®€å•ä»‹ç»","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":" è¿™ä¸€ç¯‡åšå®¢ä¸€å¼€å§‹æ˜¯å†™åœ¨ jupyter notebook é‡Œé¢è€Œåè½¬æˆ markdown çš„ã€‚å¦‚æœæƒ³è¦è®¿é—®å’Œè¿è¡Œæœ¬æ¥çš„ notebookï¼Œè¯·æŸ¥é˜…è¿™ä¸ªä»“åº“ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:0:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"å¼•è¨€ ä»Šå¤©æˆ‘æƒ³è¦è°ˆä¸€ä¸‹ Python 3.10 æå‡ºçš„æ–°ç‰¹æ€§1â€”â€”æ¨¡å¼åŒ¹é…ğŸ‰ å­¦ä¹ è¿‡ C è¯­è¨€çš„äººæƒ³å¿…å¯¹ä¸‹é¢çš„ switch è¯­å¥ä¸é™Œç”Ÿï¼Œ switch (expression) { case constant_1: // statements break; case constant_2: // statements break; // Fall through // the value of the expression can be either constant_3 or constant_4 :) case constant_3: case constant_4: // statements default: // default statements } æ¦‚æ‹¬ä¸€ä¸‹ï¼ŒC è¯­è¨€çš„ switch è¯­å¥çš„å‡ ç‚¹è§„åˆ™ï¼š expression å¿…é¡»æ˜¯ int æˆ–è€… char ç±»å‹ï¼›constant å¿…é¡»æ˜¯ int æˆ– char å¸¸é‡ switch è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼š è®¡ç®—å‡º expression çš„å€¼ï¼Œæ‹¿ç€è¿™ä¸ªå€¼ä»ä¸Šåˆ°ä¸‹æ£€æŸ¥æ˜¯å¦å’ŒæŸä¸€æ¡ case è¯­å¥çš„ constant ç›¸ç­‰ï¼Œå¦‚æœä¸€æ ·å°±ä¼šæ‰§è¡Œé‡Œé¢çš„ statements å’Œåé¢çš„ case è¯­å¥çš„ statementsï¼Œé™¤éé‡åˆ°äº† breakã€‚è¿™ä¸ªç‰¹æ€§å«åš Fall throughï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå°†å¤šä¸ª case è¯­å¥å †å åœ¨ä¸€èµ·ï¼Œè¡¨ç¤ºé€»è¾‘ä¸Šçš„ã€Œæˆ–ã€çš„å…³ç³» å­˜åœ¨ default è¡¨ç¤ºé»˜è®¤æƒ…å†µï¼Œç”¨äºå…œåº•ï¼Œå½“å‰é¢çš„ case è¯­å¥éƒ½åŒ¹é…å¤±è´¥çš„æ—¶å€™æ‰§è¡Œ Python åˆ™å¹¶æ²¡æœ‰æä¾› switch è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ if...elif..elif..else è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾æˆ‘ä»¬è¦æ ¹æ® list çš„é•¿åº¦æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š some_list = [1, 2, 3, 4, 5] if len(some_list) == 1: # do something when the length is 1 ... # or more pythonic way: elif len(some_list) in [3, 5]: elif len(some_list) == 3 or len(some_list) == 5: # do something when the length is 3 or 5 ... else: ... ä¸Šé¢è¿™ä¸€è¿ä¸²çš„ if...elif..elif..else å…¶å®å¯è¯»æ€§ç¨å¾®å·®äº›ï¼Œå¦å¤–å®ƒè¿˜è¿åäº† DRY(Donâ€™t repeat yourself) åŸåˆ™ï¼Œæˆ‘ä»¬å¤šæ¬¡å†™ä¸‹ len(some_list) å½“ç„¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©å…ˆç”¨ä¸€ä¸ªå˜é‡ length è®°ä½ some_list çš„é•¿åº¦ï¼Œè¿™æ ·å°±å¯ä»¥è®©æˆ‘ä»¬å°‘æ‰“ä¸€äº›ä»£ç ï¼Œä½†è‹¥æƒ…å†µæ›´å¤æ‚å†™ï¼Œè¿™ä¸ªæŠ€å·§ä¹Ÿä¸é€‚ç”¨äº† è§£å†³ä¸Šé¢çš„ä¸€ä¸ªæ›´ä¼˜é›…çš„æ–¹å¼å°±æ˜¯æœ¬æ–‡è¦è®²åˆ°çš„ï¼šPattern matching â¬‡ï¸ match len(some_list): case 1: # do something when the length is 1 ... case 3 | 5: # do something when the length is 3 or 5 ... case _: # equal to the `default:` ... ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:1:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"åŸºæœ¬çš„è¯­æ³• ä¸‹é¢æˆ‘ç»™å‡º Pattern matching çš„åŸºæœ¬è¯­æ³• match subject: case \u003cpattern_1\u003e: \u003caction_1\u003e case \u003cpattern_2\u003e: \u003caction_2\u003e case \u003cpattern_3\u003e: \u003caction_3\u003e # [Optional] wildcard to cover all situations case _: \u003caction_wildcard\u003e ä»è¯­æ³•ä¸Šçœ‹ï¼Œå’Œå‰é¢ C è¯­è¨€çš„ switch è¯­å¥å·®ä¸å¤šã€‚åŒºåˆ«åœ¨äºï¼š è™½ç„¶éƒ½æ˜¯ä»ä¸Šåˆ°ä¸‹è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯ Python çš„ pattern matching ä¸å­˜åœ¨ Fall through æƒ…å†µï¼Œåªä¼šæ‰§è¡ŒåŒ¹é…çš„ case è¯­å¥é‡Œé¢çš„ä»£ç ã€‚æ‰§è¡Œå®Œå°±é€€å‡ºã€‚æ‰€ä»¥ä¹Ÿä¸ç”¨åœ¨æ¯ä¸ª case çš„ä»£ç å—é‡Œæœ€ååŠ ä¸€ä¸ª break æ²¡æœ‰ default å…³é”®å­—ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ case _ æ¥æ•è·æ‰€æœ‰çš„æƒ…å†µï¼Œè¿™å…¶å®ç”¨åˆ°äº†åé¢ä¼šè®²åˆ°çš„ Wildcard pattern è¿™é‡Œçš„ subject å’Œ pattern æ¯” C è¯­è¨€çš„å¼ºå¤§å¤šäº†ï¼Œä¸ä»…ä»…æ˜¯æ•´å‹å’Œå­—ç¬¦ç±»å‹ï¼Œpattern å½¼æ­¤ä¹‹é—´è¿˜å¯ä»¥ç»„åˆåµŒå¥—ã€‚åé¢ä¼šå¯¹å…¶è¿›è¡Œè¯¦ç»†è¯´æ˜ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:2:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Patterns åœ¨ pattern matching é‡Œé¢ï¼ŒPattern ä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªä½œç”¨ï¼š å¯¹ subject çš„ç»“æ„è¿›è¡Œçº¦æŸï¼ˆstructure constraitï¼‰ å¯ä»¥ä½¿ç”¨å˜é‡ç»‘å®š subject çš„æŸäº›éƒ¨åˆ†ï¼ˆbind variablesï¼‰ï¼Œç”¨äºåç»­çš„å¤„ç†ï¼Œè§ Capture pattern ä¸‹é¢æˆ‘ä»¬å¯¹ä¸åŒçš„ patterns è¿›è¡Œæ¢è®¨ :) ä¸ºäº†é¿å…é€ æˆå›°æƒ‘ï¼Œæœ‰å¿…è¦æå‰è¿›è¡Œä¸€ä¸‹è¯´æ˜ï¼šåœ¨ pattern matching åŒ¹é…åºåˆ—æ—¶å€™ï¼Œ() å’Œ [] éƒ½æ˜¯å¯é€‰çš„ã€‚æ¯”å¦‚ï¼Œcase foo, bar å’Œ case (foo, bar) å’Œ case [foo, bar] éƒ½æ˜¯ç­‰ä»·çš„ã€‚è¿™ç‚¹å’Œæˆ‘ä»¬ç»™åºåˆ—åš unpacking çš„æ—¶å€™ä¸€è‡´ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Capture pattern Capture pattern çš„æ„æ€æ˜¯è¯´æˆ‘ä»¬åœ¨æ£€æŸ¥ pattern æ˜¯å¦åŒ¹é…çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨å˜é‡åç»‘å®šåˆ°å®ƒçš„ä»»æ„ä¸€ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŒ¹é…æˆåŠŸä¹‹åä½¿ç”¨è¿™äº›å˜é‡ some_list = [\"foo\", \"bar\"] match some_list: # we want to match a seq which has length = 2 # , we also use `first` and `second` to capture \\ # the 1st and 2nd elements here. case [first, second]: # we can access first, second now print(f'the 1st element: {first}, 2nd element: {second}') the 1st element: foo, 2nd element: bar ç»å¸¸è·Ÿåºåˆ—æ‰“äº¤é“çš„äººæƒ³å¿…å¯¹ä¸‹é¢çš„ä»£ç ä¸ä¼šé™Œç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ *\u003cname\u003e æ¥ unpacking *before, last = [1, 2, 3, 4] assert last == 4, \"Error\" first, *middle, last = [1, 2, 3, 4] assert first == 1 and last == 4, \"Error\" first, *rest = [1, 2, 3, 4] assert first == 1, \"Error\" ç±»ä¼¼çš„ï¼Œåœ¨ pattern matching é‡Œé¢ä¹Ÿå¯ä»¥è¿™æ ·ï¼Œç”¨ä¸€ä¸ªå˜é‡æ•è·å¤šä¸ªå€¼ some_list = [\"foo\", \"bar\", \"another_foo\", \"another_bar\"] match some_list: # we want to match a seq # , we also use `*rest` to capture the remaining elements case [first, *rest]: print(f'the 1st element: {first}, 2nd element: {rest}') the 1st element: foo, 2nd element: ['bar', 'another_foo', 'another_bar'] ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:1","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Literal pattern Literal pattern æŒ‡çš„æ˜¯æˆ‘ä»¬å¯ä»¥æŒ‡å®šå­—é¢å€¼æ¥å¯¹ Pattern è¿›è¡Œçº¦æŸã€‚è¿™é‡Œçš„å­—é¢å€¼å¯ä»¥æ˜¯ number literal, string literals, True, False è¿˜æœ‰ None ğŸ“’ å¯¹äº number literals å’Œ string literals è¿™ä¸¤è€… Python ä¼šä½¿ç”¨ == è¿›è¡Œæ¯”è¾ƒï¼Œè€Œå¯¹äº True/False/None è¿™ä¸‰ä¸ªåˆ™æ˜¯ä½¿ç”¨ is æ¥è¿›è¡Œåˆ¤æ–­ã€‚æ³¨æ„è¿™ä¸ªç»†èŠ‚ some_list = [\"foo\", \"bar\"] match some_list: # we want to match a seq which has length = 2 # , the 1st element should be equal to \"foo\" # , and we use `second` to capture the 2nd element case [\"foo\", second]: print(f'the 2nd element: {second}') the 2nd element: bar some_list = [True] match some_list: case [1]: print(f'Matched, 1 == True') Matched, 1 == True ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:2","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Wildcard pattern è¿™ä¸ªå…¶å®åœ¨ Python é‡Œé¢æŒºå¸¸è§ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨ _ è¡¨ç¤ºæˆ‘ä»¬ä¸å…³å¿ƒæŸä¸ªå˜é‡æ˜¯å¤šå°‘ã€‚åœ¨ pattern matching é‡Œé¢ï¼Œ_ ä¼šå’Œä»»ä½•çš„ä¸œè¥¿åŒ¹é…ï¼Œä½†æ˜¯ä¸ä¼šç»‘å®šä»»ä½•å˜é‡ some_list = [\"foo\", \"bar\"] match some_list: # we want to match a seq which has length = 2 # , the 1st element should be equal to \"foo\" # , and we use `_` to ignore the 2nd value case [\"foo\", _]: print(f'the 2nd value: {_}') # you should see empty output because we aren't binding value here the 2nd value: å¦å¤–ä¸€ä¸ªå¸¸è§çš„ç”¨æ³•å°±æ˜¯ä¹‹å‰å‡ºç°è¿‡çš„ case _ï¼Œå› ä¸º _ä¼šåŒ¹é…ä»»ä½•æƒ…å†µï¼Œæ‰€ä»¥å¸¸å¸¸æŠŠ case _ æ”¾åœ¨æœ€åè¡¨ç¤ºé»˜è®¤æƒ…å†µ some_list = [\"foo\", \"bar\"] match some_list: # this case branch will not be matched case [\"bar\", _]: print('Match successfully') case _: print('Default case') Default case ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:3","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Or pattern å°±åƒ if æ¡ä»¶è¯­å¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ or è¡¨ç¤ºå¤šç§å¯èƒ½çš„åŒ¹é…æƒ…å†µï¼Œåœ¨ pattern matching é‡Œé¢æˆ‘ä»¬ä¹Ÿæœ‰ç±»ä¼¼çš„è¯­æ³•ã€‚è·Ÿå…¶ä»–å¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼ŒPython é€‰æ‹©ä½¿ç”¨ | æ¥è¡¨è¾¾ã€Œæˆ–ã€çš„é€»è¾‘å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿å£°æ˜å¤‡é€‰é¡¹ some_list1 = [\"foo\"] some_list2 = [\"bar\"] match some_list1: # we want to match a seq which has length = 1 # , the 1st element can be \"foo\" or \"bar\" case [\"foo\" | \"bar\"]: print('[First match] Match foo or bar') match some_list2: case [\"foo\" | \"bar\"]: print('[Second match] Match foo or bar') [First match] Match foo or bar [Second match] Match foo or bar ä¸Šé¢çš„ Or pattern çš„ç¼ºç‚¹æ˜¯ï¼šæˆ‘ä»¬æ— æ³•çŸ¥é“æˆ‘ä»¬å…·ä½“åŒ¹é…åˆ°äº†ä»€ä¹ˆå“ªä¸€ä¸ª ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:4","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"As pattern åœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½åŒ¹é…åˆ°å¤šä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆå¦‚ä½•çŸ¥é“æˆ‘ä»¬å…·ä½“åŒ¹é…åˆ°å“ªä¸€ä¸ªé€‰é¡¹å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“åŒ¹é…åˆ°çš„ä¸œè¥¿æ¥å†³å®šè¦å¦‚ä½•å¤„ç†ã€‚åœ¨ pattern matching é‡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨ as æ¥ç»‘å®šå˜é‡ some_list = [\"foo\"] match some_list: # we want to match a seq which has length = 1 # , the 1st element can be \"foo\" or \"bar\" # we bind matched string literal with `matched_element` case (\"foo\" | \"bar\") as matched_element: print(f'Match {matched_element}') ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:5","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Class pattern Python æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹è¯­è¨€ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¼šæœ‰éœ€è¦æ ¹æ®ç±»å‹æ¥å†³å®šæ˜¯å¦è¦åŒ¹é…çš„æ—¶å€™ã€‚æˆ‘ä»¬å½“ç„¶å¯ä»¥é€‰æ‹©è‡ªå·±åœ¨åé¢ä½¿ç”¨ isinstance() æ¥åˆ¤æ–­ï¼Œä½†è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚ä¸‹é¢æˆ‘å°†ä»ä»åŸºæœ¬çš„ä¾‹å­å‡ºå‘å¸¦å¤§å®¶çœ‹çœ‹å¦‚ä½•åŠ ä¸Šç±»å‹çº¦æŸ some_list = [\"foo\", 1, 3.14] match some_list: # match without type constraints case [s, v1, v2]: if isinstance(s, str) and isinstance(v1, int) and isinstance(v2, float): print(f'Match {s} - {v1} - {v2}') Match foo - 1 - 3.14 ç¬¬ä¸€ä¸ªå†™æ³•ï¼šè€ƒè™‘ç”¨ Capture patternï¼Œç±»å‹çº¦æŸæ”¾ä»£ç å—é‡Œ some_list = [\"foo\", 1, 3.14] match some_list: # match with type constraints case [str() as s, int() as v1, float() as v2]: print(f'Match {s} - {v1} - {v2}') Match foo - 1 - 3.14 æ­¤æ—¶æˆ‘ä»¬åœ¨ pattern é‡ŒåŠ ä¸Šç±»å‹çº¦æŸï¼Œè¿™é‡Œå†™æ³•ä¸Šç±»ä¼¼ Literal patternï¼Œæˆ‘ä»¬åœ¨å¯¹åº”ä½ç½®å£°æ˜æˆ‘ä»¬æƒ³è¦åŒ¹é…çš„ç±»å‹ï¼ŒåŒæ—¶ä¸ºäº†åé¢èƒ½è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜éœ€è¦ as å…³é”®å­—å°†å…¶ç»‘å®šåˆ°å˜é‡ä¸Šã€‚ä½†ä¸Šé¢çš„å†™æ³•è¿‡äºå†—é•¿ï¼Œå¥½åœ¨ Python ä¸ºæˆ‘ä»¬æä¾›äº†è¯­æ³•ç³–ğŸ¬ some_list = [\"foo\", 1, 3.14] match some_list: # match with type constraints case [str(s), int(v1), float(v2)]: print(f'Match {s} - {v1} - {v2}') Match foo - 1 - 3.14 ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:6","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Mapping pattern å‰é¢éƒ½æ˜¯å¯¹äºä¸€ä¸ªåºåˆ—çš„åŒ¹é…ï¼Œè¿™é‡Œåˆ™æ˜¯å¯¹ dict çš„åŒ¹é…ã€‚ç›¸ä¿¡åœ¨çœ‹å®Œå‰é¢çš„å„ç§ pattern çš„ä¾‹å­ä¹‹åï¼Œç†è§£ dict çš„åŒ¹é…ä¹Ÿæ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚ä½†æœ‰ä¸‹é¢å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼š dict çš„åŒ¹é…æ˜¯é€šè¿‡é™åˆ¶ Key-Value çš„ç»“æ„ã€‚å…¶ä¸­ Key å¿…é¡»æ˜¯å­—é¢å€¼æˆ–è€…æšä¸¾ç±»å‹çš„å€¼ï¼ˆå‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼‰ï¼ŒValue åˆ™æ²¡æœ‰è¿™ä¸ªé™åˆ¶ ä½¿ç”¨ **\u003cname\u003e æ¥æ•è·æˆ‘ä»¬æ²¡æœ‰å†™åœ¨ pattern é‡Œé¢çš„ Key-Value pairã€‚å¦åˆ™é»˜è®¤æ˜¯å¿½ç•¥æ‰çš„ ä½†æ˜¯ **_ æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæœ¬æ¥å°±å¿½ç•¥æ‰ï¼Œè€Œ **_ ä¸­çš„ _ è¡¨ç¤ºä¸ç»‘å®šä»»ä½•åŒ¹é…çš„ä¸œè¥¿ï¼Œçº¯ç²¹æ˜¯å¤šæ­¤ä¸€ä¸¾ some_dict = { 'first_name': 'foo', 'second_name': 'bar' } match some_dict: case {'first_name': first_name}: print(f'[First match] The first_name: {first_name}') match some_dict: case {'first_name': first_name, **rest}: print(f'[Second match] The rest: {rest}') [First match] The first_name: foo [Second match] The rest: {'second_name': 'bar'} ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:7","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Value pattern ä½¿ç”¨ã€Œæœ‰åå­—çš„å˜é‡ã€ä½œä¸ºå‚æ•°å€¼æˆ–æ¾„æ¸…ç‰¹å®šå€¼çš„å«ä¹‰æ˜¯å¾ˆå¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œè¿™æ˜¯ Literal pattern æ¬ ç¼ºçš„ã€‚æ¯”å¦‚ case (HttpStatus.OK, body) æ˜¯æ¯” case (200, body) å¥½çš„ åœ¨ Python é‡Œé¢è¦å®ç° Value pattern çš„æŒ‘æˆ˜æ˜¯è¦å’Œå‰é¢çš„ Capture pattern åŒºåˆ†å¼€ï¼Œè¦è®© Python å¯ä»¥åŒºåˆ†æˆ‘ä»¬æ˜¯è¦åŠ ä¸€ä¸ªã€Œæœ‰åå­—çš„å¸¸é‡ã€è¿™ä¸ªçº¦æŸè¿˜æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ Capture pattern ç»‘å®šå˜é‡ã€‚å…³äºè¿™ç‚¹çš„è®¨è®ºå¯ä»¥å‚è§2 æœ€å Python æä¾›çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ä¸ªå—é™çš„ Value patternï¼Œå®ƒä»…æ”¯æŒ foo.bar è¿™ç§å½¢å¼çš„ Value patternã€‚æ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ç”¨äºæšä¸¾ç±»å‹ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ from enum import Enum class HttpStatusCode(Enum): CONTINUE = 100 OK = 200 some_list = [HttpStatusCode[\"OK\"]] match some_list: case [HttpStatusCode.OK as status_code]: print(f\"Receive {status_code}\") Receive HttpStatusCode.OK ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:8","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"å°† Pattern matching ç”¨åœ¨ä¸€ä¸ªç±»ä¸Š å¦‚æœåªèƒ½å°† pattern matching ç”¨åœ¨å†…å»ºçš„ç±»å‹ä¸Šï¼Œä¼¼ä¹ç”¨å¤„æ²¡æœ‰é‚£ä¹ˆå¤§ã€‚ä½†å…¶å® Python è¿˜å…è®¸æˆ‘ä»¬å¯¹è‡ªå·±è‡ªå®šä¹‰çš„ç±»çš„å¯¹è±¡ä½¿ç”¨ pattern matchingã€‚ è€ƒè™‘åˆ°åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯¹ä¸€ä¸ªå¯¹è±¡åš pattern matching çš„æ—¶å€™å¸¸å¸¸æ˜¯æƒ³è¦æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªç±»ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½å…³å¿ƒå®ƒçš„æŸäº›å­—æ®µï¼Œæƒ³è¦æå–å¯¹åº”çš„å­—æ®µçš„å€¼ã€‚ä½†æ˜¯åœ¨ Python é‡Œï¼Œè¿™ä¸ªå®ç°èµ·æ¥æœ‰å›°éš¾2ï¼Œä¸»è¦æ˜¯ç±»çš„å­—æ®µéå¸¸å¤šï¼Œå¤§éƒ¨åˆ†æ˜¯ __repr__ è¿™ç§ magic methodsï¼Œè€Œä¸”è¿™äº›å­—æ®µæ˜¯æ— åºçš„ã€‚å› ä¸ºæ˜¯æ— åºçš„ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥åœ¨ pattern é‡Œé¢æŒ‰ä½ç½®ç»‘å®šå˜é‡ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" def __init__(x: int, y: int): self.x = x self.y = y some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x, y): print(f\"The x: {x}\") print(f\"The y: {y}\") --------------------------------------------------------------------------- TypeError Traceback (most recent call last) Input In [17], in \u003ccell line: 7\u003e() 4 self.x = x 5 self.y = y ----\u003e 7 some_point = Point(1, 2) 9 match some_point: 10 # the intuitive way, we want to match a Point type 11 # , and we want to bind the `x` and `y` and their two fields respectively 12 case Point(x, y): 13 print(f\"The x: {x}\") 14 print(f\"The y: {y}\") TypeError: Point.__init__() takes 2 positional arguments but 3 were given Python æä¾›äº†ä¸¤ç§è§£å†³åŠæ³•ï¼Œä»è¯­æ³•ä¸Šçœ‹ï¼Œè·Ÿæˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™éå¸¸åƒï¼šæˆ‘ä»¬å¯ä»¥é€‰æ‹©æŒ‰ç…§ä½ç½®ä¼ é€’å‚æ•°ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨ foo=bar è¿™ç§å½¢å¼ å…ˆè¯´ç®€å•çš„è¿™ç§ï¼šç”¨ foo=bar çš„å½¢å¼å¯¹å­—æ®µè¿›è¡Œçº¦æŸï¼Œå¹¶ä¸”ç»‘å®šå˜é‡åˆ°å­—æ®µä¸Šã€‚ foo=bar çš„æ„æ€æ˜¯æˆ‘ä»¬è¦æ±‚è¿™ä¸ªç±»æœ‰ foo å­—æ®µï¼ŒåŒæ—¶æˆ‘ä»¬æƒ³è¦å°† bar ç»‘å®šåˆ°å®ä¾‹ä¸Šçš„ foo å­—æ®µä¸Š class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" def __init__(self, x: int, y: int): self.x = x self.y = y some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x=x, y=y): print(f\"The x: {x}\") print(f\"The y: {y}\") The x: 1 The y: 2 å¦å¤–ä¸€ç§è§£å†³åŠæ³•æ˜¯ï¼šä¿®æ”¹ç±»çš„ __match_args__ å±æ€§ï¼Œè¯¥å±æ€§è§„å®šäº†å­—æ®µçš„é¡ºåº class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" # we tell python that the order is first \"x\" and then \"y\" __match_args__ = (\"x\", \"y\") def __init__(self, x: int, y: int): self.x = x self.y = y some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x, y): print(f\"The x: {x}\") print(f\"The y: {y}\") The x: 1 The y: 2 å¦‚æœä½ å¯¹ @dataclass å¾ˆç†Ÿæ‚‰çš„è¯3ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å¤§å¤§ç®€åŒ–ï¼Œçœ‹ä¸‹é¢ from dataclasses import dataclass @dataclass(match_args=True) class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" x: int y: int print(f\"The order is {Point.__match_args__}\") some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x, y): print(f\"The x: {x}\") print(f\"The y: {y}\") The order is ('x', 'y') The x: 1 The y: 2 ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:4:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"Guard æœ‰æ—¶å€™æˆ‘ä»¬ä¸ä»…å…³å¿ƒæ¨¡å¼æ˜¯å¦åŒ¹é…ï¼Œæˆ‘ä»¬è¿˜è¦åŠ ä¸ŠæŸäº›é™åˆ¶ã€‚ è¯•è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œä½ è¦åŒ¹é…æœ‰ä¸¤ä¸ª int å€¼çš„åºåˆ—ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ è¦æ¯”ç¬¬äºŒä¸ªå¤§ï¼Œé‚£è¦æ€ä¹ˆå†™å‘¢ï¼Ÿç»“åˆå‰é¢çš„ Class patternï¼Œæˆ‘ä»¬ä¸éš¾å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š some_list = [3, 4] match some_list: case [int(first), int(second)]: if first \u003e second: ... else: print(\"Expect first \u003e second. Match failed\") Expect first \u003e second. Match failed ä¸Šé¢çš„å†™æ³•å›ºç„¶å¯ä»¥ï¼Œæˆ‘ä»¬åœ¨ä»£ç å—é‡Œé¢è‡ªå·±ç”¨ if è¯­å¥å†æ£€æŸ¥ä¸€éå°±è¡Œã€‚ä½†å°±åƒç±»å‹çº¦æŸä¸€æ ·ï¼ŒPython å·²ç»è€ƒè™‘åˆ°äº†è¿™ä¸ªéœ€æ±‚ï¼Œå› æ­¤å®ƒæä¾›äº† Guard ğŸ’‚â€â™€ï¸ æœºåˆ¶ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æŠŠ if è¯­å¥è¿™ä¸ªåˆ¤æ–­æŒªåˆ° pattern çš„åé¢ã€‚è¿™æ ·å¯è¯»æ€§ä¼šå¼ºå¾ˆå¤šã€‚éµå¾ªçš„è¯­æ³•è§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š match subject: case \u003cpattern\u003e if \u003cexpression\u003e: ... åœ¨ \u003cpattern\u003e åé¢è·Ÿä¸Šä¸€ä¸ª if è¯­å¥ï¼Œç”¨æ¥åœ¨ \u003cpattern\u003e åŒ¹é…ä¹‹åå¯¹å…¶è¿›è¡Œé™åˆ¶ æ³¨æ„ Python åœ¨è¿™é‡Œ Evaluate çš„é¡ºåº å…ˆçœ‹ \u003cpattern\u003e æ˜¯å¦åŒ¹é… åŒ¹é…çš„è¯ï¼Œå¦‚æœæœ‰ç»‘å®šå˜é‡å°±ç»‘å®šå¯¹åº”çš„å˜é‡ æ­¤æ—¶å†çœ‹ if \u003cexpression\u003e è¯­å¥æ˜¯å¦è¿”å› Trueã€‚è¿™é‡Œçš„ \u003cexpression\u003e å¯ä»¥ç”¨ä¸Šä¸€æ­¥ç»‘å®šçš„å˜é‡ã€‚ å½“ä¸”ä»…å½“ \u003cpattern\u003e åŒ¹é… + if è¯­å¥è¿”å› True çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œç›¸åº”çš„ä»£ç å—ã€‚å¦åˆ™æ£€æŸ¥ä¸é€šè¿‡ï¼Œç»§ç»­å°è¯•åŒ¹é…ä¸‹ä¸€ä¸ª \u003cpattern\u003e some_list = [3, 4] match some_list: case [int(first), int(second)] if first \u003e second: print(\"Match successfully!\") ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:5:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"æ€»ç»“ ç›¸æ¯”äºä½¿ç”¨ if...elif...elif...elseï¼Œæˆ‘ä¼šæ›´å–œæ¬¢ pattern matching å¤šä¸€äº›ï¼Œå‡ºäºä¸‹é¢å‡ ç‚¹åŸå› ï¼š æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨åŒ¹é…çš„æ—¶å€™ç»‘å®šå€¼ç”¨äºåç»­å¤„ç† ä¸ªäººè§‰å¾—å¯è¯»æ€§æ¯”è¾ƒå¼ºï¼Œä»£ç çœ‹èµ·æ¥æ²¡æœ‰é‚£ä¹ˆä¹± pattern matching çš„å„ç§ patterns å…¶å®æ˜¯å¯ä»¥åµŒå¥—ç»„åˆçš„ï¼Œè¿™ä¹Ÿæ˜¯ pattern matching çœŸæ­£å¼ºå¤§çš„åœ°æ–¹ ä¸Šé¢å°±æ˜¯ Python 3.10 å¼•å…¥çš„ pattern matching çš„ç®€çŸ­ä»‹ç»ğŸš€ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:6:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Python"],"content":"å‚è€ƒ Whatâ€™s new in Python 3.10Â â†©ï¸ PEP 635 â€“ Structural Pattern Matching: Motivation and RationaleÂ â†©ï¸Â â†©ï¸ dataclasses - documentationÂ â†©ï¸ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:7:0","tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["System-Programming"],"content":"å¼•è¨€ å¦‚æœä½ ä¸€ç›´éƒ½æ˜¯æ˜¯ç”¨åŠ¨æ€è¯­è¨€ï¼Œæ¯”å¦‚ Pythonã€Javascript è¿™ç§ï¼Œä½ å¾ˆå¯èƒ½å¹¶ä¸ä¼šæ³¨æ„åˆ°æ ˆå’Œå †çš„åŒºåˆ«ã€‚å› ä¸ºè¿™äº›è¯­è¨€æœ‰åƒåœ¾æ”¶é›†å™¨ï¼ˆGarbage collectorï¼ŒGCï¼‰å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨å¸®ä½ åšå¥½å†…å­˜ç®¡ç†ï¼Œä½ åªè¦é›†ä¸­æ³¨æ„åŠ›ç¼–ç¨‹å³å¯ã€‚åæ¶ˆæ¯æ˜¯ GC å¹¶ä¸æ˜¯æ²¡æœ‰æˆæœ¬çš„äº‹æƒ…ï¼Œå®é™…ä¸Šè®¾è®¡å†å¥½çš„ GC ç®—æ³•ï¼Œä¹Ÿä¼šé™ä½ä»£ç çš„æ€§èƒ½ã€‚å¦‚æœä½ æ¥è§¦ç¼–ç¨‹çš„æ—¶é—´è¶³å¤Ÿä¹…ï¼Œé‚£ä¹ˆæƒ³å¿…ä½ å¯èƒ½ä¼šå¬åˆ°è¿‡ä»€ä¹ˆâ€œé€’å½’å±‚æ•°å¤ªæ·±æ ˆçˆ†ç‚¸äº†â€è¿™ç§è¯ï¼Œæ­¤æ—¶ä½ å¯èƒ½ä¼šç‚¹å¼€æœç´¢å¼•æ“ç¨å¾®äº†è§£ä¸€ä¸‹æ ˆå’Œå †çš„åŒºåˆ«ï¼Œæœ‰å¯èƒ½ä½ å°±åˆšå¥½ç‚¹è¿›äº†è¿™ä¸€ç¯‡æ–‡ç«  :) ğŸ“’ è™½ç„¶ GC ä¼šé™ä½ä»£ç æ€§èƒ½ï¼Œä½†æ˜¯å…å»äº†å¼€å‘äººå‘˜æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œå¯ä»¥å¤§å¤§åŠ é€Ÿè½¯ä»¶å¼€å‘çš„é€Ÿåº¦ï¼Œè¿™æ˜¯ç‰ºç‰²æ€§èƒ½æ¢å–å¼€å‘é€Ÿåº¦ã€‚ä½†åˆ°äº†è½¯ä»¶åæœŸå‡ºç°æ€§èƒ½ç“¶é¢ˆçš„æ—¶å€™ï¼Œå°±ä¸å¾—ä¸ç ”ç©¶å¦‚ä½•é‡æ„ç”šè‡³é‡å†™å…³é”®éƒ¨åˆ†çš„ä»£ç æé«˜æ€§èƒ½äº†ã€‚ è¿™é‡Œçš„æ ˆå’Œå †å¹¶ä¸æ˜¯æ•°æ®ç»“æ„é‡Œé¢çš„å †å’Œæ ˆï¼Œè€Œæ˜¯æŒ‡å†…å­˜ç®¡ç†çš„ä¸¤ç§æœºåˆ¶ã€‚äº†è§£æ ˆå’Œå †çš„ç»†èŠ‚å·®å¼‚æœ‰åŠ©äºæˆ‘ä»¬ç†è§£ä¸€äº›æ¯”è¾ƒæ¥è¿‘åº•å±‚çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™é‡Œè¯´çš„ç¼–ç¨‹è¯­è¨€æ¯”å¦‚ Rustã€C å’Œ C++ ç­‰ã€‚åœ¨ Rust ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„æ¦‚å¿µå°±æ˜¯æ‰€æœ‰æƒçš„é—®é¢˜ï¼ŒRust çš„å¾ˆå¤šè®¾è®¡éƒ½æ˜¯å›´ç»•å®ƒå±•å¼€ï¼ŒæŒæ¡äº†æ‰€æœ‰æƒå°±èƒ½åœ¨å­¦ä¹  Rust çš„æ—¶å€™å¦‚é±¼å¾—æ°´ğŸ˜„ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:1:0","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"ç¨‹åºåœ¨å†…å­˜ä¸Šçš„å¸ƒå±€ æˆ‘ä»¬çŸ¥é“ï¼Œè¦è¿è¡Œä¸€ä¸ªç¨‹åºå¿…é¡»å°†ç¨‹åºåŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¹Ÿæ˜¯éœ€è¦è¯»å–åˆ°å†…å­˜ä¸Šçš„ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¿™ä¸€åˆ‡åœ¨å†…å­˜ä¸Šæ˜¯å¦‚ä½•åˆ†å¸ƒçš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä¼šç»™å‡ºä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç¤ºæ„å›¾1ï¼šå¦‚ä¸‹æ‰€ç¤ºï¼š åœ¨ä¸Šå›¾ä¸­ï¼Œä¸åŒéƒ¨åˆ†å­˜æ”¾çš„ä¸œè¥¿åˆ†åˆ«æ˜¯ï¼š textï¼šå­˜æ”¾ä»£ç  dataï¼šå­˜æ”¾åˆå§‹åŒ–è¿‡çš„é™æ€å˜é‡ï¼ˆInitialized static variablesï¼‰ï¼Œæ¯”å¦‚å…¨å±€å˜é‡ã€é™æ€å˜é‡ bssï¼šå­˜æ”¾æœªç»åˆå§‹åŒ–çš„é™æ€å˜é‡ï¼ˆUninitialized static dataï¼‰ï¼Œæ¯”å¦‚ C è¯­è¨€çš„ static int i heap stack å…³äºæ ˆå’Œå †ä¼šåœ¨åé¢è¿›è¡Œå•ç‹¬è¯´æ˜ ğŸ“’ è¿™é‡Œè¦è®°ä½çš„å°±æ˜¯ï¼šæ ˆå’Œå †æ˜¯åœ¨å‘å½¼æ­¤é è¿‘çš„ï¼Œæ ˆæ˜¯ä»é«˜åœ°å€ -\u003e ä½åœ°å€å¢é•¿ï¼Œè€Œå †æ˜¯ä½åœ°å€ -\u003e é«˜åœ°å€å¢é•¿ã€‚è¿™æ ·ä½ åœ¨çœ‹æ±‡ç¼–ä»£ç çš„æ—¶å€™çœ‹åˆ°å…¥æ ˆæ—¶ sp æŒ‡é’ˆæ˜¯åšå‡æ³•ä½ å°±èƒ½ç†è§£äº†ã€‚ ğŸ“’ è™½ç„¶çœ‹èµ·æ¥ï¼Œéšç€æˆ‘ä»¬ç”³è¯·å†…å­˜è¶Šæ¥è¶Šå¤šï¼Œæ ˆå’Œå †å¯èƒ½ä¼šå†²çªï¼ˆå› ä¸ºä»–ä»¬åœ¨å½¼æ­¤é è¿‘ï¼‰ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºï¼š1ï¼‰è¿™ä¸ªå¸ƒå±€æ˜¯å‘ç”Ÿåœ¨è™šæ‹Ÿå†…å­˜ä¸Šçš„ï¼Œç°åœ¨çš„å¤„ç†å™¨ä¸€èˆ¬æ˜¯ 64 ä½çš„ï¼Œå®¹é‡éå¸¸å¤§ã€‚2ï¼‰åœ¨å®ƒä»¬å†²çªä¹‹å‰ï¼Œå¾ˆæœ‰å¯èƒ½ä½ çš„ç‰©ç†å†…å­˜æ—©å°±è€—å°½äº†ï¼Œè¿˜æ˜¯å…ˆæ‹…å¿ƒè¿™ä¸ª ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:2:0","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"æ ˆ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:0","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"æœ¯è¯­ Stack pointer(SP)ï¼šå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé‡Œé¢å­˜æ”¾æ ˆé¡¶çš„åœ°å€ Stack frameï¼šå½“å‘ç”Ÿå‡½æ•°è°ƒç”¨çš„æ—¶å€™å°±ä¼šåˆ›å»º Stack frameã€‚å¯ä»¥ç†è§£ä¸ºå®ƒåŒ…å«äº†å‡½æ•°è°ƒç”¨çš„ç›¸å…³æ•°æ®ã€‚æ¯”å¦‚å‡½æ•°çš„å‚æ•°ã€å‡½æ•°çš„è¿”å›åœ°å€ã€å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼ˆé™¤äº†åˆ†é…åœ¨å †ä¸Šçš„ï¼‰ç­‰ã€‚ä¸€è¿ä¸²çš„ Stack frame å°±æ„æˆäº†è°ƒç”¨æ ˆï¼ˆCall stackï¼‰ å…¥æ ˆï¼šåœ¨æ ˆä¸Šç”³è¯·ç©ºé—´ å‡ºæ ˆï¼šåœ¨æ ˆä¸Šé‡Šæ”¾ç©ºé—´ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:1","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"æ ˆä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„ æ ˆæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å…ˆè¿›åå‡ºï¼ˆLast in first out, LIFOï¼‰ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨æ ˆä¸Šç”³è¯·ç©ºé—´å’Œé‡Šæ”¾ç©ºé—´çš„æ—¶å€™çš„éµå¾ªçš„æ¨¡å¼ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå«åšæ ˆçš„åŸå› ã€‚åœ¨å†…å­˜ä¸Šç”³è¯·ç©ºé—´å…¶å®å¹¶ä¸ç¥ç§˜ï¼Œå°±æ˜¯è¦æ ‡è®°å“ªäº›èŒƒå›´çš„åœ°å€æ˜¯è¿™ä¸ªç¨‹åºè¦ç”¨çš„ã€‚å¯¹æ ˆæ¥è¯´ï¼Œåªè¦ä¿®æ”¹ stack pointer çš„å€¼å³å¯ï¼Œè‡ªç„¶çš„ï¼Œä»æ ˆåº•ï¼ˆä¸‹å›¾ä¸­çš„ Aï¼‰åˆ°æ ˆé¡¶ï¼ˆsp æŒ‡å‘çš„ä½ç½®ï¼‰å°±æ˜¯æˆ‘ä»¬æ ˆä¸Šç”³è¯·äº†çš„ç©ºé—´ ä¸‹é¢çš„å›¾1å°±å±•ç°äº†è¿™ä¸ªç®€å•çš„é€»è¾‘ï¼š è¿™é‡Œä»è¦å†æ¬¡å¼ºè°ƒï¼Œæ ˆæ˜¯ä»é«˜åœ°å€ -\u003e ä½åœ°å€å¢é•¿ï¼Œæ‰€ä»¥ä¸Šå›¾ä»å·¦åˆ°å³æ˜¯é«˜åœ°å€ -\u003e ä½åœ°å€ï¼Œæ‰€ä»¥åœ¨æ ˆä¸Šç”³è¯·ç©ºé—´ï¼ˆå…¥æ ˆï¼‰çš„æ—¶å€™å®é™…ä¸Š sp æ˜¯åšå‡æ³•. å‡½æ•°è°ƒç”¨ä¹Ÿæ˜¯ç”¨æ ˆå®Œæˆçš„ï¼Œç®€å•æ¥è¯´ï¼š è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼šä¿®æ”¹ sp æŒ‡é’ˆ -\u003e æ„é€ è¢«è°ƒç”¨çš„å‡½æ•°çš„ stack frameï¼Œå…¶ä¸­åŒ…æ‹¬å‡½æ•°å‚æ•°å’Œå…¶ä»–ä¸€äº›å¿…è¦çš„æ•°æ®ï¼Œå°†å…¶å…¥æ ˆ -\u003e è¿›å…¥ Callee å‡½æ•°é€€å‡ºçš„æ—¶å€™ï¼šä¸Šé¢çš„è¿‡ç¨‹åè¿‡æ¥å°±è¡Œ å¯¹è¿™ä¸ªè¿‡ç¨‹çš„è¯¦ç»†è§£é‡Šå¯ä»¥å‚è€ƒ 2 ğŸ“’ åœ¨æ ˆä¸Šç”³è¯·å†…å­˜ç©ºé—´çš„æ—¶å€™éœ€è¦æ‹…å¿ƒçš„é—®é¢˜æ˜¯ï¼šä¸è¦ç”³è¯·å¤ªå¤šå¯¼è‡´æ ˆçˆ†äº†ï¼ˆä¹Ÿå°±æ˜¯å¤§åé¼é¼çš„ Stack Overflowï¼‰ã€‚è¿™ä¸€ç‚¹åœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„ã€‚ä½ å¯ä»¥é€‰æ‹©æ”¹æˆè¿­ä»£çš„ç®—æ³•ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¢åŠ æ ˆçš„å¤§å°é™åˆ¶ã€‚æ¯”å¦‚åœ¨ Python é‡Œé¢å¯ä»¥ç”¨ sys.getrecursionlimit() æ¥ä¿®æ”¹æ ˆçš„å¤§å°é™åˆ¶ã€‚æœ‰çš„ç¼–ç¨‹è¯­è¨€è¿˜ä¼šå¯¹å°¾é€’å½’è¿›è¡Œä¼˜åŒ–ï¼Œæ­¤æ—¶ä¹Ÿå¯ä»¥é€‰æ‹©å°†æ™®é€šçš„é€’å½’å‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’çš„å½¢å¼ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:2","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"ä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’å‡½æ•°çœ‹æ ˆçš„å˜åŒ– CS è¯¾ç¨‹ä¸­è®²è§£é€’å½’çš„æ—¶å€™ä¸€èˆ¬éƒ½ä¼šè®²åˆ°æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œç°åœ¨æˆ‘ä»¬ç”¨ F(n) è¡¨ç¤ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ n ä¸ªå€¼ï¼Œé‚£ä¹ˆæœ‰ï¼š F(0) = 0 F(1) = 1 F(n) = F(n - 1) + F(n - 2) ä»¥ F(4) ä¸ºä¾‹ï¼Œé€’å½’è®¡ç®—çš„æ–¹å¼å¦‚ä¸‹ï¼š F(4) = F(3) + F(2) = F(2) + F(1) + F(1) + F(0) = F(1) + F(0) + F(1) + F(1) + F(0) = 3 * F(1) + 2 * F(0) å¦‚æœæˆ‘ä»¬å¿½ç•¥ä¸€äº›ç»†èŠ‚ï¼Œæ„Ÿå—å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­æ ˆçš„å˜åŒ–æƒ…å†µï¼Œé‚£ä¹ˆå¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š æ³¨ï¼š ä¸‹é¢çš„ F(n) è¡¨ç¤ºæ¯ä¸ªå‡½æ•°è‡ªå·±çš„ stack frame stack: F(4) stack: F(4) | F(3) # F(4): enter F(3) stack: F(4) | F(3) | F(2) # F(3): enter F(2) stack: F(4) | F(3) | F(2) | F(1) # F(2): enter F(1), F(1) is the base case, ready to exit function call stack: F(4) | F(3) | F(2) # Function return, return to the body of F(2) stack: F(4) | F(3) | F(2) | F(0) # F(2): enter F(0), F(0) is the base case, ready to exit function call stack: F(4) | F(3) | F(2) # Function return, return to the body of F(2) stack: F(4) | F(3) | F(1) # F(3): enter F(1), F(1) is the base case, ready to exit function call stack: F(4) | F(3) # Function return, return to the body of F(3) stack: F(4) # Function return, return to the body of F(4) stack: F(4) | F(2) # F(4): enter F(2) stack: F(4) | F(2) | F(1) # F(2): enter F(1), F(1) is the base case, ready to exit function call stack: F(4) | F(2) # Function return, return to the body of F(2) stack: F(4) | F(2) | F(0) # F(2): enter F(0), F(0) is the base case, ready to exit function call stack: F(4) | F(2) # Function return, return to the body of F(2) stack: F(4) # Function return, return to the body of F(4) ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:3","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"æ ˆä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ® æ ˆä¸Šçš„å†…å­˜ç©ºé—´ç®¡ç†æ˜¯é€šè¿‡ä¿®æ”¹ sp æŒ‡é’ˆçš„å€¼å®ç°çš„ï¼Œå¾ˆå®¹æ˜“çŸ¥é“ä¸‹é¢å‡ ç‚¹ï¼š æ ˆä¸Šçš„å†…å­˜ç”³è¯·å’Œé‡Šæ”¾éƒ½ååˆ†é«˜æ•ˆï¼Œä¸º O(1)ï¼Œåªè¦ä¿®æ”¹ sp çš„å€¼å³å¯ æ ˆçš„è¿™ç§ LIFO çš„é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œç¼–è¯‘å™¨å…¶å®å°±èƒ½å¸®æˆ‘ä»¬å¤„ç†å¥½ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬ä¸éœ€è¦å¹²é¢„è¿™ä¸ªè¿‡ç¨‹ ä¿®æ”¹ sp æŒ‡é’ˆå†³å®šè¦ç”³è¯·å¤šå¤§çš„ç©ºé—´ï¼Œæ„å‘³ç€æˆ‘ä»¬å¿…é¡»çŸ¥é“è¦ç”³è¯·çš„æ•°æ®æœ‰å¤šå¤§ï¼ˆç¼–è¯‘æ—¶è¦èƒ½ç¡®å®šï¼‰ï¼Œæ‰€ä»¥æ ˆé€‚åˆå­˜æ”¾çš„æ•°æ®æ˜¯å›ºå®šå·²çŸ¥å¤§å°çš„ã€‚è€Œå¤§å°ä¸å›ºå®šçš„æ•°æ®æ˜¯ç”¨å †æ¥è§£å†³çš„ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:4","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"å † æ ˆçš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼šæ— æ³•å¤„ç†å¤§å°å¯å˜çš„æ•°æ®ï¼Œæˆ‘ä»¬æ— æ³•çŸ¥é“æ­¤æ—¶ sp çš„å€¼è¦ä¿®æ”¹ä¸ºå¤šå°‘ã€‚ å¦‚ä½•åœ¨å¤§å°å¯å˜çš„æ•°æ®å’Œæ ˆä¹‹é—´æ­å»ºèµ·æ¡¥æ¢å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°æŒ‡é’ˆäº†ã€‚è™½ç„¶å®é™…å­˜å‚¨çš„æ•°æ®å¤§å°æœªçŸ¥ï¼Œä½†æ˜¯æŒ‡é’ˆçš„å¤§å°æ˜¯å›ºå®šå·²çŸ¥çš„ï¼ˆåªè¦ä¿è¯å¯»å€èŒƒå›´èƒ½è¦†ç›–åˆ°æ•´ä¸ªå†…å­˜å°±è¡Œï¼Œä¸€èˆ¬è·Ÿæœºå™¨å­—é•¿ç›¸ç­‰ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ ˆä¸Šå­˜å‚¨ä¸€ä¸ªå›ºå®šå¤§å°çš„æŒ‡é’ˆï¼Œè®©è¿™ä¸ªå®ƒæŒ‡å‘å †ä¸Šå­˜å‚¨çš„çœŸæ­£æ•°æ®ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:4:0","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"å †ä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„ æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œåœ¨å †ä¸Šç”³è¯·å†…å­˜å…¶å®å°±æ˜¯åœ¨å †ä¸Šæ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºé—´ï¼Œå¹¶è¿”å›è¿™ä¸ªä½ç½®çš„æŒ‡é’ˆï¼Œè€ŒåæŒ‡é’ˆå…¥æ ˆã€‚ åé¢æˆ‘ä»¬æƒ³è¦è®¿é—®è¿™ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå°±å¯¹æŒ‡é’ˆè§£å¼•ç”¨å³å¯ã€‚C è¯­è¨€æˆ–è€… Rust é‡Œé¢çš„ * æ“ä½œç¬¦å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªçš„ã€‚ä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œï¼Œä»¥å‰éš¾æ‡‚çš„æŒ‡é’ˆæ˜¯ä¸æ˜¯ç¨å¾®èƒ½ç†è§£ä¸€ç‚¹äº† :) ä¸åŒäºæ ˆé‡Œé¢ç®€å•ä¿®æ”¹ sp æŒ‡é’ˆå³å¯ï¼Œå †ä¸Šçš„å†…å­˜ç®¡ç†å¤æ‚å¾—å¤šã€‚åŒ…æ‹¬ä¸‹é¢å‡ ç‚¹ï¼š å †ä¸Šå¯ä»¥åˆ†é…çš„å†…å­˜çš„ä½ç½®æ˜¯ä»»æ„çš„ã€å¤§å°ä¹Ÿæ˜¯ä»»æ„çš„ï¼ˆä¸è¶…è¿‡ç‰©ç†å†…å­˜å¤§å°å³å¯ï¼‰ï¼Œè€Œæ ˆåªè¦éµå¾ªå…ˆè¿›åå‡ºå°±è¡Œã€‚ä¸ºäº†ç®¡ç†å †ä¸Šå·²åˆ†é…å’Œå¾…åˆ†é…å †ç©ºé—´ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ç›¸åº”çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œè¿™å°±ç»™å †ä¸Šçš„å†…å­˜ç®¡ç†å¸¦æ¥å¾ˆå¤§çš„å›°éš¾ åœ¨å †ä¸Šç”³è¯·ç©ºé—´çš„æ•ˆç‡ä¹Ÿæ¯”è¾ƒä½ã€‚æœ€åŸºæœ¬çš„ï¼Œæˆ‘ä»¬èµ·ç è¦æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§å°çš„ç©ºé—´ï¼Œè¿™ä¸ªæ‰¾çš„è¿‡ç¨‹è‚¯å®šæ˜¯æ¯”ç›´æ¥ä¿®æ”¹ sp çš„å€¼è€—æ—¶çš„ã€‚ è¿˜è¦å¤„ç†å¥½ã€Œç¢ç‰‡åŒ–ã€çš„é—®é¢˜ã€‚å› ä¸ºå †ä¸Šç”³è¯·ç©ºé—´æ˜¯è¿™è¾¹åˆ†é…ä¸€å—é‚£è¾¹åˆ†é…ä¸€å—ï¼Œåœ¨é‡å¤çš„ç”³è¯·ç©ºé—´å’Œé‡Šæ”¾ç©ºé—´çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨å†…å­˜é‡Œé¢ç•™ä¸‹å¾ˆå¤šç¢ç‰‡ã€‚æç«¯çš„æƒ…å†µæ˜¯ï¼šç¢ç‰‡åŠ èµ·æ¥çš„å¯åˆ†é…å¤§å°æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬æ•£è½åœ¨å†…å­˜å„ä¸ªåœ°æ–¹æ— æ³•åˆ©ç”¨ä»è€Œå¯¼è‡´äº†å†…å­˜ä¸è¶³ ğŸ“’ å †ä¸Šå¯ä»¥åˆ†é…çš„å†…å­˜æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯éœ€è¦æ›´è‰¯å¥½çš„ç®¡ç†æœºåˆ¶æ¥å¤„ç†è¿™ç§æ¯”è¾ƒå¤æ‚çš„æƒ…å†µã€‚å¯¹å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¹Ÿé€ æˆäº†ä¸€å®šçš„è´Ÿæ‹…ï¼Œæˆ‘ä»¬æ— æ³•ä¾èµ–ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†ï¼Œè€Œæ˜¯è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œæ¯”å¦‚åœ¨ C è¯­è¨€ä¸­ä½ è¿›è¡Œäº† malloc() å‡½æ•°ç”³è¯·ç©ºé—´ä¹‹åè¦æ˜¯å¿˜è®°ç”¨ free() é‡Šæ”¾ï¼Œé‚£ä¹ˆä½ çš„ç¨‹åºå°±ä¼šå­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚æ›´åˆ«è°ˆè¿˜æœ‰å…¶ä»–çš„è¯¸å¦‚æ‚¬å‚æŒ‡é’ˆç­‰é—®é¢˜ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:4:1","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"å †ä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ® å¯¹å †ä¸Šå†…å­˜ç©ºé—´çš„åˆ†é…æœ‰ä¸€å®šäº†è§£ä¹‹åï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºä¸‹é¢çš„å‡ ä¸ªç»“è®ºï¼š å †ä¸Šå­˜æ”¾çš„æ˜¯å®¹é‡å¯å˜çš„æ•°æ®ã€‚æ›´çµæ´»çš„åŒæ—¶ï¼Œä»£ä»·æ˜¯ç‰ºç‰²äº†ä¸€ç‚¹æ€§èƒ½ æœ‰æ—¶å€™ä¹Ÿå¯ä»¥æ˜¯å›ºå®šå¤§å°çš„æ•°æ®ï¼Œä½†æ˜¯ä½ ä¸æƒ³æ”¾åœ¨æ ˆä¸Šã€‚ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æƒ…å†µï¼Ÿæ¯”å¦‚ï¼Œåœ¨ Rust é‡Œé¢ï¼Œæ ˆä¸Šçš„æ•°æ®æ˜¯é»˜è®¤ç”Ÿæˆæ‹·è´ï¼Œæœ‰æ—¶å€™å‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä½ å¯èƒ½æƒ³è¦æŠŠå¾ˆå¤§çš„æ•°æ®æ”¾åœ¨å †ä¸Šï¼Œé¿å…å¤šæ¬¡æ‹·è´å¸¦æ¥çš„å¼€é”€ã€‚ä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œä½ ä»¬æœ‰æ²¡æœ‰æƒ³åˆ°æˆ‘ä»¬å¸¸å¸¸è¯´å‡½æ•°å‚æ•°ä¼ é€’å¼•ç”¨æ¯”ä¼ é€’å€¼æ•ˆç‡æ›´é«˜è¿™ä¸ªä¼˜åŒ–å‘¢ï¼Ÿ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:4:2","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"æ€»ç»“ æ ˆå’Œå †éƒ½æ˜¯å†…å­˜ç®¡ç†é‡Œé¢çš„æ¦‚å¿µï¼Œä»–ä»¬è·Ÿæ•°æ®ç»“æ„é‡Œçš„æ ˆå’Œå †çš„æ¦‚å¿µä¸ä¸€æ ·ã€‚æ ˆä¹‹æ‰€ä»¥å«åšæ ˆæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è¿›è¡Œå†…å­˜ç”³è¯·å’Œåˆ†é…çš„æ—¶å€™éƒ½éµå¾ª LIFO æ¨¡å¼ï¼Œè€Œå †è¿™ä¸ªåå­—åˆ™æ˜¯ä½“ç°äº†å †ä¸Šé¢çš„æ•°æ®æ¯«æ— ç»„ç»‡ã€‚ é€šå¸¸æ¥è¯´ï¼Œåœ¨æ ˆä¸Šç”³è¯·å’Œé‡Šæ”¾å†…å­˜ç©ºé—´æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ã€‚ä¸ºæ­¤ï¼ŒRust é‡Œé¢é»˜è®¤éƒ½æ˜¯åœ¨æ ˆä¸Šæ“ä½œ æ ˆä¸Šä¸€èˆ¬æ”¾ã€Œå›ºå®šå¤§å°ã€çš„æ•°æ®ï¼Œå †ä¸Šä¸€èˆ¬æ”¾ã€Œå¤§å°å¯å˜ã€çš„æ•°æ®ã€‚ä½†æ˜¯æœ‰æ—¶å€™å‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä¹Ÿä¼šåœ¨å †ä¸Šå­˜æ”¾å›ºå®šå¤§å°çš„æ•°æ® åœ¨ CS è¿™é—¨å­¦ç§‘é‡Œé¢ï¼Œç»å¸¸å¯ä»¥çœ‹åˆ°åˆ†å±‚çš„è®¾è®¡ï¼Œæ¯”å¦‚è®¡ç®—æœºç½‘ç»œçš„ OSI æ¨¡å‹ã€‚åŒ…æ‹¬ç¼–ç¨‹è¯­è¨€æœ¬èº«ä¹Ÿå¯ä»¥åˆ†ä¸ºé«˜çº§è¯­è¨€å’Œä½çº§è¯­è¨€ã€‚6.172 æ€§èƒ½å·¥ç¨‹çš„è€å¸ˆè¯´çš„ä¸€å¥è¯åˆ†äº«ç»™ä½ ä»¬â€”â€” â€œå¾ˆå¤šæ—¶å€™ä½ è¦å­¦å¥½è¿™ä¸€å±‚çš„ä¸œè¥¿æ˜¯å¿…é¡»äº†è§£ä¸‹é¢ä¸€å±‚çš„ä¸œè¥¿ï¼Œä½ ä¸ä¸€å®šè¦ä¼šç”¨ä¸‹ä¸€å±‚çš„ä¸œè¥¿ï¼Œä½†æ˜¯çŸ¥é“ä¸‹ä¸€å±‚çš„ç»†èŠ‚ä¼šå¸®åŠ©ä½ å­¦è¿™ä¸€å±‚â€ã€‚è‡³å°‘å¯¹æˆ‘æ¥è¯´ï¼ŒçŸ¥é“äº†æ ˆå’Œå †çš„åŒºåˆ«ä¹‹åï¼Œä¸‹é¢çš„å‡ ä¸ªé—®é¢˜åœ¨æˆ‘çœ‹æ¥æœ‰äº†å¾ˆåˆç†çš„è§£é‡Šï¼š C/C++ è¯­è¨€çš„æŒ‡é’ˆæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿä»–ä»¬ä¸ºä»€ä¹ˆå­˜åœ¨ï¼Ÿ ä¸ºä»€ä¹ˆå°¾é€’å½’ä¼˜åŒ–ä¼šå­˜åœ¨ï¼Ÿä¸ºä»€ä¹ˆåœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™éƒ½è¦è€ƒè™‘é€’å½’å±‚æ•°å¤ªæ·±çš„é—®é¢˜ï¼Ÿ ä¸ºä»€ä¹ˆ Rust é»˜è®¤æ•°æ®æ”¾åœ¨æ ˆä¸Šï¼Ÿ ä¸ºä»€ä¹ˆä»¥å‰ä¼šçœ‹åˆ° C/C++ ä¼ é€’å‡½æ•°å‚æ•°çš„æ—¶å€™è¦ç”¨å¼•ç”¨è¿™ç§è¯´æ³•ï¼Œè¯´è¿™æ ·ä¼šæ¯”è¾ƒå¿«ï¼Ÿ ğŸ“’ åœ¨ CS é‡Œé¢ï¼Œæˆ‘è®¤ä¸ºæœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯å°è£…ã€‚é€å±‚å°è£…ï¼Œå¯¹ä¸Šä¸€å±‚éšè—ç»†èŠ‚çš„è¿™ç§è®¾è®¡å®åœ¨å¾ˆä¸é”™ã€‚ é€‰æ‹©å¸¦æœ‰ GC å¥½ä¸Šæ‰‹ä½†æ•ˆç‡è¾ƒä½çš„è¯­è¨€è¿˜æ˜¯é€‰æ‹©è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜è®©ä»£ç æ•ˆç‡æ›´é«˜å‘¢ï¼Ÿè¿™ç‚¹å…¶å®å–å†³äºä½ æ‰‹å¤´çš„å·¥ä½œã€‚å¦‚æœè¦å¼€å‘é€Ÿåº¦å½“ç„¶æ˜¯å‰è€…äº†ï¼Œå¦‚æœæ³¨é‡æ€§èƒ½é‚£å°±æ˜¯åè€…ã€‚å½“ç„¶ï¼Œå¤¹åœ¨ä¸­é—´çš„æ˜¯æ²¡æœ‰ GC + åŸºæœ¬ä¸ç”¨è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜ + æ•ˆç‡é«˜çš„ Rust è¯­è¨€ğŸš€ï¼Œè¦ä¸å­¦ç‚¹ RustğŸ˜‰ âš ï¸ æœ¬æ–‡åœ¨ç»„ç»‡çš„æ—¶å€™å¯ä»¥å¿½ç•¥äº†ä¸€äº›ç»†èŠ‚ï¼Œæˆ‘åªè®²äº†æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„å‡ ç‚¹ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œå€¼å¾—ä¸€çœ‹çš„ææ–™å‚è€ƒä¸‹é¢çš„èµ„æ–™å¼•ç”¨ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:5:0","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["System-Programming"],"content":"å‚è€ƒèµ„æ–™ 6.172. Performance engineering of software systems - Lecture 11 \u0026\u0026 Lecture 12Â â†©ï¸Â â†©ï¸ Stack frameÂ â†©ï¸ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:6:0","tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/"},{"categories":["Vim"],"content":"How to use vim's macro system","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"å¼•è¨€ åœ¨æˆ‘å­¦ä¹  vim çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å…·æœ‰å¯å‘æ„ä¹‰çš„ä¸€å¥è¯æ˜¯ï¼š vim å…¶å®æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€ å¾ˆæ—©ä¹‹å‰æˆ‘å°±æ¥è§¦è¿‡ vimï¼Œä½†æ˜¯å½“æ—¶ vim çš„æŒ‰é”®ç»„åˆå’ŒæŒ‰é”®çš„é€»è¾‘å¯¹æˆ‘æ¥è¯´å¾ˆéš¾è®°å¿†ï¼Œå†åŠ ä¸Š vim çš„ç•Œé¢å®åœ¨å¤ªè¿‡äºå¤å¤ï¼Œäºæ˜¯æˆ‘å°±è½¬å‘äº†æ¯”è¾ƒç°ä»£çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä½†å½“æˆ‘å­¦å®Œ Missing semester çš„æ—¶å€™ï¼Œæˆ‘å¯¹ vimçš„çœ‹æ³•å®Œå…¨æ”¹è§‚ï¼šå®ƒè¿œè¿œä¸æ­¢æ˜¯ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ è¿™ä¼¼ä¹å’Œè¿™ç¯‡åšå®¢è¦è®¨è®ºçš„ä¸»é¢˜æ²¡æœ‰å…³ç³»ã€‚ä½†å…¶å®ä¸æ˜¯è¿™æ ·çš„ï¼Œè®¤è¯†åˆ° vim æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ä»¶é‡è¦çš„äº‹æƒ…ã€‚ç¨‹åºå‘˜ç»å¸¸ç»å¸¸é€šè¿‡ç¼–ç¨‹æ¥å®Œæˆå¾ˆå¤šæ¯ç‡¥é‡å¤çš„å·¥ä½œï¼Œä¸åŒäººå¯¹ç¼–ç¨‹è¯­è¨€çš„åå¥½å„ä¸ç›¸åŒã€‚vim ä¹Ÿå¯ä»¥å®Œæˆè¿™æ ·çš„ä»»åŠ¡ï¼Œä»Šå¤©è¦è®¨è®ºçš„å®å°±æ˜¯ã€‚æˆ‘å¸Œæœ›çœ‹å®Œè¿™ä¸€ç¯‡ä¹‹å vim ä¹Ÿä¼šè¢«ä½ ä»¬ç”¨æ¥è§£å†³ä¸€äº›é—®é¢˜ğŸš€ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:1:0","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"ä»€ä¹ˆæ˜¯ vim é‡Œé¢çš„å® ä¸‹é¢å‡å®šä½ å¯¹ vim æœ‰ä¸€å®šçš„äº†è§£ : ) åœ¨ vim é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ . é‡å¤ä¸Šä¸€æ¬¡çš„â€œæ›´æ”¹â€ï¼Œè¿™é‡Œçš„â€œæ›´æ”¹â€ä¸€èˆ¬æŒ‡çš„æ˜¯æ¯”è¾ƒç®€å•çš„æ“ä½œï¼Œæ¯”å¦‚åˆ é™¤ä¸€ä¸ªå•è¯ç­‰ã€‚ ä½†å…¶å®ï¼Œvim ä¹Ÿæä¾›äº†å®è®©æˆ‘ä»¬å¯ä»¥é‡å¤æ‰§è¡Œä¸€äº›æ¯”è¾ƒå¤æ‚çš„æ“ä½œï¼Œå®ƒä¼šæŠŠæˆ‘ä»¬çš„æ“ä½œè®°å½•ä¸‹æ¥ï¼Œå­˜æ”¾åˆ°æŒ‡å®šçš„å¯„å­˜å™¨é‡Œé¢ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åªå½•åˆ¶å®ä¸€æ¬¡è€Œæ‰§è¡Œå®ƒå¾ˆå¤šæ¬¡ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:2:0","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"åŸºæœ¬æŒ‡å— ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:0","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"### æ€ä¹ˆå½•åˆ¶ä¸€ä¸ªå® æ­¥éª¤ï¼š åœ¨ Normal æ¨¡å¼ä¸‹ï¼ŒæŒ‰q\u003cregister\u003e. è¿™é‡Œçš„æ„æ€æ˜¯è¯´å…ˆæŒ‰q ç„¶åé€‰æ‹©ä¸€ä¸ªå¯„å­˜å™¨ register æ¥å­˜æ”¾å¾…ä¼šå½•åˆ¶çš„å® å¯ä»¥é€‰ç”¨çš„å¯„å­˜å™¨ regitser åŒ…æ‹¬: 0-9, a-z, å’Œ \"ã€‚å…³äºè¿™é‡Œä¸ºä»€ä¹ˆæ²¡æœ‰å¤§å†™å­—æ¯æˆ‘ä¼šåœ¨åé¢è§£é‡Š å¼€å§‹å½•åˆ¶å®ï¼Œå¦‚æœä¸Šä¸€æ­¥æ­£ç¡®æ‰§è¡Œçš„è¯ï¼Œæ­¤æ—¶ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¦ä¸‹è§’æ˜¾ç¤º recording @\u003cregister\u003eã€‚ä»æ­¤åˆ»èµ·ï¼Œä½ æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šè¢«å½•åˆ¶ä¸‹æ¥ å†æ¬¡æŒ‰ä¸‹ q é€€å‡ºå½•åˆ¶ ğŸ“’ è¦è®©è‡ªå·±å½•åˆ¶çš„å®é²æ£’æ€§å¼ºä¸€ç‚¹ï¼Œå…³é”®åœ¨äºä½ åœ¨å½•åˆ¶çš„æ—¶å€™è¦æƒ³æƒ³ï¼šä¸åŒçš„ æ–‡ä»¶å¯èƒ½ä¼šæœ‰å“ªäº›æƒ…å†µè¦å¤„ç†ï¼Œè¦ä¿è¯è‡ªå·±çš„æ¯ä¸€æ­¥éƒ½å¯ä»¥åœ¨å„ç§ä¸åŒçš„æƒ…å†µé‡Œé¢å¤ç°å‡ºæ¥ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:4:0","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"æ€ä¹ˆæŸ¥çœ‹å®çš„å†…å®¹ å‰é¢æåˆ°ï¼Œvim ä¼šæŠŠæˆ‘ä»¬å½•åˆ¶çš„å®å­˜æ”¾åœ¨æŒ‡å®šçš„å¯„å­˜å™¨é‡Œé¢ï¼Œæ‰€ä»¥æŸ¥çœ‹å®çš„å†…å®¹å¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªç®€å•çš„ :reg å‘½ä»¤å°±è¡Œï¼Œæ¯”å¦‚ :reg \u003cregister\u003e é‡Œé¢ä½ ä¼šçœ‹åˆ°ä¸€äº›å¥‡æ€ªçš„å­—ç¬¦ï¼Œæ¯”å¦‚ï¼š ^[ æ˜¯ \u003cESC\u003e é”® \u003c80\u003ekb æ˜¯ BAKESPACE é”® ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:4:1","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"æ€ä¹ˆæ‰§è¡Œå® åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡Œ @\u003cregister\u003e: æ‰§è¡Œå­˜æ”¾åœ¨ \u003cregister\u003e è¿™ä¸ªå¯„å­˜å™¨é‡Œé¢çš„å® @@: æ‰§è¡Œæˆ‘ä»¬ä¸Šä¸€æ¬¡è°ƒç”¨è¿‡çš„å® å¦‚æœæƒ³è¦å¤šæ¬¡æ‰§è¡Œçš„è¯ï¼Œåœ¨å‘½ä»¤çš„å‰é¢å…ˆè¾“å…¥ [COUNT] è¡¨ç¤ºè¦æ‰§è¡Œå¤šå°‘æ¬¡ã€‚ e.g. 100@@ çš„æ„æ€æ˜¯ï¼šæ‰§è¡Œä¸Šä¸€æ¬¡è°ƒç”¨çš„å® 100 æ¬¡ æœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢é‡å¤æ‰§è¡Œç›´åˆ°æ•´ä¸ªæ–‡ä»¶éƒ½ä¿®æ”¹å®Œï¼Œä½†æ˜¯æˆ‘ä»¬æ²¡æœ‰å¿…è¦è‡ªå·±æ‰‹åŠ¨è®¡ç®—è¿™ä¸ªæ¬¡æ•° [COUNT] åº”è¯¥æ˜¯å¤šå°‘ï¼Œå¯ä»¥è®¾ç½®ä¸€ä¸ªå¾ˆå¤§çš„å€¼ï¼Œè¶…è¿‡çš„éƒ¨åˆ†ä¼šè¢« vim å¿½ç•¥ åœ¨å¤šä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡Œ å½“ç„¶ï¼Œå¦‚æœåªèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢é‡å¤æ‰§è¡Œå®çš„è¯ï¼Œèƒ½ç”¨å®ƒæ¥è§£å†³çš„é—®é¢˜è¿˜æ¯”è¾ƒå±€é™ã€‚æˆ‘ä»¬æ€»ä¸å¯èƒ½æ¯æ¬¡éƒ½è¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç„¶åæ‰‹åŠ¨è¾“å…¥ @@ æ‰§è¡Œå®ã€‚å¥½åœ¨ vim æä¾›äº†æ–¹æ³•è®©æˆ‘ä»¬å¯ä»¥æ‰¹é‡å¤„ç†å¤šæ–‡ä»¶ æ¯”å¦‚è¯´ç°åœ¨æˆ‘ä»¬æƒ³è¦ç¼–è¾‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ txt æ–‡ä»¶ï¼Œåªè¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ vim *.txt å°±å¯ä»¥æ‰“å¼€æ‰€æœ‰æ–‡ä»¶ï¼ˆæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª bufferï¼Œæ•´ä½“å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼‰ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æˆ‘ä»¬å¯ä»¥ä¸€æ¬¡ç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶ï¼Œç¼–è¾‘å®Œæ¯•ä¹‹åæŒ‰ :wn ä¿å­˜å½“å‰æ–‡ä»¶çš„æ›´æ”¹å¹¶è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚ä½†æˆ‘ä»¬ä¹Ÿèƒ½ä¸€æ¬¡æ€§å¯¹è¿™ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œçš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ›´æ”¹ æ­¤æ—¶æˆ‘ä»¬ä½äºæ–‡ä»¶åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼Œç¬¬ä¸€ä»¶è¦åšçš„äº‹æƒ…æ˜¯ä»¥ç¬¬ä¸€ä¸ªæ–‡ä»¶æ–‡æ ·æœ¬å½•åˆ¶å® æ³¨æ„å½•åˆ¶å®Œæ¯•ä¹‹åï¼Œéœ€è¦ä½¿ç”¨ :edit! å‘½ä»¤æ’¤é”€åœ¨å½•åˆ¶å®å¯¹è¿‡ç¨‹ä¸­å¯¹ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„æ›´æ”¹ã€‚å› ä¸ºæˆ‘ä»¬ä¹‹åä¼šå¯¹æ–‡ä»¶åˆ—è¡¨ä¸­æ‰€æœ‰å¯¹æ–‡ä»¶åº”ç”¨æˆ‘ä»¬å¯¹å®ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ’¤é”€æ“ä½œçš„è¯ï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶å°±ä¼šè¢«æ›´æ”¹ä¸¤æ¬¡ è™½ç„¶ç•Œé¢çœ‹èµ·æ¥åƒæ˜¯åœ¨ç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†å¦‚æœä½ è¦ç›´æ¥æŒ‰ :x ä¿å­˜é€€å‡ºçš„è¯å°±ä¼šå¼¹å‡ºè­¦å‘Š è¾“å…¥å‘½ä»¤ï¼š :bufdo execute \"normal @\u003cregister\u003e | update. å…³äº bufdo çš„è¯´æ˜å¯ä»¥åœ¨ vim é‡Œé¢è¾“å…¥ :h bufdo æŸ¥çœ‹ã€‚å¯ä»¥ç†è§£ä¸ºå¯¹æ‰€æœ‰çš„ buffer æ‰§è¡Œæ“ä½œ è¿™é‡Œçš„ normal @\u003cregister\u003e çš„æ„æ€å°±æ˜¯åœ¨ Normal æ¨¡å¼ä¸‹æ‰§è¡Œ @\u003cregister\u003e é‡Œé¢çš„å® æ›´å¤šçš„ç»†èŠ‚å¯ä»¥çœ‹è¿™é‡Œ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:4:2","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"æ€ä¹ˆä¿®æ”¹å·²ç»å½•åˆ¶å¥½çš„å® ç®€å•æƒ…å†µ è¿™é‡Œè¯´çš„ç®€å•æƒ…å†µæ˜¯ï¼Œä½ åªæ˜¯æƒ³è¦åœ¨ä½ æœ¬æ¥å½•åˆ¶å¥½çš„å®åé¢è¿½åŠ ä¸€äº›æ“ä½œã€‚è¿˜è®°å¾—ä¹‹å‰æˆ‘åˆ»æ„è·³è¿‡äº†æŠŠ A-Z å½“ä½œå¯„å­˜å™¨çš„è¿™ä¸ªæƒ…å†µå—ï¼Ÿäº‹å®ä¸Šï¼Œå½“ä½ ç”¨å¤§å†™å­—æ¯çš„å¯„å­˜å™¨çš„æ—¶å€™ï¼Œä½ å½•åˆ¶çš„ä¸œè¥¿ä¼šè¿½åŠ åœ¨å¯¹åº”çš„å°å†™å¯„å­˜å™¨çš„å†…å®¹åé¢ å¤æ‚æƒ…å†µ æ­¤æ—¶ä½ è¦ç¼–è¾‘å®ï¼Œä½†æ˜¯è¦ç¼–è¾‘çš„ä½ç½®æ˜¯åœ¨å®çš„ä¸­é—´ï¼Œè¿™ä¹Ÿæ˜¯å¯ä»¥å®ç°çš„å—ï¼Ÿå½“ç„¶ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦ä»å¤´å½•åˆ¶ï¼Œå®å…¶å®æœ¬è´¨ä¸Šåªæ˜¯å­˜å‚¨åœ¨å¯„å­˜å™¨é‡Œé¢çš„å­—ç¬¦åºåˆ—ï¼Œvim å¯ä»¥è§£è¯»è¿™äº›å†…å®¹é‡å¤æ‰§è¡Œã€‚æˆ‘ä»¬è¦åšçš„äº‹æƒ…åªæ˜¯ä¿®æ”¹å¯„å­˜å™¨é‡Œé¢çš„å†…å®¹è€Œå·²ã€‚ å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š æŒ‰ä¸‹ G è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„æœ€åä¸€è¡Œï¼ˆå…¶å®åˆ«çš„è¡Œä¹Ÿå¯ä»¥ï¼Œåªæ˜¯è·³è½¬åˆ°æœ€åä¸€è¡Œæˆ‘ä»¬ç¼–è¾‘å®çš„æ—¶å€™æ¯”è¾ƒä¸ä¼šå—åˆ°å¹²æ‰°ï¼‰ï¼Œç„¶åè¾“å…¥ :put \u003cregister\u003e å‘½ä»¤ï¼Œå¯¹åº”å¯„å­˜å™¨é‡Œé¢çš„å†…å®¹å°±ä¼šè¢«ç²˜è´´åœ¨ä¸‹ä¸€è¡Œ ç„¶åæˆ‘ä»¬å¼€å§‹ç¼–è¾‘å°±è¡Œ ç¼–è¾‘å®Œæˆä¹‹åï¼ˆç¡®ä¿è¿˜åœ¨è¿™ä¸€è¡Œï¼‰ï¼ŒæŒ‰ä¸‹ :d \u003cregister\u003e å°±å¯ä»¥æŠŠå½“å‰è¡Œçš„å†…å®¹å­˜å›å» ä¸‹é¢æ˜¯æˆ‘å½•åˆ¶çš„ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘ä»¬æ¥å½•åˆ¶äº†ä¸€ä¸ªå®æ”¾åœ¨å¯„å­˜å™¨ y é‡Œé¢ï¼ŒåŠŸèƒ½æ˜¯åœ¨å½“å‰è¡Œçš„æœ«å°¾è¿½åŠ  worldï¼Œç°åœ¨æˆ‘æƒ³è¦ä¿®æ”¹åœ¨å½“å‰è¡Œè¿½åŠ  hello world ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:4:3","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"å’Œå…¶ä»–å·¥å…·ååŒå·¥ä½œ åœ¨ Linux ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€äº›å‘½ä»¤è¡Œå·¥å…·å’Œ vim ç»“åˆä½¿ç”¨ã€‚ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ¯”å¦‚ï¼šæˆ‘ä»¬æƒ³è¦æ‰¹é‡ç¼–è¾‘ä¸€äº›æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªæ–‡ä»¶æ•£è½åœ¨ä¸åŒçš„åœ°æ–¹ã€‚é‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ find å‘½ä»¤å’Œ vim åšåˆ°è¿™ä»¶äº‹æƒ…ã€‚å¯ä»¥å‚è€ƒè¿™ä¸ª. ä½¿ç”¨ find \u003cpattern\u003e -exec vim {} + æ‰“å¼€æ‰€æœ‰å¯¹åº”çš„æ–‡ä»¶ ä½¿ç”¨ä¹‹å‰æåˆ°è¿‡çš„ bufdo å‘½ä»¤æ‰¹é‡æ“ä½œ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:5:0","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim"],"content":"æ€»ç»“ è¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„å…³äº vim é‡Œé¢å®çš„åº”ç”¨ï¼Œè¿™åªæ˜¯ vim å¼ºå¤§åŠŸèƒ½çš„å†°å±±ä¸€è§’ï¼Œå½“ä½ æŒæ¡å…¶ä»– vim ç›¸å…³çš„åŠŸèƒ½çš„æ—¶å€™ï¼ˆæ¯”å¦‚æœç´¢ä¸æ›¿æ¢ï¼Œå¿«é€Ÿå®šä½åˆ°æŸä¸ªä½ç½®ï¼‰ï¼Œæ‰èƒ½å‘æŒ¥å‡º vim çš„æœ€å¤§æ•ˆåŠ›ã€‚å¦‚æœè¿™ç¯‡åšå®¢å¯ä»¥è®©ä½ å¯¹ vim äº§ç”Ÿå…´è¶£é‚£å°±å†å¥½ä¸è¿‡ã€‚åˆ«å¿˜äº†ä¸€å¥è‘—åçš„è¯ï¼šä¸€å¼€å§‹æˆ‘ä»¬æŒ‘é€‰äº†æˆ‘ä»¬å–œæ¬¢çš„å·¥å…·ï¼Œåæ¥å·¥å…·ä¼šåè¿‡æ¥å¡‘é€ æˆ‘ä»¬ï¼Œå®ƒç”šè‡³å½±å“ç€æˆ‘ä»¬çš„æ€ç»´ğŸ˜‰ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:6:0","tags":["Vim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Compiler"],"content":"use the semantic actions to generate the symbol tables in ANTLR4","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"ä»€ä¹ˆæ˜¯ semantic actions å½“ Parser å¤„ç†è¾“å…¥çš„ä»£ç çš„æ—¶å€™ä¸ä»…è¦åˆ¤æ–­æ˜¯å¦è¯­æ³•å’Œå¥æ³•éƒ½æ­£ç¡®ï¼Œè¿˜å¯ä»¥æ‰§è¡Œä¸€äº›æœ‰ç”¨çš„æ“ä½œï¼Œè¿™äº›æ“ä½œå°±å«åš Semantic actionsã€‚å…¶å®ä¹Ÿå°±æ˜¯ä¸€æ®µä»£ç ï¼Œä¸€èˆ¬åµŒå…¥åœ¨åœ¨è¯­æ³•æ–‡ä»¶çš„è§„åˆ™é‡Œé¢ã€‚é‚£ä¹ˆå½“ parser åº”ç”¨è¿™ä¸ªè§„åˆ™çš„æ—¶å€™å°±ä¼šæ‰§è¡Œä½ è®¾ç½®çš„è¿™æ®µä»£ç ã€‚æ¢ä¸ªè§’åº¦ç†è§£ï¼Œsemantic actions å…¶å®å°±æ˜¯â€œè§¦å‘å™¨â€ï¼Œè§¦å‘æ¡ä»¶å°±æ˜¯ parser åº”ç”¨äº†å¯¹åº”çš„è§„åˆ™ã€‚ ä»Šå¤©è¿™ç¯‡æ–‡ç« è¦æ¢è®¨çš„å°±æ˜¯ä¸€ä¸ªå…³äº semantic actions çš„åº”ç”¨â€”â€”å®ç°ä¸€ä¸ªç®€å•çš„ symbol tableï¼Œç”¨åˆ°çš„å·¥å…·æ˜¯ ANTLR4ã€‚ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:1:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"ä»€ä¹ˆæ˜¯ symbol table ç¼–è¯‘å™¨åœ¨å¤„ç†æˆ‘ä»¬çš„ä»£ç çš„æ—¶å€™ä¼šåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª symbol tableï¼Œç”¨æ¥å­˜å‚¨ç¨‹åºé‡Œé¢æ‰€æœ‰å…³äºå˜é‡çš„ä¿¡æ¯ï¼šå˜é‡åã€æ•°æ®ç±»å‹ã€å˜é‡æ‰€å±çš„ä½œç”¨åŸŸç­‰ã€‚symbol table å¯ä»¥æ˜¯ä¸‹é¢è¿™ç§å½¢å¼ï¼š Symbol name Type Scope bar function, double extern x double function parameter foo function, double global count int function parameter sum double block local i int for-loop statement ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:2:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"å¦‚ä½•åœ¨ ANTLR çš„è¯­æ³•æ–‡ä»¶é‡Œé¢æ³¨å…¥åŠ¨ä½œ ANTLR4 æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ parse generatorï¼Œæˆ‘ä»¬åªè¦ç¼–å†™å¥½è¯­æ³•æ–‡ä»¶ï¼Œå°±èƒ½è®©å®ƒå¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ Parserï¼Œç”Ÿæˆçš„ Parser å¯ä»¥æ”¯æŒå¤šç§ç›®æ ‡è¯­è¨€ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±ç”¨çš„æ˜¯ Pythonï¼Œé‚£ä¹ˆæœ€åç”Ÿæˆçš„ Parser å°±æ˜¯ Python æ–‡ä»¶ã€‚ ANTLR4 ä¹Ÿæä¾›äº†æ–¹æ³•è®©æˆ‘ä»¬å¯ä»¥åœ¨è¯­æ³•æ–‡ä»¶é‡Œé¢æ’å…¥åŠ¨ä½œï¼Œè¿™äº›åŠ¨ä½œæœ€åéƒ½ä¼šè¢« ANTLR4 æ³¨å…¥åˆ°ç”Ÿæˆçš„ Parser æ–‡ä»¶é‡Œé¢ã€‚å› æ­¤ï¼ŒåŠ¨ä½œç”¨ä»€ä¹ˆè¯­è¨€å†™å–å†³äºä½ è¾“å‡º Parser çš„ç›®æ ‡è¯­è¨€æ˜¯ä»€ä¹ˆ âš ï¸è¿™é‡Œå‡å®šä½ å¯¹å¦‚ä½•ç¼–å†™ ANTLR4 çš„è¯­æ³•æ–‡ä»¶ï¼ˆ*.g4ï¼‰æœ‰åŸºæœ¬äº†è§£ï¼Œä¸ä¼šè¿›è¡Œèµ˜è¿°ï¼Œæœ¬æ–‡åªé›†ä¸­ä»‹ç»å¦‚ä½•åœ¨è¯­æ³•æ–‡ä»¶é‡Œé¢æ’å…¥åŠ¨ä½œ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"åŠ¨ä½œæ³¨å…¥çš„ä½ç½®å’Œæ–¹æ³• ä¸‹é¢æ˜¯ç®€åŒ–çš„ç”Ÿæˆçš„ Parser æ–‡ä»¶çš„ä»£ç æ¨¡æ¿ã€‚æ€»ä½“ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬èƒ½æ³¨å…¥çš„ä½ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š \u003cheader\u003e class xxxParser(Parser): ... \u003cmember\u003e def rule(self): ... \u003caction\u003e ä¸‹é¢æˆ‘å¯¹æ¯ä¸ªä½ç½®çš„ä¸åŒè¯­æ³•è¿›è¡Œè¯´æ˜ï¼š \u003cheader\u003e ANTLR4 æœ¬æ¥å°±æ˜¯ç”¨ Java å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨çš„ç›®æ ‡è¯­è¨€ä¹Ÿæ˜¯ Java çš„è¯ï¼Œè¿™ä¸ªä¼šæ¯”è¾ƒç”¨å¾—åˆ°ã€‚ä¸€èˆ¬å°±æ˜¯ç”¨æ¥æ”¾ import è¯­å¥çš„ã€‚å¦‚æœæ˜¯ python çš„è¯å“ªé‡Œéƒ½èƒ½ import å°±æ¯”è¾ƒæ²¡å·®ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼ˆæ”¾åœ¨ *.g4 æ–‡ä»¶é‡Œé¢ï¼Œä¸‹åŒï¼‰ @header{ everything here will go to \u003cheader\u003e } \u003cmember\u003e è¿™ä¸ªæ”¾çš„å°±æ˜¯ç±»çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯å­—æ®µä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ã€‚ANTLR4 æ”¯æŒå¾€ Lexer å’Œ Parser åˆ†åˆ«æˆ–è€…åŒæ—¶æ³¨å…¥ä»£ç ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼š @members { everything here will go to \u003cmember\u003e in xxxLexer \u0026\u0026 xxxParser } @Lexer::members { everything here will go to \u003cmember\u003e in xxxLexer } @Parser::members { everything here will go to \u003cmember\u003e in xxxParser } âš ï¸åœ¨æˆ‘ä½¿ç”¨çš„ antlr4-python3-runtime ä¸­ï¼ˆ4.10ï¼‰ï¼Œè¿˜æ— æ³•åœ¨æ’å…¥ç±»çš„å­—æ®µè¿›è¡Œæ³¨é‡Š \u003caction\u003e åœ¨ ANTLR4 ä¸­ï¼ŒåŠ¨ä½œæ˜¯ç”¨èŠ±æ‹¬å· {\u003cspecific-language-here\u003e} æ‹¬èµ·æ¥çš„ä»£ç ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œçœ‹ä½ æœ€åè¾“å‡ºçš„ Parser æƒ³è¦æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œä½ å°±ç”¨ä»€ä¹ˆè¯­è¨€å†™åŠ¨ä½œã€‚ åŠ¨ä½œä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€æ¡è§„åˆ™çš„æŸä¸ª symbol ä¹‹åï¼Œæ„æ€æ˜¯è¯´åœ¨ parser åº”ç”¨è¿™æ¡è§„åˆ™çš„æ—¶å€™æ‰§è¡Œåˆ°è¿™é‡Œå°±æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚è¿™é‡Œçš„ symbol å¯ä»¥æ˜¯ terminal ä¹Ÿå¯ä»¥æ˜¯ nonterminalã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ $symbol.attr çš„æ–¹å¼è®¿é—®åˆ°å¯¹åº”çš„å±æ€§ï¼Œæœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š $terminal.text # origin text $terminal.type # an integer stands for type $terminal.attributes $terminal.line # the line number $terminal.pos # the position of the first char in the lineï¼Œ0-based $terminal.index $terminal.channel # the channel of this terminal, won't discuss in this post $terminal.int # return an interger if this terminal is an integer $nonterminal.text # origin text $nonterminal.start # 1st Token $nonterminal.stop # last Token $nonterminal.ctx # return context object ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:1","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"ä¸¾ä¸ªä¾‹å­ âš ï¸ä¸‹é¢éƒ½åªä¼šç»™å‡ºéƒ¨åˆ†ä»£ç ï¼Œå®Œæ•´çš„ä»£ç åœ¨æˆ‘çš„ Github é¡¹ç›® âš ï¸å› ä¸ºè¿™ä¸ªé¡¹ç›®è¦æ±‚æŠŠ warning è¾“å‡ºåœ¨å…¶ä»–è¾“å‡ºå‰é¢ï¼Œæ‰€ä»¥æˆ‘ç”¨ warning_list å’Œ output_list æ¥å­˜å‚¨ï¼Œæœ€åå†ä¸€èµ·è¾“å‡º ä¸‹é¢ä»¥æ™®æ¸¡å¤§å­¦ 2015 å¹´çš„å¼€è®¾çš„ç¼–è¯‘å™¨è¯¾ç¨‹çš„é¡¹ç›®ä½œä¸šä¸ºä¾‹ï¼Œæ•´ä¸ªé¡¹ç›®è¦å®ç°ä¸€ä¸ª Micro è¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œå…³äº Micro è¯­è¨€çš„è¯­æ³•ï¼Œå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ã€‚ä¸‹é¢æˆ‘ä¼šå¯¹æ­¥éª¤ä¸‰çš„ä½œä¸šè¦æ±‚è¿›è¡Œä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚ åœ¨è¿™ä¸ªä½œä¸šä¸­æˆ‘ä»¬è¦æ„å»ºä¸€ä¸ª symbol tableï¼Œå¹¶åœ¨ç›¸åº”çš„æ—¶åˆ»è¾“å‡ºç›¸å…³çš„ä¿¡æ¯ï¼š æ¯å½“æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸä¹‹å‰ï¼ˆå¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»£ç å—ï¼‰ï¼Œè¦è¿›è¡Œç›¸å…³çš„è¾“å‡º å¦‚æœé‡åˆ°å˜é‡å£°æ˜ï¼Œå°±è¾“å‡ºå˜é‡åå’Œå˜é‡ç±»å‹ï¼Œæœ‰å€¼çš„è¯ä¹Ÿè¦è¾“å‡ºã€‚ å¦‚æœå£°æ˜çš„å˜é‡åœ¨å¤–éƒ¨ä½œç”¨åŸŸå·²ç»å£°æ˜è¿‡çš„è¯è¦è¾“å‡ºï¼šSHADOW WARNING \u003cvar_name\u003eï¼Œé€‚ç”¨äºæœ‰åµŒå¥—çš„ä½œç”¨åŸŸå‡ºç°çš„æƒ…å†µ å¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸå·²ç»æœ‰åŒåçš„å˜é‡ï¼Œå°±è¦è¾“å‡ºï¼šDECLARATION ERROR \u003cvar_name\u003eã€‚å¦‚æœå‡ºç°äº†è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆæœ€åç¨‹åºåªè¾“å‡ºè¿™ä¸ªä¿¡æ¯ Symbol table \u003cscope_name\u003e name \u003cvar_name\u003e type \u003ctype_name\u003e name \u003cvar_name\u003e type \u003ctype_name\u003e value \u003cstring_value\u003e ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"æ•°æ®ç»“æ„çš„é€‰å–åŠå¯¹åº”çš„æ–¹æ³• ğŸ¤”å…ˆè¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œè¦ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„è¡¨ç¤º symbol tableï¼Ÿä¸€ä¸ª symbol table åº”è¯¥è¦æ»¡è¶³ä¸‹é¢çš„ç‰¹ç‚¹ï¼š è¦èƒ½å¤Ÿæ”¯æŒé«˜æ•ˆç‡åœ°æŸ¥è¯¢ è¦èƒ½å¤Ÿæ”¯æŒé«˜æ•ˆç‡åœ°æ’å…¥ï¼Œå› ä¸ºç¨‹åºä¸­å¯èƒ½åŒ…å«å¤§é‡çš„å˜é‡å£°æ˜ è¦èƒ½å¤Ÿè®°å½•å˜é‡çš„ä½œç”¨åŸŸ ä¸éš¾æƒ³å‡ºï¼Œæ”¯æŒé«˜æ•ˆç‡æŸ¥è¯¢å’Œæ’å…¥çš„æ•°æ®ç»“æ„å°±æ˜¯ã€Œå“ˆå¸Œè¡¨ã€ã€‚ä¸ºäº†ç»´æŠ¤å˜é‡çš„ä½œç”¨åŸŸï¼Œå¯ä»¥æŠŠåŒä¸ªä½œç”¨åŸŸä¸‹çš„å˜é‡æ”¾åœ¨åŒä¸ªå“ˆå¸Œè¡¨é‡Œé¢ï¼Œç”¨ä¸€ä¸ªåˆ—è¡¨æ¥è®°ä½æ‰€æœ‰çš„å˜é‡ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ [{scope1}, {scope2},...] è¿™æ ·ã€‚åŒæ—¶ç»´æŠ¤ä¸€ä¸ª self.current_scope æ¥è®°ä½å½“å‰å¤„äºå“ªä¸€ä¸ªå˜é‡ä½œç”¨åŸŸé‡Œé¢ã€‚æ¯å½“æœ‰ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸå‡ºç°çš„æ—¶å€™ï¼Œä¿å­˜å½“å‰çš„ä½œç”¨åŸŸï¼Œå¾€åˆ—è¡¨é‡Œæ’å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œå†æ›´æ–° self.current_scopeã€‚ ğŸ“’ è¿™é‡Œçš„ list å…¶å®å°±æ˜¯ç”¨æ¥æ¨¡æ‹Ÿæ ˆ ğŸ¤”æˆ‘ä»¬è¦å®ç°ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Ÿèµ·ç è¦æœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š lookup(identifier, value)ï¼šæ’å…¥å˜é‡åˆ°å½“å‰çš„ symbol table é‡Œé¢ã€‚æ ¹æ®è¿™ä¸ªé¡¹ç›®ä½œä¸šçš„è¦æ±‚ï¼Œè¿˜åº”è¯¥æŸ¥è¯¢æ˜¯å¦å˜é‡å·²ç»è¢«å£°æ˜è¿‡ enter_new_scope()ï¼šä¿å­˜å½“å‰çš„ symbol tableï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå˜é‡ä½œç”¨åŸŸå¹¶åˆå§‹åŒ–ä¸ºç©º exit_scope()ï¼šæ¸…ç©ºå½“å‰çš„ symbol tableï¼Œæ‰¾åˆ°ä¸Šä¸€ä¸ª symbol table æ‰€ä»¥å¯¹åº” @parser:members é‡Œé¢çš„ä»£ç å¦‚ä¸‹ @parser::members { def init(self): self.current_scope = None self.block_count = 0 self.warning_list = [] # just for printing self.output_list = [] # just for printing self.declaration_error = '' def enter_new_scope(self): if not hasattr(self, '_scopes'): setattr(self, '_scopes', []) # save the current_scope import copy if len(self._scopes) \u003e 0: self._scopes.append(copy.deepcopy(self.current_scope)) self._scopes.append({}) self.current_scope = self._scopes[-1] def exit_scope(self): del self._scopes[-1] if len(self._scopes) \u003e 0: self.current_scope = self._scopes[-1] def lookup(self, identifier, value): # check all scopes found = False for scope in self._scopes[:-1][::-1]: #print(f\"the scope: {scope}\") if identifier in scope: found = True if found: self.warning_list.append(f\"SHADOW WARNING {identifier}\") # only record the 1st declaration error if identifier in self.current_scope and self.declaration_error == '': self.declaration_error = f\"DECLARATION ERROR {identifier}\" self.current_scope[identifier] = value } ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:1","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"æ³¨å…¥åŠ¨ä½œåˆ°å˜é‡å£°æ˜ä¸­ ğŸ§æ¥ä¸‹æ¥å°±æ˜¯è¦åœ¨å¯¹åº”çš„è¯­æ³•è§„åˆ™é‡Œé¢æ³¨å…¥åŠ¨ä½œã€‚æˆ‘ä»¬æƒ³è¦åœ¨å®šä¹‰å˜é‡çš„æ—¶å€™è¾“å‡ºç›¸å…³çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆè¦è§‚å¯Ÿåœ¨ Micro è¯­è¨€ä¸­å˜é‡å£°æ˜çš„è§„åˆ™æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š ... var_decl : var_type id_list ';' ; var_type : 'FLOAT' | 'INT' ; any_type : var_type | 'VOID' ; id_list : id id_tail ; id_tail : ',' id id_tail | ; ... å¯ä»¥çœ‹åˆ°ï¼Œå£°æ˜å˜é‡å¯¹åº”çš„æ˜¯ var_decl è§„åˆ™ï¼Œä¸€æ¬¡å¯ä»¥å£°æ˜ä¸€è‡³å¤šä¸ªå˜é‡ï¼Œæ¯ä¸€ä¸ªå˜é‡ä¹‹é—´ç”¨ , éš”å¼€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™æ¡è§„åˆ™çš„æœ«å°¾æœ€åæ³¨å…¥å¦‚ä¸‹çš„åŠ¨ä½œä»£ç ã€‚ âš ï¸è¦æ³¨æ„å¦‚æœä½ ä¹Ÿæ˜¯ä½¿ç”¨ python çš„è¯ï¼Œè¿™é‡Œæ‰€ä»¥ç¼©è¿›ä¼šæœ‰ç‚¹æ€ªï¼Œå› ä¸ºæ¯ä¸€è¡Œéƒ½è¦ä»æœ€å·¦è¾¹å¼€å§‹ï¼Œä½†æœ€åç”Ÿæˆçš„ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ ... var_decl : var_type id_list ';' { # NOTE: the indentation is correct, ANLTR4 will handle this for us :) # for all variable declarations, we should output the name \u0026\u0026 type # in the same variable declaration, it means all of the variables have the same type for variable in $id_list.text.split(','): self.lookup(variable, None) self.output_list.append(f\"name {variable} type {$var_type.text}\") } ; ... æˆ‘ä»¬ç”¨ $id_list.text æ¥è·å–æœ¬æ¥çš„å˜é‡å£°æ˜å¯¹åº”çš„æ–‡æœ¬ï¼Œç”¨ $var_type.text æ¥è·å–å¯¹åº”çš„å˜é‡ç±»å‹ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:2","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"å…³äºå˜é‡ä½œç”¨åŸŸçš„å¤„ç† ä¸‹é¢ä»¥ program è§„åˆ™ä¸ºä¾‹ï¼ˆå‡½æ•°å’Œä»£ç å—çš„ç±»ä¼¼ï¼‰ï¼Œprogarm è§„åˆ™æ˜¯ Micro è¯­æ³•çš„èµ·å§‹è§„åˆ™ï¼Œè§„å®šäº† Micro ç¨‹åºåº”è¯¥è¦æœ‰çš„å¤§æ¡†æ¶ï¼Œè§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š program : 'PROGRAM' id 'BEGIN' pgm_body 'END' ; æˆ‘ä»¬å¤„ç†å®Œ PROGRAM è¿™ä¸ª token ä¹‹åå°±å¯ä»¥åˆå§‹åŒ–ç¬¬ä¸€ä¸ªä½œç”¨åŸŸï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œæœ€åè¦å¤„ç†å®Œç¨‹åºå†é€€å‡ºè¿™ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå¿«æƒ³åˆ°åº”è¯¥æŠŠåŠ¨ä½œæ³¨å…¥åœ¨å“ªé‡Œ program : 'PROGRAM' id 'BEGIN' pgm_body 'END' ; ^ ^ | 2 æœ€åæ’å…¥ç›¸å…³çš„åŠ¨ä½œ program : 'PROGRAM' { self.init() self.output_list.append(\"Symbol table GLOBAL\") self.enter_new_scope() } id 'BEGIN' pgm_body 'END' { self.exit_scope() # output everything after we parsing this program if self.declaration_error != '': print(self.declaration_error) else: if len(self.warning_list) \u003e 0: print('\\n'.join(self.warning_list)) print('\\n'.join(self.output_list)) } ; ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:3","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"æ‰©å±•é˜…è¯» å‰é¢åªæ¶‰åŠåˆ°ç®€å•çš„åŠ¨ä½œæ³¨å…¥ï¼ŒANTLR4 å…¶å®æ”¯æŒçš„åŠŸèƒ½è¿˜æ›´å¤šï¼š æ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®© nonterminal è¿”å›å€¼ åœ¨åŒä¸€æ¡è§„åˆ™å¦‚æœå‡ºç°å¤šä¸ªåŒåçš„ nonterminal çš„è¯å¯ä»¥èµ·åå­— ä¸‹é¢æ˜¯æ¥è‡ªä¹¦ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼Œå°±å¾ˆå¥½åœ°å±•ç¤ºäº†ä¸Šé¢ä¸¤ä¸ªç”¨æ³• e returns [int v] : a=e op=('*'|'/') b=e {$v = self.eval($a.v, $op, $b.v)} | a=e op=('+'|'-') b=e {$v = self.eval($a.v, $op, $b.v)} | INT {$v = $INT.int} | ID ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:5:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"æ€»ç»“ ä»è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥å­¦ä¹ åˆ°è¦å¦‚ä½•åœ¨ ANTLR4 é‡Œé¢ä½¿ç”¨åŠ¨ä½œï¼Œç”Ÿæˆ symbol table åªæ˜¯å…¶ä¸­ä¸€ä¸ªè¿ç”¨ã€‚åœ¨ä»£ç é‡Œé¢æ³¨å…¥åŠ¨ä½œæ˜¯å¾ˆç¬¦åˆç›´è§‰çš„åšæ³•ï¼Œå¯ä»¥å¿«é€Ÿå®ç°è‡ªå·±æƒ³è¦çš„åŠŸèƒ½ã€‚ä¸è¿‡ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®ƒæ˜¯ language-dependent çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸€æ—¦æ¢äº† ANTLR è¾“å‡ºçš„ç›®æ ‡è¯­è¨€ï¼Œä½ æ³¨å…¥çš„åŠ¨ä½œå…¨éƒ¨è¦æ”¹æˆæ–°çš„ç›®æ ‡è¯­è¨€ã€‚å¦å¤–å°±æ˜¯ä¼šè®©æœ¬æ¥å¹²å‡€çš„è¯­æ³•æ–‡ä»¶ä¸€å›¢ç³Ÿã€‚ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:6:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":"å‚è€ƒ Symbol table - wiki ã€ŠANTLR4 æƒå¨æŒ‡å—ã€‹ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:7:0","tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Algorithm"],"content":"A simple explanation of the boyer-moore majority voting algorithm","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/","tags":["Algorithm"],"title":"Boyer-Moore Majority Voting Algorithm Explained","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Algorithm"],"content":"å¼•è¨€ ä»Šå¤©åˆåšåˆ°äº† Leetcode 169. å¤šæ•°å…ƒç´  è¿™ä¸€é“é¢˜. æˆ‘ä¾ç¨€è®°å¾—æœ€ä¼˜çš„è§£æ³•å«åšä»€ä¹ˆæ‘©å°”æŠ•ç¥¨æ³•. ä½†æ˜¯æˆ‘å¯¹å®ƒçš„å°è±¡ç«Ÿç„¶åªæœ‰è¿™ä¸ªåå­—æœ¬èº«äº† Orz. å¯¹äºè¿™ä¸ªç®—æ³•æœ¬èº«å€’æ˜¯å¿˜å¾—ä¸€å¹²äºŒå‡€. äºæ˜¯æˆ‘æ‰“ç®—ç³»ç»Ÿæ€§åœ°å­¦ä¹ ä¸€ä¸‹è¿™ä¸ªç®—æ³•çš„åŸç†, å¹¶å°†å®ƒæ€»ç»“å‡ºæ¥å†™æˆè¿™ç¯‡åšå®¢. ä¸çŸ¥é“åœ¨å“ªé‡Œçœ‹åˆ°çš„ä¸€å¥è¯ : å½“ä½ å¼€å§‹æ•™åˆ«äººçš„æ—¶å€™, ä½ å°±çœŸçš„æŒæ¡å®ƒäº† æ‰€ä»¥, æˆ‘ä»Šå¤©åœ¨è¿™é‡Œæ‰“ç®—è·Ÿå¤§å®¶åˆ†äº«è¿™ä¸ªç®—æ³•, å¹¶è¯•å›¾ä»¥æµ…æ˜¾çš„è¯­è¨€è®©ä½ ä¹Ÿå­¦ä¼šè¿™ä¸ªæ–¹æ³•, é‚£ä¹ˆè®©æˆ‘ä»¬å¼€å§‹å§ :) ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:1:0","tags":["Algorithm"],"title":"Boyer-Moore Majority Voting Algorithm Explained","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Algorithm"],"content":"å…ˆä»ç®€å•çš„æ–¹æ³•å¼€å§‹èŠèµ· å¦‚æœä»æ¥æ²¡æœ‰å¬è¯´è¿‡æ‘©å°”æŠ•ç¥¨æ³•, æˆ‘ä»¬ä¼šå¦‚ä½•å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜, èµ·ç è¦æœ‰ä¸‹é¢çš„æ€è·¯: ç”¨ç©ºé—´æ¢æ—¶é—´, ä¹Ÿå°±æ˜¯ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æŠŠæ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°è®°ä¸‹æ¥, ç„¶åæˆ‘ä»¬å†æ£€æŸ¥ä¸€éæˆ‘ä»¬çš„å“ˆå¸Œè¡¨å¹¶æ‰¾åˆ°å…¶ä¸­å‡ºç°æ¬¡æ•°å¤§äº $\\lfloor n/2\\rfloor$ çš„å°±å¯ä»¥.è¿™æ ·æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯ $O(n)$ å°è¯•å¯¹æ•°ç»„è¿›è¡Œæ’åº, å› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„å…ƒç´ è¶…è¿‡äº†æ•°ç»„ä¸€åŠçš„é•¿åº¦, è¿™æ„å‘³ç€å®ƒä¸€å®šä¼šå‡ºç°åœ¨æ•°ç»„çš„ä¸­é—´ä½ç½®. è¿™ä¸ªä¹Ÿä¸éš¾æƒ³åˆ°, ä½†æ˜¯ç”¨æ’åºçš„è¯è™½ç„¶ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$, ä½†æ˜¯æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯å¤§äº $O(n)$ çš„, *æ¯”å¦‚å¦‚æœä½ é‡‡ç”¨çš„æ˜¯å¿«é€Ÿæ’åºçš„è¯, æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(nlogn)$ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åšåˆ°æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$, ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ å‘¢? ä¹Ÿå°±æ˜¯ç»“åˆäº†ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹. æœ‰çš„, ç­”æ¡ˆå°±æ˜¯æ‘©å°”æŠ•ç¥¨æ³• ! ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:2:0","tags":["Algorithm"],"title":"Boyer-Moore Majority Voting Algorithm Explained","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Algorithm"],"content":"æ‘©å°”æŠ•ç¥¨æ³• é—®é¢˜æè¿°: å‡è®¾æˆ‘ä»¬çš„æ•°ç»„æœ‰ $n$ ä¸ªå…ƒç´ , æˆ‘ä»¬è¦æ‰¾åˆ°å…¶ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´  ç®—æ³•æµç¨‹: ä»è¿™ $n$ ä¸ªå…ƒç´ ä¸­é€‰ä¸€ä¸ªä½œä¸º candidateï¼Œè®°å½•å®ƒçš„ç¥¨æ•°ä¸º votes = 1. æ­¤æ—¶æˆ‘ä»¬çš„æ•°ç»„ä¸­è¿˜æœ‰ $n-1$ ä¸ªå…ƒç´ , æˆ‘ä»¬æ¯æ¬¡éƒ½å–å‡ºä¸€ä¸ªå…ƒç´ (è®°ä¸º current), å¹¶é‡å¤æ‰§è¡Œä»¥ä¸‹çš„æ­¥éª¤(ä¸€å…± n-1 æ¬¡) å°†å®ƒå’Œæˆ‘ä»¬å½“å‰çš„ candidate åšæ¯”è¾ƒ, å¦‚æœå®ƒä»¬çš„å€¼ä¸€æ ·, é‚£ä¹ˆ votes++, ä¹Ÿå°±æ˜¯æŠ•èµåŒç¥¨ å¦‚æœå®ƒä»¬çš„å€¼ä¸ä¸€æ ·, votes--, ä¹Ÿå°±æ˜¯æŠ•åå¯¹ç¥¨. å¦‚æœæ­¤æ—¶ votes = 0 çš„è¯, é‚£ä¹ˆ candidate \u003c- current, ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è®© current æˆä¸ºäº†æ–°çš„ candidate, å¹¶è®° votes = 1 æœ€å candidate çš„å€¼å°±å¯èƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ , æ­¤æ—¶æˆ‘ä»¬å¾—å†éå†ä¸€éæ•°ç»„è¿›è¡Œè®¡æ•°çœ‹å®ƒåˆ°åº•æ˜¯ä¸æ˜¯ åœ¨çœ‹å®Œä¸Šé¢çš„ç®—æ³•æµç¨‹ä¹‹å, ä½ å¯èƒ½è·Ÿæˆ‘ä¸€æ ·æ„Ÿåˆ°å¾ˆå›°æƒ‘. ä¸ºä»€ä¹ˆè¿™æ ·æœ€åæˆ‘ä»¬å°±èƒ½æ‰¾åˆ°å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ . å…¶å®åªè¦æƒ³æ˜ç™½ä¸€ä¸ªåŸç†å°±å¾ˆç®€å• ğŸ’¡ å‡ºç°æ¬¡æ•°è¶…è¿‡ $\\lfloor n/2\\rfloor$ æ¬¡çš„å…ƒç´ å¦‚æœå­˜åœ¨, æ­¤æ—¶æ•°ç»„ä¸­çš„å…¶ä»–å…ƒç´ ä¸€å®šæ˜¯å‡ºç°æ¬¡æ•°å°äº $\\lfloor n/2\\rfloor$ çš„ è¿™å¥è¯æœ‰ä»€ä¹ˆç”¨å‘¢ ? å› ä¸ºæ‘©å°”æŠ•ç¥¨æ³•çš„åšæ³•å…¶å®å°±æ˜¯æŠ•ç¥¨ å¯ä»¥æ˜¯æŠ•èµåŒç¥¨, æ­¤æ—¶ç›¸å½“äºæˆ‘ä»¬åœ¨ç»Ÿè®¡è¿™ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•° å¯ä»¥æ˜¯æŠ•åå¯¹ç¥¨. ç›¸å½“äºæˆ‘ä»¬æ’¤é”€äº†ä¸€ä¸ªåŒæ„ç¥¨, å°±æ˜¯æŠµæ¶ˆæŠµæ¶ˆæŠµæ¶ˆ!!! ä½†æ˜¯å› ä¸ºå‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ åŠ èµ·æ¥çš„ç¥¨æ•°(èµåŒç¥¨) \u003e å‰©ä¸‹æ‰€æœ‰ä¸æ˜¯çš„(åå¯¹ç¥¨)è¿™ä»¶äº‹æ˜¯ä¸€å®šæˆç«‹çš„, æ‰€ä»¥æ— è®ºæ€æ ·æœ€åèµ¢çš„æ°¸è¿œæ˜¯å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ . äºæ˜¯æˆ‘ä»¬å°±æ‰¾åˆ°äº† :) å¦‚æœè¿˜æ˜¯ä¸æ‡‚å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„è¿™ä¸ª GIF å›¾ç†è§£ä¸€ä¸‹~ ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:3:0","tags":["Algorithm"],"title":"Boyer-Moore Majority Voting Algorithm Explained","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Algorithm"],"content":"ä»£ç  class Solution { public int majorityElement(int[] nums) { if (nums.length \u003c 2) { return nums[0]; } int candidates = nums[0]; int votes = 1; // step 1. start to vote for (int i = 0; i \u003c nums.length; i++) { if (nums[i] != candidates) { votes -= 1; if (votes == 0) { candidates = nums[i]; votes = 1; } } else { votes += 1; } } // step2. check int occurs = 0; for (var val: nums) { if (candidates == val) { occurs += 1; } } if (occurs \u003e= nums.length / 2) { return candidates; } else { return -1; } } } ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:4:0","tags":["Algorithm"],"title":"Boyer-Moore Majority Voting Algorithm Explained","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Algorithm"],"content":"FAQ Q: ä¸ºä»€ä¹ˆè¿˜éœ€è¦ç¬¬äºŒè½®æ£€æŸ¥å‘¢? èƒ½ä¸èƒ½ç›´æ¥çœ‹ votes å‘¢? A: ä¸èƒ½, é¦–å…ˆè¿™ä¸ªã€Œå‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠã€çš„å…ƒç´ ä¸ä¸€å®šå­˜åœ¨. æ¯”å¦‚ [1,2,3]. å¦å¤–å°±ç®—å®ƒå­˜åœ¨, éå†å®Œæ•°ç»„ä¹‹å, æ­¤æ—¶ votes ä¹Ÿä¸ä¸€å®šæ˜¯å®ƒçš„çœŸå®ç¥¨æ•°. æ¯”å¦‚ [1, 2, 2, 2, 3] æœ€å 3 ä¼šæŠ•åå¯¹ç¥¨å¯¼è‡´ votes - 1 ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:5:0","tags":["Algorithm"],"title":"Boyer-Moore Majority Voting Algorithm Explained","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Course"],"content":"The simple solution of proj3.Ants vs. SomeBees of CS61B","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Intro å‰ä¸¤ä¸ªé¡¹ç›®è¿˜ç®—ç®€å•, æ¯”è¾ƒä¸å¤æ‚. ä½†æ˜¯ä»Šå¤©è¿™ä¸ªç¬¬ä¸‰ä¸ªé¡¹ç›®éš¾åº¦ç¡®å®æ˜¯ä¸Šå‡äº†(çœ‹æ¸¸æˆè§„åˆ™å°±çŸ¥é“è¿™ä¸ªæœ‰å¤šå¤æ‚äº†). æ„Ÿè§‰åƒæ˜¯æ¤ç‰©å¤§æˆ˜åƒµå°¸ æ‰€ä»¥æˆ‘æ‰“ç®—ä¸ºä»–å†™ä¸€ç¯‡åšå®¢æ¥æ•´ç†ä¸€ä¸‹å†™ä»£ç æ—¶å€™çš„æ€è·¯. è¯ä¸å¤šè¯´, è®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜å§ ! ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:1:0","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Phase 1: Basic gameplay ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:0","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 1 (1 pt) Part A: Currently, there is no cost for placing any type of Ant, and so there is no challenge to the game. The base class Ant has a food_cost of zero. Override this class attribute for HarvesterAnt and ThrowerAnt according to the â€œFood Costâ€ column in the table below. Part B: Now that placing an Ant costs food, we need to be able to gather more food! To fix this issue, implement the HarvesterAnt class. A HarvesterAnt is a type of Ant that adds one food to the gamestate.food total as its action. æ ¹æ®é¢˜ç›®çš„è¦æ±‚è®¾ç½® HarversterAnt å’Œ ThrowerAnt çš„å±æ€§, åŒæ—¶å®ç° HarvesterAnt çš„ action æ–¹æ³•, è®©å®ƒå¯ä»¥åœ¨æ¯æ¬¡è¡ŒåŠ¨çš„æ—¶å€™ç»™ food + 1 class HarvesterAnt(Ant): \"\"\"HarvesterAnt produces 1 additional food per turn for the colony.\"\"\" name = 'Harvester' implemented = True food_cost = 2 def action(self, gamestate): \"\"\"Produce 1 additional food for the colony. gamestate -- The GameState, used to access game state information. \"\"\" gamestate.food += 1 class ThrowerAnt(Ant): \"\"\"ThrowerAnt throws a leaf each turn at the nearest Bee in its range.\"\"\" name = 'Thrower' implemented = True damage = 1 food_cost = 3 ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:1","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 2 (1 pt) In this problem, youâ€™ll complete Place.__init__ by adding code that tracks entrances. Right now, a Place keeps track only of its exit. We would like a Place to keep track of its entrance as well. A Place needs to track only one entrance. Tracking entrances will be useful when an Ant needs to see what Bees are in front of it in the tunnel. However, simply passing an entrance to a Place constructor will be problematic; we would need to have both the exit and the entrance before creating a Place! (Itâ€™s a chicken or the egg problem.) To get around this problem, we will keep track of entrances in the following way instead. Place.__init__ should use this logic: A newly created Place always starts with its entrance as None. If the Place has an exit, then the exitâ€™s entrance is set to that Place. å…¶å®è¿™ä¸ªèµ›é“æœ‰ç‚¹åƒæ•°æ®ç»“æ„ä¸­çš„åŒå‘é“¾è¡¨çš„ç»“æ„, å¾€å·¦è¾¹ç”¨ .exit, å¾€å³è¾¹ç”¨ .entrance æ–¹æ³•. è¦æ±‚å·²ç»åœ¨ä¸Šé¢ç»™å‡º, æ²¡ä»€ä¹ˆéš¾åº¦ class Place: \"\"\"A Place holds insects and has an exit to another Place.\"\"\" is_hive = False def __init__(self, name, exit=None): \"\"\"Create a Place with the given NAME and EXIT. name -- A string; the name of this Place. exit -- The Place reached by exiting this Place (may be None). \"\"\" self.name = name self.exit = exit self.bees = [] # A list of Bees self.ant = None # An Ant self.entrance = None # A Place # Phase 1: Add an entrance to the exit if exit is not None: self.exit.entrance = self ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:2","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 3 (1 pt) In order for a ThrowerAnt to throw a leaf, it must know which bee to hit. The provided implementation of the nearest_bee method in the ThrowerAnt class only allows them to hit bees in the same Place. Your job is to fix it so that a ThrowerAnt will throw_at the nearest bee in front of it that is not still in the Hive. This includes bees that are in the same Place as a ThrowerAnt Hint: All Places have an is_hive attribute which is True when that place is the Hive. Change nearest_bee so that it returns a random Bee from the nearest place that contains bees. Your implementation should follow this logic: Start from the current Place of the ThrowerAnt. For each place, return a random bee if there is any, and if not, inspect the place in front of it (stored as the current placeâ€™s entrance). If there is no bee to attack, return None. ç°åœ¨æˆ‘ä»¬è¦ç»™ ThrowerAnt åŠ ä¸ŠåŠŸèƒ½, è¿™æ ·æ‰èƒ½è®©å®ƒæ”»å‡»è·ç¦»å®ƒæœ€è¿‘çš„èœœèœ‚ğŸ. æ³¨æ„å¦‚æœèœœèœ‚å’Œä»–åœ¨åŒä¸€ä¸ªæ ¼å­é‡Œ, ä¹Ÿæ˜¯å¯ä»¥æ”»å‡»çš„. æˆ‘ä»¬çš„å·¥ä½œè¦æ±‚æ˜¯éå†æ¯ä¸ªæ ¼å­(å°±è·Ÿä½ éå†é“¾è¡¨ä¸€æ ·)æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰èœœèœ‚çš„æ ¼å­, éšæœºè¿”å›ä¸€ä¸ªèœœèœ‚ def nearest_bee(self): \"\"\"Return the nearest Bee in a Place that is not the HIVE, connected to the ThrowerAnt's Place by following entrances. This method returns None if there is no such Bee (or none in range). \"\"\" pos = self.place while pos.entrance is not None: if not pos.is_hive: if len(pos.bees) \u003e 0: return random_bee(pos.bees) pos = pos.entrance return None ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:3","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Phase 2: Ants! ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:3:0","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 4 (2 pt) A ThrowerAnt is a powerful threat to the bees, but it has a high food cost. In this problem, youâ€™ll implement two subclasses of ThrowerAnt that are less costly but have constraints on the distance they can throw: The LongThrower can only throw_at a Bee that is found after following at least 5 entrance transitions. It cannot hit Bees that are in the same Place as it or the first 4 Places in front of it. If there are two Bees, one too close to the LongThrower and the other within its range, the LongThrower should only throw at the farther Bee, which is within its range, instead of trying to hit the closer Bee. The ShortThrower can only throw_at a Bee that is found after following at most 3 entrance transitions. It cannot throw at any bees further than 3 Places in front of it. Neither of these specialized throwers can throw_at a Bee that is exactly 4 Places away. ç°åœ¨æˆ‘ä»¬è¦å®ç°ä¸¤ä¸ªç±», LongThrower å’Œ ShortThrower. ä¸¤ä¸ªéƒ½æ˜¯ ThrowererAnt çš„å­ç±», å…¶å®ä»ä»–ä»¬çš„åå­—å¯ä»¥çœ‹å‡ºæ¥ä»–ä»¬çš„åŒºåˆ«åœ¨äºæ”»å‡»èŒƒå›´çš„ä¸åŒ. æ€è·¯: æˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºæ”»å‡»èŒƒå›´è¿™ä¸ªæ¦‚å¿µå‘¢ ? å…¶å®å¾ˆç®€å•, åœ¨ problem 3 ä¸­æˆ‘ä»¬æ‰¾åˆ°æœ€è¿‘çš„èœœèœ‚çš„æ—¶å€™å°±æ˜¯ä¸€ä¸ªæ ¼å­ä¸€ä¸ªæ ¼å­å‰è¿›çš„, æˆ‘ä»¬å¯ä»¥åŒæ—¶è®¡ç®—æ­¥æ•°, é‚£ä¹ˆæˆ‘ä»¬å°±è¿™é“è¿™ä¸ªè·ç¦», å†é…åˆ min_range å’Œ max_range è¿™ä¸¤ä¸ªå‚æ•°(ç±»å˜é‡, è¡¨ç¤ºè¿™ä¸ªç±»å¯¹åº”çš„èš‚èšçš„æ”»å‡»èŒƒå›´, åªæœ‰è½åœ¨è¿™ä¸ªåŒºé—´çš„æ‰è¡Œ) åŒæ—¶è¦æ³¨æ„æˆ‘ä»¬ä¸èƒ½å½±å“ problem 3 ä¸­çš„ç»“æœ, è¿™ä¹Ÿå®¹æ˜“æƒ³åˆ°, æˆ‘ä»¬è®© min_range=-1, max_range=float('inf'), è¿™æ ·å°±ç›¸å½“äºæ²¡æœ‰é™åˆ¶äº† ~! è€Œä¸”å› ä¸ºé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ä¼˜åŠ¿, æˆ‘ä»¬çœå»äº†ä¸å°‘ä»£ç é‡. # In problem 3 class ThrowerAnt(Ant): \"\"\"ThrowerAnt throws a leaf each turn at the nearest Bee in its range.\"\"\" name = 'Thrower' implemented = True damage = 1 food_cost = 3 min_range = -1 max_range = float('inf') def nearest_bee(self): \"\"\"Return the nearest Bee in a Place that is not the HIVE, connected to the ThrowerAnt's Place by following entrances. This method returns None if there is no such Bee (or none in range). \"\"\" steps_cnt = 0 pos = self.place while pos.entrance is not None: if steps_cnt \u003e self.max_range: return None if not pos.is_hive: if len(pos.bees) \u003e 0 and steps_cnt \u003e= self.min_range: return random_bee(pos.bees) pos = pos.entrance steps_cnt += 1 return None class ShortThrower(ThrowerAnt): \"\"\"A ThrowerAnt that only throws leaves at Bees at most 3 places away.\"\"\" name = 'Short' food_cost = 2 # OVERRIDE CLASS ATTRIBUTES HERE implemented = True # Change to True to view in the GUI max_range = 3 class LongThrower(ThrowerAnt): \"\"\"A ThrowerAnt that only throws leaves at Bees at least 5 places away.\"\"\" name = 'Long' food_cost = 2 # OVERRIDE CLASS ATTRIBUTES HERE implemented = True # Change to True to view in the GUI min_range = 5 ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:3:1","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 5 (3 pt) Implement the FireAnt, which does damage when it receives damage. Specifically, if it is damaged by amount health units, it does a damage of amount to all bees in its place (this is called reflected damage). If it dies, it does an additional amount of damage, as specified by its damage attribute, which has a default value of 3 as defined in the FireAnt class. To implement this, override FireAntâ€™s reduce_health method. Your overriden method should call the reduce_health method inherited from the superclass (Ant) to reduce the current FireAnt instanceâ€™s health. Calling the inherited reduce_health method on a FireAnt instance reduces the insectâ€™s health by the given amount and removes the insect from its place if its health reaches zero or lower. è¿™ä¸ª FireAnt æœ‰ç‚¹æ„æ€çš„, å½“ä»–æ”¶åˆ°ä¼¤å®³çš„æ—¶å€™ä¼šåå¼¹è‡ªå·±å—åˆ°çš„ä¼¤å®³åˆ°å½“å‰æ ¼å­æ‰€æœ‰çš„èœœèœ‚ä¸Š, åŒæ—¶å¦‚æœå®ƒå› æ­¤æ­»äº†è¿˜èƒ½å¯¹è¿™äº›èœœèœ‚å†ä¸€æ¬¡é€ æˆä¼¤å®³(è¿™ä¸€æ¬¡å–å†³äºè‡ªå·±çš„æ”»å‡»åŠ›) è¿™ä¸ªæ¯”è¾ƒ tricky çš„åœ°æ–¹æ˜¯: å½“å‰æ ¼å­çš„æ‰€æœ‰èœœèœ‚æ˜¯ä¸€ä¸ª list, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯èƒ½è¦åœ¨è¿­ä»£è®¿é—® list çš„æ—¶å€™è¿™ä¸ªè¿™ä¸ª list, ==è¿™ä¸ªæˆ‘ä»¬éå†å®ƒçš„æ‹·è´å³å¯== æˆ‘ä»¬ä¸èƒ½åšç›´æ¥è°ƒç”¨è¿™ä¸ª FireAnt çš„ reduce_health æ–¹æ³•, ä¸ç„¶ä¸‡ä¸€å®ƒæ­»äº†è¿™ä¸ªå¯¹è±¡å°±ä¸å­˜åœ¨äº†, æˆ‘ä»¬è¿˜å¦‚ä½•å¾—çŸ¥å®ƒçš„æ”»å‡»åŠ› ? æœ€åä»£ç å¦‚ä¸‹: class FireAnt(Ant): \"\"\"FireAnt cooks any Bee in its Place when it expires.\"\"\" name = 'Fire' damage = 3 food_cost = 5 implemented = True # Change to True to view in the GUI def __init__(self, health=3): \"\"\"Create an Ant with a HEALTH quantity.\"\"\" super().__init__(health) def reduce_health(self, amount): \"\"\"Reduce health by AMOUNT, and remove the FireAnt from its place if it has no health remaining. Make sure to reduce the health of each bee in the current place, and apply the additional damage if the fire ant dies. \"\"\" # FireAnt attack bees for bee in self.place.bees[:]: bee.reduce_health(amount) # FireAnt will be dead if self.health \u003c= amount: for bee in self.place.bees[:]: bee.reduce_health(self.damage) super().reduce_health(amount) else: super().reduce_health(amount) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:3:2","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Phase 3: More Ants! ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:0","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 6 (1 pt) We are going to add some protection to our glorious home base by implementing the WallAnt, an ant that does nothing each turn. A WallAnt is useful because it has a large health value. Unlike with previous ants, we have not provided you with a class header. Implement the WallAnt class from scratch. Give it a class attribute name with the value 'Wall' (so that the graphics work) and a class attributeimplemented with the value True (so that you can use it in a game). ä»é›¶å®ç°ä¸€ä¸ª WallAnt, è¿™ç§èš‚èšç”Ÿå‘½å€¼é«˜, å…¶ä»–å€’æ˜¯æ²¡ä»€ä¹ˆ class WallAnt(Ant): \"\"\"WallAnt has a large health value\"\"\" name = 'Wall' damage = 0 food_cost = 4 implemented = True def __init__(self, health=4): super().__init__(health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:1","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 7 (3 pt) Implement the HungryAnt, which will select a random Bee from its place and eat it whole. After eating a Bee, a HungryAnt must spend 3 turns chewing before eating again. If there is no bee available to eat, HungryAnt will do nothing. Give HungryAnt a chew_duration class attribute that stores the number of turns that it will take a HungryAnt to chew (set to 3). Also, give each HungryAnt an instance attribute chew_countdown that counts the number of turns it has left to chew (initialized to 0, since it hasnâ€™t eaten anything at the beginning. You can also think of chew_countdown as the number of turns until a HungryAnt can eat another Bee). Implement the action method of the HungryAnt: First, check if it is chewing; if so, decrement its chew_countdown. Otherwise, eat a random Bee in its place by reducing the Beeâ€™s health to 0. Make sure to set the chew_countdownwhen a Bee is eaten! ä»é›¶å®ç°ä¸€ä¸ª HungryAnt, å¯ä»¥éšæœºåä¸‹ä¸€æ•´åªèœœèœ‚!!!!ä½†æ˜¯å®ƒè¦èŠ±è´¹ chew_duration æ¥å’€åš¼æ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡æ”»å‡». è¿™ä¸ªä¸å°±æ˜¯æ¤ç‰©å¤§æˆ˜åƒµå°¸é‡Œé¢çš„é£ŸäººèŠ±å˜›!!! æˆ‘ä»¬åªè¦åˆ¤æ–­å½“å‰å®ƒæ˜¯å¦å¤„äºå’€åš¼çŠ¶æ€å³å¯. è¿™é‡Œé¢˜ç›®æ˜¯æœ‰æŒ–å‘çš„, æµ‹è¯•æ ·ä¾‹é‡Œé¢å¯èƒ½åœ¨è¿è¡Œçš„æ—¶å€™ä¼šä¿®æ”¹ chew_duration çš„å€¼, æ³¨æ„åˆ«è¢«å‘äº†! class HungryAnt(Ant): \"\"\"HungryAnt will select a random bee from its place and eat it whole\"\"\" name = 'Hungry' damage = 0 food_cost = 4 implemented = True chew_duration = 3 def __init__(self, health=1): super().__init__(health) self.chew_countdown = 0 def action(self, gamestate): # it is chewing if self.chew_countdown != 0: self.chew_countdown -= 1 # it is not chewing else: if len(self.place.bees) \u003e 0: # WARNING: the test cases may change the chew_duration variable in runtime self.chew_countdown = self.chew_duration bee = random_bee(self.place.bees) bee.reduce_health(bee.health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:2","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 8 (3 pt) A BodyguardAnt differs from a normal ant because it is a ContainerAnt; it can contain another ant and protect it, all in one Place. When a Bee stings the ant in a Place where one ant contains another, only the container is damaged. The ant inside the container can still perform its original action. If the container perishes, the contained ant still remains in the place (and can then be damaged). Each ContainerAnt has an instance attribute ant_contained that stores the ant it contains. This ant, ant_contained, initially starts off as None to indicate that there is no ant being stored yet. Implement the store_ant method so that it sets the ContainerAntâ€™s ant_contained instance attribute to the passed in antargument. Also implement the ContainerAntâ€™s action method to perform its ant_containedâ€™s action if it is currently containing an ant. è¿™é‡Œè¦å®ç°çš„èš‚èšä¹Ÿå¾ˆæœ‰æ„æ€, å®ƒå¯ä»¥æŠŠå…¶ä»–èš‚èšä¿æŠ¤èµ·æ¥. ç”šè‡³å¯ä»¥å’Œè¢«ä¿æŠ¤çš„èš‚èšä¸€èµ·å‘†åœ¨åŒä¸€ä¸ªæ ¼å­é‡Œé¢. è¿™é‡Œæ³¨æ„å‡ ä¸ªç»†èŠ‚: BodyguardAnt ä¸èƒ½ä¿æŠ¤ BodyguardAnt !(ğŸˆ²ï¸æ­¢å¥—å¨ƒ) å½“ BodyguardAnt å’Œè¢«ä¿æŠ¤çš„èš‚èšåœ¨åŒä¸€ä¸ªæ ¼å­çš„æ—¶å€™, è¦è®© place.ant å§‹ç»ˆæŒ‡å‘ BodyguardAnt è¿™é‡Œå…¶å®è¿˜æ¶‰åŠåˆ°æŒºå¤šè¦æ”¹çš„åœ°æ–¹çš„(å¯èƒ½ä¼šæ¼æ”¾æŸäº›ä»£ç , å®Œæ•´çš„å»ºè®®çœ‹æˆ‘çš„ä»“åº“) class Ant(Insect): \"\"\"An Ant occupies a place and does work for the colony.\"\"\" implemented = False # Only implemented Ant classes should be instantiated food_cost = 0 is_container = False ... def add_to(self, place): if place.ant is None: place.ant = self else: assert ( (place.ant is None) or self.can_contain(place.ant) or place.ant.can_contain(self) ), 'Two ants in {0}'.format(place) if place.ant.is_container and place.ant.can_contain(self): place.ant.store_ant(self) elif self.is_container and self.can_contain(place.ant): self.store_ant(place.ant) # the place.ant should refer to the container ant place.ant = self Insect.add_to(self, place) class ContainerAnt(Ant): \"\"\" ContainerAnt can share a space with other ants by containing them. \"\"\" is_container = True def __init__(self, *args, **kwargs): super().__init__(*args, **kwargs) self.ant_contained = None def can_contain(self, other): # we can't have two BodyguardAnt in the same place if self.ant_contained is None and not other.is_container: return True def store_ant(self, ant): self.ant_contained = ant def remove_ant(self, ant): if self.ant_contained is not ant: assert False, \"{} does not contain {}\".format(self, ant) self.ant_contained = None def remove_from(self, place): # Special handling for container ants (this is optional) if place.ant is self: # Container was removed. Contained ant should remain in the game place.ant = place.ant.ant_contained Insect.remove_from(self, place) else: # default to normal behavior Ant.remove_from(self, place) def action(self, gamestate): if self.ant_contained is not None: return self.ant_contained.action(gamestate) class BodyguardAnt(ContainerAnt): \"\"\"BodyguardAnt provides protection to other Ants.\"\"\" name = 'Bodyguard' food_cost = 4 implemented = True # Change to True to view in the GUI def __init__(self, health=2): super().__init__(health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:3","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 9 (1 pt) The BodyguardAnt provides great defense, but they say the best defense is a good offense. The TankAnt is a container that protects an ant in its place and also deals 1 damage to all bees in its place each turn. We have not provided you with a class header. Implement the TankAnt class from scratch. Give it a class attribute name with the value 'Tank' (so that the graphics work) and a class attribute implemented with the value True (so that you can use it in a game). You should not need to modify any code outside of the TankAnt class. If you find yourself needing to make changes elsewhere, look for a way to write your code for the previous question such that it applies not just to BodyguardAnt and TankAnt objects, but to container ants in general. æ ¹æ®é¢˜ç›®çš„æè¿°å¯ä»¥çŸ¥é“ TankAnt æ˜¯ä¸€ç§ç‰¹æ®Šçš„ ContainerAnt, æˆ‘ä»¬è¦ä»é›¶å®ç°å®ƒçš„åŠŸèƒ½, å®ƒçš„æ”»å‡»æ–¹å¼æ¯”è¾ƒç‰¹æ®Š, æ˜¯è‡ªå·±ä¿æŠ¤çš„èš‚èšçš„æ”»å‡»æ–¹å¼ + å¯¹å½“å‰æ ¼å­çš„èœœèœ‚é€ æˆè‡ªå·±æ”»å‡»åŠ›çš„ä¼¤å®³ class TankAnt(ContainerAnt): name = 'Tank' damage = 1 food_cost = 6 implemented = True def __init__(self, health=2): super().__init__(health) def action(self, gamestate): if self.ant_contained is not None: self.ant_contained.action(gamestate) # 1 damage for all the bees for bee in self.place.bees[:]: bee.reduce_health(self.damage) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:4","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Phase 4: Water and Might ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:0","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 10 (1 pt) Letâ€™s add water to the colony! Currently there are only two types of places, the Hive and a basic Place. To make things more interesting, weâ€™re going to create a new type of Place called Water. Only an insect that is waterproof can be placed in Water. In order to determine whether an Insect is waterproof, add a new class attribute to the Insect class named is_waterproof that is set to False. Since bees can fly, set their is_waterproof attribute to True, overriding the inherited value. Now, implement the add_insect method for Water. First, add the insect to the place regardless of whether it is waterproof. Then, if the insect is not waterproof, reduce the insectâ€™s health to 0. Do not repeat code from elsewhere in the program. Instead, use methods that have already been defined. ä¸ºäº†è®©åœ°å½¢æ›´æœ‰è¶£, æˆ‘ä»¬è¦å¢åŠ ä¸€ç§åœ°å½¢ - Water, åªæœ‰èƒ½åœ¨æ°´é‡Œçš„æ´»åŠ¨çš„ç”Ÿç‰©æ‰èƒ½è¢«æ”¾åœ¨è¿™ç§åœ°å½¢ä¸­(èœœèœ‚ä¼šé£å½“ç„¶éƒ½å¯ä»¥, èš‚èšç›®å‰è¿˜æ²¡æœ‰) è®°å¾—è¿˜è¦ä¿®æ”¹å¾ˆå¤šç±», å¢åŠ ç±»å±æ€§ is_waterproof, ä¸‹é¢æˆ‘å°±æ”¾ Water ç±»çš„ä»£ç  class Water(Place): \"\"\"Water is a place that can only hold waterproof insects.\"\"\" def add_insect(self, insect): \"\"\"Add an Insect to this place. If the insect is not waterproof, reduce its health to 0.\"\"\" super().add_insect(insect) if not insect.is_waterproof: insect.reduce_health(insect.health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:1","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 11 (1 pt) Currently there are no ants that can be placed on Water. Implement the ScubaThrower, which is a subclass of ThrowerAnt that is more costly and waterproof, but otherwise identical to its base class. A ScubaThrower should not lose its health when placed in Water. We have not provided you with a class header. Implement the ScubaThrower class from scratch. Give it a class attribute name with the value 'Scuba' (so that the graphics work) and remember to set the class attributeimplemented with the value True (so that you can use it in a game). ä»é›¶å®ç°ä¸€ä¸ª ScubaThrower, å¬åå­—å¯ä»¥çœ‹å‡ºæ¥åº”è¯¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„ ThrowerAnt. ç‰¹æ®Šåœ¨: èƒ½æ”¾åœ¨ Water é‡Œ class ScubaThrower(ThrowerAnt): name = 'Scuba' food_cost = 6 is_waterproof = True implemented = True def __init__(self, health=1): super().__init__(health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:2","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Problem 12 (3 pt) Finally, implement the QueenAnt. The queen is a waterproof ScubaThrower that inspires her fellow ants through her bravery. In addition to the standard ScubaThrower action, the QueenAnt doubles the damage of all the ants behind her each time she performs an action. Once an antâ€™s damage has been doubled, it is not doubled again for subsequent turns. However, with great power comes great responsibility. The QueenAnt is governed by three special rules: If the queen ever has its health reduced to 0, the ants lose. You will need to override Ant.reduce_health in QueenAnt and call ants_lose() in that case in order to signal to the simulator that the game is over. (The ants also still lose if any bee reaches the end of a tunnel.) There can be only one queen. A second queen cannot be constructed. To check if an Ant can be constructed, we use the Ant.construct() class method to either construct an Ant if possible, or return None if not. You will need to override Ant.construct as a class method of QueenAnt in order to add this check. To keep track of whether a queen has already been created, you can use an instance variable added to the current GameState. The queen cannot be removed. Attempts to remove the queen should have no effect (but should not cause an error). You will need to override Ant.remove_from in QueenAnt to enforce this condition. ç»ˆäºæ¥åˆ°äº†æœ€åä¸€é¢˜(é™¤äº†é¢å¤–çš„é¢˜ç›®ä»¥å¤–), æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªå¥³ç‹èšğŸœ. å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§: å¯ä»¥åœ¨æ°´ä¸­è¡Œèµ° æ€è·¯: é¢˜ç›®ä¹Ÿè¯´äº†å®ƒæ˜¯ä¸€ç§ ScrubaThrower, æ ¹æ®è¿™ä¸ªæè¿°å…¶å®å°±æŠ½è±¡æ¦‚æ‹¬å‡ºäº†å®ƒæ˜¯ ScrubaThrower çš„å­ç±». å®ƒåœ¨è¡ŒåŠ¨åä¼šæŠŠåœ¨å®ƒåé¢çš„èš‚èšä»¬çš„æ”»å‡»åŠ›éƒ½ç¿»å€, ä½†æ˜¯ä¸å¯ä»¥å¤šæ¬¡ç¿»å€ æ€è·¯: å¦‚ä½•è¡¨ç¤º â€œåœ¨åé¢â€ è¿™ä¸ªå…³ç³» ? æ ¹æ®å‰é¢çš„é¢˜ç›®æˆ‘ä»¬å¯ä»¥çŸ¥é“. å³è¾¹ä¸ºæ­£æ–¹å‘, æ‰€ä»¥ â€œåœ¨åé¢â€ å®é™…ä¸Šå°±æ˜¯åœ¨å·¦è¾¹, æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¿é—® Place çš„ .exit æ–¹æ³•ä¸æ–­è·å–åˆ°å®ƒå·¦è¾¹(åé¢çš„)çš„ æ€è·¯: å¦‚ä½•è¡¨ç¤ºä¸èƒ½å¤šæ¬¡ç¿»å€ ? å¾ˆå®¹æ˜“æƒ³åˆ°, æˆ‘ä»¬éœ€è¦é€šè¿‡è®¾ç½®ä¸€ä¸ªæ ‡è®°æ¥è¡¨ç¤ºå½“å‰çš„èš‚èšæ˜¯å¦å·²ç»æ”»å‡»åŠ›ç¿»å€è¿‡, æ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨ Ant ç±»é‡ŒåŠ ä¸€ä¸ªå®ä¾‹å˜é‡å³å¯ æ€è·¯: è¿™é‡Œè¿˜è¦æ³¨æ„å¦‚ä½•å¤„ç† GuardAnt, å› ä¸ºå®é™…ä¸Šå®ƒå®ˆæŠ¤çš„èš‚èšæ˜¯å¯èƒ½è¢«æ›¿æ¢ä¸ºæ–°çš„èš‚èš, æ­¤æ—¶æˆ‘ä»¬å°±è¦è®©è¿™ä¸ªæ–°çš„è¢«å®ˆæŠ¤çš„èš‚èšçš„æ”»å‡»åŠ›ç¿»å€. ==æ³¨æ„ç»†ç»†ä½“ä¼šè¿™é‡Œä»£ç æ˜¯æ€ä¹ˆå†™çš„== åªèƒ½æœ‰ä¸€ä¸ªå¥³ç‹èšğŸœ æ€è·¯: å¦‚ä½•åšåˆ°å³ä½¿æˆ‘ä»¬å¤šæ¬¡è°ƒç”¨å¥³ç‹èšğŸœçš„æ„é€ å‡½æ•°ä¹Ÿä¸ä¼šæœ‰å¤šçš„å¥³ç‹èšğŸœ ? è¿™ä¸ªä¾èµ–äºä¸€ä¸ªæ¸¸æˆå˜é‡å«åš gamestate, æˆ‘ä»¬ä»ç„¶æ˜¯é€šè¿‡åŠ æ ‡è®°çš„æ–¹å¼, åªä¸è¿‡è¿™æ¬¡æˆ‘ä»¬æ˜¯åœ¨ GameState è¿™ä¸ªç±»é‡ŒåŠ ä¸€ä¸ª has_queen è¡¨ç¤ºå½“å‰æ˜¯å¦å·²ç»æœ‰å¥³ç‹èšğŸœ å¥³ç‹èšğŸœä¸èƒ½è¢«ç§»é™¤ æ€è·¯: è¿™ä¸ªç®€å•, æˆ‘ä»¬ä»€ä¹ˆéƒ½ä¸åšå°±è¡Œäº† æœ€åä»£ç å¤§æ¦‚å¦‚ä¸‹(ç»“åˆä¸Šé¢çš„è§£é‡Šç»†ç»†ä½“ä¼š~~) class QueenAnt(ScubaThrower): \"\"\"The Queen of the colony. The game is over if a bee enters her place.\"\"\" name = 'Queen' food_cost = 7 implemented = True # Change to True to view in the GUI @classmethod def construct(cls, gamestate): \"\"\" Returns a new instance of the Ant class if it is possible to construct, or returns None otherwise. Remember to call the construct() method of the superclass! \"\"\" if cls.food_cost \u003e gamestate.food: print('Not enough food remains to place ' + cls.__name__) return # I add a class variable to indict if we have created a QueenAnt() if not gamestate.has_queen: gamestate.has_queen = True return super().construct(gamestate) else: return None def action(self, gamestate): \"\"\"A queen ant throws a leaf, but also doubles the damage of ants in her tunnel. \"\"\" super().action(gamestate) pos = self.place.exit while pos: if pos.ant is not None: if not pos.ant.is_doubled: pos.ant.is_doubled = True pos.ant.buff() if pos.ant.is_container and pos.ant.ant_contained is not None: # the pos.ant.ant_contained may change if not pos.ant.ant_contained.is_doubled: pos.ant.ant_contained.buff() pos.ant.ant_contained.is_doubled = True pos = pos.exit def reduce_health(self, amount): \"\"\"Reduce health by AMOUNT, and if the QueenAnt has no health remaining, signal the end of the game. \"\"\" if self.health \u003c= amount: ants_lose() def remove_from(self, place): return None ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:3","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Extra Credit (2 pt) Implement two final thrower ants that do zero damage, but instead apply a temporary â€œstatusâ€ on the actionmethod of a Bee instance that they throw_at. This â€œstatusâ€ lasts for a certain number of turns, after which it ceases to take effect. We will be implementing two new ants that inherit from ThrowerAnt. SlowThrower throws sticky syrup at a bee, slowing it for 3 turns. When a bee is slowed, it can only move on turns when gamestate.time is even, and can do nothing otherwise. If a bee is hit by syrup while it is already slowed, it is slowed for an additional 3 turns. ScaryThrower intimidates a nearby bee, causing it to back away instead of advancing. (If the bee is already right next to the Hive and cannot go back further, it should not move. To check if a bee is next to the Hive, you might find the is_hive instance attribute of Places useful). Bees remain scared until they have tried to back away twice. Bees cannot try to back away if they are slowed and gamestate.time is odd. Once a bee has been scared once, it canâ€™t be scared ever again. å®ç°ä¸¤ç§ç‰¹æ®Šçš„èš‚èšç±», æœ¬èº«æ²¡æœ‰ä¼¤å®³, ä½†æ˜¯èƒ½ç»™èœœèœ‚åŠ ä¸Š debuff. SlowThrower å¯ä»¥è®©èœœèœ‚å‡é€Ÿ, è®©ä»–ä»¬åªèƒ½åœ¨å½“å‰æ—¶é—´ä¸ºå¶æ•°çš„æ—¶å€™å‰è¿›å¦åˆ™ä»€ä¹ˆäº‹æƒ…ä¹Ÿå¹²ä¸äº†. è¿™ä¸ªæ•ˆæœå¯ä»¥ç»´æŒä¸‰ä¸ªå›åˆ, ä½†æ˜¯è¿™ä¸ª debuff å¯ä»¥æ— é™å åŠ  ScaryThrower ä¼šè®©èœœèœ‚åé€€, æ³¨æ„å¦‚æœä¸èƒ½å†åé€€çš„è¯, å°±è¦ä¿æŒä¸åŠ¨. è¯¥æ•ˆæœç»´æŒä¸¤å›åˆ. ä½†æ˜¯å¦‚æœè¢«å‡é€Ÿå°±ä¼šç»§ç»­ä¿æŒä¸åŠ¨, è¿™ä¸ª debuff åªèƒ½ä¸Šä¸€æ¬¡ è¿™ä¸€é¢˜, çœŸçš„, éš¾åº¦å®Œå…¨æ˜¯ä¸Šæ¥äº†. æˆ‘è°ƒäº†æŒºä¹…çš„ bug æ‰æˆåŠŸ. ä¸‹é¢æˆ‘æ¥è®²ä¸€ä¸‹è®¾è®¡æ€è·¯: SlowThrower è®¾ç½® is_slow å˜é‡è¡¨ç¤ºå½“å‰çš„èœœèœ‚æ˜¯å¦è¢«å‡é€Ÿ, åŒæ—¶è®¾ç½® slow_turns æ¥è®°ä½å‰©ä½™å‡ å›åˆå¯ä»¥è§£é™¤è¿™ä¸ªçŠ¶æ€ æ¯ä¸ªå›åˆ, å¦‚æœå½“å‰çš„èœœèœ‚è¢«å‡é€Ÿäº†, å®ƒåªèƒ½çœ‹å½“å‰çš„æ¸¸æˆæ—¶é—´æ˜¯å¦ä¸ºå¶æ•°, å¦‚æœæ˜¯çš„è¯å°±å¯ä»¥å‰è¿›, å¦åˆ™åœ¨åŸåœ°ä¸åŠ¨, **ä½†ä¸è®ºä½ åŠ¨ä¸åŠ¨, slow_turns -= 1 æ°¸è¿œéƒ½æˆç«‹ ScaryThrower ç±»ä¼¼ is_slow å’Œ slow_turns è®¾ç½®äº† is_scared å’Œ scared_turns æˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘å½“å‰èœœèœ‚æ˜¯å¦è¢«å‡é€Ÿäº†(è¿™æ ·æ€è€ƒé—®é¢˜ä¼šæ¯”è¾ƒç®€å•). æ˜¾ç„¶, æˆ‘ä»¬æ¯å›åˆè¦åšçš„äº‹æƒ…æ˜¯è®© scared_turns -= 1, ç„¶åæ˜¯å¦ä¸º scared å…¶å®å†³å®šç€èœœèœ‚çš„å‰è¿›æ–¹å‘. æœ‰äº†è¿™ä¸ªåŸºç¡€ä¹‹åæˆ‘ä»¬å†æ¥æ€è€ƒè¢«å‡é€Ÿå¸¦æƒ…å†µä¸‹åˆè¯¥å¦‚ä½•, æ˜¾ç„¶æˆ‘ä»¬å‰é¢è¿™æ ·æ˜¯æœ‰é—®é¢˜çš„, é¢˜ç›®è¯´äº†å¦‚æœè¢«å‡é€Ÿä¼šåŸåœ°ä¿æŒä¸åŠ¨, ä½†æ˜¯æˆ‘ä»¬å´è®© scared_turns -= 1, æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¤šåŠ ä¸€ä¸ªåˆ¤æ–­, ä¹Ÿå°±æ˜¯è¢«å‡é€Ÿ + è¢« scared çš„æƒ…å†µä¸‹å¦‚æœæˆ‘ä»¬æ²¡æœ‰æˆåŠŸç§»åŠ¨, é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ’¤é”€æˆ‘ä»¬å¯¹ scared_turns çš„æ›´æ”¹ çŸ¥é“äº†ä¸Šé¢çš„è®¾è®¡æ€è·¯, ç†è§£ä¸‹é¢çš„ä»£ç å°±ä¸éš¾äº†(è¿™é‡Œåˆ å»äº†æ— å…³çš„ä»£ç ): class Bee(Insect): \"\"\"A Bee moves from place to place, following exits and stinging ants.\"\"\" name = 'Bee' damage = 1 is_waterproof = True # 2 flags is_slow = False is_scared = False # turns remained slow_turns = 0 scared_turns = 0 # we can't scare a bee twice has_been_scared = False def action(self, gamestate): \"\"\"A Bee's action stings the Ant that blocks its exit if it is blocked, or moves to the exit of its current place otherwise. gamestate -- The GameState, used to access game state information. \"\"\" if self.is_scared: destination = self.place.entrance self.scared_turns -= 1 else: destination = self.place.exit if self.is_slow: self.slow_turns -= 1 if self.slow_turns == 0: self.is_slow = False if gamestate.time % 2 == 0 and self.health \u003e 0 and destination is not None: self.move_to(destination) else: # is_slow + is_scared, we need to cancel `self.scared_turns -= 1` \\ # if we didn't move self.scared_turns += 1 else: if self.blocked(): self.sting(self.place.ant) elif self.health \u003e 0 and destination is not None: self.move_to(destination) # we can't put this in side `if self.is_scared`, why? # because only when we run if self.is_slow we can know # should we cancel it or not if self.scared_turns == 0: self.is_scared = False # Extra credit: Special handling for bee direction def slow(self, length): \"\"\"Slow the bee for a further LENGTH turns.\"\"\" self.is_slow = True self.slow_turns += length def scare(self, length): \"\"\" If this Bee has not been scared before, cause it to attempt to go backwards LENGTH times. \"\"\" # a bee can't be scared twice if self.has_been_scared: return else: self.is_scared = True self.scared_turns += length self.has_been_scared = True ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:4","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Optional Problems ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:6:0","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Optional Problem 1 Implement the NinjaAnt, which damages all Bees that pass by, but can never be stung. A NinjaAnt does not block the path of a Bee that flies by. To implement this behavior, first modify the Ant class to include a new class attribute blocks_path that is set to True, then override the value of blocks_path to Falsein the NinjaAnt class. Second, modify the Beeâ€™s method blocked to return False if either there is no Ant in the Beeâ€™s place or if there is an Ant, but its blocks_path attribute is False. Now Bees will just fly past NinjaAnts. Finally, we want to make the NinjaAnt damage all Bees that fly past. Implement the action method in NinjaAntto reduce the health of all Bees in the same place as the NinjaAnt by its damage attribute. Similar to the FireAnt, you must iterate over a potentially changing list of bees. å¿è€…èšğŸ¥·ğŸœå“ˆå“ˆå“ˆå“ˆ, æ³¨æ„å‡ ä¸ªç»†èŠ‚: æ— æ³•è¢«èœœèœ‚æ”»å‡» ä¸ä¼šå µä½èœœèœ‚çš„è·¯, ä½†æ˜¯ä¼šå¯¹ç»è¿‡çš„èœœèœ‚é€ æˆä¼¤å®³ è¿™ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•, è§£æ³•ä¹Ÿå‡ ä¹éƒ½å†™åœ¨äº†é—®é¢˜æè¿°é‡Œé¢ class Bee(Insect): \"\"\"A Bee moves from place to place, following exits and stinging ants.\"\"\" def blocked(self): \"\"\"Return True if this Bee cannot advance to the next Place.\"\"\" if self.place.ant is None: return False if not self.place.ant.blocks_path: return False return True class NinjaAnt(Ant): \"\"\"NinjaAnt does not block the path and damages all bees in its place. This class is optional. \"\"\" name = 'Ninja' damage = 1 food_cost = 5 blocks_path = False implemented = True # Change to True to view in the GUI def action(self, gamestate): for bee in self.place.bees[:]: bee.reduce_health(self.damage) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:6:1","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":"Optional Problem 2 The LaserAnt shoots out a powerful laser, damaging all that dare to stand in its path. Both Bees and Ants, of all types, are at risk of being damaged by LaserAnt. When a LaserAnt takes its action, it will damage all Insects in its place (excluding itself, but including its container if it has one) and the Places in front of it, excluding the Hive. If that were it, LaserAnt would be too powerful for us to contain. The LaserAnt has a base damage of 2. But, LaserAntâ€™s laser comes with some quirks. The laser is weakened by 0.25 each place it travels away fromLaserAntâ€™s place. Additionally, LaserAnt has limited battery. Each time LaserAnt actually damages an Insect its laserâ€™s total damage goes down by 0.0625 (1/16). If LaserAntâ€™s damage becomes negative due to these restrictions, it simply does 0 damage instead. æ¿€å…‰ğŸœ, æ³¨æ„å‡ ä¸ªç‰¹æ€§: ä¼¤å®³è‡ªå·±æ ¼å­æ‰€åœ¨çš„æ‰€æœ‰ç”Ÿç‰©, ç”šè‡³åŒ…æ‹¬æ•´æ¡è·¯å¾„ä¸Šçš„æ‰€æœ‰ç”Ÿç‰© ä½†æ˜¯æ¯æ¬¡å¯¹å…¶ä»–ç”Ÿç‰©é€ æˆä¼¤å®³çš„æ—¶å€™ä¼¤å®³ä¼šè¡°å‡, æ¯æ¬¡å‡å» 0.0625 æ¿€å…‰çš„å¨åŠ›è·Ÿå®ƒç¦»æ¿€å…‰èšğŸœçš„è·ç¦»ä¹Ÿæœ‰å…³ç³», è·ç¦»æ¯å¤šä¸€ä¸ªæ ¼å­, å°±ä¼šå‡å» 0.25 åªè¦å¤„ç†å¥½ä¸¤ä¸ªå‡½æ•°å³å¯ calculate_damage : è¿™ä¸ªè¦æ³¨æ„çš„åœ°æ–¹æ˜¯, å¦‚æœç®—å‡ºæ¥çš„ä¼¤å®³ \u003c 0, é‚£ä¹ˆä½ å°±éœ€è¦è¿”å› 0 insects_in_front : è¿™ä¸ªè¦è¿”å›ä¸€ä¸ª dict è¡¨ç¤ºæ¯ä¸ªç”Ÿç‰©è·ç¦»æ¿€å…‰ğŸœçš„è·ç¦». æˆ‘è¿™äº†æ˜¯åˆ†æˆå½“å‰æ ¼å­å’Œå‰©ä¸‹çš„æ ¼å­è¿™æ ·æ¥å¤„ç†, ä¸€è¾¹éå†æ‰€æœ‰æ ¼å­ä¸€è¾¹è®¡ç®—è·ç¦»å’ŒæŠŠç”Ÿç‰©åŠ åˆ°æˆ‘ä»¬çš„ dicté‡Œ. class LaserAnt(ThrowerAnt): name = 'Laser' food_cost = 10 implemented = True # Change to True to view in the GUI damage = 2 def __init__(self, health=1): super().__init__(health) self.insects_shot = 0 self.current_damage = LaserAnt.damage def insects_in_front(self): \"\"\"Return a dict contains every Insect\"\"\" dis = {} for bee in self.place.bees: dis[bee] = 0 # take care of the ContainerAnt if self.place.ant is not self: dis[self.place.ant] = 0 pos = self.place.entrance distance = 1 while pos.entrance is not None: if not pos.is_hive: for bee in pos.bees: dis[bee] = distance if pos.ant is not None: dis[pos.ant] = distance # take care of the ContainerAnt if pos.ant.is_container and pos.ant.ant_contained is not None: dis[pos.ant.ant_contained] = distance distance += 1 pos = pos.entrance return dis def calculate_damage(self, distance): damage_result = self.damage - 0.0625 * self.insects_shot - 0.25 * distance return damage_result if damage_result \u003e 0 else 0 def action(self, gamestate): insects_and_distances = self.insects_in_front() for insect, distance in insects_and_distances.items(): damage = self.calculate_damage(distance) insect.reduce_health(damage) if damage: self.insects_shot += 1 ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:6:2","tags":["Course","Python"],"title":"Proj3.Ants vs SomeBees of CS61A of UCB(2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Tool"],"content":"Explain how to use hammerspoon to manage windows","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/","tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Tool"],"content":"å¼•è¨€ è™½ç„¶ macOS è‡ªå¸¦çª—å£ç®¡ç†è¿™ä¸ªåŠŸèƒ½, ä½†æ˜¯å®é™…ä¸Šæ˜¯ç”¨ä¸‹æ¥å‘ç°è¿˜æ˜¯å¾ˆéš¾å—çš„. åŠŸèƒ½ä¸è¶³ä»¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚. æ‰€ä»¥æˆ‘å¸¸å¸¸å‘ç°è‡ªå·±åœ¨ç”¨é¼ æ ‡æ‹–åŠ¨çª—å£å’Œé‡æ–°è°ƒæ•´çª—å£å¤§å°. é•¿æ­¤ä»¥å¾€, æˆ‘è§‰å¾—è¿™æ ·æ•ˆç‡å®åœ¨å¤ªä½, æ°å¥½å‰é˜µå­åœ¨çœ‹ MIT-Missing-Semester çš„è¯¾, é‡Œé¢æåˆ°äº† hammerspoon è¿™ä¸ªå·¥å…·. æˆ‘å»ç¨å¾®äº†è§£äº†ä¸€ä¸‹å‘ç°è¿™å·¥å…·çœŸçš„ä¸é”™. ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:1:0","tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Tool"],"content":"ä»€ä¹ˆæ˜¯ hammerspoon ? æ ¹æ®å®˜æ–¹æ–‡æ¡£ä»‹ç», hammerspoon æ˜¯ macOS ä¸Šä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–çš„å·¥å…·, å……å½“äº† Lua è¯­è¨€å’Œæ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨ä¹‹é—´çš„æ¡¥æ¢. ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Lua è¯­è¨€å’Œ hammerspoon æä¾›çš„ API æ¥æ¥å®Œæˆå¾ˆå¤šè‡ªåŠ¨åŒ–æ“ä½œ. ç›®å‰æˆ‘è¿˜åªçœ‹äº†çª—å£ç®¡ç†ç›¸å…³çš„. å› ä¸ºè¦ç”¨åˆ° Lua è¯­è¨€, ä½†æ˜¯æˆ‘åˆæ ¹æœ¬æ²¡æœ‰æ¥è§¦è¿‡è¿™ä¸ªè¯­è¨€, æ‰€ä»¥æˆ‘å¤§æ¦‚è·Ÿç€ Learn Lua in Y minutes ç¨å¾®å­¦ä¹ äº†ä¸€ä¸‹. ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:2:0","tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Tool"],"content":"æ€ä¹ˆç®¡ç†çª—å£? æˆ‘ä¸»è¦æƒ³è¦æœ‰ä¸‹é¢çš„å‡ ä¸ªåŠŸèƒ½ å¯ä»¥æŠŠçª—å£ç§»åŠ¨åˆ°å±å¹•çš„å·¦è¾¹æˆ–è€…æ˜¯å³è¾¹(1 / 2 å±å¹•) å¯ä»¥æŠŠçª—å£å¼„æˆå…¨å±çš„ å¯ä»¥æŠŠçª—å£ç§»åŠ¨åˆ°å·¦ä¸Šè§’/å³ä¸Šè§’/å·¦ä¸‹è§’/å³ä¸‹è§’(1 / 4 å±å¹•) æŠŠå½“å‰çš„çª—å£ç§»åŠ¨åˆ°å±å¹•ä¸­å¤® æˆ‘çš„æ–¹æ¡ˆä¸»è¦æ˜¯å†™äº†ä¸‰ä¸ª *.lua file(æˆ‘æ”¾åœ¨äº†æˆ‘çš„ github ä»“åº“ dotfiles é‡Œ) ğŸ‘‰config.lua MACBOOK_MONITOR = 'Built-in Retina Display' -- disable animations, default value = 0.2 hs.window.animationDuration = 0 ğŸ‘‰init.lua require('config') require('window') ğŸ‘‰window.lua è¿™ä¸ªæ˜¯ä¸»è¦çš„ä»£ç  -- half of screen -- {frame.x, frame.y, window.w, window.h} -- First two elements: we decide the position of frame -- Last two elements: we decide the size of frame hs.hotkey.bind({'alt', 'cmd'}, 'left', function() hs.window.focusedWindow():moveToUnit({0, 0, 0.5, 1}) end) hs.hotkey.bind({'alt', 'cmd'}, 'right', function() hs.window.focusedWindow():moveToUnit({0.5, 0, 0.5, 1}) end) hs.hotkey.bind({'alt', 'cmd'}, 'up', function() hs.window.focusedWindow():moveToUnit({0, 0, 1, 0.5}) end) hs.hotkey.bind({'alt', 'cmd'}, 'down', function() hs.window.focusedWindow():moveToUnit({0, 0.5, 1, 0.5}) end) -- quarter of screen --[[ u i j k --]] hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'u', function() hs.window.focusedWindow():moveToUnit({0, 0, 0.5, 0.5}) end) hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'k', function() hs.window.focusedWindow():moveToUnit({0.5, 0.5, 0.5, 0.5}) end) hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'i', function() hs.window.focusedWindow():moveToUnit({0.5, 0, 0.5, 0.5}) end) hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'j', function() hs.window.focusedWindow():moveToUnit({0, 0.5, 0.5, 0.5}) end) -- full screen hs.hotkey.bind({'alt', 'cmd'}, 'f', function() hs.window.focusedWindow():moveToUnit({0, 0, 1, 1}) end) -- center screen hs.hotkey.bind({'alt', 'cmd'}, 'c', function() hs.window.focusedWindow():centerOnScreen() end) ä½ åº”è¯¥æŠŠä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨ ~/.hammerspoon/ è¿™ä¸ªè·¯å¾„ä¸‹ç„¶ååœ¨ hammerspoon é‡Œé¢ç‚¹å‡» Reload config å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ğŸ¤— ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:3:0","tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Tool"],"content":"ä»£ç è§£é‡Š hs.hotkey.bind(mods, key, pressedfn) è¿™ä¸ªä¸»è¦æ˜¯æŠŠæŒ‰é”® mods å’Œ key ç»‘å®šåˆ° pressedfn è¿™ä¸ªå‡½æ•°ä¸Š. åœ¨ä½¿ç”¨çš„æ—¶å€™å…ˆæŒ‰ä¸‹ mods å¯¹åº”çš„æŒ‰é”®ç»„åˆå¹¶ä¿æŒ, ç„¶åå†æŒ‰ä¸‹ key å¯¹åº”çš„æŒ‰é”®. æ¯”å¦‚æˆ‘ä»¬è¦è®©çª—å£å…¨å±, æˆ‘ä»¬é¦–å…ˆæŒ‰ä¸‹å¹¶ä¿æŒ alt(option) å’Œ cmd, å†æŒ‰ä¸‹ f. å°±å¯ä»¥è®©çª—å£å…¨å±äº† pressedfn è¿™ä¸ªå°±æ˜¯ç”¨ Lua è¯­è¨€å†™çš„ä¸€ä¸ªå‡½æ•° å‡½æ•°çš„å…³é”®åœ¨äº hs.window.focusedWindow():moveToUnit({...}) è¿™ä¸ªæ–¹æ³•. ä»–çš„ä¸»è¦åŠŸèƒ½æ˜¯è·å¾—å½“å‰è¢«æ¿€æ´»çš„çª—å£ç„¶ååšä¸€äº›ä½ç½®å’Œå¤§å°ä¸Šçš„ä¿®æ”¹. å‚æ•°æ˜¯ Lua è¯­è¨€é‡Œçš„ table, æˆ‘å·²ç»æŠŠå‚æ•°çš„å…·ä½“å«ä¹‰å†™åœ¨äº†æ³¨é‡Šé‡Œ, å¯ä»¥ç»“åˆä¸‹é¢æˆ‘ç”»çš„å›¾æ¥è¿›è¡Œç†è§£. ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:4:0","tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Tool"],"content":"å‚è€ƒ Anishâ€™s Hammerspoon config ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:5:0","tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Mac"],"content":"ç®€å•ä»‹ç»æ€ä¹ˆç”¨ homebrew å®‰è£…æœ¬åœ°å®‰è£…åŒ…","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/","tags":["Mac","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["Mac"],"content":"å¼•è¨€ æœ€è¿‘æƒ³è¦åœ¨ homebrew ä¸Šé¢ä¸‹è½½ qbittorent, å‘ç°æˆ‘å³ä½¿ç”¨çš„æ˜¯ä¸­ç§‘å¤§çš„æºä¹Ÿä¸‹è½½ä¸ä¸‹æ¥, ç»ˆç«¯æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹â¬‡ï¸ ==\u003e Downloading https://downloads.sourceforge.net/qbittorrent/qbittorrent-mac/qbittorrent-4.3.9/qbittorrent-4.3.9.dmg curl: (35) error:06FFF089:digital envelope routines:CRYPTO_internal:bad key length=# # # Error: Download failed on Cask 'qbittorrent' with message: Download failed: https://downloads.sourceforge.net/qbittorrent/qbittorrent-mac/qbittorrent-4.3.9/qbittorrent-4.3.9.dmg æ­¤æ—¶æˆ‘å°±æƒ³åˆ°è¦ä¸å¹²è„†æŠŠè¿™ä¸ªæ–‡ä»¶ä¸‹è½½ä¸‹æ¥, ç„¶åç”¨ homebrew æœ¬åœ°å®‰è£…(åº”è¯¥æ˜¯æœ‰è¿™ä¸ªåŠŸèƒ½çš„), åšäº†ä¸€ç•ªæ£€ç´¢ä¹‹å, ç»ˆäºçŸ¥é“è¦æ€ä¹ˆå¼„äº†, ä¸‹é¢æˆ‘å°†ä»¥ qbittorrent-4.3.9.dmg ä¸ºä¾‹ ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:1:0","tags":["Mac","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["Mac"],"content":"Step 1. è·å–è·¯å¾„æ–‡ä»¶å å¯ä»¥å…ˆè¿è¡Œ brew --cache æŸ¥çœ‹ homebrew çš„ç¼“å­˜è·¯å¾„, ä¸€èˆ¬æ¥è¯´åº”è¯¥æ˜¯åœ¨ ~/Library/Caches/Homebrew ä¸‹. homebrew ä¼šæŠŠå®‰è£…åŒ…ä¸‹è½½åˆ°é‡Œé¢çš„ downloads æ–‡ä»¶å¤¹é‡Œé¢, ä¹Ÿå°±æ˜¯åœ¨ ~/Library/Caches/Homebrew/downloads ä¸‹, è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹å¯ä»¥å‘ç°é‡Œé¢çš„æ–‡ä»¶åçš„æ ¼å¼éƒ½æ˜¯ \u003curl-hash\u003e--\u003cformula\u003e-\u003cversion\u003e, æ˜¾ç„¶, æˆ‘ä»¬ä¹Ÿè¦æŠŠæˆ‘ä»¬çš„å®‰è£…åŒ…å¼„æˆè¿™ç§æ ¼å¼æ”¾åœ¨é‡Œé¢. ğŸ“’ ä½¿ç”¨ brew --cache -s \u003cformula\u003e æ¥è·å–å¯¹åº”çš„è·¯å¾„æ–‡ä»¶å å¯¹åº”æˆ‘ä»¬è¿™ç¯‡æ–‡ç« çš„ä¾‹å­å°±æ˜¯ brew --cache -s qbittorrent, å¯ä»¥çœ‹åˆ°è¾“å‡ºå†…å®¹æ˜¯ /Users/\u003cå¯¹åº”ä½ çš„ç”¨æˆ·å\u003e/Library/Caches/Homebrew/downloads/7ee479ba2a19cf904e4c415805a6adaead76e7c191d595c016c86b72044c22fa--qbittorrent-4.3.9.dmg ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:2:0","tags":["Mac","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["Mac"],"content":"Step 2. ç§»åŠ¨æœ¬åœ°å®‰è£…åŒ…åˆ°å¯¹åº”çš„ç›®å½•ä¸‹ åœ¨ Step 1. ä¸­æˆ‘ä»¬å·²ç»å¯ä»¥çŸ¥é“è¯¥æŠŠæ–‡ä»¶æ”¾åˆ°ä»€ä¹ˆåœ°æ–¹, æ¥ä¸‹æ¥è¦åšçš„æ— éå°±æ˜¯ç§»åŠ¨æ–‡ä»¶å¯ä»¥, å¦‚æœæ‰“å¼€æ–‡ä»¶æµè§ˆå™¨ç§»åŠ¨é‚£å°±æ…¢äº†, ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥å¯¹åº”å‘½ä»¤å³å¯ ğŸ“’ ä½¿ç”¨ mv \u003clocal-file\u003e \"$(brew --cache -s \u003cformula\u003e)\" ç§»åŠ¨æœ¬åœ°å®‰è£…åŒ…åˆ°å¯¹åº”ç›®å½•ä¸‹ å¯¹åº”æˆ‘ä»¬çš„ä¾‹å­å°±æ˜¯ mv qbittorrent-4.3.9.dmg \"$(brew --cache -s qbittorrent)\" ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:3:0","tags":["Mac","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["Mac"],"content":"Step 3. å†æ¬¡è¿è¡Œ brew install æ­¤æ—¶å†æ¬¡è¿è¡Œ brew install qbittorrent å³å¯, å¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œæ‰¾åˆ°äº†ç¼“å­˜æ–‡ä»¶ğŸ¤—, è€Œä¸”å®‰è£…æˆåŠŸäº† ğŸ“’ å†æ¬¡è¿è¡Œ brew install \u003cformula\u003e ==\u003e Downloading https://downloads.sourceforge.net/qbittorrent/qbittorrent-mac/qbittorrent-4.3.9/qbittorrent-4.3.9.dmg Already downloaded: /Users/\u003cå¯¹åº”ä½ çš„ç”¨æˆ·å\u003e/Library/Caches/Homebrew/downloads/7ee479ba2a19cf904e4c415805a6adaead76e7c191d595c016c86b72044c22fa--qbittorrent-4.3.9.dmg ==\u003e Installing Cask qbittorrent ==\u003e Moving App 'qbittorrent.app' to '/Applications/qBittorrent.app' ğŸº qbittorrent was successfully installed! ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:4:0","tags":["Mac","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["Mac"],"content":"å‚è€ƒ homebrew æ–‡æ¡£ ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:5:0","tags":["Mac","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["Python"],"content":"ç®€å•ä»‹ç»äº†ç”¨ ipdb å¯¹ Python æ–‡ä»¶è¿›è¡Œ debug","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"å¼•è¨€ å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æˆ‘å†™ä»£ç éƒ½æ˜¯ç”¨æœ€ç®€å•çš„ debug æ–¹æ³•, æ‰‹åŠ¨åœ¨ç¨‹åºé‡Œé¢æ’å…¥ print ä»£ç æ¥çœ‹å…·ä½“çš„å˜é‡çš„å€¼, ç„¶åè‡ªå·±æ¨æ–­ç¨‹åºåˆ°åº•æ˜¯åœ¨å“ªé‡Œå‡ºé—®é¢˜. æ ¹æ® print çš„ç»“æœå¯èƒ½è¿˜è¦åˆ°åˆ«çš„åœ°æ–¹é‡å¤è¿™ä¸ªæ­¥éª¤. debug å®Œä¹‹åè¿˜å¾—å»æŠŠè¿™äº› print è¯­å¥æ³¨é‡Šæ‰. è¿™ä¸ªå°±æ˜¯æˆ‘ä»¥å‰çš„æ—¥å¸¸ debug æµç¨‹. æœ€è¿‘åœ¨çœ‹ MIT.Missing semester çš„è¯¾è®²åˆ° debug, é¡¿æ—¶æ„Ÿåˆ°åº”è¯¥ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹åœ¨ Python é‡Œé¢å¦‚ä½• debug, è™½ç„¶ç”¨ print ä¹Ÿå‡‘åˆ, å­¦å®Œä¹‹ååªæ¨è‡ªå·±æ²¡æœ‰æ—©ç‚¹äº†è§£ğŸ˜¢ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:1:0","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"å¿«é€Ÿä¸Šæ‰‹ å®‰è£… è™½ç„¶ Python æœ‰è‡ªå¸¦çš„ pdb, ä½†æ˜¯ ipdb çš„è·Ÿå®ƒå¤§å·®ä¸å·®, è¿˜å¸¦é¢œè‰²è¾“å‡º, å½“ç„¶ç”¨è¿™ä¸ªäº†(å…¶å®å°±è·Ÿä½ åœ¨å‘½ä»¤è¡Œè¦ç”¨ python è¿˜æ˜¯ ipython ä¸€æ ·, æˆ‘è‚¯å®šæ˜¯é€‰æ‹© UI æ¯”è¾ƒå¥½çœ‹çš„ ipython) \u003e pip install ipdb å¼€å§‹ debug ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å†…å®¹å³å¯, å…¶ä¸­ \u003cfilename\u003e è¡¨ç¤ºä½ è¦ debug çš„æ–‡ä»¶ \u003e python -m ipdb \u003cfilename\u003e ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:2:0","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"ipdb ä¸­çš„å‘½ä»¤ [ ] è¡¨ç¤ºæ˜¯å¯é€‰å‚æ•°, å¦‚æœæ²¡æœ‰ [ ] è¡¨ç¤ºä¸€å®šè¦ç»™è¿™ä¸ªå‚æ•° ( ) è¡¨ç¤ºé‡Œé¢çš„å¯ä»¥ä¸å†™, ç®€å†™å‘½ä»¤ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:0","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"æ§åˆ¶ç¨‹åºè¿è¡Œ l(ist) - å±•ç¤ºå½“å‰è¡Œé™„è¿‘çš„è¡Œ, å…·ä½“æ¥è¯´æ˜¯é™„è¿‘çš„ 11 è¡Œ, ä½†æ˜¯è®°è¿™ä¸ªå…·ä½“çš„æ•°å­—å¥½åƒä¹Ÿæ²¡å•¥æ„ä¹‰ ä¹Ÿå¯ä»¥ä½¿ç”¨ ll å‘½ä»¤, ä¼šå±•ç¤ºå½“å‰æ‰€åœ¨å‡½æ•°æˆ–è€…æ˜¯å †æ ˆå¸§çš„æºä»£ç  å¯ä»¥ä¼ å…¥å‚æ•°, æ¯”å¦‚è¦çœ‹ 1 åˆ° 12 è¡Œçš„å†…å®¹å¯ä»¥ç”¨ l 1,12 s(tep) - å•æ­¥æ‰§è¡Œä¸‹ä¸€æ­¥, å¦‚æœæ˜¯å‡½æ•°è°ƒç”¨è¯­å¥, ä¼šè¿›åˆ°å‡½æ•°é‡Œä¸€æ­¥æ­¥æ‰§è¡Œ n(ext) - å•æ­¥æ‰§è¡Œä¸‹ä¸€æ­¥, å¦‚æœæ˜¯å‡½æ•°è°ƒç”¨è¯­å¥, ä¸ä¼šè¿›å»å‡½æ•°é‡Œä¸€æ­¥æ­¥æ‰§è¡Œ, å®ƒä¼šä¸€ç›´è¿è¡Œåˆ°å‡½è¿”å›ç»“æœ c(ontinue) - ç»§ç»­æ‰§è¡Œ, ç›´åˆ°ç¨‹åºå‘ç”Ÿé”™è¯¯æˆ–è€…æ­£å¸¸é€€å‡º å¦‚æœç¨‹åºæ˜¯æ­£å¸¸é€€å‡ºçš„, é‚£ä¹ˆå°±ä¼šè¾“å‡º The program finished and will be restarted q(uit) - é€€å‡ºç¨‹åºæ‰§è¡Œ r(eturn) - ç»§ç»­è¿è¡Œåˆ°å½“å‰å‡½æ•°è¿”å›ç»“æœä¸ºæ­¢ w(here) - æ‰“å° stack trace, çœ‹è°ƒç”¨è½¨è¿¹, ä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ä»æœ€å†…å±‚åˆ°æœ€å¤–å±‚çš„è°ƒç”¨å…¥å£ ç„¶åä½ å¯ä»¥æ ¹æ®è¿™ä¸ªè°ƒç”¨æ ˆ, ç”¨ d(own) [count] å’Œ u(up) [count] æ¥åœ¨ä¸åŒçš„å±‚æ¬¡é—´ç§»åŠ¨ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:1","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"ç¨‹åºæ–­ç‚¹ä¸“é¢˜ æ¯æ¬¡è®¾ç½®ç¨‹åºæ–­ç‚¹çš„æ—¶å€™éƒ½ä¼šè¾“å‡ºä½ å½“å‰è¿™ä¸ªç¨‹åºæ–­ç‚¹çš„åºå·, é»˜è®¤ä» 1 å¼€å§‹, ä¹Ÿå°±æ˜¯åé¢æåˆ°çš„ breakpoint count] b(reak) [line_number] - åœ¨ line_number è®¾ç½® breakpoint ä¸æä¾›å‚æ•°çš„è¯å°±æ˜¯æŸ¥çœ‹æˆ‘ä»¬è®¾ç½®çš„æ‰€æœ‰ç¨‹åºæ–­ç‚¹ â­ é«˜çº§ç”¨æ³•, ä½ è¿˜å¯ä»¥æŒ‡å®šæ–‡ä»¶! æ¯”å¦‚ä½ æƒ³åœåœ¨ util.py æ–‡ä»¶çš„ç¬¬ 10 è¡Œ, ä½ å¯ä»¥ç”¨ b util:10 â­ é«˜çº§ç”¨æ³•, ä½ åœ¨æŒ‡å®šæ–‡ä»¶çš„åŒæ—¶, å¯ä»¥æŒ‡å®šå‡½æ•°, è¿˜æ˜¯åˆšæ‰é‚£ä¸ªä¾‹å­, æ¯”å¦‚ util.py æ–‡ä»¶é‡Œé¢æœ‰ä¸ª get_result å‡½æ•°, ä½ å¯ä»¥ç”¨ b util.get_result â­ é«˜çº§ç”¨æ³•: ä½ è¿˜å¯ä»¥æŒ‡å®šæ»¡è¶³æŸäº›æ¡ä»¶æ‰ä¼šè®¾ç½®ç¨‹åºæ–­ç‚¹, ç”¨æ³•å¦‚ä¸‹: b ..., condition tbreak [line_number] - æš‚æ—¶çš„ç¨‹åºæ–­ç‚¹, ç¬¬ä¸€æ¬¡å‘½ä¸­ä¹‹åå°±ä¼šè‡ªå·±å–æ¶ˆ disable [breakpoint count] - æš‚æ—¶ä¸ç”¨è¿™ä¸ªç¨‹åºæ–­ç‚¹, å’Œ clear ä¸åŒ, ä½ åé¢å¯ä»¥é€šè¿‡ enable é‡æ–°æ¿€æ´»è¿™ä¸ªç¨‹åºæ–­ç‚¹ enable [breakpoint count] - æ¿€æ´»ç¨‹åºæ–­ç‚¹ cl(ear) [breakpoint count | line_number] - é€šè¿‡ç¨‹åºæ–­ç‚¹çš„åºå·æˆ–è€…æ˜¯å¯¹åº”çš„è¡Œæ¥æ¸…é™¤ç¨‹åºæ–­ç‚¹ unt(il) [line_number] - è¿è¡Œå¤§äºç­‰äº line_number çš„åœ°æ–¹ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸æä¾›å‚æ•°, æ­¤æ—¶ unt(il) å‘½ä»¤ä¼šç»§ç»­è¿è¡Œç¨‹åºåˆ°è¡Œæ•°æ¯”å½“å‰è¡Œå¤§çš„é‚£ä¸€è¡Œ(æœ‰ç‚¹ç»•å£, ä½†æ„æ€å…¶å®å°±æ˜¯ä¸‹ä¸€è¡ŒğŸ§), æ­¤æ—¶å®ƒçš„åŠŸèƒ½ç±»ä¼¼äº n(ext) ğŸ“’ unt(il) å‘½ä»¤é»˜è®¤ä¼šåœåœ¨å½“å‰å‡½æ•°(æˆ–è€…æ˜¯å †æ ˆå¸§) return çš„åœ°æ–¹, è€Œ c(ontinue) ä¼šä¸€ç›´è¿è¡Œåˆ°ä¸‹å» restart [args...] - å¯ä»¥ç»™å®šä¸åŒçš„å‚æ•°å†æ¬¡é‡æ–°è¿è¡Œæ¥ debug ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:2","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"æŸ¥çœ‹å„ç§ä¿¡æ¯ h(elp) [command] - ä¸çŸ¥é“å‘½ä»¤å¯ä»¥æŸ¥è¯¢ä¸€ä¸‹ p expression - ç›¸å½“äº print expression, ä¹Ÿå¯ä»¥ä½¿ç”¨ pp(å¯¹åº” pprint) ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ expression æ˜¯ locals(), å¯ä»¥æŸ¥çœ‹å½“å‰æ‰€åœ¨ä½ç½®çš„ context ğŸ“’ è¦æ·±åˆ»ç†è§£è¿™é‡Œæ˜¯ expression çš„å¥½å¤„, å¦‚æœæœ¬æ¥çš„ expression ä¸å¯¹, å…¶å®ä½ å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œæƒ³è¦æ€ä¹ˆæ”¹, ç„¶åç›´æ¥è¿›è¡Œæµ‹è¯•ğŸ˜® a(rgs) - æ‰“å°å½“å‰æ‰€æœ‰çš„å˜é‡çš„å€¼ whatis expression - ç›¸å½“äº type(expression) source expression - æŸ¥çœ‹ expression çš„æºç . å¸¸ç”¨çš„ expression æ˜¯å‡½æ•°å ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:3","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"å¸¸è§é—®é¢˜ Q: æˆ‘çš„å˜é‡åè·Ÿå‘½ä»¤é‡å¤äº†æ€ä¹ˆåŠ, æ¯”å¦‚å˜é‡åæ˜¯ p ? A: è¿™ä¸ªå…¶å®ä¸å½±å“, ä½ è¿˜æ˜¯å¯ä»¥é€šè¿‡ p p æ¥è·å–å˜é‡åçš„å€¼. å¦‚æœä½ ç›´æ¥è¾“å…¥ p æ˜¾ç¤º p å¯¹åº”çš„å€¼çš„è¯, ä½ å¯ä»¥ä½¿ç”¨ !p, ç”¨ ! æ¥å‘Šè¯‰ ipdb åœ¨å®ƒåé¢çš„æ˜¯ python è¯­å¥ Q: æ¯æ¬¡å•æ­¥æ‰§è¡Œä¹‹åéƒ½è¦ç”¨ p expression çš„æ–¹å¼æ¥çœ‹å˜é‡çš„å€¼, æœ‰æ²¡æœ‰æ›´ä¸ºç®€ä¾¿çš„æ–¹æ³•? A: å¯ä»¥ç”¨ display expression, é‚£ä¹ˆåœ¨ expression çš„å€¼å‘ç”Ÿå˜åŠ¨çš„æ—¶å€™, å®ƒå°±ä¼šè¾“å‡ºå¯¹åº”çš„å€¼. å¦‚æœè¦å–æ¶ˆå°±ç”¨ undisplay expression Q: è§‰å¾—å‘½ä»¤æœ‰ç‚¹å°‘ä¸æ»¡è¶³è‡ªå·±çš„éœ€è¦ ? A: å¯ä»¥åœ¨ ipdb é‡Œé¢ç›´æ¥å†™ python çš„ä»£ç  ğŸ¤— Q: ä¸æƒ³ä½¿ç”¨ python -m ipdb \u003cfilename\u003e æƒ³ç›´æ¥åœ¨ä»£ç é‡Œæ’å…¥ç¨‹åºæ–­ç‚¹ ? A: è¿™ä¹Ÿæ˜¯å¯ä»¥çš„, ä½ å¯ä»¥åœ¨è¦æ’å…¥çš„è¡Œä¹‹å‰è®¾ç½®, åƒè¿™æ ·: ...... import ipdb; ipdb.set_trace(); ...... å¦‚æœä½ æ˜¯ç”¨æ˜¯ \u003e= Python 3.7 çš„ç‰ˆæœ¬, å¯ä»¥æ’å…¥ breakpoint() è€Œä¸æ˜¯ import ipdb; ipdb.set_trace();, è¿™æ ·è®¾ç½®çš„å¥½å¤„æ˜¯ä½ å¯ä»¥ä¸€æ¬¡æ€§å–æ¶ˆæ‰€æœ‰çš„ç¨‹åºæ–­ç‚¹ğŸ˜®, ä½ å°±å¯ä»¥åŒºåˆ†å¼€æ­£å¸¸è¿è¡Œçš„æ¨¡å¼å’Œè°ƒè¯•ç¨‹åºçš„æ¨¡å¼. è¿™ç§æ–¹å¼é»˜è®¤é‡‡ç”¨çš„æ˜¯ pdb Q: -\u003e æŒ‡å‘çš„è¡Œè¿è¡Œäº†å— ? A: æ²¡æœ‰ Q: å¦‚æœæˆ‘ä¸€ç›´åœ¨è°ƒç”¨ step å‘½ä»¤, éš¾é“æˆ‘æ¯ä¸€æ¬¡éƒ½è¦è¾“å…¥ s å—, æœ‰æ²¡æœ‰æ›´å¿«æ·çš„æ–¹æ³• ? A: å¯ä»¥ç›´æ¥ä½¿ç”¨å›è½¦é”®(ENTER), ä¼šè‡ªåŠ¨é‡å¤ä¸Šä¸€æ¬¡çš„å‘½ä»¤ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:4:0","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":"å‚è€ƒ pdb çš„å®˜æ–¹æ–‡æ¡£ ps. æœ‰å…´è¶£çš„å¯ä»¥æŸ¥çœ‹æˆ‘ç¿»è¯‘çš„ä¸€ä¸ªé¡¹ç›® - pdb æ•™ç¨‹, è¿˜æŒºæœ‰æ„æ€çš„ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:5:0","tags":["Debug","Python"],"title":"æ€ä¹ˆ debug ä¸€ä¸ª Python æ–‡ä»¶","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Git"],"content":"ç®€å•ä»‹ç» git lfs çš„ä½¿ç”¨æ–¹æ³•å’Œä½¿ç”¨åœºæ™¯","date":"2021-12-06","objectID":"/zh-cn/gitlfs/","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"ä»€ä¹ˆæ˜¯ git-lfs ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:1:0","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"Github å¯¹æ–‡ä»¶å¤§å°çš„é™åˆ¶ å¦‚æœä½ åœ¨å‘½ä»¤è¡Œç”¨ git push \u003e 50 MB çš„æ–‡ä»¶ï¼Œä½ ä¼šæ”¶åˆ°ä¸€ä¸ª warningï¼Œä½†æ˜¯ä½ ä»ç„¶å¯ä»¥æ­£å¸¸ pushï¼Œä½†æ˜¯ \u003e 100 MB çš„æ—¶å€™å°±æ— æ³• push äº† å¦‚æœä½ åœ¨æµè§ˆå™¨è¦ä¸Šä¼ æ–‡ä»¶çš„è¯ï¼Œé™åˆ¶æ›´ä¸ºä¸¥é‡ï¼Œä¸èƒ½è¶…è¿‡ 25 MB å¦å¤–æœ‰å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š Github å»ºè®®ä»“åº“çš„å¤§å°ç†æƒ³æƒ…å†µä¸‹ä¸è¦è¶…è¿‡ 1 GBï¼Œæœ€å¥½ä¸è¦è¶…è¿‡ 5 GB Github ä»æ¥ä¸å»ºè®®æŠŠä»“åº“å½“æˆä¸€ç§å¤‡ä»½å·¥å…· ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:1:1","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"ä¸ºä»€ä¹ˆéœ€è¦ gif-lfs å‰é¢æåˆ°çš„ Github å¯¹æ–‡ä»¶å¤§å°çš„é™åˆ¶æ˜¯ä¸€ç‚¹ å¦å¤–å› ä¸ºæ¯æ¬¡æˆ‘ä»¬åœ¨ä½¿ç”¨ git commit çš„æ—¶å€™ï¼Œå…¶å®æ˜¯ç»™å½“å‰çš„ä»“åº“åˆ›å»ºäº†ä¸€æ¬¡å¿«ç…§ï¼Œæœ¬è´¨æ˜¯å…¨ä»“åº“çš„å…‹éš†ï¼Œå¦‚æœå¤§æ–‡ä»¶å¤ªå¤šæ˜¯å¾ˆä¸å¥½çš„ï¼Œä½ çš„ Git ä»“åº“ä¼šè¶Šæ¥è¶Šå¤§ ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:1:2","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"ä»€ä¹ˆæƒ…å†µä¸‹ä¸éœ€è¦ç”¨ gif-lfs æ–‡ä»¶æ²¡æœ‰è¶…è¿‡é™åˆ¶å½“ç„¶å°±æ²¡æœ‰å¿…è¦ç”¨äº† å¦‚æœæ˜¯è¦åˆ†å‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ¯”å¦‚ *.exeï¼‰ç­‰ï¼Œæ­¤æ—¶ç›´æ¥ç”¨ Github æä¾›çš„ release åŠŸèƒ½å°±å¥½äº† ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:1:3","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"git-lfs åŸç† ä½¿ç”¨ gif-lfs ä¹‹åï¼Œåœ¨ä»“åº“ä¸­å­˜å‚¨çš„å…¶å®æ˜¯å¯¹å¤§æ–‡ä»¶çš„å¼•ç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆã€‚è€ŒçœŸæ­£çš„å¤§æ–‡ä»¶æ‰˜ç®¡åœ¨ Git Lfs çš„æœåŠ¡å™¨ä¸Š Github ç»™ä¸åŒç”¨æˆ·çš„ git-lfs æä¾›çš„é¢åº¦ä¸ä¸€æ ·ï¼Œå…è´¹ç”¨æˆ·å’Œ Pro ç”¨æˆ·éƒ½æ˜¯ 2 GB ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:2:0","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"å¼•ç”¨æ–‡ä»¶é•¿ä»€ä¹ˆæ ·å­ æ¯”å¦‚å®˜æ–¹æ–‡æ¡£é‡Œé¢æåˆ°çš„ä¾‹å­ï¼š version https://git-lfs.github.com/spec/v1 oid sha256:4cac19622fc3ada9c0fdeadb33f88f367b541f38b89102a3f1261ac81fd5bcb5 size 84977953 å…¶ä¸­ version æ˜¯ä½ æ­£åœ¨ä½¿ç”¨çš„ git-lfs çš„ç‰ˆæœ¬ï¼Œoid æ˜¯æ ‡å¿—ç¬¦ï¼ˆidï¼‰ï¼Œsize æ˜¯æ–‡ä»¶çš„çœŸå®å¤§å° ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:2:1","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"å¼€å§‹ä½¿ç”¨ git-lfs ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:3:0","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"å¦‚ä½•å®‰è£… git-lfs (Mac ç¯å¢ƒä¸‹) \u003e brew install git-lfs \u003e git lfa install # å¦‚æœè¾“å‡ºä¸º Git LFS initialized. å°±æ˜¯æ­£å¸¸å®‰è£…å¥½äº† ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:3:1","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"Case 1. ä» 0 å¼€å§‹é…ç½®ä½¿ç”¨ git-lfs æˆ‘ä»¬è¦æŒ‡å®š git-lfs ä¼šæŠŠå“ªäº›æ–‡ä»¶å½“ä½œå¤§æ–‡ä»¶ï¼ŒæŒ‡å®šæ–¹å¼æ¯”å¦‚æœ‰ï¼š æŒ‡å®šæ–‡ä»¶åç¼€åâ€”â€”git lfs track \"*.filetype\" æŒ‡å®šæŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶â€”â€”git lfs track \"directory/*\" å…·ä½“æŒ‡å®šæŸä¸ªæ–‡ä»¶â€”â€”git lfs track \"path/to/file\" \u003e mkdir \u003crepo\u003e \u003e cd \u003crepo\u003e \u003e git init \u003e git lfs track \"*.filetype\" # æ¯”å¦‚ *.zip # å…¶å® git lfs track ä¼šä¿®æ”¹ .gitattributes æ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥åšä¸€ä¸ªå¿«é€Ÿçš„éªŒè¯ # \u003e cat .gitattributes # *.zip filter=lfs diff=lfs merge=lfs -text # ä¸‹é¢å‡å®šåœ¨ Github æœ‰ä¸€ä¸ªè¿œç¨‹ä»“åº“ä¾›æˆ‘ä»¬ä½¿ç”¨ # å¾€ä»“åº“é‡ŒåŠ ä½ å…ˆå‰æŒ‡å®šçš„æ–‡ä»¶ç±»å‹çš„å¤§æ–‡ä»¶ \u003e git add . \u003e git commit -m \"\" \u003e git branch -M main \u003e git remote add origin git@github.com:\u003cusername\u003e/\u003cremote_repo_name\u003e.git # è¿™é‡Œæ›¿æ¢ä¸ºè‡ªå·±çš„ç”¨æˆ·åå’Œè¿œç¨‹ä»“åº“å \u003e git push -u origin main # æ­¤æ—¶å‘½ä»¤è¡Œä¼šæ˜¾ç¤º # \u003e uploading LFS objects # å¦‚æœæ²¡æœ‰é‡‡ç”¨ git-lfsï¼Œåˆ™æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹ # \u003e Enumerating objects: 3, done. # Counting objects: 100% (3/3), done. # Delta compression using up to 8 threads # Compressing objects: 100% (2/2), done. ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:3:2","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"Case 2. è¦åœ¨å·²æœ‰çš„ä»“åº“ä¸Šç”¨ git-lfs è¿½è¸ªæŸäº›æ–‡ä»¶ æ­¤æ—¶åªæ˜¯ç®€å•çš„ä½¿ç”¨ git lfs track \"\" æ˜¯æ²¡ç”¨çš„ï¼Œå› ä¸ºä½ ä¹‹å‰çš„ commit å·²ç»ç”Ÿæˆäº†å¿«ç…§ï¼Œä½ æ— æ³•è¿½è¸ªå†å²ä¸­çš„è¿™äº›å¤§æ–‡ä»¶ã€‚ git-lfs åªä¼šåœ¨ä½ å¼€å§‹è®¾ç½®çš„æ­¤åˆ»ä¹‹åè¿½è¸ªæ–°ç”Ÿæˆçš„æŒ‡å®šæ–‡ä»¶ å¯ä»¥å¿«é€Ÿåšä¸ªéªŒè¯ï¼Œå‡è®¾æˆ‘ä»¬è¿˜åœ¨è¿™ä¸ªä»“åº“é‡Œâ¬‡ï¸ \u003e ls \u003e test1.txt \u003e ls -l \u003e test2.txt \u003e git add test1.txt test2.txt \u003e git commit -m \"Add txt files\" # å‡è®¾æˆ‘ä»¬ç°åœ¨è¦æŠŠ txt æ–‡ä»¶å½“æˆæ˜¯å¤§æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæƒ³è¿™ä¹ˆåš \u003e git lfs track \"*.txt\" \u003e git add .gitattributes \u003e git commit -m \"Track *.txt files\" \u003e git lfs ls-files # æ­¤æ—¶ä½ ä¼šå‘ç° git-lfs å¹¶æ²¡æœ‰è¿½è¸ª txt æ–‡ä»¶ \u003e echo \"hello\" \u003e test3.txt \u003e git add test3.txt \u003e git commit -m \"Add test3.txt\" \u003e git lfs ls-files # æ­¤æ—¶ä½ å¯ä»¥åœ¨è¾“å‡ºä¸­çœ‹åˆ° test3.txt æ­£ç¡®çš„æ–¹æ³•æ˜¯ä½¿ç”¨ git lfs migrateï¼Œè¿™é‡Œåªåˆ—ä¸¾äº†ç®€å•çš„ç”¨æ³•ï¼Œæ›´å¤æ‚çš„å¯ä»¥çœ‹çœ‹æ‰‹å†Œã€‚æ¯”å¦‚å¯ä»¥ç”¨ --include-ref= æŒ‡å®šåˆ†æ”¯ï¼Œå¤šä¸ªåˆ†æ”¯çš„æ—¶å€™æœ€å¥½ä¸€ä¸ªåˆ†æ”¯ä¸€ä¸ªåˆ†æ”¯åœ°è¿ç§»ï¼Œæœ€åæ˜¯ git push --all -f \u003e git lfs migrate import --include=\"*.txt\" # åœ¨å½“å‰åˆ†æ”¯ä¸Šæ‰§è¡Œ \u003e git lfs ls-files # æ­¤æ—¶å¯ä»¥å‘ç° text1.txt å’Œ text2.txt ä¹Ÿè¢«è¿½è¸ªåˆ°äº† \u003e git push --force # è®©è¿œç¨‹ä»“åº“ä¹Ÿæ”¹è¿‡æ¥ ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:3:3","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"Case 3. ä¸å†è·Ÿè¸ªæŸäº›æ–‡ä»¶ \u003e git lfs untrack \"*.filetype\" \u003e git rm --cached \"*.txt\" ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:3:4","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"å…¶ä»–å¸¸ç”¨å‘½ä»¤ æŸ¥çœ‹å½“å‰ git-lfs æ­£åœ¨è¿½è¸ªçš„æ–‡ä»¶ç±»å‹â€”â€”git lfs track æŸ¥çœ‹å½“å‰ git-lfs æ­£åœ¨è¿½è¸ªå“ªäº›æ–‡ä»¶â€”â€”git lfs ls-file ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:4:0","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":"å‚è€ƒ https://docs.github.com/en/repositories/working-with-files/managing-large-files/about-large-files-on-github ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:5:0","tags":["Git"],"title":"git lfs ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Machine-Learning"],"content":"ç®€å•ä»‹ç» Precision å’Œ Recall ä»¥åŠ F1 score çš„è®¡ç®—æ–¹å¼","date":"2021-12-05","objectID":"/zh-cn/f1score/","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"ä»€ä¹ˆæ˜¯æ··æ·†çŸ©é˜µ æ¯ä¸€åˆ—è¡¨ç¤ºå®é™…æƒ…å†µï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºæˆ‘ä»¬çš„é¢„æµ‹ï¼Œè¿™æ ·ç»„åˆèµ·æ¥å°±å¾—åˆ°äº†ä¸€ä¸ªæ··æ·†çŸ©é˜µï¼Œæ¯”å¦‚ä¸€ä¸ªäºŒåˆ†ç±»çš„ä»»åŠ¡ï¼Œå¯ä»¥ç”»å‡ºå¦‚ä¸‹çš„æ··æ·†çŸ©é˜µâ¬‡ï¸ Positive Negative True TP = True Positive FP = False Positive False FN = False Negative TN = True Negative ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:0","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"accuracy æœ‰å¤šå°‘æ ·æœ¬æˆ‘ä»¬é¢„æµ‹æ­£ç¡®äº† é¢„æµ‹æ­£ç¡®çš„å…¶å®æœ‰ä¸‹é¢ä¸¤ç§æƒ…å½¢â¬‡ï¸ TPï¼šæœ¬æ¥æ˜¯ positiveï¼Œä½ ä¹Ÿè®¤ä¸ºæ˜¯ positive çš„ TNï¼šæœ¬æ¥æ˜¯ negativeï¼Œä½ ä¹Ÿè®¤ä¸ºæ˜¯ negative çš„ é‚£ä¹ˆç”¨ TP + TNï¼ˆå…¶å®å°±æ˜¯ä¸»å¯¹è§’çº¿ï¼‰é™¤ä»¥æ€»çš„æ ·æœ¬æ•°å°±å¯ä»¥å¾—åˆ° accuracyï¼Œ ğŸ“’æˆ–è€…ç›´æ¥çœ‹è¡¨æ ¼ï¼Œå…¶å®å°±æ˜¯ $\\frac{ä¸»å¯¹è§’çº¿}{å››ä¸ªå•å…ƒæ ¼} =\\frac{TP+TN}{TP+TN+FN+FP}$ ä¸€èˆ¬æ¥è¯´ accuracy æ˜¯å¥½ç”¨çš„è¯„ä¼°æŒ‡æ ‡ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ä¸æ˜¯è¿™æ ·å­çš„ï¼Œæ¯”å¦‚æ ·æœ¬æ•°æ®ä¸å‡è¡¡çš„æ—¶å€™ ç±»åˆ« A ç±»åˆ« B åˆ¤æ–­æ˜¯ç±»åˆ« A 0 0 åˆ¤æ–­æ˜¯ç±»åˆ« B 1 99 å‡è®¾ç±»åˆ« A æœ‰ 1 ä¸ªï¼Œç±»åˆ« B æœ‰ 99 ä¸ªï¼Œå¦‚æœä¸ç®¡è¾“å…¥çš„æ˜¯ä»€ä¹ˆéƒ½è¿”å›ç±»åˆ« B çš„æ­£ç¡®ç‡æ˜¯å¤šå°‘å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ $\\frac{0+99}{0+0+1+99}=99%$ï¼Œæˆ‘ä»¬å¯ä»¥è¯´è¿™ä¸ªåˆ†ç±»å™¨æ•ˆæœå¾ˆå¥½å—ï¼Œè¿™æ˜¾ç„¶æ˜¯å¾ˆè’è°¬çš„ğŸ˜‚ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:1","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"Precision æ‰€æœ‰é¢„æµ‹ä¸º True çš„æ ·æœ¬é‡Œé¢ï¼Œæœ‰å¤šå°‘æ˜¯çœŸçš„ positive çš„ ä»å®šä¹‰å‡ºå‘å¯ä»¥çŸ¥é“ï¼Œå…¶å®å°±æ˜¯è¡¨æ ¼ä¸­åˆ¤æ–­ä¸º True çš„è¿™ä¸€è¡Œä¸­ positive çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆå°±æ˜¯ $\\frac{TP}{TP+FP}$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:2","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"Recall æ‰€æœ‰æœ¬æ¥æ˜¯ positive çš„ï¼Œæœ‰å¤šå°‘è¢«æˆ‘ä»¬æˆåŠŸé¢„æµ‹äº†å‡ºæ¥ ä»å®šä¹‰å‡ºå‘ï¼Œæ‰€æœ‰æœ¬æ¥æ˜¯ positive çš„å°±æ˜¯ Positive è¿™ä¸€åˆ—ä¹‹å’Œï¼Œæˆ‘ä»¬æˆåŠŸé¢„æµ‹çš„æ˜¯ TPï¼Œé‚£ä¹ˆå°±æ˜¯ $\\frac{TP}{TP+FN}$ ğŸ“’æˆ‘ä»¬å¸¸å¸¸è¦åœ¨ Precision å’Œ Recall ä¸­è¿›è¡Œ tradeoffï¼Œå› ä¸ºå…¶ä¸­ä¸€ä¸ªå‡é«˜ï¼Œå¦ä¸€ä¸ªå°±ä¼šé™ä½ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:3","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"F1 score æ­£æ˜¯å› ä¸º Precision å’Œ Recall çš„äº’æ–¥ç‰¹æ€§ï¼Œåœ¨è¡¡é‡åˆ†ç±»å™¨å¥½åçš„æ—¶å€™ä¼šç»™æˆ‘ä»¬å¸¦æ¥å›°æ‰°ï¼Œç‰¹åˆ«æ˜¯ä¸¤è€…ç›¸å·®ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œäºæ˜¯å°±éœ€è¦å°†è¿™ä¸¤ä¸ªæŒ‡æ ‡åˆå¹¶èµ·æ¥ç”¨å¦ä¸€ä¸ªæŒ‡æ ‡è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯ F1 score F1 score çš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š $$F1\\ score = \\frac{2PR}{P+R}$$ å…¶ä¸­ Precision = $P$ï¼› Recall = $R$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:2:0","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"F1 score çš„ä¸åŒè®¡ç®—æ–¹æ³• Macroï¼šåˆ†åˆ«è®¡ç®—æ¯ä¸ªç±»åˆ«çš„ $P$ å’Œ $R$ï¼Œå†è®¡ç®—æ€»çš„å¹³å‡çš„ $P$ å’Œ $R$ï¼Œæœ€åç”¨è¿™ä¸ªè®¡ç®— F1 score Microï¼šåˆå¹¶å¤šä¸ªç±»åˆ«çš„ç»Ÿè®¡ç»“æœåˆ°ä¸€ä¸ªè¡¨æ ¼é‡Œé¢ï¼Œåœ¨åˆ†åˆ«ç®— $P$ å’Œ $R$ å’Œ F1 score é…åˆåé¢çš„ä¾‹å­ğŸŒ°é£Ÿç”¨ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:2:1","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"F1 score çš„å‡ ä¸ªè§„å¾‹ F1 score æ°¸è¿œåœ¨ precision å’Œ recall ä¹‹é—´ï¼Œ F1 score ä¼šç»™ä½çš„éƒ¨åˆ†ï¼ˆ$P\\ or\\ R$ï¼‰æ›´å¤šçš„æƒé‡ï¼Œæ‰€ä»¥å¦‚æœç®—æœ¯å¹³å‡å€¼æ˜¯ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œå“ªä¸ªåˆ†ç±»å™¨çš„çŸ­æ¿æ›´çŸ­ï¼Œå®ƒçš„ F1 å°±ä¼šè¶Šå·® æƒ…å†µä¸€ï¼šæ¯”å¦‚ $P$ å’Œ $R$ åˆ†åˆ«æ˜¯ $60%$ å’Œ $60%$ï¼Œå¯ä»¥ç®—ä»–ä»¬çš„ F1 score = $60%$ æƒ…å†µäºŒï¼šæ¯”å¦‚ $P$ å’Œ $R$ åˆ†åˆ«æ˜¯ $50%$ å’Œ $70%$ï¼Œå¯ä»¥çœ‹åˆ°ä»–ä»¬å’Œä¸Šä¸€ç§æƒ…å†µçš„å¹³å‡å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»–ä»¬çš„ F1 score = $58.3%$ ç”± 1. å¯çŸ¥ï¼šğŸ“’ é«˜ F1 score ä¸æ„å‘³ç€åˆ†ç±»å™¨æ›´å¥½æˆ–æ›´é€‚åˆä½ çš„ä»»åŠ¡ï¼Œæœ‰æ—¶å€™ä½ å¯èƒ½æ›´å…³æ³¨ Precision æˆ–è€… Recall è¿™ä¸¤ä¸ªä¸­çš„ä¸€ä¸ª ","date":"2021-12-05","objectID":"/zh-cn/f1score/:2:2","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ğŸŒ° class 0 class 1 class 2 predict_class0 2 0 0 predict_class1 1 0 1 predict_class2 0 2 0 ","date":"2021-12-05","objectID":"/zh-cn/f1score/:3:0","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"Macro çš„è®¡ç®—æ–¹å¼ è¦å…ˆå¾—åˆ°æ¯ä¸€ä¸ªç±»åˆ«çš„ Precision å’Œ Recallï¼Œå…ˆç”»å‡ºè¡¨æ ¼â¬‡ï¸ class 0 Not class 0 predict_class0 2 1 predict_not_class0 0 3 class 1 Not class 1 predict_class1 0 2 predict_not_class1 2 2 class 2 Not class 2 predict_class2 0 1 predict_not_class2 2 3 å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ç»“æœ class 0ï¼šPrecision = $\\frac{2}{3}$ï¼›Recall = $1$ class 1ï¼šPrecision = $0$ï¼›Recall = $0$ class 2ï¼šPrecision = $0$ï¼›Recall = $0$ é‚£ä¹ˆå¹³å‡çš„ Precision å°±æ˜¯ $\\frac{2}{3} * \\frac{1}{3} = \\frac{2}{9}$ï¼›å¹³å‡çš„ Recall æ˜¯ $\\frac{1}{3}$ï¼Œä»£å…¥ F1 score çš„è®¡ç®—å…¬å¼å¯ä»¥å¾—åˆ° $\\frac{4}{15}=0.26666$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:3:1","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"Micro çš„è®¡ç®—æ–¹å¼ å°†ä¸‰ä¸ªè¡¨æ ¼å èµ·æ¥ï¼ˆå¯¹åº”ä½ç½®ç›¸åŠ ï¼‰ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„è¡¨æ ¼ class ? Not class ? predict_class? 2 4 predict_not_class? 4 8 ä»£å…¥å…¬å¼ç®—å¾— F1 score = $1/3=0.333333$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:3:2","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"ä»£ç éªŒè¯ from sklearn.metrics import f1_score, confusion_matrix y_true = [0, 1, 2, 0, 1, 2] y_pred = [0, 2, 1, 0, 0, 1] print(confusion_matrix(y_true, y_pred)) # confusion matrix # [[2 0 0] # [1 0 1] # [0 2 0]] print(f1_score(y_true, y_pred, average='macro')) # 0.26666 print(f1_score(y_true, y_pred, average='micro')) # 0.33333 ","date":"2021-12-05","objectID":"/zh-cn/f1score/:4:0","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":"å‚è€ƒ sklearn çš„ f1_score ä»‹ç» ","date":"2021-12-05","objectID":"/zh-cn/f1score/:5:0","tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"}]