[{"categories":["Program-Analysis"],"content":"ä»‹ç»ç¨‹åºçš„ä¸­é—´è¡¨ç¤ºçš„ä¸€ç§ï¼šä¸‰åœ°å€ç ","date":"2025-02-18","objectID":"/zh-cn/three-address-code/","series":null,"tags":["Program-Analysis"],"title":"ä¸‰åœ°å€ç (3AC/TAC)æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/three-address-code/"},{"categories":["Program-Analysis"],"content":" ä»€ä¹ˆæ˜¯ä¸‰åœ°å€ç ä¸‰åœ°å€ç ï¼ˆThree-Address Codeï¼Œä¹Ÿç®€è®°ä¸º 3AC/TACï¼‰æ˜¯ä¸€ç§ç¨‹åºçš„ä¸­é—´è¡¨ç¤ºï¼ˆIntermediate Representationï¼ŒIRï¼‰ï¼Œé€šå¸¸ç”¨åœ¨ç¼–è¯‘å™¨ã€ç¨‹åºåˆ†æå½“ä¸­ã€‚é¡¾åæ€ä¹‰ï¼Œä¸‰åœ°å€ç çš„æ¯ä¸€æ¡æŒ‡ä»¤æœ€å¤šåªæœ‰ä¸‰ä¸ªâ€œåœ°å€â€ï¼Œè¿™é‡Œçš„â€œåœ°å€â€åŒ…æ‹¬å˜é‡ã€å¸¸é‡ã€‚å¸¸è§çš„å½¢å¼åŒ…æ‹¬ä¸‹é¢å‡ ç§ 1 c // assignment with binary operator(bop) x = y bop z // assignment with binary operator(uop) x = uop y // copy x = y // unconditional jump goto label // conditional jump 1 if x goto L // conditional jump 2 // rop = relation operator // e.g. \u003e, \u003c, \u003e=, â€¦ if x rop y goto L // procedure call call p // return return val ","date":"2025-02-18","objectID":"/zh-cn/three-address-code/:1:0","series":null,"tags":["Program-Analysis"],"title":"ä¸‰åœ°å€ç (3AC/TAC)æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/three-address-code/#ä»€ä¹ˆæ˜¯ä¸‰åœ°å€ç "},{"categories":["Program-Analysis"],"content":" ä¸‰åœ°å€ç å®ç°ï¼ˆå››å…ƒç»„ï¼‰æ ¹æ®ä¸‰åœ°å€ç çš„ç‰¹ç‚¹ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå››å…ƒç»„å­˜å‚¨ä¸‰åœ°å€ç çš„æŒ‡ä»¤ï¼š(destination, operator, operand1, operand2)ï¼Œé‚£ä¹ˆä»£ç å°±å¯ä»¥è¡¨ç¤ºä¸ºä¸€ä¸ªå››å…ƒç»„æ•°ç»„ï¼Œæˆ–è€…æ˜¯å››å…ƒç»„é“¾è¡¨2 å››å…ƒç»„é“¾è¡¨çš„å¥½å¤„æ˜¯ä¸ç”¨æå‰è®¡ç®—è¦å¼€è¾Ÿå¤šå¤§çš„ç©ºé—´å­˜å‚¨ä¸‰åœ°å€ç ã€‚å¦‚æœæ˜¯å››å…ƒç»„æ•°ç»„çš„è¯ï¼Œä¸€å¼€å§‹æ•°ç»„å¼€è¾Ÿè¿‡å¤§ä¼šå¯¼è‡´å†…å­˜æµªè´¹ï¼Œå¼€è¾Ÿå¾—å¤ªå°åˆä¼šå¼•å…¥é¢å¤–çš„æ€§èƒ½å¼€é”€ 2 ","date":"2025-02-18","objectID":"/zh-cn/three-address-code/:2:0","series":null,"tags":["Program-Analysis"],"title":"ä¸‰åœ°å€ç (3AC/TAC)æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/three-address-code/#ä¸‰åœ°å€ç å®ç°å››å…ƒç»„"},{"categories":["Program-Analysis"],"content":" Practical Example. LLVM IRå‰é¢æœ¬æ–‡æåˆ°çš„ä¸‰åœ°å€ç çš„å¸¸è§å½¢å¼æ˜¯æŠ½è±¡çš„è¡¨ç¤ºï¼Œå…·ä½“å®ç°çš„æ—¶å€™å†™æ³•ä¸Šä¼šæœ‰æ‰€å·®å¼‚ã€‚ä»¥ LLVM IR ä¸ºä¾‹ï¼Œå®ƒå°±æ˜¯å…¸å‹çš„ä¸‰åœ°å€ç ï¼Œæ¯”å¦‚å¯¹äºä¸‹é¢è¿™ä¸€æ®µ C/C++ ç¨‹åºï¼ˆmain.cppï¼‰ c++ int main() { int sum = 0; for (int i = 0; i \u003c 10; i++) { sum += i; } return 0; } ç”¨ clang å¯¼å‡º LLVM IRï¼Œå‘½ä»¤å¦‚ä¸‹ sh $ clang -S -emit-llvm main.cpp åœ¨åŒç›®å½•ä¸‹å¯ä»¥çœ‹åˆ° main.ll æ–‡ä»¶ã€‚æˆ‘åˆ å»äº†éƒ¨åˆ†ä»£ç å¹¶åŠ ä¸Šäº†æ³¨é‡Šæ¥å¸®åŠ©ä½ ç†è§£ï¼Œå†…å®¹å¦‚ä¸‹ llvm define noundef i32 @main() #0 { %1 = alloca i32 %2 = alloca i32 ; %2 is sum %3 = alloca i32 ; %3 is i store i32 0, ptr %1 store i32 0, ptr %2 ; sum = 0 store i32 0, ptr %3 ; i = 0 br label %4 ; jump to %4 4: ; preds = %11, %0 %5 = load i32, ptr %3 ; load i %6 = icmp slt i32 %5, 10 ; %6 = check if i \u003c 10 br i1 %6, label %7, label %14 ; conditional jump based on if %6 is true 7: ; preds = %4 %8 = load i32, ptr %3 ; i %9 = load i32, ptr %2 ; sum %10 = add nsw i32 %9, %8 ; temp = sum + i store i32 %10, ptr %2 ; sum = temp br label %11 ; jump to %11 11: ; preds = %7 %12 = load i32, ptr %3 ; i %13 = add nsw i32 %12, 1 ; temp = i++ store i32 %13, ptr %3 ; i = temp br label %4, ; jump to %4 14: ; preds = %4 ret i32 0 ; return 0 } ","date":"2025-02-18","objectID":"/zh-cn/three-address-code/:3:0","series":null,"tags":["Program-Analysis"],"title":"ä¸‰åœ°å€ç (3AC/TAC)æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/three-address-code/#practical-example-llvm-ir"},{"categories":["Program-Analysis"],"content":" æ€»ç»“ä¸‰åœ°å€ç å¾ˆå¥½ç†è§£ï¼Œä½œä¸ºç¨‹åº IR çš„ä¸€ç§ï¼Œå®ƒæ˜¯å¾ˆå¤šç¨‹åºåˆ†æå·¥å…·çš„åŸºç¡€ 1ï¼ˆæ¯”å¦‚æˆ‘æœ€è¿‘æ­£åœ¨çœ‹çš„ ArkAnalyzer3ï¼‰ã€‚ä¸‰åœ°å€ç å’Œ AST ç›¸æ¯”ï¼Œå®ƒçš„ä¼˜åŠ¿æ˜¯ï¼šæ›´åŠ ç´§å‡‘ï¼Œå¹¶ä¸”å¸¦æœ‰æ§åˆ¶æµçš„ä¿¡æ¯ï¼ˆä½ èƒ½å¤Ÿé€šè¿‡é˜…è¯»ä»£ç çŸ¥é“ç¨‹åºçš„è¿è¡Œé€»è¾‘ï¼‰ï¼Œè€Œä¸”é€šå¸¸æ˜¯ç¼–ç¨‹è¯­è¨€æ— å…³çš„ã€‚è¿™ä¸ªç»™åç»­çš„ç¨‹åºåˆ†æå’Œå¤„ç†å¸¦æ¥äº†å¾ˆå¤§çš„æ–¹ä¾¿ ","date":"2025-02-18","objectID":"/zh-cn/three-address-code/:4:0","series":null,"tags":["Program-Analysis"],"title":"ä¸‰åœ°å€ç (3AC/TAC)æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/three-address-code/#æ€»ç»“"},{"categories":["Program-Analysis"],"content":" Refs å—äº¬å¤§å­¦.è½¯ä»¶åˆ†æ.02.Intermediate RepresentationÂ â†©ï¸Â â†©ï¸ Engineering a Compiler 5.3.3 Representing Linear CodesÂ â†©ï¸Â â†©ï¸ Chen, Haonan, et al. â€œArkAnalyzer: The Static Analysis Framework for OpenHarmony.â€Â arXiv preprint arXiv:2501.05798Â (2025).Â â†©ï¸ ","date":"2025-02-18","objectID":"/zh-cn/three-address-code/:5:0","series":null,"tags":["Program-Analysis"],"title":"ä¸‰åœ°å€ç (3AC/TAC)æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/three-address-code/#refs"},{"categories":["ML-DL"],"content":" Motivationå½“å‰çš„ RAG æŠ€æœ¯æ— æ³•å›ç­”å…³äºè¯­æ–™åº“çš„å…¨å±€æ€§é—®é¢˜ï¼Œæ¯”å¦‚â€œè¿™ä¸ªæ•°æ®é›†çš„ä¸»é¢˜æ˜¯ä»€ä¹ˆâ€ã€‚è¿™ä¸€ç±»é—®é¢˜ä¸æ˜¯å¯ä»¥é€šè¿‡æ£€ç´¢å¢å¼ºæŠ€æœ¯è§£å†³çš„ï¼Œå› ä¸ºç­”æ¡ˆä¸€èˆ¬ä¸åœ¨æŸä¸€æ®µæ–‡æœ¬é‡Œé¢ï¼Œæ­£ç¡®ç­”æ¡ˆéœ€è¦ç†è§£æ•´ä¸ªè¯­æ–™åº“å¹¶ç»™å‡ºæŠ½è±¡çš„æ€»ç»“ï¼Œä½œè€…ç§°è¿™ç±»é—®é¢˜ä¸º query-focused summarization (QFS) é—®é¢˜1ã€‚æ™®é€šçš„ RAG æŠ€æœ¯æ— æ³•å¾ˆå¥½å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚ å°†æ•´ä¸ªè¯­æ–™åº“çš„æ–‡æœ¬æ”¾åœ¨ä¸Šä¸‹æ–‡çª—å£é‡Œé¢åˆä¸å¤§ç°å®ï¼Œå°±ç®—èƒ½æ”¾å¾—ä¸‹ï¼Œé¢å¯¹è¶…é•¿è¾“å…¥ï¼ŒLLM ç»å¸¸ä¼šå¿˜æ‰ä¸­é—´çš„ä¿¡æ¯ æœ¬æ–‡æå‡ºçš„ GraphRAG1 å°±æ˜¯è¦è§£å†³è¿™äº›é—®é¢˜ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:1:0","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#motivation"},{"categories":["ML-DL"],"content":" GraphRAG Tip è¦ç†è§£ GraphRAG æœ€å¥½è¦æœ‰çŸ¥è¯†å›¾è°±çš„èƒŒæ™¯ï¼Œæ¯”å¦‚å¯¹ç¤¾åŒºã€ç¤¾åŒºæ£€æµ‹ç®—æ³•è¦æœ‰ä¸€å®šçš„äº†è§£ã€‚å¦å¤–è¦å¯¹å›¾è¿™ç§æ•°æ®ç»“æ„æœ‰æ¯”è¾ƒæ¸…æ¥šçš„äº†è§£ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:2:0","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#graphrag"},{"categories":["ML-DL"],"content":" Document -\u003e TextChunkflowchart LR Document --\u003e TextChunk1 \u0026 TextChunk2 \u0026 ... å°†æ–‡æ¡£åˆ’åˆ†ä¸ºå¤šä¸ª Text Chunkï¼ˆå½¼æ­¤ä¹‹é—´å¯ä»¥æœ‰é‡å ï¼‰ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:2:1","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#document---textchunk"},{"categories":["ML-DL"],"content":" TextChunk -\u003e Entity \u0026 Relationship \u0026 Claimflowchart LR TextChunk --\u003e Entity \u0026 Relationship \u0026 Claim æ¯ä¸€ä¸ª Text Chunk ä¼šè¢« LLM ç”¨æ¥æå–çŸ¥è¯†å›¾è°±é‡Œçš„ å®ä½“ï¼ŒåŒ…æ‹¬ åå­—ã€ç±»å‹ã€æè¿° å…³ç³»ï¼ŒåŒ…æ‹¬ èµ·ç‚¹ã€æè¿°ã€ç»ˆç‚¹ æ–­è¨€ï¼ˆClaimï¼‰ Tip å¦‚æœæå–åˆ°é‡å¤çš„å®ä½“/å…³ç³»ï¼ˆä¸è€ƒè™‘ æè¿°ï¼‰ä¼šå°†å…¶åˆå¹¶ï¼Œä½†æ¯ä¸€ä¸ªå®ä½“/å…³ç³»çš„æè¿°ä¼šè¢«è®°å½•ä¸‹æ¥ï¼Œå³ä¸€ä¸ªå®ä½“/å…³ç³»å¯èƒ½ä¼šæœ‰å¤šä¸ªæè¿° æå–çš„åŸç†å°±æ˜¯å†™ Prompt ç»™å¤§æ¨¡å‹ï¼Œè¿™é‡Œçš„ Prompt ä¼šç”¨ Few-shot learning å’Œ In-Context learning çš„æŠ€æœ¯ä½œå¢å¼ºï¼Œå¯ä»¥æƒ³è±¡ï¼Œè¿™é‡Œçš„ Prompt å¾ˆå…³é”® é™¤äº†ç²¾å¿ƒç¼–å†™ Prompt ä»¥å¤–ï¼Œä½œè€…1è¿˜æå‡ºå¯ä»¥å¤šæ¬¡æ‰§è¡Œæå–çš„æ­¥éª¤ï¼Œè¿™æ˜¯ä¸ºäº†é¼“åŠ± LLM å‘ç°ä¸Šä¸€è½®é—æ¼çš„å®ä½“ã€‚æ€ä¹ˆé¼“åŠ±å‘¢ï¼Ÿå¯ä»¥å°è¯•å‘Šè¯‰ LLM è¯´ä¸Šä¸€è½®é—æ¼æ‰äº†éå¸¸å¤šçš„å®ä½“ Tip æ³¨æ„ï¼ŒText Chunk è®¾ç½®å¾—è¶Šå¤§ï¼ŒLLM è°ƒç”¨çš„æ¬¡æ•°å°±è¶Šå°‘ï¼Œé€Ÿåº¦è¶Šå¿«ã€‚ä½†ä½œè€…1å‘ç°æå–çš„å®ä½“é‡ã€å…³ç³»çš„æ•°é‡ä¼šå˜å°‘ï¼Œå› æ­¤è¿™é‡Œéœ€è¦åšå¥½æƒè¡¡ï¼Œå¯ä»¥å‚è€ƒè®ºæ–‡é‡Œçš„ Figure 2 ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:2:2","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#textchunk---entity--relationship--claim"},{"categories":["ML-DL"],"content":" Graph Communities Detectionflowchart LR Document(Document in the form of entity, relationships, and claims) subgraph community_tree root(Community1) root2(Community2) root3(Community3) root --\u003e root2 \u0026 root3 root --\u003e dots(...) root2 --\u003e dots1(...) root3 --\u003e dots2(...) dots --\u003e dots3(...) end Document --\u003e community_tree åœ¨ä¸Šä¸€ä¸ªé˜¶æ®µåï¼Œå…¶å®æˆ‘ä»¬å·²ç»ä¸ºæ¯ä¸ªæ–‡æ¡£æ­å»ºäº†ä¸€ä¸ªçŸ¥è¯†å›¾è°±ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åœ¨è¿™ä¸ªçŸ¥è¯†å›¾è°±ä¸Šç”¨ Leiden ç¤¾åŒºæ£€æµ‹ç®—æ³•ï¼Œè¯¥ç®—æ³•ä¼šè¿”å›çŸ¥è¯†å›¾è°±é‡Œé¢çš„ç¤¾åŒºï¼ˆGraph Communitiesï¼‰ï¼Œæ³¨æ„è¿™äº›ç¤¾åŒºæ˜¯æ ‘çŠ¶çš„ï¼ˆä¸‹ç§°ç¤¾åŒºæ ‘ï¼‰ï¼Œç»“æ„æ˜¯æœ‰å±‚æ¬¡çš„ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:2:3","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#graph-communities-detection"},{"categories":["ML-DL"],"content":" Graph Communities -\u003e Community Summariesflowchart LR Community --\u003e CommuniySummary è¿™ä¸€æ­¥éœ€è¦ç”¨ LLM å¾—åˆ°æ¯ä¸ªç¤¾åŒºçš„æ€»ç»“ï¼Œé’ˆå¯¹ä¸åŒç±»å‹çš„ç¤¾åŒºæœ‰ä¸åŒçš„ç­–ç•¥ å¶å­ç¤¾åŒº å°†æ‰€æœ‰çš„å…³ç³»æŒ‰ç…§ èµ·ç‚¹ å’Œ ç»ˆç‚¹ çš„åº¦æ•°å’Œé™åºæ’åˆ—ï¼ŒğŸ¤” ä¹Ÿè®¸æ˜¯åº¦æ•°å’Œè¶Šé«˜è¶Šé‡è¦ æŒ‰é¡ºåºå¤„ç†ï¼Œå¯¹äºæ¯æ¡å…³ç³»ï¼Œä¾æ¬¡æ·»åŠ å¦‚ä¸‹çš„æ–‡æœ¬åˆ°ä¸Šä¸‹æ–‡çª—å£é‡Œç›´åˆ°ä¸Šä¸‹æ–‡çª—å£æ”¾ä¸ä¸‹ èµ·ç‚¹ å¯¹åº”çš„ æè¿° ç»ˆç‚¹ å¯¹åº”çš„ æè¿° ä»»ä½•è·Ÿè¿™æ¡å…³ç³»æœ‰å…³è”çš„æ–­è¨€ è¿™æ¡å…³ç³»çš„ æè¿° éå¶å­ç¤¾åŒºï¼Œå³ä¸‹é¢éƒ½æ˜¯å­ç¤¾åŒº å‡è£…å­ç¤¾åŒºä¸å­˜åœ¨ï¼šæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•å¤„ç†ï¼Œä½†å‰ææ˜¯ä¸è¶…è¿‡ LLM çš„ä¸Šä¸‹æ–‡çª—å£é•¿åº¦ å¦åˆ™ï¼Œå¯¹å­ç¤¾åŒºè¿›è¡Œæ’åºï¼ŒæŒ‰ç…§å®ƒåŒ…å«çš„å®ä½“ã€å…³ç³»çš„æè¿°æ–‡æœ¬çš„æ€»é•¿åº¦é™åºæ’åˆ—ï¼ˆğŸ¤” æ–‡æœ¬è¶Šå¤šä¿¡æ¯è¶Šä¸°å¯Œè¶Šè¦ä¿ç•™ï¼‰ã€‚ç„¶åä¾æ¬¡å°†ç¤¾åŒºæ€»ç»“ï¼ˆçŸ­ï¼‰æ›¿æ¢ä¸ºå¶å­ç¤¾åŒºé‚£æ ·æ‹¼æ¥çš„æè¿°ï¼ˆé•¿ï¼‰ï¼Œç›®çš„æ˜¾ç„¶æ˜¯è¦ä¿ç•™æ›´ç»†ç²’åº¦çš„ä¿¡æ¯ï¼ˆç¤¾åŒº -\u003e ç¤¾åŒºåŒ…å«çš„å®ä½“ã€å…³ç³»ï¼‰ Tip æ‰€ä»¥ï¼Œç¤¾åŒºæ€»ç»“çš„å¤„ç†æ–¹å¼æ˜¯åœ¨ç¤¾åŒºæ ‘ä¸Šç”¨ Bottom-Up çš„æ–¹å¼å¾—åˆ°çš„ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:2:4","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#graph-communities---community-summaries"},{"categories":["ML-DL"],"content":" Community Summaries -\u003e Community Answers -\u003e Global Answerflowchart LR a(Random shuffled community summaries) a --\u003e Chunk1 \u0026 Chunk2 \u0026 annoy(...) Chunk1 --\u003e p(Intermediate Answer1) Chunk2 --\u003e q(Intermediate Answer2) annoy --\u003e r(...) window(Context Window) p \u0026 q \u0026 r --\u003e window window --\u003e ans(Global Answer) ç°åœ¨ï¼Œæ¯ä¸€ä¸ªç¤¾åŒºéƒ½æœ‰è‡ªå·±çš„ç¤¾åŒºæ€»ç»“ï¼Œå¯ä»¥ç”¨è¿™äº›ç¤¾åŒºæ€»ç»“æ¥å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ å°†æ‰€æœ‰çš„ç¤¾åŒºæ€»ç»“æ‰“ä¹±ï¼Œç„¶ååˆ’åˆ†ä¸ºä¸€ä¸ªä¸ª Chunkã€‚è¿™ç§æ–¹å¼ç¡®ä¿äº†ç›¸å…³çš„ä¿¡æ¯åˆ†å¸ƒåœ¨ä¸åŒçš„ Chunk Map é˜¶æ®µï¼šç”¨æ¯ä¸€ä¸ª Chunk è®© LLM ç”Ÿæˆä¸´æ—¶å›å¤ï¼Œå¹¶è®© LLM ç»™å‡ºä¸´æ—¶å›å¤çš„å¾—åˆ†ï¼ˆ0ï½100ï¼‰ï¼Œå¾—åˆ†è¡¡é‡äº†è¿™ä¸ªç”Ÿæˆçš„ä¸´æ—¶å›å¤å¯¹ç”¨æˆ·é—®é¢˜çš„å¸®åŠ©ç¨‹åº¦ Reduce é˜¶æ®µï¼šå°†ä¸´æ—¶å›å¤æŒ‰ç…§å¾—åˆ†é™åºæ’åˆ—ç„¶åä¸€ä¸€æ‹¼æ¥èµ·æ¥ï¼Œç›´åˆ°ä¸Šä¸‹æ–‡çª—å£é•¿åº¦æ”¾ä¸ä¸‹ï¼Œç„¶åå†è®© LLM ç”Ÿæˆæœ€ç»ˆå›å¤ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:2:5","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#community-summaries---community-answers---global-answer"},{"categories":["ML-DL"],"content":" æ€»ç»“ä¸Šé¢å°±æ˜¯ GraphRAG çš„å…¨éƒ¨å†…å®¹ï¼Œæ•´ä½“æµç¨‹è¿˜ç®—æ˜¯è›®æ¸…æ™°çš„ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†å®ç°ï¼Œä½†æŠ˜è…¾äº†ä¸€ä¼šå‘ç°åªæ”¯æŒ OpenAI çš„ LLMã€‚æœç´¢çš„æ—¶å€™çœ‹åˆ°æœ‰äººç”¨ LangChain å®ç°çš„ langchain-graphragï¼Œå‡†å¤‡çœ‹çœ‹æ˜¯å¦èƒ½ç”¨ Edge, Darren, et al. â€œFrom local to global: A graph rag approach to query-focused summarization.â€ arXiv preprint arXiv:2404.16130 (2024).Â â†©ï¸Â â†©ï¸Â â†©ï¸Â â†©ï¸ ","date":"2025-02-11","objectID":"/zh-cn/the-flow-of-graphrag/:3:0","series":null,"tags":["Paper","LLM"],"title":"GraphRAG å·¥ä½œæµ","uri":"/zh-cn/the-flow-of-graphrag/#æ€»ç»“"},{"categories":["ML-DL"],"content":"MoE è®ºæ–‡çš„é˜…è¯»ç¬”è®°","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/"},{"categories":["ML-DL"],"content":" Motivationsæ¨¡å‹èƒ½åŠ›è·Ÿæ¨¡å‹å‚æ•°é‡æœ‰å…³ç³»ï¼Œæ¨¡å‹å‚æ•°é‡è¶Šå¤šï¼Œæ•°æ®è¶Šå¤šï¼Œæ•ˆæœå°±è¶Šå¥½ã€‚ä½†è®­ç»ƒæˆæœ¬ä¹Ÿæˆå€ä¸Šå‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¤§å®¶æå‡ºäº†å¾ˆå¤šç§æ¡ä»¶è®¡ç®—ï¼ˆConditional Computationsï¼‰çš„æ–¹æ¡ˆï¼Œé¡¾åæ€ä¹‰ï¼ŒæŸäº›æ¡ä»¶æ»¡è¶³çš„æƒ…å†µä¸‹æ‰ä¼šè®¡ç®—ï¼Œè¿™æ ·å°±å¯ä»¥ä¸å¢åŠ è®­ç»ƒæˆæœ¬çš„åŒæ—¶å¢åŠ æ¨¡å‹å‚æ•°é‡ï¼Œæå‡æ¨¡å‹æ•ˆæœ ä½œè€…æå‡ºäº† Sparsely-Gated Mixture-of-Experts Layer (MoE) æ¶æ„ï¼Œå¦‚ä¸‹æ‰€ç¤º1 ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:1:0","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#motivations"},{"categories":["ML-DL"],"content":" MoE æ¶æ„MoE å±‚åŒ…å« $n$ ä¸ªä¸“å®¶ï¼ˆExpertï¼‰ $E_1, E_2, â€¦, E_n$ï¼Œä»¥åŠä¸€ä¸ªé—¨æ§ç½‘ç»œ $G$ï¼Œé—¨æ§ç½‘ç»œ $G$ çš„è¾“å‡ºæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å‘é‡ ç”¨ $x$ è¡¨ç¤ºè¾“å…¥ï¼Œ$G(x)$ è¡¨ç¤ºé—¨æ§ç½‘ç»œçš„è¾“å‡ºï¼Œ$E_i(x)$ è¡¨ç¤ºä¸“å®¶ $E_i$ çš„è¾“å‡ºï¼Œé‚£ä¹ˆ MoE çš„è¾“å‡º $y$ å¯ä»¥è¡¨ç¤ºä¸º $$ y=\\sum_{i=1}^nG(x)_iE_i(x) $$ æ³¨æ„è¿™é‡Œçš„ $G(x)_i$ çš„ä¸‹è§’æ ‡ $i$ è¡¨ç¤º $G(x)$ çš„ç¬¬ $i$ ä¸ªä½ç½®ã€‚æ‰€ä»¥ä¸Šé¢çš„å¼å­å‘Šè¯‰æˆ‘ä»¬ MoE çš„è¾“å‡ºå°±æ˜¯å¯¹ $n$ ä¸ªä¸“å®¶çš„è¾“å‡ºçš„åŠ æƒå’Œ å¯æƒ³è€ŒçŸ¥ï¼Œå¦‚æœ $G(x)_i =0$ï¼Œé‚£ä¹ˆå¯¹åº”çš„ $E_i(x)$ å°±æ²¡æœ‰å¿…è¦è®¡ç®—ï¼Œè®­ç»ƒæˆæœ¬å°±è¿™ä¹ˆé™ä½äº†ã€‚å¦‚æœ $G(x)$ çš„å¾ˆå¤šä½ç½®éƒ½ $=0$ï¼Œå³é—¨æ§ç½‘ç»œ $G$ çš„è¾“å‡ºæ˜¯ç¨€ç–çš„ï¼Œé‚£ä¹ˆè®­ç»ƒæˆæœ¬å¯ä»¥å‡å°‘éå¸¸å¤š Tip ä¸Šé¢æ˜¯å•å±‚ MoE æ¶æ„ï¼Œä¸éš¾æƒ³è±¡å¯ä»¥åˆ›å»ºåˆ†å±‚ MoE ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:2:0","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#moe-æ¶æ„"},{"categories":["ML-DL"],"content":" Expertæ‰€è°“çš„ä¸“å®¶å°±æ˜¯ç¥ç»ç½‘ç»œï¼Œè®ºæ–‡é‡Œé¢ç”¨çš„æ˜¯ç®€å•çš„ FFN å±‚ ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:2:1","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#expert"},{"categories":["ML-DL"],"content":" Gating Network Tip å‰é¢æåˆ°ï¼Œä¸ºäº†èƒ½å¤Ÿå°½å¯èƒ½é™ä½è®­ç»ƒæˆæœ¬ï¼Œé—¨æ§ç½‘ç»œ $G$ çš„è¾“å‡ºåº”è¯¥æ˜¯ç¨€ç–çš„ ä¸€ä¸ªç®€å•çš„ idea æ˜¯å°†è¾“å…¥ $x$ ä¹˜ä»¥ä¸€ä¸ªæƒé‡çŸ©é˜µ $W_g$ï¼Œç„¶åç”¨ $\\texttt{Softmax}$ å‡½æ•°ï¼ˆæ³¨æ„ $\\texttt{Softmax}$ çš„è¾“å‡ºå’Œä¸º 1ï¼‰ $$ \\texttt{Softmax}(x\\cdot W_g) $$ æ³¨æ„ï¼Œå®ƒä¸æ˜¯ç¨€ç–çš„ã€‚æ‰€ä»¥ä½œè€…ç”¨äº†å¦‚ä¸‹çš„æ‰‹æ®µè®©å®ƒæ˜¯ç¨€ç–çš„ å¾—åˆ° $x\\cdot W_g$ ä¹‹åå åŠ ä¸€ä¸ªå¯ä»¥è°ƒèŠ‚çš„é«˜æ–¯å™ªå£° ä¿ç•™å…¶ä¸­å€¼æœ€å¤§çš„ TopK ä¸ªï¼Œå‰©ä¸‹çš„è®¾ç½®ä¸º $-\\infty$ï¼ˆæ³¨æ„ $-\\infty$ åœ¨ç»è¿‡ $\\texttt{Softmax}$ å°±å¾—åˆ°äº† 0ï¼‰ æœ€åå†ç”¨ $\\texttt{softmax}$ è¿™é‡Œè§£é‡Šä¸€ä¸‹ä»€ä¹ˆå«åšå¯ä»¥è°ƒèŠ‚çš„é«˜æ–¯å™ªå£°ï¼Œä½œè€…å°† Softplus å‡½æ•°ä¹˜ä»¥é«˜æ–¯å™ªå£°ï¼ŒåŒæ—¶æ§åˆ¶ Softplus çš„è¾“å…¥ä¸º $x\\cdot W_{noise}$ï¼Œè¿™é‡Œçš„æƒé‡çŸ©é˜µ $W_{noise}$ ä¹Ÿèµ·åˆ°äº†è°ƒèŠ‚çš„ä½œç”¨ã€‚è¿™æ ·æ¯ä¸€ä¸ªä¸åŒçš„ MoE å±‚çš„å™ªå£°å¯ä»¥å•ç‹¬æ§åˆ¶ å°†ä¸Šé¢çš„æ–‡å­—è¡¨è¿°ç¿»è¯‘ä¸ºå…¬å¼å°±æ˜¯ $$ \\begin{split} G(x)\u0026=\\texttt{Softmax}(KeepTopK(H(x), k)) \\\\\\ H(x)_i\u0026=(x\\cdot W_g)_i + \\texttt{StandardNormal}()\\cdot\\texttt{Softplus}\\big((x\\cdot W_{noise})_i\\big) \\\\\\ KeepTopK(v,k)_i\u0026= \\begin{cases} v_i \u0026 \\texttt{if }v_i\\texttt{ is in the top }k\\texttt{ elements of } v\\\\\\ -\\infty \u0026 \\texttt{otherwise} \\end{cases} \\end{split} $$ ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:2:2","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#gating-network"},{"categories":["ML-DL"],"content":" MoE ä¼˜åŒ–","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:3:0","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#moe-ä¼˜åŒ–"},{"categories":["ML-DL"],"content":" Batch sizeBatch Size å¼€å¤§ä¸€ç‚¹æ•ˆç‡æ‰ä¼šé«˜ï¼Œé‡‡ç”¨ MoE æ¶æ„ä¹‹åï¼Œå‡è®¾ Batch Size æ˜¯ $b$ï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šä» $n$ ä¸ªä¸“å®¶ä¸­é€‰æ‹© $k$ ä¸ªæ¿€æ´»ï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€ä¸ªä¸“å®¶æ¥è¯´ï¼Œç­‰ä»·çš„ Batch Size æ˜¯ $$ \\frac{kb}{n} $$ å¯æƒ³è€ŒçŸ¥ï¼Œå¤§ Batch Size å°±åº”è¯¥è°ƒå¤§ $b$ï¼Œä½†è¦æ˜¯æ˜¾å­˜æ”¾ä¸ä¸‹å‘¢ï¼Ÿé’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œä½œè€…æå‡ºäº†å¦‚ä¸‹çš„å»ºè®®â€”â€”é‡‡ç”¨æ•°æ®å¹¶è¡Œï¼Œä½†æ¯ä¸ªä¸“å®¶åªæœ‰ 1 ä»½ï¼Œåœ¨å¤šä¸ªè®¾å¤‡ä¸Šå…±äº«ï¼Œå…¶ä»–å±‚ï¼ˆåŒ…æ‹¬é—¨æ§ç½‘ç»œï¼‰éƒ½æ˜¯æ¯ä¸ªè®¾å¤‡ 1 ä»½ã€‚æ³¨æ„ï¼Œæ¯ä¸ªä¸“å®¶éƒ½åªä¼šæ”¶åˆ°è·Ÿè‡ªå·±æœ‰å…³çš„æ ·æœ¬æ¥è¿›è¡Œè®¡ç®—å’Œæ›´æ–°ï¼Œå‡è®¾æœ‰ $d$ ä¸ªè®¾å¤‡ï¼Œæ¯ä¸ªè®¾å¤‡å¤„ç† $b$ ä¸ªæ ·æœ¬ï¼Œé‚£ä¹ˆè¿™æ ·ä¼˜åŒ–ä¹‹åæ¯ä¸ªä¸“å®¶ç­‰ä»·çš„ Batch Size æ˜¯ $$ \\frac{kbd}{n} $$ è¿™æ„å‘³ç€ï¼Œå¯ä»¥é€šè¿‡å¢åŠ è®¾å¤‡æ¥è°ƒå¤§ Batch Size ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:3:1","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#batch-size"},{"categories":["ML-DL"],"content":" å……åˆ†åˆ©ç”¨æ‰€æœ‰ä¸“å®¶ä½œè€…åœ¨å®éªŒä¸­å‘ç°ï¼ŒMoE æ¶æ„çš„é—¨æ§ç½‘ç»œ $G$ å‡ ä¹æ€»æ˜¯ä¼šé€‰æ‹©å°‘æ•°å‡ ä¸ªä¸“å®¶ï¼Œè€Œä¸”éšç€è®­ç»ƒçš„è¿›è¡Œè¿™ä¸ªæƒ…å†µä¼šä¸æ–­æ¶åŒ–ï¼Œå› ä¸ºè¢«æ›´æ–°çš„ä¸“å®¶è¶Šæœ‰æ¦‚ç‡è¢«é€‰ä¸­ ä¸ºäº†ç¼“å’Œè¿™ä¸ªé—®é¢˜ï¼Œä½œè€…å¢åŠ äº†ä¸€ä¸ªçº¦æŸâ€”â€”å®šä¹‰ä¸“å®¶çš„é‡è¦æ€§ $Importance$ã€‚ç°åœ¨å‡è®¾æœ‰ 1 ä¸ª Batch çš„æ•°æ®ï¼ˆç”¨ $X$ è¡¨ç¤ºï¼‰è¿›æ¥ï¼Œå¯¹äºä¸“å®¶ $E_i$ï¼Œå®ƒçš„é‡è¦æ€§ = $\\sum_{x\\in X} G(x)_i$ï¼Œå› æ­¤æ‰€æœ‰ä¸“å®¶çš„é‡è¦æ€§ $Importance(X)$ å¯ä»¥è¡¨ç¤ºä¸º $$ Importance(X)=\\sum_{x\\in X}G(x) $$ æ³¨æ„ $Importance(X)$ æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„å‘é‡ï¼Œæ¯ä¸ªä½ç½®æ˜¯å¯¹åº”ä¸“å®¶çš„é‡è¦æ€§å¾—åˆ†ã€‚æ ¹æ® $Importance(X)$ å¯ä»¥å®šä¹‰ä¸€ä¸ªé¢å¤–çš„æŸå¤± $$ L_{importance}(X)=w_{importance}\\cdot\\texttt{CV}(Importance(X))^2 $$ è¿™ä¸ªæŸå¤±ä¼šè¢«åŠ åˆ°æ€»çš„æŸå¤±é‡Œã€‚å…¶ä¸­ $w_{importance}$ æ˜¯è¶…å‚æ•°ï¼Œ$\\texttt{CV}$ è¡¨ç¤ºå˜å¼‚ç³»æ•°ï¼ˆCoefficient of Variationï¼‰ï¼Œè¡¡é‡äº†ç¦»æ•£ç¨‹åº¦ã€‚ä¸åŒä¸“å®¶å½¼æ­¤çš„å¾—åˆ†è¶Šä¸ç›¸åŒï¼Œç¦»æ•£ç¨‹åº¦è¶Šå¤§ï¼ŒæŸå¤±åˆ™è¶Šå¤§ã€‚å› æ­¤ï¼Œå¢åŠ è¿™ä¸ªæŸå¤±å‡½æ•°é¼“åŠ±ä¸åŒä¸“å®¶æœ‰ä¸€æ ·çš„é‡è¦æ€§ ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:3:2","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#å……åˆ†åˆ©ç”¨æ‰€æœ‰ä¸“å®¶"},{"categories":["ML-DL"],"content":" å®éªŒç»“æœ ä¸Šé¢çš„å›¾1è¯´æ˜äº†ä¸‹é¢å‡ ä¸ªç»“è®º ä¸ç®¡æ˜¯å•å±‚ MoE è¿˜æ˜¯å¤šå±‚ MoEï¼Œéƒ½æ¯” Baseline å¥½ å¤šå±‚ MoE æ•ˆæœæ¯”å•å±‚ MoE ç¨å¾®å¥½äº› ç›¸åŒè®­ç»ƒæˆæœ¬ä¸‹ï¼ˆçºµè½´ï¼‰ï¼Œé‡‡ç”¨ MoE æ¶æ„çš„æ¨¡å‹è¡¨ç°æ›´å¥½ ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:4:0","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#å®éªŒç»“æœ"},{"categories":["ML-DL"],"content":" æ€»ç»“å¯ä»¥çœ‹åˆ°ï¼ŒMoE æ¶æ„å…è®¸æˆ‘ä»¬åœ¨å¢åŠ æ¨¡å‹å‚æ•°é‡çš„åŒæ—¶ï¼Œè®­ç»ƒæˆæœ¬ä¸ä¼šæˆæ¯”ä¾‹ä¸Šå‡ã€‚å¹¶ä¸”åœ¨æ¨¡å‹æ¨ç†çš„æ—¶å€™ï¼Œæ¯æ¬¡åªæœ‰ K ä¸ªä¸“å®¶åœ¨å¤„ç†ï¼Œå› æ­¤æ¨ç†ä¹Ÿæ›´å¿«äº†ã€‚ä¸è¿‡ï¼Œæ•´ä¸ªæ¨¡å‹è¿˜æ˜¯è¦éƒ½åŠ è½½åˆ°æ˜¾å­˜é‡Œé¢ï¼Œä¸èƒ½åªåŠ è½½å‡ ä¸ªä¸“å®¶ğŸ¤” ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:5:0","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#æ€»ç»“"},{"categories":["ML-DL"],"content":" Refs Shazeer, Noam, et al. â€œOutrageously large neural networks: The sparsely-gated mixture-of-experts layer.â€Â arXiv preprint arXiv:1701.06538Â (2017).Â â†©ï¸Â â†©ï¸ ","date":"2025-02-02","objectID":"/zh-cn/reading-notes-mixture-of-experts/:6:0","series":null,"tags":["Paper","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: Outrageously Large Neural Networks-The Sparsely-Gated Mixture-of-Experts Layer","uri":"/zh-cn/reading-notes-mixture-of-experts/#refs"},{"categories":["Programming-Languages"],"content":"å¯¹ Python è£…é¥°å™¨çš„ä»‹ç»ï¼Œä»åŸºæœ¬åŸç†åˆ°å¸¸è§è£…é¥°å™¨","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€å¦‚æœä½ èƒ½å¤Ÿè®¤è¯†åˆ°å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆFirst-classï¼‰çš„è¯ï¼Œé‚£ä¹ˆä½ ç†è§£ Python è£…é¥°å™¨åº”è¯¥æ²¡æœ‰ä»€ä¹ˆå›°éš¾ã€‚å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼ˆFirst-classï¼‰å°±æ„å‘³ç€ï¼šå‡½æ•°ä¹Ÿæ˜¯å€¼ï¼Œå’Œå…¶ä»–åŸºæœ¬ç±»å‹ï¼ˆint, str, float, etcï¼‰ç­‰ä¸€æ ·ï¼Œéƒ½å¯ä»¥ä½œä¸ºå‡½æ•°çš„å…¥å‚å’Œè¿”å›å€¼ å¦‚æœä¸€ä¸ªå‡½æ•°çš„å…¥å‚æ˜¯æŸå‡½æ•°ï¼Œæˆ–è€…è¿”å›å€¼æ˜¯æŸå‡½æ•°ï¼Œè¿™æ ·çš„å‡½æ•°ä¹Ÿå«åšé«˜é˜¶å‡½æ•°ï¼Œè£…é¥°å™¨å°±æ˜¯è¿™æ ·å­çš„ åœ¨æˆ‘çœ‹æ¥ï¼Œè£…é¥°å™¨çš„å¥½å¤„æ˜¯ä¸éœ€è¦ä¿®æ”¹åŸæœ‰çš„å‡½æ•°çš„æƒ…å†µä¸‹ä¿®æ”¹å‡½æ•°çš„åŠŸèƒ½ï¼Œè¿™ä¹Ÿåˆç†ï¼Œæ¯•ç«Ÿå®ƒå«åšè£…é¥°å™¨ ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:1:0","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" è£…é¥°å™¨å…¶å®åªæ˜¯è¯­æ³•ç³–åœ¨è¯¦ç»†äº†è§£ Python è£…é¥°å™¨ä¹‹å‰ï¼Œæˆ‘æƒ³å‘Šè¯‰ä½ çš„æ˜¯ï¼šPython è£…é¥°å™¨å…¶å®æ˜¯è¯­æ³•ç³–ï¼Œæ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç  python @some_decorator def foobar(): ... å…¶å®ç­‰ä»·äºä¸‹é¢è¿™æ®µä»£ç  python def foobar(): ... foobar = some_decorator(foobar) å¦‚æœæœ‰å¤šä¸ªè£…é¥°å™¨ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ï¼Œè¶Šé è¿‘è¢«è£…é¥°çš„å‡½æ•°çš„è£…é¥°å™¨è¶Šæ—©èµ·ä½œç”¨ python @foo @bar def hello(): ... # ------------------ def hello(): ... hello = foo(bar(hello)) ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:2:0","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#è£…é¥°å™¨å…¶å®åªæ˜¯è¯­æ³•ç³–"},{"categories":["Programming-Languages"],"content":" å†è°ˆè£…é¥°å™¨å‰é¢æåˆ°ï¼Œè£…é¥°å™¨ä¸è¿‡å°±æ˜¯è¾“å…¥ä¸ºå‡½æ•°ï¼Œè¾“å‡ºä¹Ÿä¸ºå‡½æ•°çš„é«˜é˜¶å‡½æ•°ï¼Œæ‹†è§£ä¸€ä¸‹ è¾“å…¥ä¸ºå‡½æ•°ï¼šå‡½æ•°æ˜¯è£…é¥°å™¨çš„å…¥å‚ è¾“å‡ºä¸ºå‡½æ•°ï¼šè£…é¥°å™¨è¿”å›çš„æ˜¯å‡½æ•° æ³¨æ„ï¼Œä¸€ä¸ªå‡½æ•°å¯èƒ½æœ‰å‚æ•°ä¹Ÿå¯èƒ½æ²¡æœ‰å‚æ•°ï¼Œå¯èƒ½æœ‰ positional argument è¿˜å¯èƒ½æœ‰ keyword argumentã€‚å› æ­¤ï¼Œä¸ºäº†èƒ½å¤Ÿè¡¨ç¤ºå„ç§å¯èƒ½æ€§ï¼Œå¯ä»¥ç”¨ *args, **kwargsè¡¨ç¤ºã€‚å› æ­¤ï¼Œç»è¿‡æ•´ç†ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿæ¨å¯¼å‡ºè£…é¥°å™¨è¯¥æ€ä¹ˆå†™äº† python def some_decorator(func): def inner(*args, **kwargs): # do something before the function call func(*args, **kwargs) # do something after the function call return inner è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªæ›´å¤æ‚çš„æƒ…å†µï¼Œå¦‚æœè£…é¥°å™¨æœ¬èº«æœ‰å‚æ•°å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥è¯­æ³•ç³–çš„è§’åº¦åæ¨ä¸€ä¸‹ python @some_decorator(k1=v1, k2=v2) def foobar(): ... ç­‰ä»·äº python def foobar(): ... some_decorator(k1=v1, k2=v2)(foobar) åœ¨å‰é¢çš„è£…é¥°å™¨æ¨¡æ¿ä¸­ï¼Œsome_decorator çš„å…¥å‚æ˜¯è¢«è£…é¥°çš„å‡½æ•° funcï¼Œå³ some_decorator(func)ï¼Œä½†ç°åœ¨å˜æˆäº† some_decorator(k1=v1, k2=v2)ï¼Œæ‰€ä»¥æˆ‘ä»¬çŸ¥é“ï¼šsome_decorator(k1=v1, k2=v2)åº”è¯¥è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚é‚£å°±æ˜¯å¤šåµŒå¥—ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º python def some_decorator(k1, k2): def wrapper(func): def inner(*args, **kwargs): # do something before the function call func(*args, **kwargs) # do something after the function call return inner return wrapper ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:3:0","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#å†è°ˆè£…é¥°å™¨"},{"categories":["Programming-Languages"],"content":" å¸¸ç”¨è£…é¥°å™¨","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:4:0","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#å¸¸ç”¨è£…é¥°å™¨"},{"categories":["Programming-Languages"],"content":" @propertyé¢å‘å¯¹è±¡ç¼–ç¨‹é‡Œé¢ä¼šå¯¹å±æ€§ï¼ˆæˆ–ç§°æˆå‘˜å­—æ®µï¼‰è¿›è¡Œå°è£…ï¼Œå¤–ç•Œåªèƒ½é€šè¿‡ getter/setter è¿›è¡Œè®¿é—®ã€‚@property æ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°è®¿é—®/åˆ é™¤/ä¿®æ”¹å±æ€§ï¼Œå°±å¥½åƒè¿™ä¸ªå±æ€§ä¸æ˜¯ç§æœ‰å±æ€§ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è®¿é—®ä¸€æ ·ã€‚æ¯”å¦‚ python class Name: def __init__(self, x: str | None = None): self.__first_name = x @property def first_name(self): return self.__first_name @first_name.setter def first_name(self, value: str): self.__first_name = value @first_name.deleter def first_name(self, value: str): del self.__first_name me = Name() print(me.first_name) # without parenthesis me.first_name = \"Martin\" print(me.first_name) ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:4:1","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#property"},{"categories":["Programming-Languages"],"content":" @functools.wrapsæ™®é€šçš„è£…é¥°å™¨å­˜åœ¨ä¸€ä¸ªç¼ºé™·ï¼Œè¢«è£…é¥°å‡½æ•°çš„åå­—ä¼šè¢«ä¿®æ”¹ï¼Œä»¥å‰é¢çš„ some_decorator è¿™ä¸ªè£…é¥°å™¨ä¸ºä¾‹ python @some_decorator def hello(): print(\"hello\") print(hello.__name__) # inner å¯ä»¥çœ‹åˆ°ï¼Œè¢«è£…é¥°çš„å‡½æ•° hello çš„åå­—å˜æˆäº† innerï¼ˆsome_decorator é‡Œé¢çš„å‡½æ•°ï¼‰ï¼Œè¿™åœ¨ Debug çš„æ—¶å€™ä¸å¤§å‹å¥½ï¼Œå› æ­¤ï¼Œå¯ä»¥ç”¨ @functools.wraps python import functools def some_decorator(func): @functools.wraps(func) # \u003c------------ def inner(*args, **kwargs): # do something before the function call print(\"Before\") func(*args, **kwargs) print(\"After\") # do something after the function call return inner @some_decorator def hello(): print(\"hello\") print(hello.__name__) # hello å¯ä»¥çœ‹åˆ°ï¼Œå‡½æ•° hello çš„åå­—è¢«ä¿ç•™äº† ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:4:2","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#functoolswraps"},{"categories":["Programming-Languages"],"content":" @cacheåœ¨å†™ç®—æ³•é¢˜çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ç¼“å­˜ä¸€ä¸ªå‡½æ•°çš„è®¡ç®—ç»“æœï¼Œå°±å¯ä»¥ç”¨ @cacheã€‚å¯ä»¥ç†è§£ä¸ºå®ƒå¸®æˆ‘ä»¬ç»´æŠ¤äº†ä¸€ä¸ªå­—å…¸ï¼Œå­—å…¸çš„ Key æ˜¯å‡½æ•°å…¥å‚ï¼Œå­—å…¸çš„ Value æ˜¯å‡½æ•°çš„è¿”å›å€¼ python from functools import cache @cache def fib(n: int) -\u003e int: if n == 0: return 0 elif n == 1 or n == 2: return 1 else: return fib(n - 1) + fib(n - 2) ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:4:3","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#cache"},{"categories":["Programming-Languages"],"content":" @timeitè¿™ä¸ªè£…é¥°å™¨ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œå†™èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œè¿™æ˜¯ç”¨æ¥æµ‹é‡å‡½æ•°è€—æ—¶çš„ python import time import functools def timeit(func): @functools.wraps(func) def inner(*args, **kwargs): start = time.time() func(*args, **kwargs) end = time.time() print(f\"Execute {func.__name__} in {end - start:.2f} seconds\") return inner @timeit def foobar(): ans = 0 for i in range(10000000): ans += i return ans foobar() ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:4:4","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#timeit"},{"categories":["Programming-Languages"],"content":" æ€»ç»“åˆ°è¿™é‡Œæœ¬æ–‡å°±ç»“æŸäº†ï¼Œå…¶å® Python è£…é¥°å™¨è¿˜å¯ä»¥ç”¨æ¥è£…é¥°ä¸€ä¸ªç±»ï¼Œä½†åœ¨æœ¬æ–‡é‡Œé¢æ²¡æœ‰æåŠï¼Œå› ä¸ºæˆ‘é¢å‘å¯¹è±¡ç¼–ç¨‹ç”¨å¾—å¹¶ä¸å¤šã€‚ä¸è¿‡æˆ‘ç›¸ä¿¡ï¼Œç†è§£äº† Python è£…é¥°å™¨å¦‚ä½•è£…é¥°ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆä½ ä¹Ÿèƒ½å¤Ÿç†è§£ Python è£…é¥°å™¨æ˜¯å¦‚ä½•è£…é¥°ä¸€ä¸ªç±»çš„ ","date":"2025-01-20","objectID":"/zh-cn/understanding-python-decorator/:5:0","series":null,"tags":["Python"],"title":"ä»€ä¹ˆæ˜¯ Python è£…é¥°å™¨","uri":"/zh-cn/understanding-python-decorator/#æ€»ç»“"},{"categories":["NLP"],"content":"kNN-LM çš„è®ºæ–‡é˜…è¯»ç¬”è®°","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/"},{"categories":["NLP"],"content":" Motivationè¯­è¨€æ¨¡å‹è§£å†³ 2 ç§é—®é¢˜ ç”¨ä¸€ä¸ªç‰¹å¾å‘é‡è¡¨ç¤ºå¥å­å‰ç¼€ ä½¿ç”¨è¯¥ç‰¹å¾å‘é‡é¢„æµ‹ä¸‹ä¸€ä¸ª token æœ¬æ–‡æå‡ºçš„ $k\\texttt{NN-LM}$ åŸºäºè¿™ä¹ˆä¸€ä¸ªå‡è®¾ï¼šå­¦ä¹ ç‰¹å¾å‘é‡è¡¨ç¤ºæ¯”é¢„æµ‹ä¸‹ä¸€ä¸ª tokenï¼Œå› æ­¤æœ¬æ–‡çš„æ–¹æ³•ä¸»è¦åŸºäºè¯¥å‡è®¾è¿›è¡Œè®¾è®¡ ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:1:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#motivation"},{"categories":["NLP"],"content":" kNN-LMä¸‹é¢è¿™å¼ å›¾æ¦‚æ‹¬äº† $k\\texttt{NN-LM}$ çš„æ€æƒ³1 ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:2:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#knn-lm"},{"categories":["NLP"],"content":" æ•°æ®å‡†å¤‡ä½¿ç”¨ $k\\texttt{NN-LM}$ éœ€è¦å…ˆå¯¹è¯­æ–™åº“çš„æ–‡æœ¬è¿›è¡Œå¤„ç†ï¼Œåˆ†æˆä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼Œä¸‹é¢æˆ‘ä¼šç»“åˆä¸€ä¸ªè¯¦ç»†çš„ä¾‹å­æ¥è¿›è¡Œè¯´æ˜ï¼Œæ¯”å¦‚è¯­æ–™åº“é‡Œé¢æœ‰è¿™ä¹ˆä¸€ä¸ªå¥å­ text Today is a good [day] è¿™å¥å­å¯ä»¥è¢«åˆ†ä¸º 2 ä¸ªéƒ¨åˆ† Today is a good day æ˜¯ä¸Šä¸‹æ–‡ $c_i$ï¼ˆContextï¼‰ï¼ŒæŠŠè¿™ä¸ªä¸Šä¸‹æ–‡æ‰”ç»™ LLMï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå‘é‡è¡¨ç¤º $f(c_i)$ day æ˜¯ä¸‹ä¸€ä¸ª token $w_i$ï¼ˆTargetï¼‰ è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ª $(f(c_i),w_i)$ çš„ pairï¼Œå¯ä»¥å­˜å‚¨åœ¨ KV æ•°æ®åº“é‡Œé¢ï¼Œåœ¨è®ºæ–‡é‡Œå«åš Datastore ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:2:1","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#æ•°æ®å‡†å¤‡"},{"categories":["NLP"],"content":" æ¨ç†é˜¶æ®µ Info KNN ç®—æ³•æˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡åšå®¢ä»‹ç»ï¼Œåœ¨è¿™é‡Œ é‚£ä¹ˆåœ¨æ¨¡å‹æ¨ç†çš„æ—¶å€™å¦‚ä½•ä½¿ç”¨è¿™ä¸ª KV æ•°æ®åº“å‘¢ï¼Ÿå‡è®¾ç”¨ $x$ è¡¨ç¤º LLM çš„è¾“å…¥ï¼Œé‚£ä¹ˆæ­¥éª¤å¦‚ä¸‹ ç”¨ LLM ç”Ÿæˆå®ƒçš„å‘é‡è¡¨ç¤º $f(x)$ ç”¨ $f(x)$ ä½œä¸º Queryï¼Œåœ¨ KV æ•°æ®åº“é‡Œé¢ç”¨ KNN ç®—æ³•æ‰¾åˆ°æœ€è¿‘çš„ $k$ ä¸ªé‚»å±…ï¼ˆç”¨ $\\mathcal N$ è¡¨ç¤ºï¼‰ã€‚æ¢å¥è¯è¯´ï¼Œæ‰¾å’Œ LLM è¾“å…¥ $x$ æœ€ç›¸ä¼¼ $k$ ä¸ªä¸Šä¸‹æ–‡ï¼Œæ³¨æ„æ¯ä¸€ä¸ªä¸Šä¸‹æ–‡éƒ½æœ‰ä¸‹ä¸€ä¸ª token å‡è®¾é‚»å±… $i$ åˆ° $f(x)$ çš„è·ç¦»æ˜¯ $d_i$ï¼Œ$k$ ä¸ªé‚»å±…çš„è·ç¦»å°±å¾—åˆ°äº†ä¸€ä¸ªè·ç¦»å‘é‡æ•°ç»„ $[d_1, d_2,â€¦,d_k]$ï¼Œå°†è·ç¦»å–è´Ÿç„¶ååš Softmax å°±å¾—åˆ°äº†æ¦‚ç‡åˆ†å¸ƒï¼Œè¿™æ˜¯å…³äºè·ç¦»çš„æ¦‚ç‡åˆ†å¸ƒï¼Œä½†ä¹Ÿå¯ä»¥è½¬åŒ–ä¸ºå…³äºæ¯ä¸ªé‚»å±…èƒŒåçš„ token $w_i$ çš„æ¦‚ç‡ $[p_1,p_2, p_3,â€¦,p_k]$ã€‚æ³¨æ„è¿™é‡Œå¯èƒ½ä¸åŒé‚»å±…çš„ä¸‹ä¸€ä¸ª token æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå¯¹åº”çš„æ¦‚ç‡è¦ç›¸åŠ ï¼ˆå¯ä»¥çœ‹å‰é¢çš„å›¾ï¼Œæœ‰ 2 ä¸ª Hawaiiï¼‰ æ­¤æ—¶å†æŠŠ Vocab $\\mathcal V$ çš„å…¶ä»– token çš„æ¦‚ç‡è®¾ç½®ä¸º 0ï¼Œå°±å¾—åˆ°äº†åœ¨ Vocab $\\mathcal V$ ä¸Šçš„æ¦‚ç‡åˆ†å¸ƒ $p_\\texttt{kNN}(y|x)$ï¼Œä¸€ä¸ªé•¿åº¦ä¸º $|\\mathcal V|$ çš„å‘é‡ è€Œ LLM ä¹Ÿä¼šä¸ºè¾“å…¥ $x$ è¾“å‡ºä¸‹ä¸€ä¸ª token çš„æ¦‚ç‡åˆ†å¸ƒ $p_\\texttt{LM}(y|x)$ å¼•å…¥ä¸€ä¸ªè¶…å‚æ•° $\\lambda$ ç»¼åˆè¿™ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ $$ p(y|x)=\\lambda p_\\texttt{kNN}(y|x)+(1-\\lambda)p_\\texttt{LM}(y|x) $$ ç”¨è¿™ä¸‹ä¸€ä¸ª token çš„æ¦‚ç‡åˆ†å¸ƒé¢„æµ‹ä¸‹ä¸€ä¸ª token å³å¯ ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:2:2","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#æ¨ç†é˜¶æ®µ"},{"categories":["NLP"],"content":" å®éªŒç”¨ FAISS å¿«é€Ÿæ£€ç´¢ KV æ•°æ®åº“ä¸­çš„é‚»å±… è·ç¦»çš„è®¡ç®—åˆ™é‡‡ç”¨æ¬§å‡ é‡Œå¾—è·ç¦»è€Œä¸æ˜¯å‘é‡å†…ç§¯ï¼Œå› ä¸ºä½œè€…å‘ç°è¿™ä¸ªæ•ˆæœæ›´å¥½ æ ¹æ®å®éªŒç»“æœï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªå‘ç°ï¼ˆçŸ¥è¯†åº“æŒ‡çš„å°±æ˜¯ KV æ•°æ®åº“ï¼‰ å‘ç° ç´¢å¼• å°† LLM çš„è®­ç»ƒæ•°æ®ä½œä¸ºçŸ¥è¯†åº“èƒ½é™ä½ LLM è¾“å‡ºçš„å›°æƒ‘åº¦ Table 1 åœ¨å°æ•°æ®é›†ä¸Šå¾®è°ƒ LLMï¼Œå¹¶å¤–æŒ‚ä¸€ä¸ªå¤§çŸ¥è¯†åº“ï¼Œæ¯”ç›´æ¥åœ¨è¿™ä¸ªå¤§çŸ¥è¯†åº“ä¸Šåšè®­ç»ƒæ•ˆæœæ›´å¥½ Table 3 æœ€å¥½çš„ä¸Šä¸‹æ–‡è¡¨ç¤ºæ˜¯ï¼šLLM çš„æœ€åä¸€ä¸ª transformer å±‚å…¶ä¸­çš„ FFN å±‚çš„è¾“å…¥ Figure 3 æ£€ç´¢çš„é‚»å±…è¶Šå¤šï¼Œæ•ˆæœè¶Šå¥½ Figure 4 å¦‚æœçŸ¥è¯†åº“æ˜¯åŒä¸ªé¢†åŸŸçš„ï¼Œé‚£ä¹ˆå°±æŠŠ $\\lambda$Â è®¾ç½®å¾—å°ä¸€ç‚¹ï¼Œåä¹‹å°±è®¾ç½®å¾—å¤§ä¸€ç‚¹ Figure 5 ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:3:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#å®éªŒ"},{"categories":["NLP"],"content":" kNN-LLM çš„ä¼˜ç¼ºç‚¹åˆ†æåœ¨äº†è§£äº† $k\\texttt{NN-LM}$ çš„åŸç†ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç†è§£ä¸€ä¸‹å®ƒçš„ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹æ˜¯ 1 èƒ½å¤Ÿæ•æ‰åˆ°æ–‡æœ¬ä¸­ä¸€äº›ç½•è§æ¨¡å¼ï¼Œå¯¹ out-of-domain çš„æ–‡æœ¬ç”Ÿæˆæ•ˆæœä¹Ÿæ¯”è¾ƒå¥½ï¼Œè¿™ä½“ç°åœ¨ $k\\texttt{NN}$ å’Œ $\\texttt{LM}$ çš„ååŒ $k\\texttt{NN}$ å¯ä»¥æ•æ‰åˆ°ï¼šä¸Šä¸‹æ–‡ç›¸ä¼¼ï¼Œä¸‹ä¸€ä¸ª token ä¸€æ ·ï¼Œä½† token çš„å«ä¹‰ä¸åŒ $\\texttt{LM}$ å¯ä»¥æ•æ‰åˆ°ï¼šä¸Šä¸‹æ–‡ä¸åŒï¼Œä¸‹ä¸€ä¸ª token ä¸€æ · ä¸è¶³ç‚¹æ˜¯ 1 ç©ºé—´å¼€é”€å¤§ï¼Œå› ä¸ºç»™å®šè¯­æ–™åº“æˆ‘ä»¬æ˜¯ä¸ºæ¯ä¸ª token æ„é€  KV pairï¼Œæ‰€ä»¥ KV æ•°æ®åº“çš„å¤§å°è·Ÿè·Ÿ token æ•°é‡æŒ‚é’©ã€‚æ‰€ä»¥åœ¨ Scalability ä¸Š $k-\\texttt{NN-LM}$ å­˜åœ¨æ¯”è¾ƒå¤§çš„é—®é¢˜ åœ¨æ¨¡å‹è¾“å…¥å’Œæ£€ç´¢ç»“æœä¹‹é—´æ²¡æœ‰æ³¨æ„åŠ›çš„è®¡ç®—ï¼Œè¿™ä¼šé™ä½æ¨¡å‹çš„è¡¨ç° ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:4:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#knn-llm-çš„ä¼˜ç¼ºç‚¹åˆ†æ"},{"categories":["NLP"],"content":" å‚è€ƒ ACL tutorial 2023. Section 3: Retrieval-based LMs: ArchitectureÂ â†©ï¸Â â†©ï¸Â â†©ï¸ ","date":"2024-12-23","objectID":"/zh-cn/what-is-knn-lm/:5:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: Generalization through Memorization: Nearest Neighbor Language Models","uri":"/zh-cn/what-is-knn-lm/#å‚è€ƒ"},{"categories":["ML-DL"],"content":"ä»‹ç» KNN ç®—æ³•çš„åŸç†","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/"},{"categories":["ML-DL"],"content":" ä»€ä¹ˆæ˜¯ KNN Tip æ˜¾ç„¶ï¼Œä»å®šä¹‰æ¥çœ‹ï¼ŒKNN ç®—æ³•å¹¶ä¸éœ€è¦è®­ç»ƒ KNN å…è®¸æˆ‘ä»¬æ ¹æ®ä¸€å †å·²çŸ¥ç±»åˆ«çš„æ ·æœ¬åˆ¤æ–­ä¸€ä¸ªæ–°çš„æ ·æœ¬ $\\mathbf x$ çš„ç±»åˆ«ï¼Œåˆ¤æ–­çš„åŸç†æ˜¯ç»¼åˆè€ƒè™‘è·ç¦»å®ƒæœ€è¿‘çš„ $K$ ä¸ªæ ·æœ¬çš„ç±»åˆ« é‚£ä¹ˆå¯æƒ³è€ŒçŸ¥ï¼Œæœ‰è¿™ä¹ˆå‡ ä¸ªæ ¸å¿ƒçš„é—®é¢˜å€¼å¾—ç ”ç©¶ $K$ åº”è¯¥æ˜¯å¤šå°‘ï¼Ÿ å¦‚ä½•åº¦é‡â€œè·ç¦»â€ï¼Ÿ å¦‚ä½•ç»¼åˆæœ€è¿‘çš„ $K$ ä¸ªæ ·æœ¬çš„ç±»åˆ«çš„ç»“æœï¼Ÿ ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:1:0","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#ä»€ä¹ˆæ˜¯-knn"},{"categories":["ML-DL"],"content":" å…³äº K çš„é€‰å–$K$ è¶Šå¤§ï¼Œå‚è€ƒçš„æ ·æœ¬å°±è¶Šå¤šï¼Œç†è®ºä¸Šä¼šè¶Šå‡†ç¡®ï¼Œä½†å®é™…ä¸Šè€ƒè™‘å¤ªå¤šçš„æ ·æœ¬ä¼šæŠŠè·ç¦»ä¸è¿‘çš„æ ·æœ¬ä¹ŸåŒ…æ‹¬è¿›æ¥ $K$ å¤ªå°çš„è¯ï¼Œåˆä¼šå¯¼è‡´ KNN çš„é¢„æµ‹çš„æ–¹å·®æ¯”è¾ƒå¤§ æ‰€ä»¥ï¼Œ$K$ ä¸èƒ½å¤ªå¤§ä¹Ÿä¸èƒ½å¤ªå°ï¼Œé‚£ä¹ˆåœ¨å®é™…ä¸Šæ“ä½œçš„æ—¶å€™ï¼šå¯ä»¥è®© $K$ ä»å°åˆ°å¤§å˜åŒ–ï¼Œè§‚å¯ŸéªŒè¯é›†ä¸Šçš„è¡¨ç°ã€‚ç”¨ $K$ ä½œä¸ºæ¨ªè½´ï¼ŒéªŒè¯é›†ä¸Šçš„è¡¨ç°ä½œä¸ºçºµè½´ç”»å‡ºæ›²çº¿ï¼Œè¿™ä¸ªæ›²çº¿çš„æ‹ç‚¹å°±æ˜¯æœ€ä½³çš„ $K$ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„â€œè‚˜éƒ¨æ³•åˆ™â€ ä¹Ÿå¯ä»¥è€ƒè™‘ç”¨äº¤å‰éªŒè¯æ³•é€‰æ‹©æœ€ä½³çš„ $K$ Tip å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ$K$ æœ€å¥½æ˜¯å¥‡æ•°ï¼Œè¿™æ ·æ¯”è¾ƒä¸ä¼šå‡ºç° $K$ ä¸ªé‚»å±…é‡Œé¢æ¯ä¸€ä¸ªç±»åˆ«çš„æ•°é‡éƒ½ç›¸ç­‰ï¼Œå¯¼è‡´ KNN æ— æ³•ç»™å‡ºé¢„æµ‹ ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:2:0","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#å…³äº-k-çš„é€‰å–"},{"categories":["ML-DL"],"content":" å…³äºè·ç¦»å‡è®¾æ¯ä¸€ä¸ªæ ·æœ¬éƒ½ç”¨é•¿åº¦ä¸º $d$ çš„å‘é‡è¡¨ç¤ºï¼Œé‚£ä¹ˆæ ·æœ¬ä¹‹é—´çš„è·ç¦»è®¡ç®—å¯ä»¥è€ƒè™‘ç”¨æ¬§å‡ é‡Œå¾—è·ç¦» $$ \\texttt{distance}(\\mathbf x,\\mathbf y)=\\sqrt{\\sum_{i=1}^d(x_i-y_i)^2} $$ ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:3:0","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#å…³äºè·ç¦»"},{"categories":["ML-DL"],"content":" å¦‚ä½•ç»¼åˆ K ä¸ªæœ€è¿‘é‚»å±…çš„ç»“æœåœ¨æ‰¾åˆ°æ–°æ ·æœ¬çš„ $K$ ä¸ªæœ€è¿‘çš„é‚»å±…ä¹‹åï¼Œè®©è¿™ $K$ ä¸ªé‚»å±…è¿›è¡ŒæŠ•ç¥¨ï¼ŒæŠ•ç¥¨æ•°æœ€å¤šçš„ç±»åˆ«å°±æ˜¯æ–°æ ·æœ¬çš„ç±»åˆ« ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:4:0","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#å¦‚ä½•ç»¼åˆ-k-ä¸ªæœ€è¿‘é‚»å±…çš„ç»“æœ"},{"categories":["ML-DL"],"content":" ç®—æ³•å®ç°Scikit-Learn åº“æä¾›äº† API ç”¨äºåˆ›å»º KNN åˆ†ç±»å™¨ï¼Œåœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆç”Ÿæˆä¸€ä¸ªæ•°æ®é›†ç”¨äºæ¼”ç¤º python import numpy as np np.random.seed(40) from sklearn.datasets import make_classification from sklearn.model_selection import train_test_split X, y = make_classification( n_samples=100, n_features=2, n_informative=2, n_redundant=0, n_clusters_per_class=1, random_state=40, ) X_train, X_temp, y_train, y_temp = train_test_split( X, y, test_size=0.2, random_state=40 ) X_valid, X_test, y_valid, y_test = train_test_split( X_temp, y_temp, test_size=0.5, random_state=40 ) ä¸ºäº†å¯¹æ•°æ®é›†æœ‰æ›´å¥½çš„äº†è§£ï¼Œè¿™é‡Œå¯ä»¥ç”»ä¸€ä¸ªæ•£ç‚¹å›¾ã€‚ç»“æœå¦‚ä¸‹æ‰€ç¤º æ¥ä¸‹æ¥åˆ›å»ºä¸€ä¸ª KNN åˆ†ç±»å™¨ï¼Œåœ¨è®­ç»ƒé›† X_train ä¸Šâ€œè®­ç»ƒâ€ä¸€ä¸ª KNN æ¨¡å‹ python from sklearn.neighbors import KNeighborsClassifier neigh = KNeighborsClassifier(n_neighbors=5) neigh.fit(X_train, y_train) Warning è¿™é‡Œå…¶å®æ²¡æœ‰è®­ç»ƒï¼ ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªæ–°çš„æ ·æœ¬ [0, 0]ï¼Œå°±å¯ä»¥ç”¨è¿™ä¸ªæ¨¡å‹åˆ¤æ–­å®ƒçš„ç±»åˆ« python test_point = [0, 0] neigh.predict([test_point]) # array([1]) åŒæ ·çš„ï¼Œå¯ä»¥ç”»å‡ºæ•£ç‚¹å›¾çœ‹ä¸€ä¸‹ï¼Œå…¶ä¸­çš„é»‘è‰² $\\times$ è¡¨ç¤ºé‚»å±…ï¼Œçº¢è‰²çš„ $\\times$ æ˜¯ç”¨äºæµ‹è¯•çš„æ ·æœ¬ [0, 0] æ ¹æ®ç»“æœæ¥çœ‹ï¼Œ4 ä¸ªé‚»å±…æ˜¯ç±»åˆ« 1ï¼Œ1 ä¸ªé‚»å±…æ˜¯ç±»åˆ« 0ï¼Œæ‰€ä»¥ [0, 0] çš„ç±»åˆ«æ˜¯ 1 ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:5:0","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#ç®—æ³•å®ç°"},{"categories":["ML-DL"],"content":" FAQ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:6:0","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#faq"},{"categories":["ML-DL"],"content":" ä¸å¹³è¡¡æ•°æ®é›†å¯ä»¥ç”¨ KNN å—ä¸æ¨èï¼Œå› ä¸ºæ ·æœ¬ä¸å¹³è¡¡ä¼šå¯¼è‡´ç”¨ KNN ç®—æ³•å¾—åˆ°çš„åˆ†ç±»å‡ ä¹æ€»æ˜¯æ ·æœ¬å¤šçš„ç±»åˆ« ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:6:1","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#ä¸å¹³è¡¡æ•°æ®é›†å¯ä»¥ç”¨-knn-å—"},{"categories":["ML-DL"],"content":" K çš„å¤§å°å’Œæ¨¡å‹å¤æ‚åº¦çš„å…³ç³»ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜æ˜¯ï¼š$K$ è¶Šå¤§ KNN è¶Šå¤æ‚ï¼Ÿè¿˜æ˜¯ $K$ è¶Šå°ï¼Ÿç­”æ¡ˆï¼š$K$ è¶Šå°æ¨¡å‹è¶Šå¤æ‚ï¼Œä¹Ÿå› æ­¤æ›´å®¹æ˜“â€œè¿‡æ‹Ÿåˆâ€ è¿™å¥è¯å¯ä»¥åè¿‡æ¥ç†è§£ï¼Œ$K$ æœ€å¤§çš„æƒ…å†µä¸‹ç­‰äºæ‰€æœ‰æ ·æœ¬çš„ä¸ªæ•° $N$ï¼Œæ­¤æ—¶åªè¦æ˜¯æ–°æ ·æœ¬ï¼Œä¼šæ€»æ˜¯è¢«åˆ¤æ–­ä¸º $N$ ä¸ªæ ·æœ¬ä¸­æœ€å¤šçš„ç±»åˆ«ï¼Œè¿™æ ·çš„æ¨¡å‹æ˜¾ç„¶å¤ªç®€å•äº† ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:6:2","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#k-çš„å¤§å°å’Œæ¨¡å‹å¤æ‚åº¦çš„å…³ç³»"},{"categories":["ML-DL"],"content":" KNN åº”è¯¥åš Normalize å—ï¼Ÿæ˜¾ç„¶æ˜¯çš„ï¼Œä¸ç„¶è®¡ç®—è·ç¦»çš„æ—¶å€™ï¼Œæ•°å€¼æ¯”è¾ƒå¤§çš„ç‰¹å¾å¯¹è·ç¦»çš„å½±å“æ›´å¤§ ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:6:3","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#knn-åº”è¯¥åš-normalize-å—"},{"categories":["ML-DL"],"content":" KNN å¯ä»¥ç”¨äºå›å½’é—®é¢˜å—ï¼Ÿå¯ä»¥ï¼Œæ¯”å¦‚å– $K$ ä¸ªé‚»å±…çš„å¹³å‡å€¼ï¼Œä½†ä¸€èˆ¬ KNN è¿˜æ˜¯ç”¨æ¥åšåˆ†ç±»é—®é¢˜ ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:6:4","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#knn-å¯ä»¥ç”¨äºå›å½’é—®é¢˜å—"},{"categories":["ML-DL"],"content":" KNN å¯ä»¥å¦‚ä½•æ”¹è¿›ï¼Ÿæœ´ç´ çš„ KNN é‡‡ç”¨æŠ•ç¥¨æ³•ï¼Œå³æ¯ä¸€ä¸ªé‚»å±…èŠ‚ç‚¹çš„è´¡çŒ®åº¦æ˜¯ä¸€æ ·çš„ï¼Œä¸€ä¸ªæ”¹è¿›æ–¹å‘æ˜¯ï¼šä¿®æ”¹æ¯ä¸€ä¸ªé‚»å±…èŠ‚ç‚¹çš„è´¡çŒ®åº¦ï¼Œæ¯”å¦‚è¶Šè¿‘çš„é‚»å±…è´¡çŒ®åº¦è¶Šå¤§ã€‚ä¸€ä¸ªå¸¸ç”¨çš„æƒé‡æ˜¯ $1/d$ï¼Œè¿™é‡Œçš„ $d$ æ˜¯åˆ°é‚»å±…åˆ°æ–°æ ·æœ¬çš„è·ç¦» ","date":"2024-12-15","objectID":"/zh-cn/what-is-k-nearest-neighbor-algorithms/:6:5","series":null,"tags":["Machine-Learning"],"title":"KNN ç®—æ³•æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-k-nearest-neighbor-algorithms/#knn-å¯ä»¥å¦‚ä½•æ”¹è¿›"},{"categories":["Programming-Languages"],"content":"å¯¹ OCaml ä¸­çš„ Phantom Type æ˜¯ä»€ä¹ˆè¿›è¡Œäº†ä»‹ç»","date":"2024-12-08","objectID":"/zh-cn/what-is-phantom-type-in-ocaml/","series":null,"tags":["OCaml"],"title":"OCaml ä¸­çš„ Phantom Type æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-phantom-type-in-ocaml/"},{"categories":["Programming-Languages"],"content":" è¯­æ³• Info = å·¦ä¾§æ˜¯ç±»å‹ï¼ˆTypeï¼‰ï¼Œå³ä¾§æ˜¯å€¼ï¼ˆValueï¼‰ åªéœ€è¦åœ¨å®šä¹‰ Variant Type çš„æ—¶å€™ï¼Œåœ¨ = å·¦ä¾§åŠ ä¸Š 'a ç­‰æ³›å‹å˜é‡ï¼Œä½†æ˜¯åœ¨ = ä¸è¦æ”¾ï¼Œåƒä¸‹é¢è¿™æ · ocaml type 'a t = some_type è¿™é‡Œçš„ç²¾é«“åœ¨äºï¼š= å³ä¾§å¹¶æ²¡æœ‰ä½¿ç”¨åˆ° 'aï¼Œå› æ­¤ 'a å…¶å®æˆ‘ä»¬æƒ³æ”¾ä»€ä¹ˆéƒ½å¯ä»¥ è¿™é‡Œçš„ 'a å°±æ˜¯ Phantom Typeï¼Œå®ƒå‡ºç°åœ¨ç±»å‹ï¼ˆ= å·¦ä¾§ï¼‰å½“ä¸­ï¼Œä½†æ˜¯åœ¨åˆ›å»ºå€¼çš„æ—¶å€™å¹¶ä¸ä¼šç”¨åˆ°ï¼Œæ‰€ä»¥è¯´æ˜¯ Phantom (å¹½çµğŸ‘») æ—¢ç„¶æ²¡æœ‰ç”¨åˆ°ï¼Œé‚£ä¹ˆå¹²è„†å°±ä¸è¦å†™ 'aï¼Œè€Œæ˜¯ç›´æ¥ç”¨ _ï¼Œè¿™æ˜¯æ¯”è¾ƒ idiomatic çš„å†™æ³• ocaml type _ t = some_type æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ Phantom Types ","date":"2024-12-08","objectID":"/zh-cn/what-is-phantom-type-in-ocaml/:1:0","series":null,"tags":["OCaml"],"title":"OCaml ä¸­çš„ Phantom Type æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-phantom-type-in-ocaml/#è¯­æ³•"},{"categories":["Programming-Languages"],"content":" ä½¿ç”¨åœºåˆ Info åœ¨æˆ‘çœ‹æ¥ï¼ŒPhantom type æœ€å¤§çš„ç”¨å¤„æ˜¯ç»™ç±»å‹åŠ ä¸Šâ€œçŠ¶æ€â€ï¼Œå› æ­¤å¯ä»¥è¿›è¡Œæ›´ç»†ç²’åº¦çš„ç±»å‹åŒºåˆ† æˆ‘è¿™é‡Œå°±å€Ÿç”¨ Haskell MOOC é‡Œé¢çš„ä¾‹å­ï¼šè´§å¸è®¡ç®— 1ã€‚æ˜¾ç„¶ï¼Œä¸ç®¡æ˜¯ä»€ä¹ˆè´§å¸ç±»å‹ï¼Œéƒ½å¯ä»¥ç”¨ä¸€ä¸ªæµ®ç‚¹æ•°è¡¨ç¤ºï¼ˆåœ¨ OCaml é‡Œé¢å¯¹åº” float ç±»å‹ï¼‰ã€‚è®©æˆ‘ä»¬ç”¨ Phantom Type å®šä¹‰å¦‚ä¸‹çš„è´§å¸ç±»å‹ ocaml utop # type _ currency = Currency of float;; ç„¶åå®šä¹‰ 2 ä¸ª Phantom Typeï¼šç¾å…ƒå’Œäººæ°‘å¸ ocaml utop # type dollar;; utop # type yuan;; ç°åœ¨æ¥å†™ä¸€ä¸ªè´§å¸ç›¸åŠ çš„å‡½æ•°ï¼Œå‡è®¾æˆ‘ä»¬åªæƒ³è¦è®©ç¾å…ƒç›¸åŠ ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ ocaml utop # let dollar_add (Currency x : dollar currency) (Currency y : dollar currency) : dollar currency = Currency (x +. y);; val dollar_add : dollar currency -\u003e dollar currency -\u003e dollar currency = \u003cfun\u003e ä»å‡½æ•°ç­¾åå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå‡½æ•°åªä¼šè®©ç¾å…ƒç›¸åŠ ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•éªŒè¯ä¸€ä¸‹ ocaml utop # let three_dollar : dollar currency = Currency 3.0;; utop # let four_dollar : dollar currency = Currency 4.0;; utop # let four_dollar : dollar currency = Currency 4.0;; val four_dollar : dollar currency = Currency 4. å¯ä»¥çœ‹åˆ°ï¼Œç¾å…ƒæ±‚å’Œæ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥è¯•ä¸€ä¸‹ç”¨è¿™ä¸ªå‡½æ•°å¯¹äººæ°‘å¸æ±‚å’Œ ocaml utop # let yuan_sum = dollar_add three_yuan four_yuan;; Error: This expression has type yuan currency but an expression was expected of type dollar currency Type yuan is not compatible with type dollar åœ¨ç¼–è¯‘æœŸé—´ï¼Œç¼–è¯‘å™¨å¸®æˆ‘ä»¬æ•æ‰åˆ°äº†è¿™ä¸ªé”™è¯¯ğŸ˜º ä½†å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸€ä¸ªé€šç”¨çš„å‡½æ•°å¯ä»¥å¤„ç†ä»»ä½•è´§å¸ç±»å‹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€‰æ‹©åŠ ä¸Š 'a currency è¿™ç§ç±»å‹å£°æ˜ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ª scale å‡½æ•° ocaml utop # let scale (Currency x : 'a currency) factor : 'a currency = Currency (x *. factor);; val scale : 'a currency -\u003e float -\u003e 'a currency = \u003cfun\u003e ä¹Ÿå¯ä»¥é€‰æ‹©çœç•¥æ‰ç±»å‹å£°æ˜ ocaml utop # let scale (Currency x) factor = Currency (x *. factor);; val scale : 'a currency -\u003e float -\u003e 'b currency = \u003cfun\u003e ä¸ä¸€æ ·çš„æ˜¯å‡½æ•°è¿”å›ç±»å‹å˜æˆäº† 'b currencyï¼Œè¿™æ˜¯å› ä¸º OCaml æ€»æ˜¯ä¼šæ¨æ–­æ›´ General çš„æƒ…å†µã€‚å¦‚æœè¿™ä¸æ˜¯ä½ çš„é¢„æœŸè¡Œä¸ºï¼Œè¿˜æ˜¯å¾—è‡ªå·±åŠ ä¸Šç±»å‹å£°æ˜ ","date":"2024-12-08","objectID":"/zh-cn/what-is-phantom-type-in-ocaml/:2:0","series":null,"tags":["OCaml"],"title":"OCaml ä¸­çš„ Phantom Type æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-phantom-type-in-ocaml/#ä½¿ç”¨åœºåˆ"},{"categories":["Programming-Languages"],"content":" æ€»ç»“å’Œä¸ä½¿ç”¨ Phantom Type ç›¸æ¯”ï¼Œä½¿ç”¨ Phantom Type çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿåœ¨æˆ‘çœ‹æ¥æœ‰å¦‚ä¸‹å‡ ç‚¹ æ‰©å±•æ€§ï¼šæ¯å½“æˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ case çš„æ—¶å€™ï¼Œåªéœ€è¦å¤šå†™ä¸€ä¸ª Phantom Typeï¼ˆtype ...ï¼‰å³å¯ï¼Œæ‰©å±•æ€§æ¯”è¾ƒå¥½ ç±»å‹å®‰å…¨ï¼šé€šè¿‡ç»™å‡½æ•°åŠ ä¸Šç±»å‹å£°æ˜ï¼Œå°±å¯ä»¥æ§åˆ¶å‡½æ•°çš„è¡Œä¸ºï¼Œå®ç°æ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚OCaml ç¼–è¯‘å™¨ä¼šå¸®æˆ‘ä»¬è¿½è¸ªâ€œçŠ¶æ€â€ï¼Œåœ¨ç¼–è¯‘æœŸé—´å°±èƒ½å¤Ÿæ•æ‰ç±»å‹é”™è¯¯ å› ä¸ºå‡½æ•°è¦åŠ ä¸Šç±»å‹å£°æ˜ï¼Œä½¿ç”¨ Phantom Type ä¹‹åä»£ç ä¼¼ä¹æ›´åŠ å•°å—¦äº†ã€‚ä½†å®é™…ä¸Šï¼Œå†™ OCaml ä»£ç çš„æ—¶å€™å¯ä»¥é€‰æ‹©å°†ç±»å‹å£°æ˜æ”¾åœ¨å•ç‹¬çš„ .mli æ–‡ä»¶é‡Œé¢ï¼Œåœ¨å¯¹åº”çš„ .ml æ–‡ä»¶é‡Œé¢å†™å®ç°ï¼Œè¿™æ ·ä»£ç çœ‹ä¸Šå»ä»ç„¶æ˜¯æ¯”è¾ƒç®€æ´çš„ã€‚æœ¬æ–‡å—é™äºç¯‡å¹…å¹¶æ²¡æœ‰é‡‡å–è¿™ç§æ–¹å¼ã€‚å¯ä»¥åœ¨ Jane Street çš„ è¿™ç¯‡åšå®¢ é‡Œé¢çœ‹åˆ°è¿™ç§ç”¨æ³• ","date":"2024-12-08","objectID":"/zh-cn/what-is-phantom-type-in-ocaml/:3:0","series":null,"tags":["OCaml"],"title":"OCaml ä¸­çš„ Phantom Type æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-phantom-type-in-ocaml/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ https://haskell.mooc.fi/part2#phantom-typesÂ â†©ï¸ ","date":"2024-12-08","objectID":"/zh-cn/what-is-phantom-type-in-ocaml/:4:0","series":null,"tags":["OCaml"],"title":"OCaml ä¸­çš„ Phantom Type æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/what-is-phantom-type-in-ocaml/#å‚è€ƒ"},{"categories":["NLP"],"content":"In-Context Retrieval-Augmented Language Models çš„è®ºæ–‡é˜…è¯»ç¬”è®°","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/"},{"categories":["NLP"],"content":" The ideaIn-Context RALM1 æ˜¯ç”¨äº Autoregressive LM ä¸Šçš„ RAG æŠ€æœ¯ã€‚RAG è¯´ç™½äº†å°±æ˜¯åœ¨æ¨¡å‹æ¨ç†çš„æ—¶å€™æœ‰ä¸ª Retriever æ£€ç´¢ç›¸å…³çš„æ–‡æ¡£ï¼Œæ£€ç´¢åˆ°çš„æ–‡æ¡£ä¼šå’Œæœ¬æ¥çš„è¾“å…¥æ‹¼æ¥åœ¨ä¸€èµ· åœ¨ In-Context Learning é‡Œé¢ï¼Œä¼šæŠŠä¸€äº›ä¾‹å­æ”¾åœ¨ç”¨æˆ·è¾“å…¥çš„å‰é¢ï¼Œå†ç»™ LLMã€‚å› æ­¤ä¸éš¾æƒ³è±¡ In-Context RALM ä¹Ÿç±»ä¼¼ï¼šIn-Context RALM å°±æ˜¯å°†æ£€ç´¢åˆ°çš„æœ€ç›¸å…³çš„æ–‡æ¡£ç›´æ¥æ‹¼åœ¨æ¨¡å‹è¾“å…¥çš„å‰é¢ï¼Œä¼˜åŠ¿æ˜¯ä¸éœ€è¦å†è®­ç»ƒ LLMï¼Œæˆ‘ç”¨ mermaid ç”»äº†ä¸€ä¸ªå›¾ï¼Œå¦‚ä¸‹æ‰€ç¤º flowchart subgraph Input direction TB document query end query --\u003e Retriever(Retriever) --\u003e document document ---|Concat| query Input --\u003e LLM --\u003e Output é‚£ä¹ˆå¸¦æœ‰ RAG çš„ LLM åšæ–‡æœ¬ç”Ÿæˆçš„å…¬å¼è¡¨ç¤ºæ˜¯ $$ P_\\theta(x_1,x_2,â€¦,x_L)=\\prod_{i=1}^L P_\\theta\\big(x_i|[R_{\\mathcal C}(x_{\u003ci});x_{\u003ci}]\\big) $$ å…¶ä¸­ $R_{\\mathcal C}(x_{\u003ci})$ è¡¨ç¤ºç”¨è¾“å…¥ ${x_1,x_2,â€¦,x_{i-1}}$ è®© Retriever æ£€ç´¢åˆ°çš„æ–‡æ¡£ï¼Œ$x_{\u003ci}$ å¯¹åº” ${x_1,x_2,â€¦,x_{i-1}}$ $[;]$ è¡¨ç¤º Concat æ“ä½œï¼Œ$[x;y]$ å°±æ˜¯å°† $x$ å’Œ $y$ æ‹¼æ¥èµ·æ¥ ä¸Šé¢ä¸€æ®µè¯å·²ç»æ¦‚æ‹¬äº† In-Context RALM çš„è®¾è®¡ï¼ˆå°±æ˜¯è¿™ä¹ˆç®€å•ï¼ï¼‰ã€‚ä½†å…¶å®è¿˜æ˜¯æœ‰å‡ ä¸ªç»†èŠ‚å€¼å¾—æ·±ç©¶ï¼Œä½œè€…ç€é‡ç ”ç©¶äº†ä¸‹é¢å‡ ä¸ª åº”è¯¥ç”¨ä»€ä¹ˆ Retrieverï¼Ÿ Retriever æ£€ç´¢çš„é¢‘ç‡åº”è¯¥å¦‚ä½•è®¾ç½®ï¼Ÿ Retriever çš„è¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿå³å®ƒæ˜¯æ ¹æ®ä»€ä¹ˆåšæ£€ç´¢çš„ï¼Ÿ å¦‚æœä½¿ç”¨æ›´å¤š Retriever æ£€ç´¢åˆ°çš„æ–‡æ¡£è€Œä¸æ­¢æ˜¯æœ€ç›¸å…³çš„ï¼Œæ•ˆæœä¼šæ›´å¥½å—ï¼Ÿ ä¸‹é¢æˆ‘ä»¬ä¸€ä¸€æ¥çœ‹ä¸Šé¢é—®é¢˜çš„ç ”ç©¶ç»“è®º :) ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:1:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#the-idea"},{"categories":["NLP"],"content":" Retriever Choiceä½œè€…ç ”ç©¶äº† 2 ç§ Retriever Sparse Retriever BM25 Dense Retriever å†»ç»“å‚æ•°çš„ BERT-base Contriever Spider ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:1:1","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#retriever-choice"},{"categories":["NLP"],"content":" Retrieval Stride Info REALM æˆ‘ä¹‹å‰ä¹Ÿå‘è¿‡ä¸€ç¯‡è®ºæ–‡é˜…è¯»ç¬”è®°ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹è¯¥é“¾æ¥ Retrieval Stride è¦è§£å†³çš„æ˜¯â€œRetriever æ£€ç´¢çš„é¢‘ç‡åº”è¯¥å¦‚ä½•è®¾ç½®â€è¿™ä¸ªé—®é¢˜ï¼Œåƒ REALM ä¸€æ ·åœ¨ä¸€å¼€å§‹çš„æ—¶å€™åšæ£€ç´¢ï¼ˆè€Œä¸”åªåšä¸€æ¬¡ï¼‰å½“ç„¶å¯ä»¥ï¼Œä½†ä½œè€…æå‡ºï¼šåº”è¯¥å›ºå®šæ­¥é•¿å°±åšä¸€æ¬¡æ£€ç´¢ï¼Œè¿™é‡Œçš„æ­¥é•¿ï¼ˆç”¨ $s$ è¡¨ç¤ºï¼‰ç”¨ token æ•°é‡æ¥åº¦é‡ ä½œè€…å‘ç°ï¼Œ$s$ è¶Šå°ï¼Œæ¨¡å‹ç”Ÿæˆçš„æ–‡æœ¬è¶Šå¥½ï¼Œä½†å¼€é”€ä¹Ÿä¼šè¶Šå¤§ï¼Œè¿™é‡Œå­˜åœ¨ trade-offã€‚æ¯éš” $s$ ä¸ª token çš„æƒ…å†µåšä¸€æ¬¡æ£€ç´¢çš„æƒ…å†µä¸‹ï¼Œå¸¦æœ‰ RAG çš„ LLM çš„æ–‡æœ¬ç”Ÿæˆå¯ä»¥ç”¨å…¬å¼è¡¨ç¤ºä¸º $$ P_\\theta(x_1,x_2,â€¦,x_L)=\\prod_{j=0}^{n_s-1}\\prod_{i=1}^{s} P_\\theta\\big(x_{s\\cdot j +i}|[R_{\\mathcal C}(x_{\\le s\\cdot j});x_{\u003c(s\\cdot j + i)}]\\big) $$ è¿™é‡Œè¯´çš„å¼€é”€åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ† Retriever æ£€ç´¢çš„å¼€é”€ æ£€ç´¢åˆ°çš„æ–‡æ¡£éœ€è¦é‡æ–°è®© LLM è®¡ç®— Embedding ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:1:2","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#retrieval-stride"},{"categories":["NLP"],"content":" Retrieval Query Lengthé‚£ä¹ˆ Retriever çš„è¾“å…¥åº”è¯¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿä¸€ä¸ªæœ´ç´ çš„æƒ³æ³•æ˜¯ï¼Œå°†ç”¨æˆ·çš„è¾“å…¥å’Œå’Œæˆªæ­¢ç›®å‰ä¸ºæ­¢ LLM ç”Ÿæˆçš„ tokenï¼ˆè¿™ä¸¤è€…å¯ä»¥ç”¨ $x_{\\le x_{s\\cdot j}}$ è¡¨ç¤ºï¼‰ ä¸€èµ·ä½œä¸º Retriever çš„è¾“å…¥ï¼Œä½†ä½œè€…è®¤ä¸ºæœ€åå‡ ä¸ª token å¯¹ LLM çš„ç”Ÿæˆæ›´é‡è¦ å› æ­¤ä½œè€…æƒ³åˆ°ï¼Œæ¯éš” $s$ ä¸ª token è¦è®© Retriever å»æ£€ç´¢çš„æ—¶å€™åªéœ€è¦ç»™æœ€å $l$ ä¸ª token å°±å¯ä»¥ï¼Œå¹¶ä¸éœ€è¦ç»™å½“å‰æ‰€æœ‰çš„ tokenï¼ˆå³ $x_{\\le s\\cdot j}$ï¼‰ã€‚ç”¨å…¬å¼è¡¨ç¤ºå°±æ˜¯ $$ P_\\theta(x_1,x_2,â€¦,x_L)=\\prod_{j=0}^{n_s-1}\\prod_{i=1}^{s} P_\\theta\\big(x_{s\\cdot j +i}|[R_{\\mathcal C}(x_{s\\cdot j-l+1:{s\\cdot j}});x_{\u003c(s\\cdot j + i)}]\\big) $$ å…¶ä¸­ $s\\cdot j-l+1:{s\\cdot j}$ è¡¨ç¤º $[s\\cdot j-l+1,{s\\cdot j}]$ï¼Œä¹Ÿå°±æ˜¯å½“å‰ä½ç½®çš„å‰ $l$ ä¸ª token Faq $l$ åº”è¯¥ç­‰äº $s$ å—ï¼Ÿä½œè€…å‘ç° $s=l$ çš„è¯ï¼Œæ•ˆæœä¼šä¸å¥½ ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:1:3","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#retrieval-query-length"},{"categories":["NLP"],"content":" RerankingRetriever ä¼šå¯¹è¯­æ–™åº“ä¸­çš„æ–‡æ¡£éƒ½è®¡ç®—ç›¸å…³æ€§ï¼Œä¸€èˆ¬åªä½¿ç”¨æœ€ç›¸å…³çš„æ–‡æ¡£ï¼Œä½†ç›´æ¥æ ¹æ®ç›¸å…³æ€§è®¡ç®—å‡ºæ¥çš„å°±ä¸€å®šæœ€å¥½å—ï¼Ÿæ˜¯å¦å¯ä»¥è€ƒè™‘è¿”å› Top-k ä¸ªç„¶åé‡æ–°åšæ’åºæ“ä½œï¼Ÿ ä½œè€…ç ”ç©¶äº† 2 ç§æ’åºæ–¹æ³• ç¬¬ä¸€ç§ï¼Œç›´æ¥ç”¨ LLM åˆ¤æ–­ï¼Œå‡è®¾è¦å¯¹ k ä¸ªæ–‡æ¡£æ’åºï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€ä¸ªæ–‡æ¡£ $d_i$ï¼šå– $x_{s\\cdot j}$ çš„æœ€å $sâ€™$ ä¸ª token ä½œä¸ºé¢„æµ‹ç›®æ ‡ï¼Œå¹¶ä» LLM è¾“å…¥ä¸­å»æ‰è¿™ $sâ€™$ ä¸ª tokenã€‚æ–‡æ¡£ $d_i$ ä¼šè¢«æ·»åŠ åˆ° LLM è¾“å…¥çš„å‰é¢ï¼Œç„¶åå†è®© LLM é¢„æµ‹ã€‚æœ€å¥½çš„æ–‡æ¡£å°±æ˜¯ä¼šè®©è¿™ $sâ€™$ ä¸ª token å‡ºç°é¢‘ç‡æœ€é«˜çš„ $$ \\texttt{argmax}\\ p(x_{s\\cdot j-sâ€™+1:s\\cdot j}|[d_i;x_{\\le s\\cdot j-sâ€™})) $$ Tip ç¬¬ä¸€ç§æ–¹æ³•é‡Œé¢ç”¨äºæ’åºçš„ LLM å¹¶æ²¡æœ‰è¦æ±‚è¦å’Œè´Ÿè´£ç”Ÿæˆæ–‡æœ¬çš„ LLM ä¸€æ ·ã€‚å› æ­¤å‡ºäºæ€§èƒ½çš„è€ƒè™‘ï¼Œè´Ÿè´£æ’åºçš„ LLM å®Œå…¨å¯ä»¥ç”¨æ›´å°çš„æ¨¡å‹ ç¬¬äºŒç§ï¼Œç›´æ¥è®­ç»ƒä¸€ä¸ª rerankerï¼Œä½œè€…ç§°å…¶ä¸º Predictive Reranking Reranker è¾“å…¥ $x_{\\le s\\cdot j}$ $d_i$ Reranker è¿”å›ï¼šä¸€ä¸ªæ ‡é‡ï¼Œè¡¨ç¤º $d_i$ å’Œ $x_{\\le s\\cdot j}$ çš„ç›¸å…³æ€§ é‚£ä¹ˆæ¯ä¸ªæ–‡æ¡£ $d_i$ éƒ½ä¼šæœ‰ä¸ªç›¸å…³æ€§çš„å¾—åˆ†ï¼Œç»è¿‡ $\\texttt{softmax}$ ä¹‹å k ä¸ªæ–‡æ¡£çš„å¾—åˆ†å°±å½¢æˆäº†ä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œæ¦‚ç‡æœ€å¤§çš„æ–‡æ¡£å°±æ˜¯ç›¸å…³æ€§æœ€å¼ºçš„ Tip é‚£ä¹ˆè®­ç»ƒé›†çš„æ ·æœ¬çš„ label ä»å“ªé‡Œæ¥å‘¢ï¼Ÿ è®© LLM æ¨¡å‹ç”¨ $x_{\\le s\\cdot j}$ ç”Ÿæˆ $s$ ä¸ª tokenï¼ˆç”¨ $y$ è¡¨ç¤ºï¼‰ï¼Œæ³¨æ„è¿™é‡Œçš„ $s$ æ˜¯æ­¥é•¿ è®© Retriever ç”¨æœ€å $l$ ä¸ª token æ£€ç´¢åˆ° k ä¸ªæ–‡æ¡£ è®© LLM æ ¹æ® $[d_i; x_{\\le s\\cdot j}]$ é¢„æµ‹ $y$ï¼Œè®¡ç®—æ¦‚ç‡ï¼Œå°±å¾—åˆ°äº† label ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:1:4","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#reranking"},{"categories":["NLP"],"content":" æ€»ç»“æˆ‘å°†æœ¬æ–‡çš„ç ”ç©¶ç»“è®ºæ±‡æ€»æˆä¸€å¼ è¡¨æ ¼ï¼Œå¦‚ä¸‹æ‰€ç¤º Conclusion Reference Predictive Reranking çš„æ•ˆæœä¼šæ›´å¥½ä¸€äº› Figure 1 BM25 è™½ç„¶åªè€ƒè™‘äº†è¯­æ³•ä¿¡æ¯ï¼Œä½†æ˜¯ä½œä¸º Retriever æ¯”åŸºäºç¥ç»ç½‘ç»œçš„æ•ˆæœè¿˜è¦å¥½ï¼ˆæ¨èè®¾ç½® $l=32, s=4$ï¼‰ Figure 3 ä¸ç®¡ LLM çš„æ¨¡å‹å¤§å°ï¼Œç”¨äº† In-Context RALM çš„ RAG æŠ€æœ¯ä¹‹åï¼ŒLLM ç”Ÿæˆçš„æ–‡æœ¬çš„å›°æƒ‘åº¦éƒ½ä¸‹é™äº† Figure 4 æ£€ç´¢çš„é¢‘ç‡è¶Šé«˜ï¼ˆå³ $s$ è¶Šå°ï¼‰ï¼Œæ•ˆæœè¶Šå¥½ï¼ˆæé™æƒ…å†µä¸‹æ¯ä¸ª token ç”Ÿæˆçš„æ—¶å€™éƒ½æ£€ç´¢ä¸€æ¬¡ï¼‰ Figure 5 ç»™ Retriever çš„è¾“å…¥åªéœ€è¦ LLM è¾“å…¥çš„æœ€å $l$ ä¸ª token æ•ˆæœå°±å¾ˆå¥½äº† Figure 6 å¯¹ Retriever è¿”å›çš„æ–‡æ¡£è¿›è¡Œé‡æ–°æ’åºæ˜¯æœ‰å¸®åŠ©çš„ï¼Œæå‡æ•ˆæœæ˜æ˜¾ Figure 7 åªéœ€è¦ä½¿ç”¨ Retriever è¿”å›çš„æœ€ç›¸å…³çš„æ–‡æ¡£å°±å¯ä»¥äº†ï¼Œæ›´å¤šæ–‡æ¡£çš„æå‡å¹¶ä¸æ˜æ˜¾ Figure 8 ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:2:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#æ€»ç»“"},{"categories":["NLP"],"content":" å‚è€ƒ Ram, Ori, et al. â€œIn-context retrieval-augmented language models.â€ Transactions of the Association for Computational Linguistics 11 (2023): 1316-1331. srcÂ â†©ï¸ ","date":"2024-12-04","objectID":"/zh-cn/in-context-ralm-paper-reading/:3:0","series":null,"tags":["Paper","NLP","Deep-Learning","LLM"],"title":"è®ºæ–‡é˜…è¯»: In-Context Retrieval-Augmented Language Models","uri":"/zh-cn/in-context-ralm-paper-reading/#å‚è€ƒ"},{"categories":["NLP"],"content":"å…³äº Google çš„ REALM è®ºæ–‡çš„ä»‹ç»","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/"},{"categories":["NLP"],"content":" å¼•è¨€æœ€è¿‘æ‰“ç®—ç³»ç»Ÿæ€§å­¦ä¹  RAG æŠ€æœ¯ï¼Œå¼€å§‹çœ‹èµ·äº†ç›¸å…³æ–‡çŒ®ï¼Œç›®å‰çš„æ€è·¯æ˜¯æŒ‰ç…§ ACL 2023 Tutorial çš„ Roadmap è¿‡ä¸€éã€‚æœ¬ç¯‡æ˜¯å¯¹æ—©æœŸçš„ RAG æŠ€æœ¯çš„ REALM çš„ä»‹ç» Info æœ¬æ–‡é‡‡ç”¨çš„æ¨¡å‹æ˜¯ Masked LM çš„ BERTï¼Œè¿˜ä¸æ˜¯ LLMã€‚å› æ­¤æœ¬æ–‡åç»­çš„éƒ¨åˆ†å†…å®¹éœ€è¦ä½ å¯¹ BERT æœ‰ä¸€å®šçš„äº†è§£ï¼ŒåŒ…æ‹¬ BERT çš„é¢„è®­ç»ƒè¿‡ç¨‹ã€BERT å¾®è°ƒç­‰ ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:1:0","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#å¼•è¨€"},{"categories":["NLP"],"content":" The ideaMotivation æ˜¯è¿™æ ·å­çš„ï¼šçŸ¥è¯†ä»¥å‚æ•°çš„å½¢å¼å­˜å‚¨åœ¨æ¨¡å‹é‡Œé¢ï¼Œæ³¨æ„è¿™æ˜¯ implicit çš„ã€‚æœ¬æ–‡æå‡ºå¯ä»¥åœ¨æ¨¡å‹æ¨ç†çš„æ—¶å€™ï¼Œæ–°å¢ä¸€ä¸ª Retrieverï¼Œè´Ÿè´£æ£€ç´¢åˆ°è·Ÿè¾“å…¥ç›¸å…³çš„æ–‡æœ¬ï¼Œæ¥è¾…åŠ©æ¨¡å‹æ¨ç† Info å¦‚æœä½ å¯¹ BERT å¾ˆç†Ÿæ‚‰ï¼Œåº”è¯¥è¿˜è®°å¾—è¾“å…¥çš„é™åˆ¶æœ€å¤§ä¸º 512 ä¸ª tokenã€‚å› æ­¤è¿™é‡Œçš„æ–‡æœ¬å…¶å®æŒ‡çš„æ˜¯ Text Chunkï¼Œè®ºæ–‡é‡Œæåˆ°å°†æ–‡æ¡£éƒ½åˆ‡æˆäº†ä¸€ä¸ªä¸ª Chunk æ¶æ„é•¿ä¸‹é¢è¿™æ · 1 Info æ³¨æ„å‡ ç‚¹ è¿™é‡Œçš„è¯­è¨€æ¨¡å‹é‡‡ç”¨çš„æ˜¯ BERTï¼Œæ‰€ä»¥å¯ä»¥çœ‹åˆ° [CLS], [MASK], [SEP] è¿™äº›ç‰¹æ®Šçš„ token Retriever å–å›çš„ Text Chunk å’Œæœ¬æ¥çš„ Query ç”¨ [SEP] æ‹¼æ¥èµ·æ¥äº† ä¹Ÿå°±æ˜¯ç°åœ¨å¤šäº†ä¸€ä¸ª Retrieverï¼Œé‚£ä¹ˆå°±è¦å¤„ç†å‡ ä¸ªé—®é¢˜ å¦‚ä½•è®­ç»ƒ Retrieverï¼Ÿ Retriever è¦æ£€æŸ¥çš„è¯­æ–™åº“ï¼ˆå›¾ä¸­çš„ $\\mathcal Z$ï¼‰ç‰¹åˆ«å¤§ï¼Œå¦‚ä½•é«˜æ•ˆåšæ£€ç´¢ï¼Ÿ Retriever æ‰¾åˆ°ç›¸å…³çš„ Text Chunk ä¹‹åè¦å¦‚ä½•ä½¿ç”¨ï¼Ÿ å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œä½œè€…æƒ³åˆ°äº† Unsupervised-Learningï¼Œç”¨ Perplexity ä½œä¸ºâ€œä¿¡å·â€ï¼Œå¦‚æœåŠ ä¸Šäº† Retriever æ£€ç´¢åˆ°çš„ Text Chunk ä¹‹åä¼šä½¿å¾—æ¨¡å‹ç”Ÿæˆçš„ Text Chunk çš„ Perplexity æé«˜ï¼Œé‚£ä¹ˆè¯´æ˜æ£€ç´¢åˆ°çš„ Text Chunk ä¸å¥½ï¼Œåä¹‹åˆ™è¯´æ˜æ£€ç´¢åˆ°äº†ç›¸å…³çš„ Text Chunk å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ¯ä¸€ä¸ªæ–‡æ¡£ä¼šè¢«åˆ‡åˆ†æˆä¸€ä¸ªä¸ª Text Chunkï¼Œæ¯ä¸€ä¸ª Text Chunk éƒ½å¯ä»¥æå‰ç”Ÿæˆ Embeddingï¼Œé‚£ä¹ˆåœ¨å¾—åˆ° Query çš„ Embedding ä¹‹åï¼Œåªéœ€è¦å’Œæ¯ä¸€ä¸ª Text Chunk åšå‘é‡å†…ç§¯ï¼Œå°±å¯ä»¥è®¡ç®—ç›¸å…³æ€§äº† ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:2:0","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#the-idea"},{"categories":["NLP"],"content":" æ¨¡å‹æ¶æ„è®°è¾“å…¥ä¸º $x$ï¼Œè¾“å‡ºä¸º $y$ï¼Œæ£€ç´¢åˆ°çš„ Text Chunk æ˜¯ $z$ï¼ŒREALM è¦åšçš„äº‹æƒ…å°±æ˜¯ç»™å®šè¾“å…¥é¢„æµ‹è¾“å‡ºï¼Œä¹Ÿå°±æ˜¯ $$ p(y|x) $$ REALM å°†å…¶åˆ†ä¸º 2 æ­¥ retrieveï¼šä»è¯­æ–™åº“ $\\mathcal Z$ é‡Œé¢æ£€ç´¢ Text Chunk $z$ï¼Œè¿™å¯ä»¥å»ºæ¨¡ä¸ºä¸€ä¸ªæ¦‚ç‡åˆ†å¸ƒ $p(z|x)$ predictï¼šé‚£ä¹ˆé¢„æµ‹å°±æ˜¯åšæ¡ä»¶ç”Ÿæˆï¼Œå³ $p(y|z,x)$ æ ¹æ®å‰é¢çš„å®šä¹‰ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³çš„æ˜¯ 2 ä¸ªå…¬å¼çš„æ±‚è§£ï¼š$p(z|x),p(y|z,x)$ï¼Œåˆ†åˆ«äº¤ç»™ Retriever å’Œ Encoder è´Ÿè´£ï¼Œæ•´ä½“éµå¾ª retrieve-then-predict çš„æ€è·¯ ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:3:0","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#æ¨¡å‹æ¶æ„"},{"categories":["NLP"],"content":" Retrieverå…ˆçœ‹ Retrieverï¼Œè´Ÿè´£å¤„ç† $p(z|x)$ï¼Œå³åš Text Chunk çš„æ£€ç´¢ã€‚å…¬å¼è®¡ç®—æ–¹å¼ä¸º $$ \\begin{aligned} p(z|x)\u0026=\\frac{exp\\ f(x,z)}{\\sum_{zâ€™}exp\\ f(x,zâ€™)} \\\\ f(x,z)\u0026=\\texttt{Embed}_{input}(x)^T\\texttt{Embed}_{doc}(z) \\end{aligned} $$ ç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ï¼Œå¾—åˆ°è¾“å…¥çš„ Embedding $\\texttt{Embed}_{input}(x)$ï¼Œå¹¶è®¡ç®—è¯­æ–™åº“ $\\mathcal Z$ çš„æ¯ä¸ª Text Chunk çš„ Embeddingï¼Œç”¨è¾“å…¥çš„ Embedding å’Œæ¯ä¸ªText Chunk çš„ Embedding åˆ†åˆ«åšå‘é‡å†…ç§¯ï¼Œ$\\texttt{softmax}$ ä¹‹åå°±å¯ä»¥å¾—åˆ°æ¦‚ç‡åˆ†å¸ƒï¼Œä¹Ÿå°±çŸ¥é“æ¯ä¸€ä¸ª Text Chunk è·Ÿè¾“å…¥çš„ç›¸å…³æ€§ ç”¨ BERT æå–è¾“å…¥çš„ Embedding çš„è¿‡ç¨‹æ¯”è¾ƒå¥½ç†è§£ï¼Œè¾“å‡ºçš„ [CLS] çš„ Embedding ä¸€èˆ¬è¢«çœ‹æˆæ˜¯è¾“å…¥çš„æ•´ä½“è¡¨ç¤ºï¼Œä½œè€…è¿˜å°†å…¶ä¹˜ä»¥ä¸€ä¸ªæƒé‡çŸ©é˜µåšæŠ•å½±é™ç»´ã€‚æ ¸å¿ƒé—®é¢˜æ˜¯ Retriever çš„è¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿ ä½œè€…å®šä¹‰äº†å¦‚ä¸‹çš„è¾“å…¥æ¨¡æ¿ $$ \\begin{aligned} \\texttt{join}_\\texttt{BERT}(x)\u0026=\\texttt{[CLS]}x\\texttt{[SEP]} \\\\ \\texttt{join}_\\texttt{BERT}(x_1,x_2)\u0026=\\texttt{[CLS]}x_1\\texttt{[SEP]}x_2\\texttt{[SEP]} \\end{aligned} $$ å¯¹äº Query æ¥è¯´ï¼Œå°±æ˜¯ $\\texttt{join}_\\texttt{BERT}(query)$ å¯¹äº Text Chunk æ¥è¯´ï¼Œå°±æ˜¯ $\\texttt{join}_\\texttt{BERT}(z_{title}, z_{body})$ã€‚è¿™é‡Œæœ‰ç‚¹æ„æ€ï¼Œtitle å’Œ body åˆ†å¼€ï¼Œå†ç”¨ [SEP] æ‹¼æ¥èµ·æ¥ ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:3:1","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#retriever"},{"categories":["NLP"],"content":" EncoderEncoder è´Ÿè´£å¤„ç† $p(y|z,x)$ï¼Œä½œè€…åŒºåˆ†äº†é¢„è®­ç»ƒå’Œå¾®è°ƒ 2 ä¸ªåœºæ™¯ï¼Œè¿™é‡Œä¸å¯¹å…¶è¿›è¡Œå±•å¼€ã€‚å› ä¸ºç°åœ¨æ˜¾ç„¶æ˜¯ LLM çš„æ—¶ä»£äº†ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹è¾“å…¥å°±å¥½ $$ \\texttt{join}_{\\texttt{BERT}}(x, z_{\\texttt{body}}) $$ ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:3:2","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#encoder"},{"categories":["NLP"],"content":" æ¨¡å‹è®­ç»ƒæˆ‘ä»¬è¦ä¼˜åŒ–çš„æ˜¯ $p(y|x)$ è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒï¼Œå¸Œæœ›ç»™å®šè¾“å…¥ $x$ çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥æ‰¾åˆ°æœ€ç›¸å…³çš„ $y$ ç°åœ¨å¤šäº†ä¸€ä¸ª Text Chunk æ£€ç´¢çš„æ­¥éª¤ï¼Œæ ¹æ®è¾¹ç¼˜æ¦‚ç‡æœ‰ $$ p(y|x)=\\sum_{z\\in\\mathcal Z}p(y|z,x)p(z|x) $$ è¿™é‡Œé¢æœ‰å‡ ä¸ªæŒ‘æˆ˜ $\\sum_{z\\in\\mathcal Z}$ è¯´æ˜æˆ‘ä»¬éœ€è¦å¯¹è¯­æ–™åº“é‡Œçš„æ¯ä¸ª Text Chunk $z$ éƒ½è®¡ç®—ä¸€ä¸‹æœ€åæ±‚å’Œï¼ŒText Chunk æ•°é‡å¤ªå¤šäº†æ€ä¹ˆåŠï¼Ÿä½œè€…è®¤ä¸ºï¼Œå– Top-k ä¸ªï¼Œè¿™æ˜¯å› ä¸ºç†æƒ³çš„æƒ…å†µä¸‹ï¼Œå¾ˆå¤š Text Chunk éƒ½æ˜¯æ— å…³çš„ï¼Œæ‰€ä»¥ $p(z|x)\\approx 0$ Text Chunk çš„ Embedding å¯ä»¥æå‰è®¡ç®—ï¼Œä½†é—®é¢˜æ˜¯ï¼šéšç€ $\\texttt{Embed}_{doc}$ æ¨¡å‹æ›´æ–°ä¹‹åï¼ŒåŸæœ‰çš„ Embedding å°±ä¸é€‚ç”¨äº†ï¼Œç†æƒ³çš„æƒ…å†µä¸‹åº”è¯¥æ¯æ¬¡æ¨¡å‹æ›´æ–°å®Œæˆä¹‹åéƒ½æ›´æ–°ä¸€ä¸‹ Text Chunk çš„ Embeddingï¼Œä½†è¿™æ ·ä¼šå½±å“è®­ç»ƒã€‚é’ˆå¯¹ä¸åŒçš„åœºåˆï¼Œä½œè€…æå‡ºäº†ä¸åŒçš„æ–¹æ³• é¢„è®­ç»ƒï¼šè®­ç»ƒå‡ ç™¾ä¸ª Step ä¹‹åå†æ›´æ–° $\\texttt{Embed}_{doc}$ çš„å‚æ•°ï¼Œç„¶ååˆ·æ–°æ¯ä¸ª Text Chunk çš„ç´¢å¼•ï¼Œè®ºæ–‡é‡Œè¯´æ˜¯ 500 ä¸ª Step å¾®è°ƒï¼šå¦‚æœåªæ˜¯å¾®è°ƒï¼Œé‚£ä¹ˆä¸ä¼šæ›´æ–° $\\texttt{Embed}_{doc}$ çš„å‚æ•° ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:4:0","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#æ¨¡å‹è®­ç»ƒ"},{"categories":["NLP"],"content":" æ€»ç»“2020 å¹´æå‡ºçš„ REALM æ˜¯ BERT æ¨¡å‹ä¸‹çš„ RAG æŠ€æœ¯ï¼Œè™½ç„¶ç°åœ¨ BERT å·²ç»ä¸é‚£ä¹ˆæµè¡Œäº†ï¼Œä½† REALM çš„ RAG è®¾è®¡è¿˜æ˜¯æœ‰å€¼å¾—å€Ÿé‰´çš„åœ°æ–¹ åœ¨ä¸€å¼€å§‹å°±æ£€ç´¢ç›¸å…³çš„ Text Chunkï¼Œè€Œä¸”åªæ£€ç´¢ä¸€æ¬¡ å½“è¯­æ–™åº“å¤ªå¤§çš„æ—¶å€™ï¼Œé€‰å– Top-k ä¸ªæœ€ç›¸å…³çš„ Text Chunk å°±å¯ä»¥äº† Guu, Kelvin, et al. â€œRetrieval augmented language model pre-training.â€Â International conference on machine learning. PMLR, 2020. srcÂ â†©ï¸ ","date":"2024-11-30","objectID":"/zh-cn/rag-realm-paper-reading/:5:0","series":null,"tags":["Paper","NLP","Deep-Learning"],"title":"è®ºæ–‡é˜…è¯»: REALM: Retrieval-Augmented Language Model Pre-Training","uri":"/zh-cn/rag-realm-paper-reading/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":"å¯¹ OCaml çš„ Polymorphic variant ç±»å‹çš„ä»‹ç»ï¼ŒåŒ…æ‹¬å«ä¹‰ã€ä½¿ç”¨åœºåˆç­‰","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€æˆ‘å·²ç»å­¦ä¹ å¹¶ä½¿ç”¨äº† OCaml æœ‰æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯ä¸€ç›´æä¸æ¸…æ¥š Polymorphic variant æœ‰ä»€ä¹ˆç”¨ã€‚æœ€è¿‘åœ¨çœ‹ Yojson çš„æ—¶å€™åˆçœ‹åˆ°äº†è¿™ç§ç”¨æ³•ï¼Œä¸€ç•ªæœç´¢ä¹‹åå‘ç°å¹¶æ²¡æœ‰çœ‹åˆ°å…³äº Polymorphic variant çš„æ¯”è¾ƒå¥½çš„æ–‡ç« ï¼ˆå®˜æ–¹ä»‹ç» åœ¨æˆ‘çœ‹æ¥æœ‰ç‚¹éš¾æ‡‚ï¼‰ï¼Œåªçœ‹åˆ°ä¸€äº›ç›¸å…³çš„å›ç­”12ã€‚ç»è¿‡ä»”ç»†å­¦ä¹ ä¹‹åï¼Œæˆ‘å†³å®šå†™ä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ© :) ä¿¡æ¯ æˆ‘ä¸æ˜¯ä¸€ä¸ª OCaml ä¸“å®¶ï¼Œæ‰€ä»¥æœ¬æ–‡å¯èƒ½ä¹Ÿä¸æ˜¯ä¸€ç¯‡æ¯”è¾ƒå¥½çš„æ–‡ç«  ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:1:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" è¯­æ³•ç”¨æ–¹æ‹¬å· [] æ‹¬èµ·æ¥ï¼Œæ¯ä¸€ä¸ª constructor ç”¨ backtick ï¼ˆ ` ï¼‰æ ‡è¯†ï¼Œæ¯”å¦‚ ocaml type either = [ | `A of int | `B ] åœ¨å®šä¹‰å€¼çš„æ—¶å€™ï¼Œä¹Ÿè¦åŠ ä¸Š backtick ocaml utop # let v = `A 1;; val v : [\u003e `A of int/2 ] = `A 1 ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:2:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#è¯­æ³•"},{"categories":["Programming-Languages"],"content":" ä¸‹ç•Œä¸ä¸Šç•Œ æŠ€å·§ int/2 çš„æ„æ€å¯ä»¥çœ‹ StackOverflow ä¸Šçš„ä¸€ä¸ª å›ç­” å‰é¢æˆ‘ä»¬å®šä¹‰ v çš„å¯ä»¥çœ‹åˆ°ï¼Œç±»å‹å¹¶ä¸æ˜¯ eitherï¼Œè€Œæ˜¯ [\u003e ...]ï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ ¹æ® polymorphic variant çš„ syntaxï¼Œæˆ‘ä»¬çŸ¥é“ [ ... ] æ˜¯ polymorphic variant typeï¼Œé‚£ \u003e å‘¢ï¼Ÿ å®ƒè·Ÿæ•°å­¦ä¸­çš„ \u003e æœ‰ç±»ä¼¼çš„è¯­ä¹‰ï¼Œè¡¨ç¤ºé™¤äº†æˆ‘ä»¬æŒ‡å®šçš„ constructor ä»¥å¤–è¿˜å¯ä»¥æœ‰æ›´å¤šçš„ constructorï¼Œæ¯”å¦‚ ocaml [`A of int | `B] [`A of int | `B | `C] ... å› æ­¤ï¼Œpolymorphic variant ä¹Ÿå«åš open variant åŒç†æœ‰ [\u003c ...]ï¼Œè¿™ä¸ªç±»å‹çº¦æŸçš„æ„æ€æ˜¯ï¼šè¯¥ç±»å‹æœ€å¤šæœ‰è¿™äº› constructorï¼Œå¯ä»¥æ›´å°‘ä½†ä¸èƒ½å¤šã€‚æ¯”å¦‚ ocaml [\u003c `A of int | `B] é‚£ä¹ˆå¯ä»¥æœ‰å¦‚ä¸‹ 3 ç§æƒ…å†µ ocaml [`A of int] [`B] [`A of int | `B] ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:3:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#ä¸‹ç•Œä¸ä¸Šç•Œ"},{"categories":["Programming-Languages"],"content":" Pattern Matchingå¦‚æœå‡½æ•°å…¥å‚æ˜¯ä¸€ä¸ª polymorphic variantï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•å†™ä¸€ä¸‹ Pattern Matching çš„å‡½æ•°ï¼Œæ¯”å¦‚ ocaml utop # let foo = function | `A -\u003e \"A\" | `B -\u003e \"B\" ;; val foo : [\u003c `A | `B ] -\u003e string/2 = \u003cfun\u003e å¯ä»¥çœ‹åˆ°ï¼ŒOCaml æ¨æ–­çš„å…¥å‚ç±»å‹æ˜¯ [\u003c ...]ï¼Œè¿™æ˜¯åˆç†çš„ï¼Œå› ä¸º å¦‚æœæˆ‘ä»¬æä¾›äº†å…¶ä»–çš„ constructorï¼Œè¿™ä¸ªå‡½æ•°æ˜¯æ— æ³•å¤„ç†çš„ï¼Œæ¯”å¦‚ ocaml utop # foo `C;; Error: This expression has type [\u003e `C ] but an expression was expected of type [\u003c `A | `B ] The second variant type does not allow tag(s) `C ç°åœ¨æˆ‘ä»¬å¯¹ foo å‡½æ•°ç¨ä½œä¿®æ”¹ï¼Œå°† B çš„åˆ†æ”¯æ”¹æˆ Cï¼Œå¾—åˆ° bar å‡½æ•° ocaml utop # let bar = function | `A -\u003e \"A\" | `C -\u003e \"C\" val bar : [\u003c `A | `C ] -\u003e string/2 = \u003cfun\u003e ç„¶åæˆ‘ä»¬å¯ä»¥å°è¯•å°† foo å‡½æ•°å’Œ bar å‡½æ•°æ”¾åœ¨åŒä¸€ä¸ªåˆ—è¡¨é‡Œé¢ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°åˆ—è¡¨åº”è¯¥æœ‰ä»€ä¹ˆç±»å‹ï¼Ÿæˆ‘ä»¬å¯ä»¥å°è¯•è‡ªå·±åšä¸€ä¸‹ç±»å‹æ¨æ–­ï¼Œå·²çŸ¥ foo å‡½æ•°å¯ä»¥å¤„ç† A æˆ–è€…æ˜¯ B bar å‡½æ•°å¯ä»¥å¤„ç† A æˆ–è€…æ˜¯ C ä¸€ä¸ªåˆ—è¡¨è¦æ±‚é‡Œé¢æ‰€æœ‰çš„ item çš„ç±»å‹æ˜¯ä¸€æ ·çš„ è­¦å‘Š ä½ å¯èƒ½çœ‹åˆ°æˆ‘åœ¨å†™ Inline Code çš„æ—¶å€™çœç•¥äº† backtickï¼Œè¿™æ˜¯å› ä¸ºä¼šå’Œ Markdown çš„ Inline Code è¯­æ³•å†²çª é‚£ä¹ˆå‡½æ•°åˆ—è¡¨çš„ç±»å‹å°±åº”è¯¥æ˜¯ ([\u003c A] -\u003e string) listï¼Œå¯ä»¥ç”¨ utop å¯ä»¥æ£€æŸ¥ä¸€ä¸‹æ˜¯å¦å¦‚æ­¤ ocaml utop # let funcs = [ foo; bar ];; val funcs : ([\u003c `A ] -\u003e string/2) list/2 = [\u003cfun\u003e; \u003cfun\u003e] ä¿¡æ¯ é€šè¿‡å‰é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å‘ç°ï¼ŒOCaml å¯ä»¥æ ¹æ® [\u003e ...] å’Œ [\u003c ...] çš„ä½¿ç”¨æƒ…å†µè‡ªåŠ¨è¿›è¡Œç±»å‹æ¨æ–­ï¼Œæ‰¾åˆ°ç¬¦åˆçš„ç±»å‹ å¦å¤–ï¼Œåœ¨åš Pattern Matching çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ #some_variant çš„è¯­æ³•è¡¨ç¤ºæ•´ä¸ª polymorphic variantï¼Œæ¯”å¦‚ ocaml type my_type = [ `A | `B ] let process_a_b_c = function | #my_type -\u003e \"A or B\" | `C -\u003e \"C\" ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:4:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#pattern-matching"},{"categories":["Programming-Languages"],"content":" ä½¿ç”¨åœºæ™¯ ä¿¡æ¯ æ›´å¤šçš„ä½¿ç”¨åœºæ™¯å¯ä»¥å‚è€ƒè®ºæ–‡ Programming with Polymorphic Variants ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:5:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#ä½¿ç”¨åœºæ™¯"},{"categories":["Programming-Languages"],"content":" ä¸å®šä¹‰ç›´æ¥ä½¿ç”¨è¿™æ˜¯æœ€ç›´è§‚çš„åº”ç”¨ï¼Œæœ‰æ—¶å€™åªæ˜¯åœ¨æŸä¸€ä¸ªåœ°æ–¹ç”¨åˆ°äº† Variant Typeï¼Œç”¨ type name = ... å®šä¹‰ä¸€ä¸‹ä¼šæ˜¾å¾—æœ‰ç‚¹å¤šä½™ï¼Œè¿™ç§æ—¶å€™ç›´æ¥ç”¨ Polymorphic Variant Type ä¸‹é¢çš„ä¾‹å­å¯ä»¥ç”¨æ¥å¯¹æ¯”ä¸€ä¸‹ ocaml type return_type = | A of int | B val f : int -\u003e return_val ä½¿ç”¨ Polymorphic Variant ä½ å¯ä»¥è¿™ä¹ˆå†™ï¼Œå°±ä¸ç”¨å¤šå®šä¹‰ä¸€ä¸ªç±»å‹äº† ocaml val f : int -\u003e [ `A of int | `B ] ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:5:1","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#ä¸å®šä¹‰ç›´æ¥ä½¿ç”¨"},{"categories":["Programming-Languages"],"content":" å…±äº«æ•°æ®ç±»å‹åœ¨ä½¿ç”¨æŸä¸ªåº“çš„æ—¶å€™ï¼Œä½ å¯èƒ½éœ€è¦ç”¨åˆ°å®ƒçš„å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œè¿™ä¸ªæ—¶å€™ä½ å¯ä»¥å°†è¿™ä¸ªåº“åˆ—ä¸ºä½ çš„ä¾èµ–ï¼Œæ¯”å¦‚ ocaml (* ./mycolor.ml *) type rgb = Red | Green | Blue (* ./main.ml *) let process_color = function | Mycolor.Red -\u003e \"Red\" (* the Main module depends on Mycolor *) | Mycolor.Green -\u003e \"Green\" | Mycolor.Blue -\u003e \"Blue\" ä½†å¦‚æœæ•°æ®ç±»å‹æ˜¯ç”¨ Polymorphic Variant å®šä¹‰çš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥æ¶ˆå»è¿™ä¸ªä¾èµ– ocaml (* ./mycolor.ml *) type rgb = [ `Red | `Green | `Blue ] (* ./main.ml *) let process_color = function | `Red -\u003e \"Red\" (* the dependence is gone *) | `Green -\u003e \"Green\" | `Blue -\u003e \"Blue\" æŠ€å·§ é€šå¸¸è¿™ä¸ªæ—¶å€™ï¼Œåº“çš„è®¾è®¡è€…ä¼šåœ¨æ–‡æ¡£é‡Œé¢å‘Šè¯‰ä½ ï¼Œæ¯”å¦‚ Yojson çš„ JSON ç±»å‹ å°±æ˜¯ç”¨ polymorphic variant å®šä¹‰çš„ ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:5:2","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#å…±äº«æ•°æ®ç±»å‹"},{"categories":["Programming-Languages"],"content":" SubtypePolymorphic variant ç‰¹åˆ«é€‚åˆä¸åŒçš„ Variant type æœ‰å…±åŒçš„éƒ¨åˆ†è¿™ç§æƒ…å†µï¼Œåœ¨å†™å¤„ç†è¿™äº›ç±»å‹çš„å‡½æ•°çš„æ—¶å€™å¾ˆæ–¹ä¾¿ ä¸¾ä¾‹æ¥è¯´ï¼Œcommon æ˜¯ foo å’Œ bar çš„å­ç±»å‹ï¼Œå› ä¸º foo å’Œ bar éƒ½åŒ…å« A å’Œ B è¿™ä¸¤ä¸ª constructor ocaml type common = A | B type foo = | Common of common (* it's kind of redundant *) | C | D type bar = | Common of common | E | F ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ª show å‡½æ•°ï¼Œéœ€è¦å¤„ç†ä¸Šé¢ 3 ç§ç±»å‹ï¼Œé‚£ä¹ˆä½ ä¸å¾—ä¸å†™ 3 ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º ocaml let show = function | A -\u003e \"A\" | B -\u003e \"B\" let show_foo arg = match (arg : foo) with | Common v -\u003e show v | C -\u003e \"C\" | D -\u003e \"D\" let show_bar arg = match (arg : bar) with | Common v -\u003e show v | E -\u003e \"E\" | F -\u003e \"F\" é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸Š : foo å’Œ : bar æ¥åŒºåˆ†ä¸åŒçš„ç±»å‹ã€‚è€Œå¦‚æœä½¿ç”¨ Polymorphic variantï¼Œä¸Šé¢çš„ä»£ç å°±å¯ä»¥ç®€åŒ–ä¸º ocaml type common = [ `A | `B ] type foo = [ common | `C | `D ] type bar = [ common | `E | `F ] let show = function | `A -\u003e \"A\" | `B -\u003e \"B\" | `C -\u003e \"C\" | `D -\u003e \"D\" | `E -\u003e \"E\" | `F -\u003e \"F\" ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:5:3","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#subtype"},{"categories":["Programming-Languages"],"content":" ç¼ºç‚¹å°½ç®¡ polymorphic variant ç”¨èµ·æ¥ä¼¼ä¹æ›´åŠ çµæ´»å’Œæ–¹ä¾¿ï¼Œä½†è¿™æ˜¯æœ‰ä»£ä»·çš„ 3 Complexityï¼šPolymorphic Variants çš„ typing rule æ›´åŠ å¤æ‚ï¼Œç‰¹åˆ«æ˜¯æŠ¥é”™ä¿¡æ¯æ›´ä¸å‹å¥½äº† Error-findingï¼šç”¨ Polymorphic Variants ä¼šå¯¼è‡´ä½ ä¸å¤§å®¹æ˜“æ‰¾åˆ° Bug Efficiencyï¼šæ€§èƒ½ä¼šç¨å¾®å·®ä¸€äº› ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:6:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#ç¼ºç‚¹"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ Variants or Polymorphic variantsÂ â†©ï¸ Is there any kind of guideline about when to use polymorphic variants?Â â†©ï¸ Real World OCaml. When to Use Polymorphic VariantsÂ â†©ï¸ ","date":"2024-11-24","objectID":"/zh-cn/use-polymorphic-variant-type-in-ocaml/:7:0","series":null,"tags":["OCaml"],"title":"ä½¿ç”¨ OCaml ä¸­çš„ Polymorphic Variant ç±»å‹","uri":"/zh-cn/use-polymorphic-variant-type-in-ocaml/#å‚è€ƒ"},{"categories":["Programming-Languages"],"content":"å…³äº Applicative Functor çš„ä»‹ç»ï¼Œæ¯”å¦‚æœ‰äº† Functor ä¸ºä»€ä¹ˆè¿˜è¦ Applicative Functor","date":"2024-10-20","objectID":"/zh-cn/why-applicative-functor/","series":null,"tags":["Haskell","Functional-Programming"],"title":"ä¸ºä»€ä¹ˆéœ€è¦ Applicative Functor","uri":"/zh-cn/why-applicative-functor/"},{"categories":["Programming-Languages"],"content":" ä¿¡æ¯ é˜…è¯»æœ¬æ–‡ä¹‹å‰ï¼Œæˆ‘å‡è®¾ä½ å¯¹ Functor æœ‰å¾ˆå¥½çš„ç†è§£ ","date":"2024-10-20","objectID":"/zh-cn/why-applicative-functor/:0:0","series":null,"tags":["Haskell","Functional-Programming"],"title":"ä¸ºä»€ä¹ˆéœ€è¦ Applicative Functor","uri":"/zh-cn/why-applicative-functor/#"},{"categories":["Programming-Languages"],"content":" ä¸ºå•¥éœ€è¦ Applicative Functoråœ¨å­¦ä¹  Applicative Functor ä¹‹å‰ï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ªå…³é”®çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆæœ‰äº† Functor æˆ‘ä»¬è¿˜éœ€è¦ Applicative Functorï¼Ÿ Functor çš„ fmap :: a -\u003e b -\u003e f a -\u003e f b ä¸éš¾ç†è§£ï¼Œè¿™é‡Œçš„ map å‡½æ•° a -\u003e b åªæœ‰ 1 ä¸ªå…¥å‚ aï¼Œé‚£å¦‚æœæˆ‘ä»¬æƒ³è¦ map åŒ…å«å¤šä¸ªå…¥å‚çš„å‡½æ•°å‘¢ï¼Ÿæ¯”å¦‚ (+) :: a -\u003e a -\u003e a éœ€è¦ 2 ä¸ªå‚æ•°ï¼Œé‚£ç”¨ fmap ä¼šå¾—åˆ°ä»€ä¹ˆï¼Ÿçœ‹ä¸‹é¢çš„ä»£ç  haskell ghci\u003e let a = fmap (+) [1,2,3] ghci\u003e :t a a :: Num a =\u003e [a -\u003e a] å¯ä»¥çœ‹åˆ°ï¼ŒList Functor é‡Œé¢çš„æ¯ä¸€ä¸ªå€¼éƒ½å˜æˆäº†ä¸€ä¸ªå‡½æ•° a -\u003e aï¼Œä¹Ÿä¸éš¾ç†è§£ï¼ŒHaskell Function éƒ½æ˜¯ Currying Functionsï¼Œæ‰€ä»¥åˆ—è¡¨é‡Œé¢çš„å…ƒç´ ç›¸å½“äºéƒ½æˆä¸ºäº† (+) å·¦ä¾§çš„å…¥å‚ï¼Œå¯ä»¥å°†å…¶æƒ³è±¡ä¸º haskell [\\x -\u003e 1 + x, \\x -\u003e 2 + x, \\x -\u003e 3 + x] -- or, more simpler [(1+), (2+), (3+)] é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¯ä»¥è¿™ä¹ˆå†™ä»£ç ï¼ˆè®© 1 æˆä¸º (+) å³ä¾§çš„å…¥å‚ï¼‰ haskell ghci\u003e fmap ($ 1) a [2,3,4] -- 2 = 1 + 1 -- 3 = 2 + 1 -- 4 = 3 + 1 æ³¨æ„ æ‰€ä»¥ç»“è®ºæ˜¯ï¼šå¦‚æœ fmap f x çš„ map å‡½æ•° f åŒ…å« 2 ä¸ªå…¥å‚ï¼Œé‚£ä¹ˆ Functor x é‡Œé¢çš„å€¼ä¼šå˜æˆä¸€ä¸ªå‡½æ•° ç†è§£äº†ä¸Šé¢ä½ ä¹Ÿå°±ä¸éš¾ç†è§£æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾ç”¨ fmap å¾—åˆ° Just (1+) haskell ghci\u003e let justF = fmap (+) $ Just 1 ghci\u003e :t justF justF :: Num a =\u003e Maybe (a -\u003e a) ç°åœ¨è®¾æƒ³ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå€¼ Just 2 haskell ghci\u003e :t Just 2 Just 2 :: Num a =\u003e Maybe a é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½å¦ä»¥æŸç§æ–¹å¼ç»“åˆ Just (1+) å’Œ Just 2 å¾—åˆ° Just (1+2) = Just 3 å‘¢ï¼Ÿæ¯•ç«Ÿï¼Œè¿™æ˜¯ä¸€ä»¶å¾ˆè‡ªç„¶çš„äº‹æƒ… ä½ ä¼šå‘ç°æ— æ³•ç”¨ fmap åšåˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸º fmap èƒ½ç”¨æ¥ map çš„å‡½æ•°çš„ç±»å‹æ˜¯ a -\u003e b ï¼Œæ˜¯ä¸€ä¸ªæ™®é€šçš„ä¸€å…ƒå‡½æ•°ï¼Œä½†ç°åœ¨å‡½æ•°åœ¨ Functor é‡Œé¢ï¼ˆMaybe (a -\u003e a) è€Œä¸æ˜¯ a -\u003e aï¼‰ã€‚é‚£ä¹ˆï¼Œå¦‚æœå­˜åœ¨è¿™ä¹ˆä¸€ä¸ªæ“ä½œç¬¦ magicOperatorï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æ¨å¯¼å®ƒçš„ç±»å‹ç­¾åï¼Œä¸éš¾æ¨å‡ºï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™æ · ä¿¡æ¯ ä¸€å…ƒå‡½æ•°ï¼ˆUnary Functionï¼‰ï¼Œæ„æ€æ˜¯åªæœ‰ 1 ä¸ªå…¥å‚çš„å‡½æ•° haskell magicOperator :: Maybe (a -\u003e b) -\u003e Maybe a -\u003e Maybe b æŠ€å·§ è™½ç„¶æ— æ³•ç›´æ¥ç”¨ fmapï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ Pattern Matching å°† Just é‡Œé¢çš„å‡½æ•°æå–å‡ºæ¥å†ç”¨ fmap haskell apply Nothing _ = Nothing apply (Just f) Nothing = Nothing apply (Just f) (Just v) = fmap f (Just v) ä½†å…¶ä»–çš„ Functor ç±»å‹ä¸ä¸€å®šæ”¯æŒä½ ç”¨ Pattern Matching åšæå– :( å¦‚æœå°† Maybe æ›¿æ¢ä¸ºä¸€ä¸ªæŠ½è±¡çš„ type constructor fï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° haskell magicOperator :: f (a -\u003e b) -\u003e f a -\u003e f b æ­å–œä½ ï¼Œä½ åˆšåˆšè‡ªå·±æ¨å¯¼å‡ºäº† Applicative Functor çš„ \u003c*\u003e æ“ä½œç¬¦ å‰é¢æˆ‘ä»¬åªè€ƒè™‘ map å‡½æ•°å…¥å‚ä¸º 1 ä¸ªçš„åœºæ™¯ï¼Œç°åœ¨æ¥è€ƒè™‘ n ä¸ªå…¥å‚ çš„åœºæ™¯ï¼Œç”¨å‡½æ•° g è¡¨ç¤º map å‡½æ•°ï¼Œå®ƒçš„ç±»å‹ç­¾åæ˜¯ haskell g :: t1 -\u003e t2 -\u003e t3 -\u003e ... -\u003e tn -\u003e t å‡è®¾æˆ‘ä»¬æœ‰ä¸€å †çš„ Functor xiï¼Œæ¯ä¸€ä¸ª xi çš„ç±»å‹éƒ½æ˜¯ f tiï¼Œå› ä¸º Haskell Function çš„å‡½æ•°éƒ½æ˜¯ Currying Functionsï¼Œå¯ä»¥å…ˆä» fmap g x1 å¼€å§‹æ¨å¯¼ haskell -- Note that -- 1. fmap :: (a -\u003e b) -\u003e f a -\u003e f b -- 2. g :: t1 -\u003e t2 -\u003e t3 -\u003e ... -\u003e tn -\u003e t -- 3. x1 :: f t1 fmap g x1 :: f (t2 -\u003e t3 -\u003e ... -\u003e tn -\u003e t) æ¥ä¸‹æ¥å¯ä»¥å°è¯•æ¨å¯¼ fmap g x1 x2ï¼Œä½†å¾ˆå¿«ä¼šå‘ç°ï¼Œç±»å‹å¯¹ä¸ä¸Š haskell fmap g x1 :: f (t2 -\u003e t3 -\u003e ... -\u003e tn -\u003e t) x2 :: f t2 æ˜¾ç„¶ï¼Œè¿™é‡Œåº”è¯¥ç”¨ Applicative Functor çš„ \u003c*\u003eï¼Œæ­£ç¡®çš„å½¢å¼åº”è¯¥æ˜¯ haskell fmap g x1 \u003c*\u003e x2 \u003c*\u003e x3 \u003c*\u003e x4 \u003c*\u003e ... \u003c*\u003e xn -- or, more simpler g \u003c$\u003e x1 \u003c*\u003e x2 \u003c*\u003e x3 \u003c*\u003e x4 \u003c*\u003e ... \u003c*\u003e xn æ³¨æ„ æ‰€ä»¥ç»“è®ºæ˜¯ï¼šæˆ‘ä»¬éœ€è¦ Applicative Functor çš„ \u003c*\u003eï¼Œå› ä¸ºæœ‰çš„ Functor é‡Œé¢æ˜¯å‡½æ•°ï¼Œæœ‰çš„ Functor é‡Œé¢æ˜¯å€¼ã€‚\u003c*\u003e å¯ä»¥å°†ä¸€ä¸ª Functor é‡Œé¢çš„å‡½æ•° apply åœ¨å¦å¤–ä¸€ä¸ª Functor çš„å€¼ä¸Šï¼Œæ‰€ä»¥ \u003c*\u003e èµ·åˆ°äº†Function Application çš„ä½œç”¨ ","date":"2024-10-20","objectID":"/zh-cn/why-applicative-functor/:1:0","series":null,"tags":["Haskell","Functional-Programming"],"title":"ä¸ºä»€ä¹ˆéœ€è¦ Applicative Functor","uri":"/zh-cn/why-applicative-functor/#ä¸ºå•¥éœ€è¦-applicative-functor"},{"categories":["Programming-Languages"],"content":" ä»€ä¹ˆæ˜¯ Applicative Functor è­¦å‘Š é™¤äº†æ»¡è¶³ä¸‹é¢çš„å®šä¹‰ä¹‹å¤–ï¼ŒApplicative Functor è¿˜åº”è¯¥æ»¡è¶³ Haskell Applicative Laws ç°åœ¨çŸ¥é“ Applicative Functor çš„ \u003c*\u003e æ˜¯ç”¨æ¥åš Function Application çš„äº†ï¼Œæ¥çœ‹ä¸€ä¸‹ Applicative çš„å®šä¹‰ haskell class (Functor f) =\u003e Applicative f where pure :: a -\u003e f a (\u003c*\u003e) :: f (a -\u003e b) -\u003e f a -\u003e f b å…ˆçœ‹ pure å‡½æ•°ï¼Œçœ‹å‡½æ•°ç­¾åå°±å¾ˆå¥½ç†è§£ï¼Œa -\u003e f aï¼Œåªæ˜¯æŠŠä¸€ä¸ªæ™®é€šçš„å€¼ a æ”¾åˆ°äº† Applicative Functor é‡Œé¢ï¼Œæœ€ç›´è§‚çš„åº”ç”¨å°±æ˜¯å°†ä¸€ä¸ªå‡½æ•°æ”¾åˆ° Applicative Functor é‡Œé¢ã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ haskell fmap g x1 \u003c*\u003e x2 \u003c*\u003e x3 \u003c*\u003e x4 \u003c*\u003e ... \u003c*\u003e xn -- or, more simpler g \u003c$\u003e x1 \u003c*\u003e x2 \u003c*\u003e x3 \u003c*\u003e x4 \u003c*\u003e ... \u003c*\u003e xn å¦‚æœç”¨ pure çš„è¯ï¼Œä¹Ÿå¯ä»¥è¿™ä¹ˆå†™ haskell pure g \u003c*\u003e x1 \u003c*\u003e x2 \u003c*\u003e x3 \u003c*\u003e x4 \u003c*\u003e ... \u003c*\u003e xn \u003c*\u003e åœ¨å‰é¢æˆ‘ä»¬è‡ªå·±æ¨å¯¼è¿‡ï¼Œå«ä¹‰å·²ç»æ¸…æ™°äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿° è®©æˆ‘ä»¬æ¥çœ‹ Applicative Functor çš„ä¸€ä¸ªä¾‹å­ï¼ŒMaybe ç±»å‹å…¶å®å°±æ˜¯ä¸€ä¸ª Applicative Functor haskell instance Applicative Maybe where pure = Just (Just f) \u003c*\u003e (Just x) = Just (f x) _ \u003c*\u003e _ = Nothing ","date":"2024-10-20","objectID":"/zh-cn/why-applicative-functor/:2:0","series":null,"tags":["Haskell","Functional-Programming"],"title":"ä¸ºä»€ä¹ˆéœ€è¦ Applicative Functor","uri":"/zh-cn/why-applicative-functor/#ä»€ä¹ˆæ˜¯-applicative-functor"},{"categories":["Programming-Languages"],"content":" $, \u003c$\u003e, \u003c*\u003eç°åœ¨è®©æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ 3 ä¸ªéƒ½è¡¨è¾¾äº† Function Application çš„æ“ä½œç¬¦ haskell ($) :: (a -\u003e b) -\u003e a -\u003e b (\u003c$\u003e) :: Functor f =\u003e (a -\u003e b) -\u003e f a -\u003e f b (\u003c*\u003e) :: Applicative f =\u003e f (a -\u003e b) -\u003e f a -\u003e f b å…¶ä¸­ ($) æ˜¯æ™®é€šçš„å‡½æ•°è°ƒç”¨ï¼Œå°†ä¸€ä¸ªæ™®é€šçš„ä¸€å…ƒå‡½æ•°åº”ç”¨åœ¨ä¸€ä¸ªæ™®é€šçš„å€¼ä¸Šï¼Œä½†é€šå¸¸æˆ‘ä»¬ä¸ä¼šå†™ f $ x è€Œæ˜¯ç›´æ¥å†™ f x \u003c$\u003e æ˜¯ fmap çš„ä¸­ç¼€å½¢å¼ï¼Œå°†ä¸€ä¸ªæ™®é€šçš„ä¸€å…ƒå‡½æ•°åº”ç”¨åœ¨ä¸€ä¸ª Functor ä¸Š \u003c*\u003e æ˜¯ Applicative Functor çš„æ“ä½œç¬¦ï¼Œå°†ä¸€ä¸ªæ™®é€šçš„ä¸€å…ƒå‡½æ•° lift åˆ° Applicative Functor é‡Œï¼Œç„¶ååº”ç”¨åœ¨ä¸€ä¸ª Functor ä¸Š ","date":"2024-10-20","objectID":"/zh-cn/why-applicative-functor/:3:0","series":null,"tags":["Haskell","Functional-Programming"],"title":"ä¸ºä»€ä¹ˆéœ€è¦ Applicative Functor","uri":"/zh-cn/why-applicative-functor/#--"},{"categories":["Programming-Languages"],"content":" æ€»ç»“æœ¬æ–‡è°ˆåˆ°äº†ä¸ºä»€ä¹ˆæœ‰äº† Functorï¼Œæˆ‘ä»¬è¿˜éœ€è¦ Applicative Functorã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒApplicative Functor æœ€å¤§çš„ç”¨å¤„æ˜¯æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å°†ä»»ä½•ä¸€ä¸ªæ™®é€šå‡½æ•° lift åˆ° Functor é‡Œé¢ï¼Œç„¶åç”¨ \u003c*\u003e åš Function Application ","date":"2024-10-20","objectID":"/zh-cn/why-applicative-functor/:4:0","series":null,"tags":["Haskell","Functional-Programming"],"title":"ä¸ºä»€ä¹ˆéœ€è¦ Applicative Functor","uri":"/zh-cn/why-applicative-functor/#æ€»ç»“"},{"categories":["Vim-Neovim","Git"],"content":"ä»‹ç»äº†å¦‚ä½•åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitiveï¼Œå¯¹å¸¸è§çš„ git å·¥ä½œæµéƒ½è¿›è¡Œäº†ä»‹ç»","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/"},{"categories":["Vim-Neovim","Git"],"content":" å¼•è¨€æœ€è¿‘åœ¨ä½¿ç”¨ Git + Neovim çš„æ—¶å€™ï¼Œå‘ç°æˆ‘çš„å·¥ä½œæµè¿˜æ˜¯æœ‰ä¸€äº›ä¸é‚£ä¹ˆé¡ºç•…çš„åœ°æ–¹ã€‚æˆ‘ä¹ æƒ¯æ€§é€€å‡º Neovimï¼Œç„¶ååœ¨å‘½ä»¤è¡Œå†™ Git ç›¸å…³çš„å‘½ä»¤ï¼Œå¹¶ä¸”åœ¨æäº¤ä»£ç å˜æ›´å‰æˆ‘ä¹ æƒ¯ç”¨ delta æŸ¥çœ‹ diff ä¿¡æ¯ã€‚ä¸ºäº†å‡å°‘è¦æ‰“çš„å­—ç¬¦ï¼Œæˆ‘è¿˜å¼€å¯äº† Oh My Zsh çš„ git æ’ä»¶ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ç”¨ä¸€å †ç¼©å†™äº†ï¼Œæ¯”å¦‚ ga = git addã€gcmsg = git commit -m ä¸é¡ºç•…ä¸»è¦çš„åŸå› æ˜¯æˆ‘å‘ç°æˆ‘ç»å¸¸åœ¨ Neovim å’Œå‘½ä»¤è¡Œä¹‹é—´åˆ‡æ¢ï¼Œå°±åƒè¿™æ · flowchart i(ç¼–è¾‘ä»£ç ) ---\u003e|é€€å‡º Neovim| j(ç”¨ git diff çœ‹ä¸‹ diff ä¿¡æ¯) ---\u003e k(å‘ç°æœ‰ç‚¹å°é—®é¢˜ï¼Œéœ€è¦ä¿®æ”¹) k ---\u003e|æ‰“å¼€ Neovim| i å°±åœ¨è¿™æ—¶æˆ‘æƒ³èµ·äº†èººåœ¨æˆ‘æ’ä»¶åˆ—è¡¨çš„ vim-fugitiveï¼Œæˆ‘è®°å¾—å®ƒåœ¨ GitHub ä¸»é¡µ è¯´è¿‡ itâ€™s â€œso awesome, it should be illegalâ€ï¼Œå½“æ—¶æ²¡æœ‰æ·±ç©¶ã€‚äºæ˜¯ä»Šå¤©æˆ‘ç»è¿‡ä¸€ç•ªé’»ç ”ä¹‹åï¼Œä¸‹é¢æ˜¯æˆ‘æ€»ç»“çš„ä¸€äº›ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:1:0","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#å¼•è¨€"},{"categories":["Vim-Neovim","Git"],"content":" Workflows","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:0","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#workflows"},{"categories":["Vim-Neovim","Git"],"content":" Preliminaryå¤§å¤šæ•°å‘½ä»¤è¡Œçš„çš„ Git å‘½ä»¤ï¼Œä½ éƒ½å¯ä»¥æ›¿æ¢ä¸º :Git ...ï¼Œæ¯”å¦‚ git blame å°±æ˜¯ :Git blameï¼Œå…¶ä¸­ :Git å¯ä»¥ç¼©å†™ä¸º :G ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:1","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#preliminary"},{"categories":["Vim-Neovim","Git"],"content":" Git statusç”¨ vim-fugitive æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€éå¸¸ç®€å•ï¼Œç›´æ¥ç”¨ text :G è¾“å‡ºç±»ä¼¼ä¸‹é¢è¿™æ · text Head: main Merge: origin/main Help: g? Untracked (1) ? foo.py Staged (1) A bar.py Unpushed to origin/main (1) 7c08152 add .gitignore å…¶ä¸­ Untracked è¡¨ç¤ºæ–°æ–‡ä»¶ï¼Œè¿˜æ²¡æœ‰ç”¨ git ç®¡ç† Staged è¡¨ç¤ºæ·»åŠ åˆ° staging area çš„æ–‡ä»¶ Unpushed to origin/main è¡¨ç¤ºæœ¬åœ°çš„ Commit æ¯ä¸ªæ–‡ä»¶å‰é¢æœ‰ä¸€ä¸ªæ–‡ä»¶çŠ¶æ€ç ï¼Œä¸åŒçš„çŠ¶æ€ç çš„å«ä¹‰å¹¶ä¸åŒ '' unmodified M modified T file type changed A added D deleted R renamed c copied U updated but unmerged ? untracked ! ignored ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:2","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#git-status"},{"categories":["Vim-Neovim","Git"],"content":" Git add \u0026 git commitè¿˜æ˜¯ç”¨å‰é¢çš„ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æŠŠ foo.py æ·»åŠ åˆ° staging area é‡Œé¢ï¼Œå°±å°†å…‰æ ‡åœåœ¨ foo.py ä¸Šï¼Œç„¶åæŒ‰ä¸‹ s text Head: main Merge: origin/main Help: g? Untracked (1) ? foo.py Staged (1) A bar.py Unpushed to origin/main (1) 7c08152 add .gitignore ä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å˜æˆäº†ä¸‹é¢è¿™æ · text Head: main Merge: origin/main Help: g? Staged (2) A bar.py A foo.py Unpushed to origin/main (1) 7c08152 add .gitignore è¦æ’¤é”€ staging ä¹Ÿå¾ˆå®¹æ˜“ï¼ŒæŒ‰ u å°±è¡Œï¼Œè¿™ä¸ªè·Ÿ Vim çš„æ“ä½œæ˜¯ä¸€è‡´çš„ï¼Œå¾ˆå¥½è®° æœ€åï¼Œä¿®æ”¹å®Œæ–‡ä»¶ä¹‹åï¼Œç§»åŠ¨å…‰æ ‡åˆ°æ–‡ä»¶ä¸Šï¼ŒæŒ‰ ccï¼Œå°±ä¼šæ‰§è¡Œ git commitï¼Œå¯ä»¥çœ‹åˆ°å¼¹å‡ºäº†ä¸€ä¸ª buffer è®©æˆ‘ä»¬å¡«å†™ commit messageï¼Œä¿å­˜é€€å‡º commit å°±æ·»åŠ æˆåŠŸäº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸‹é¢è¿™äº›å¸¸ç”¨çš„å‘½ä»¤ caï¼Œca = git commit --amendï¼Œå°†ä¿®æ”¹åˆå¹¶åˆ° last commit å¹¶ä¸”é‡æ–°å¡«å†™ commit messageï¼Œ ceï¼Œca = git commit --amend --no-editï¼Œå°†ä¿®æ”¹åˆå¹¶åˆ° last commit å¹¶ä¸”ä¿æŒ commit message ä¸å˜ cwï¼Œç”¨æ¥ä¿®æ”¹ last commit message å°†å…‰æ ‡åœç•™åœ¨ untracked file ä¸Šï¼Œç„¶åæŒ‰ä¸‹ Iï¼Œå°±å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„çŠ¶æ€å˜æˆäº† Aã€‚æœ¬è´¨æ˜¯å¸®æˆ‘ä»¬æ‰§è¡Œäº† git add --intent-to-addã€‚git add --intent-to-add çš„å¥½å¤„æ˜¯æœ¬æ¥ untracked file ä¹Ÿå¯ä»¥çœ‹ diff äº†1ï¼Œæ™®é€šçš„ git add åšä¸åˆ°è¿™ç‚¹ï¼Œå‰è€…å¯¹åº” git status çš„ Changes not staged for commitï¼Œåè€…å¯¹åº” Changes to be committedï¼Œå¯ä»¥ç”¨ git status éªŒè¯ä¸€ä¸‹ ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:3","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#git-add--git-commit"},{"categories":["Vim-Neovim","Git"],"content":" See Git diffå¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½æ˜¯ï¼ŒæŸ¥çœ‹æ–‡ä»¶çš„ diff ä¿¡æ¯çœ‹æˆ‘ä»¬å…·ä½“ä¿®æ”¹äº†ä»€ä¹ˆï¼Œæ¯”å¦‚ä¸‹é¢çš„ text Head: main Merge: origin/main Help: g? Staged (2) A bar.py A foo.py Unpushed to origin/main (1) 7c08152 add .gitignore å¦‚æœè¯¥æ–‡ä»¶çš„ä»£ç å˜æ›´å¹¶ä¸å¤šï¼Œé‚£ä¹ˆç›´æ¥å°†å…‰æ ‡åœåœ¨æ–‡ä»¶ä¸ŠæŒ‰ä¸‹ = å°±å¯ä»¥çœ‹åˆ° diff ä¿¡æ¯äº† æŠ€å·§ å†æ¬¡æŒ‰ä¸‹ = å°±å¯ä»¥å°† diff ä¿¡æ¯å…³é—­ text Head: main Merge: origin/main Help: g? Staged (2) A bar.py A foo.py @@ -0,0 +1,2 @@ +def main(): + print(\"Please enter a integer\") Unpushed to origin/main (1) 7c08152 add .gitignore ä½†å¦‚æœè¯¥æ–‡ä»¶çš„ä»£ç å˜æ›´å¾ˆå¤§ï¼Œé‚£ä¹ˆå¯èƒ½ side-by-side çš„ diff ä¿¡æ¯å±•ç¤ºæ›´åˆç†ï¼Œæ­¤æ—¶åªéœ€è¦å°†å…‰æ ‡åœåœ¨æ–‡ä»¶ä¸ŠæŒ‰ä¸‹ dv å°±å¯ä»¥ï¼Œ æŠ€å·§ å¦‚æœç”¨ dv çœ‹ diff ä¿¡æ¯ï¼Œé‚£ä¹ˆé™¤äº†çœ‹ä¹‹å¤–ï¼Œä½ è¿˜å¯ä»¥è¿›è¡Œä¿®æ”¹ ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:4","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#see-git-diff"},{"categories":["Vim-Neovim","Git"],"content":" Git logç›´æ¥ç”¨ä¸‹é¢çš„å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ Commit çš„ä¿¡æ¯ text :G log å¯ä»¥çœ‹åˆ°æ–°æ‰“å¼€çš„ buffer é‡Œå±•ç¤ºäº†å¦‚ä¸‹çš„ä¿¡æ¯ text commit 23ffed83d3ac5b3b7de37ecb29b55e5cf35b5f65 Author: MartinLwx \u003c*****************\u003e Date: Thu Oct 10 22:07:02 2024 +0800 add bar.py commit 7c081527a2dbadafbaf7907c5b547afc9e725ac9 Author: MartinLwx \u003c*****************\u003e Date: Thu Oct 10 22:05:54 2024 +0800 add .gitignore å°†å…‰æ ‡åœç•™åœ¨ commit ä¸Š æŒ‰ä¸‹ o é”® å°±å¯ä»¥åœ¨æ–°çš„ buffer çœ‹åˆ°è¿™ä¸ª commit çš„è¯¦ç»†ä¿¡æ¯ æŠ€å·§ ç”¨ ]] å’Œ [[ å¯ä»¥å¿«é€Ÿåœ¨ä¸åŒçš„ commit ä¹‹é—´ç§»åŠ¨ ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:5","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#git-log"},{"categories":["Vim-Neovim","Git"],"content":" Git blameè¿™é‡Œå•ç‹¬æŒ‘ git blame å‡ºæ¥æ˜¯å› ä¸º vim-fugitive çš„ git blame å±•ç¤ºéå¸¸ç›´è§‚ï¼Œå·¦è¾¹æ¸…æ¥šå±•ç¤ºäº†æ˜¯ä»€ä¹ˆ commit å¼•å…¥çš„å˜æ›´ï¼Œä»¥åŠæ˜¯å“ªä¸ªä½œè€…å¼•å…¥çš„ã€‚å¯¹åº”çš„å‘½ä»¤æ˜¯ :G blame text 23ffed83 1 (MartinLwx 2024-10-10 22:07:02 +0800 1) def main(): 23ffed83 2 (MartinLwx 2024-10-10 22:07:02 +0800 2) print(\"Please enter a integer\") æ›´å‰å®³çš„æ˜¯ï¼Œè¿™ä¸ª :G blame çš„è¾“å‡ºæ˜¯å¯ä»¥äº¤äº’çš„ï¼Œæ¯”å¦‚ä½ æƒ³è¦å±•ç¤º commit æ›´è¯¦ç»†çš„ä¿¡æ¯ï¼Œåªéœ€è¦å°†å…‰æ ‡åœç•™åœ¨ commit ä¸Šï¼Œç„¶åæŒ‰ä¸‹ o ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:6","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#git-blame"},{"categories":["Vim-Neovim","Git"],"content":" Split code change into multiple commitså¾ˆå¤šæ—¶å€™ï¼Œä½ ä¿®æ”¹äº†ä»£ç å®Œæˆäº†å¤šä¸ªåŠŸèƒ½çš„å¼€å‘æˆ–è€…æ˜¯ Bug ä¿®å¤ï¼Œä½†æ˜¯ä½ ä¸­é€”å¿˜è®°ä¸€è¾¹æ”¹ä¸€è¾¹æäº¤ commit äº†ï¼Œé‚£ä¹ˆè¦å¦‚ä½•æ‹†åˆ†ä¸åŒçš„ä»£ç å˜æ›´åˆ†åˆ«æäº¤ commitï¼Ÿï¼ˆæ¯•ç«Ÿä¸€ä¸ª commit è§£å†³ä¸€ä¸ªé—®é¢˜æ˜¯å¥½çš„å®è·µï¼‰ å…ˆæ¥çœ‹ foo.py æ–‡ä»¶ï¼Œå‡è®¾å®ƒæœ¬æ¥æ˜¯è¿™æ ·å­çš„ python def main(): print(\"Please enter a integer\") ç„¶åæˆ‘ä»¬åšäº†å¦‚ä¸‹çš„ä»£ç å˜æ›´ï¼Œå¹¶ä¸”å‡è®¾æ¯ä¸ªåˆ†æ”¯ä»£è¡¨ä¸€ä¸ªç‰¹æ€§çš„æ·»åŠ æˆ–è€…æ˜¯åŠŸèƒ½çš„ä¿®å¤ python def main(): i = input(\"Please enter a integer\") if i == 0: print(\"i == 0\") elif i == 1: print(\"i == 1\") else: print(\"i not in [0, 1]\") å°†å…‰æ ‡åœç•™åœ¨æ–‡ä»¶ä¸Šï¼ŒæŒ‰ = å°±å¯ä»¥çœ‹åˆ° diff ä¿¡æ¯ text Head: main Push: origin/main Help: g? Unstaged (1) M foo.py @@ -1,2 +1,8 @@ def main(): i = input(\"Please enter a integer\") + if i == 0: + print(\"i == 0\") + elif i == 1: + print(\"i == 1\") + else: + print(\"i not in [0, 1]\") Unpushed to * (3) d2d951f add foo.py 23ffed8 add bar.py 7c08152 add .gitignore æ¥ä¸‹æ¥ç”¨ V é€‰ä¸­å¦‚ä¸‹ 2 è¡Œ text + if i == 0: + print(\"i == 0\") ç„¶åæŒ‰ä¸‹ s å•ç‹¬ stage éƒ¨åˆ†ä»£ç å˜æ›´ï¼Œæ­¤æ—¶ä¸‹æ–¹å°±ä¼šå‡ºç°ä¸€ä¸ª Staged çš„æ–‡ä»¶ text Head: main Push: origin/main Help: g? Unstaged (1) M foo.py @@ -2,3 +2,7 @@ def main(): i = input(\"Please enter a integer\") if i == 0: print(\"i == 0\") + elif i == 1: + print(\"i == 1\") + else: + print(\"i not in [0, 1]\") Staged (1) M foo.py Unpushed to * (3) d2d951f add foo.py 23ffed8 add bar.py 7c08152 add .gitignore ç”¨ cc æäº¤ commit å³å¯ text Head: main Push: origin/main Help: g? Unstaged (1) M foo.py @@ -2,3 +2,7 @@ def main(): i = input(\"Please enter a integer\") if i == 0: print(\"i == 0\") + elif i == 1: + print(\"i == 1\") + else: + print(\"i not in [0, 1]\") Unpushed to * (4) c46474f add i == 0 d2d951f add foo.py 23ffed8 add bar.py 7c08152 add .gitignore å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ–°æ·»åŠ äº†ä¸€ä¸ª commit c46474f add i == 0ï¼Œè¿™ä¸ªæ­¥éª¤å¯ä»¥å¤šæ¬¡æ‰§è¡Œ æŠ€å·§ ]c å’Œ [c å¯ä»¥åœ¨ä¸åŒçš„ diff ä¿¡æ¯ä¹‹é—´å¿«é€Ÿç§»åŠ¨ å¦‚æ³•ç‚®åˆ¶ï¼Œå°±å®Œæˆäº†ä»£ç å˜æ›´çš„æ‹†åˆ† ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:7","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#split-code-change-into-multiple-commits"},{"categories":["Vim-Neovim","Git"],"content":" Git rebase -igit rebase -i æ˜¯æˆ‘å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥å°è¯•å°†åˆšæ‰æ‹†åˆ†çš„ 3 ä¸ª commit åˆå¹¶ text 68081e9 add else branch f9dfc93 add i == 1 c46474f add i == 0 å…ˆç”¨ :G log å±•å¼€ commit history text commit 68081e928ad8dbbafc8e20ebefaeb7f3dad968bf Author: MartinLwx \u003c****************\u003e Date: Thu Oct 10 23:10:14 2024 +0800 add else branch commit f9dfc93d9846a3cec6220b0f91b8e4a84dcb9367 Author: MartinLwx \u003c****************\u003e Date: Thu Oct 10 22:57:04 2024 +0800 add i == 1 commit c46474f9cf8c34071fa95f797e94ffc75b1ee3e2 Author: MartinLwx \u003c****************\u003e Date: Thu Oct 10 22:55:03 2024 +0800 add i == 0 ç„¶åå°†å…‰æ ‡åœç•™åœ¨ add i == 0 è¿™ä¸€ä¸ªå¯¹åº”çš„ commit ä¸Šï¼ŒæŒ‰ä¸‹ riï¼ˆHintï¼šri = rebase -iï¼‰ï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ text r c46474f add i == 0 s f9dfc93 add i == 1 s 68081e9 add else branch åˆå¹¶ä¹‹å text Head: main Push: origin/main Help: g? Unpushed to * (4) c814dce merge 3 commits d2d951f add foo.py 23ffed8 add bar.py 7c08152 add .gitignore ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:8","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#git-rebase--i"},{"categories":["Vim-Neovim","Git"],"content":" Resolve merge conflictsæœ€åçœ‹ä¸€ä¸‹ï¼Œåˆ†æ”¯åˆå¹¶çš„æ—¶å€™è¦å¦‚ä½•ä½¿ç”¨ vim-fugitiveï¼Œå‡è®¾åœ¨å¦å¤–ä¸€ä¸ªå«ä½œ feature çš„åˆ†æ”¯ä¸Šï¼Œfoo.py ä»£ç é•¿è¿™æ ·å­ text def main(): i = input(\"Please enter a integer\") if i == 0: i = i + 1 else: i = i + 2 æˆ‘ä»¬åœ¨ main åˆ†æ”¯ä¸‹ç”¨ text :G merge feature æ­¤æ—¶ç”¨ :G çœ‹åˆ°çš„ä¼šæ˜¯è¿™æ ·å­ text Head: main Push: origin/main Help: g? Unstaged (1) U foo.py Staged (1) U foo.py Unpushed to * (6) 21055dc add else branch f9dfc93 add i == 1 c46474f add i == 0 d2d951f add foo.py 23ffed8 add bar.py 7c08152 add .gitignore å…¶ä¸­æˆ‘ä»¬éœ€è¦å…³æ³¨çš„æ˜¯ Unstaged é‡Œé¢çš„æ–‡ä»¶ï¼Œéœ€è¦ä¿®æ”¹è¿™äº›æ–‡ä»¶è§£å†³åˆå¹¶å†²çªã€‚ä¸ºäº†è§£å†³æ–¹ä¾¿å†²çªï¼Œå…‰æ ‡åœ¨æ–‡ä»¶ä¸Šåœç•™ç„¶åæŒ‰ä¸‹ dvï¼Œå°±å¯ä»¥çœ‹åˆ°æ‰“å¼€äº† 3 ä¸ª buffer å·¦è¾¹çš„æ˜¯å‘èµ·åˆå¹¶çš„åˆ†æ”¯çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ main åˆ†æ”¯ ä¸­é—´çš„æ˜¯å†²çªçš„ä»£ç  å³è¾¹çš„æ˜¯è¢«åˆå¹¶çš„åˆ†æ”¯çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯ feature åˆ†æ”¯ åªéœ€è¦åœ¨ä¸­é—´çš„ buffer ä¿®æ”¹å¥½ä»£ç å†²çªï¼Œç”¨ :Gwrite å°±å®Œæˆäº†æ–‡ä»¶çš„ä¿å­˜ä»¥åŠå°†å…¶æ·»åŠ åˆ° staging area é‡Œ ä½†æœ‰æ—¶å€™ï¼Œä½ å¯èƒ½åªæ˜¯æƒ³è¦é‡‡ç”¨æŸä¸€ä¸ªåˆ†æ”¯çš„ä»£ç ï¼Œé‚£ä¹ˆåœ¨ä¸­é—´ä¿®æ”¹å†²çªæ¯”è¾ƒç¹çè€Œä¸”æ²¡å•¥æ„ä¹‰ï¼Œè¿™ä¸ªæ—¶å€™ç›´æ¥ç§»åŠ¨åˆ°å·¦è¾¹çš„ buffer æˆ–è€…å³è¾¹çš„ bufferï¼ˆå–å†³äºä½ æƒ³è¦å“ªä¸€ä¸ªåˆ†æ”¯çš„ä»£ç ï¼‰ï¼Œç„¶åç”¨ :Gwrite! è¿›è¡Œæ–‡ä»¶ä¿å­˜ä»¥åŠå°†å…¶æ·»åŠ åˆ° staging area é‡Œ æ— è®ºæ˜¯ä¸Šé¢å“ªä¸€ç§æƒ…å†µï¼Œæœ€åéƒ½éœ€è¦ç”¨ cc æäº¤ä¸€ä¸‹ commitï¼Œåˆ†æ”¯å°±åˆå¹¶å¥½äº† text Head: main Push: origin/main Help: g? Unpushed to * (8) d23d66e Merge branch 'feature' 6ad1330 nonsense update 21055dc add else branch f9dfc93 add i == 1 c46474f add i == 0 d2d951f add foo.py 23ffed8 add bar.py 7c08152 add .gitignore ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:2:9","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#resolve-merge-conflicts"},{"categories":["Vim-Neovim","Git"],"content":" æ€»ç»“ä»¥ä¸Šå°±æ˜¯æˆ‘å‘ç°çš„ vim-fugitive çš„å·¥ä½œæµï¼Œå¹¶ä¸”ä½¿ç”¨äº†æœ‰ä¸€ä¼šã€‚å¯¹äºæˆ‘è€Œè¨€ï¼Œæˆ‘å‘ç°ç¡®å®ä¹‹å‰çš„ä¸é¡ºç•…æ„Ÿæ¶ˆå¤±äº†ï¼Œæˆ‘æ„Ÿè§‰åœ¨ Neovim é‡Œé¢ç”¨ Git æ›´åŠ é«˜æ•ˆäº†ï¼Œå› ä¸ºæˆ‘ä¸å†éœ€è¦é¢‘ç¹åœ°åœ¨ Neovimã€Terminal ä¹‹é—´è¿›è¡Œä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚è€Œé¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¯æ˜¯ä¼šé™ä½ç”Ÿäº§åŠ›çš„2 https://stackoverflow.com/questions/24329051/what-does-git-add-intent-to-add-or-n-do-and-when-should-it-be-usedÂ â†©ï¸ https://www.software.com/devops-guides/context-switchingÂ â†©ï¸ ","date":"2024-10-11","objectID":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/:3:0","series":null,"tags":["Git","Vim","Neovim"],"title":"åœ¨ Neovim é‡Œé¢ä½¿ç”¨ vim-fugitive çš„å·¥ä½œæµ","uri":"/zh-cn/my-workflow-of-using-vim-fugitive-in-neovim/#æ€»ç»“"},{"categories":["Program-Analysis"],"content":"ä»‹ç»äº† Tree-sitter çš„åŸºæœ¬å·¥ä½œåŸç†ï¼Œè¯¦ç»†ä»‹ç»äº† Query çš„ä½¿ç”¨","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/"},{"categories":["Program-Analysis"],"content":" å¼•è¨€Tree-sitter æ˜¯ä¸€ä¸ª Parse Generatorï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥ç”Ÿæˆ Parser çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒè¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä»Šå¤©è¦èŠåˆ°çš„ Tree-sitter Query ï¼ŒQuery æä¾›äº†ä¸€å¥—åŸºäº S è¡¨è¾¾å¼çš„ DSLï¼ˆDomain Specific Languageï¼‰ï¼Œå¯ä»¥æŸ¥è¯¢ ASTï¼Œè·å¾—ä½ æƒ³è¦çš„ä¿¡æ¯ï¼Œåœ¨æ­£å¼å­¦ä¹ å¦‚ä½•ä½¿ç”¨ Query å‰ï¼Œæˆ‘ä»¬å…ˆè®²ä¸€äº›ç›¸å…³çš„èƒŒæ™¯çŸ¥è¯†ï¼Œå¥½è®©è¿™ä¸ªæ–‡ç« å°½é‡æ˜¯ Self-contained çš„ ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:1:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#å¼•è¨€"},{"categories":["Program-Analysis"],"content":" S è¡¨è¾¾å¼ ä¿¡æ¯ å¦‚æœä½ æ›¾ç»å†™è¿‡ Lisp æˆ–è€…æ˜¯å…¶ä»– Lisp æ–¹è¨€ï¼ˆæ¯”å¦‚ Schemeã€Racket ç­‰ï¼‰ï¼Œä½ å¯¹ S è¡¨è¾¾å¼åº”è¯¥å¾ˆç†Ÿæ‚‰ S è¡¨è¾¾å¼çš„å®šä¹‰æ˜¯é€’å½’å¼çš„ï¼Œå®šä¹‰å¦‚ä¸‹ S è¡¨è¾¾å¼ä¸º xï¼Œè¿™é‡Œçš„ x æ˜¯ Atomï¼ŒAtom å°±æ˜¯ä¸å¯å†åˆ†è§£çš„æ„æ€ S è¡¨è¾¾å¼ä¸ä¸ºç©ºï¼Œè€Œæ˜¯ (S1 S2 ... Sn) çš„å½¢å¼ï¼Œå…¶ä¸­ä» S1 åˆ° Sn éƒ½æ˜¯ S è¡¨è¾¾å¼ S è¡¨è¾¾å¼æ˜¯é€’å½’å¼å®šä¹‰çš„ï¼Œæ ‘ä¹Ÿæ˜¯é€’å½’å¼å®šä¹‰çš„ï¼Œå› æ­¤ S è¡¨è¾¾å¼å¯ä»¥ç”¨æ¥è¡¨ç¤ºæ ‘ï¼Œä»¥ä¸€ä¸ªç®€å•çš„ AST ä¸ºä¾‹ python + / \\ 1 - / \\ 2 3 ä¸Šé¢çš„ AST å°±æ˜¯ä¸€ä¸ªç®€å•çš„ 1 + (2 - 3)ï¼Œè€Œå®ƒçš„ S è¡¨è¾¾å¼æ˜¯ lisp (+ 1 (- 2 3)) è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ª () é‡Œé¢ï¼Œç¬¬ä¸€ä¸ªæ˜¯çˆ¶èŠ‚ç‚¹ï¼Œå…¶ä»–çš„åˆ™æ˜¯è¿™ä¸ªçˆ¶èŠ‚ç‚¹çš„å­©å­èŠ‚ç‚¹ ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:2:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#s-è¡¨è¾¾å¼"},{"categories":["Program-Analysis"],"content":" AST in Tree-sitterTree-sitter æ”¯æŒç”Ÿæˆå¾ˆå¤šç¼–ç¨‹è¯­è¨€çš„ Parserï¼Œæ¯ä¸€ä¸ªæ”¯æŒçš„ç¼–ç¨‹è¯­è¨€éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ tree-sitter-* GitHub ä»“åº“ï¼Œæ¯”å¦‚ Python çš„å°±æ˜¯ tree-sitter-python æ¯ä¸€ä¸ª tree-sitter-* ä»“åº“é‡Œé¢éƒ½ä¼šæœ‰ä¸€ä¸ª grammar.js æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å¯¹åº”ç¼–ç¨‹è¯­è¨€çš„ AST ç»“æ„ï¼Œä»¥ tree-sitter-python ä¸ºä¾‹ï¼ŒPython é‡Œé¢çš„ for å¾ªç¯è¯­å¥çš„è¯­æ³•æ˜¯è¿™æ ·å­çš„ js for_statement: $ =\u003e seq( optional('async'), 'for', field('left', $._left_hand_side), 'in', field('right', $._expressions), ':', field('body', $._suite), field('alternative', optional($.else_clause)), ), å¦‚æœå¯¹ç¼–è¯‘å™¨æœ‰ä¸€å®šäº†è§£ï¼Œæˆ‘ä»¬ä¸éš¾å°±ä¸éš¾çœ‹å‡º Python çš„ For å¾ªç¯è¯­å¥å¤§æ¦‚æ˜¯è¿™æ ·å­çš„ python [async] for \u003cleft\u003e in \u003cright\u003e: \u003cbody\u003e [\u003celse_clause\u003e] æŠ€å·§ [] è¡¨ç¤ºå¯é€‰é¡¹ï¼Œ\u003c\u003e è¡¨ç¤ºè¿˜æœ‰å¦å¤–çš„ Non-terminalï¼Œå¯ä»¥è¿›ä¸€æ­¥å±•å¼€ çŸ¥é“ Tree-sitter çš„ AST æ˜¯å¦‚ä½•å®šä¹‰å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬å½“ç„¶è¦çŸ¥é“å¦‚ä½•ç”¨ Tree-sitter ç”Ÿæˆçš„ Parser å»ç”Ÿæˆä»£ç çš„ AST æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œï¼Œé¦–å…ˆç”¨ homebrew å®‰è£…å¹¶è¿›è¡Œé…ç½® sh $ brew install tree-sitter $ tree-sitter init-config ç„¶åï¼Œå…‹éš†ä½ è¦åˆ†æçš„ç¼–ç¨‹è¯­è¨€çš„ tree-sitter-* ä»“åº“å¹¶ç”Ÿæˆ Parserï¼Œåé¢è¦ä»¥ Python ä»£ç ä¸ºä¾‹å­ï¼Œå› æ­¤è¿™é‡Œå°±ç”¨ tree-sitter-python ä½œä¸ºä¾‹å­ sh $ git clone git@github.com:tree-sitter/tree-sitter-python.git $ tree-sitter generate # generate a parser in src/parser.c æŠ€å·§ å¦‚æœæƒ³è¦åœ¨ä»»æ„ç›®å½•éƒ½å¯ä»¥ç”¨ tree-sitter è§£æï¼Œé‚£ä¹ˆå°± è°ƒç”¨ tree-sitter init-config ç¡®å®šä½ ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿçš„ tree-sitter é…ç½®æ–‡ä»¶ä½ç½® æ‰“å¼€é…ç½®æ–‡ä»¶æŸ¥çœ‹ parse-directories å­—æ®µçœ‹éƒ½æœ‰å“ªä¸€äº›æ–‡ä»¶å¤¹ å°† tree-sitter-* ä»“åº“æ”¾åˆ°å¯¹åº”æ–‡ä»¶å¤¹ä¸‹ï¼ˆä»»æ„æŒ‘ä¸€ä¸ªï¼‰å³å¯ ç°åœ¨åœ¨åŒä¸ªç›®å½•ä¸‹ï¼Œä½ å°±å¯ä»¥ç”Ÿæˆ Python ä»£ç çš„ AST äº†ï¼Œè®©æˆ‘ä»¬å…ˆå†™ä¸€æ®µç®€å•çš„ Python ä»£ç  python def sum(x: int, y: int) -\u003e int: return x + y sum(1, 2) é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤å°±å¯ä»¥å¾—åˆ° S è¡¨è¾¾å¼çš„ AST äº† sh $ tree-sitter parse foo.py lisp (module [0, 0] - [5, 0] (function_definition [0, 0] - [1, 16] name: (identifier [0, 4] - [0, 7]) parameters: (parameters [0, 7] - [0, 23] (typed_parameter [0, 8] - [0, 14] (identifier [0, 8] - [0, 9]) type: (type [0, 11] - [0, 14] (identifier [0, 11] - [0, 14]))) (typed_parameter [0, 16] - [0, 22] (identifier [0, 16] - [0, 17]) type: (type [0, 19] - [0, 22] (identifier [0, 19] - [0, 22])))) return_type: (type [0, 27] - [0, 30] (identifier [0, 27] - [0, 30])) body: (block [1, 4] - [1, 16] (return_statement [1, 4] - [1, 16] (binary_operator [1, 11] - [1, 16] left: (identifier [1, 11] - [1, 12]) right: (identifier [1, 15] - [1, 16]))))) (expression_statement [4, 0] - [4, 9] (call [4, 0] - [4, 9] function: (identifier [4, 0] - [4, 3]) arguments: (argument_list [4, 3] - [4, 9] (integer [4, 4] - [4, 5]) (integer [4, 7] - [4, 8]))))) å…¶ä¸­ [x1, y1] - [x2, y2] è¿™ä¸ªçš„æ„æ€æ˜¯ï¼Œè¿™ä¸ª AST èŠ‚ç‚¹å¯¹åº”çš„æºç åœ¨æºæ–‡ä»¶çš„ x1 è¡Œåˆ° x2 è¡Œï¼Œy1 åˆ° y2 åˆ—ï¼Œç´¢å¼•ä» 0 å¼€å§‹ï¼Œå·¦é—­å³å¼€ æŠ€å·§ Tree-sitter å®˜æ–¹æä¾›äº†ä¸€ä¸ª Playgroundï¼Œå¯ä»¥ç›´æ¥åœ¨çº¿å°è¯•ï¼Œæœ€å¥½ç”¨çš„åŠŸèƒ½æ˜¯ä½ é¼ æ ‡ç‚¹å‡»æŸä¸ª AST èŠ‚ç‚¹åï¼Œå¯ä»¥é«˜äº®å¯¹åº”çš„æºä»£ç ï¼Œå¾ˆç›´è§‚ ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:3:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#ast-in-tree-sitter"},{"categories":["Program-Analysis"],"content":" Basic Query Syntaxé‚£ä¹ˆå¦‚ä½•åœ¨ AST ä¸­æ‰¾åˆ°è‡ªå·±æ„Ÿå…´è¶£çš„èŠ‚ç‚¹å‘¢ï¼Ÿè¿™å°±æ˜¯ Query è¦åšçš„äº‹æƒ…äº† Query å°±æ˜¯ä¸€ä¸ª S è¡¨è¾¾å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³è¦æ‰¾åˆ° Python ä»£ç é‡Œé¢çš„å‡½æ•°å®šä¹‰ï¼Œå®ƒå¯¹åº”çš„ S è¡¨è¾¾å¼å¦‚ä¸‹ lisp (function_definition) åŒæ—¶ï¼ŒTree-sitter è¿˜å…è®¸æˆ‘ä»¬ è¿”å›è¢«åŒ¹é…åˆ°çš„å†…å®¹ï¼Œä¿å­˜åœ¨ä¸€ä¸ªå˜é‡é‡Œé¢ï¼Œåªéœ€è¦åœ¨ @variable_name æ”¾åœ¨ AST èŠ‚ç‚¹å¯¹åº”çš„ S è¡¨è¾¾å¼çš„åé¢ï¼Œæ¯”å¦‚ lisp (function_definition) @func æŠ€å·§ ç°åœ¨ï¼Œè¢«åŒ¹é…åˆ°çš„ Python å‡½æ•°çš„æºä»£ç éƒ½ä¼šè¢«ä¿å­˜åœ¨ func è¿™ä¸ªå˜é‡é‡Œé¢ï¼Œä½ å¯ä»¥åœ¨ Tree-sitter å®˜æ–¹çš„ Playground é‡Œé¢çœ‹åˆ°åŒ¹é…çš„ç»“æœ æŠ€å·§ åœ¨ Tree-sitter çš„è¯­æ³•æ–‡ä»¶é‡Œé¢ï¼ŒAST èŠ‚ç‚¹åˆ†ä¸º 2 ç§ï¼Œä¸€ç§æ˜¯å¸¦åå­—çš„ï¼ˆNamed AST Nodesï¼‰ï¼Œä¸€ç§æ˜¯åŒ¿åçš„ï¼ˆAnonymous AST Nodesï¼‰ã€‚å¯¹äº Named AST Nodeï¼Œå®ƒåœ¨ AST é‡Œé¢çš„å½¢å¼æ˜¯ï¼šfield_name: S-expression å¦å¤–ï¼ŒTree-sitter è¿˜æ”¯æŒæŒ‡å®š AST èŠ‚ç‚¹å¿…é¡»æœ‰æŸäº›ç±»å‹çš„å­©å­èŠ‚ç‚¹ï¼Œåªéœ€è¦åŠ ä¸Š field: è¿™ç§å‰ç¼€ã€‚æ¯”å¦‚æˆ‘ä»¬è¦æ‰¾æœ‰è¿”å›ç±»å‹å£°æ˜çš„ Python å‡½æ•° lisp (function_definition return_type: (type)) @has_return_type_func ä¹Ÿæ”¯æŒæŒ‡å®š AST èŠ‚ç‚¹ä¸èƒ½æœ‰æŸäº›ç±»å‹çš„å­©å­èŠ‚ç‚¹ï¼Œåªéœ€è¦åœ¨ field çš„å‰é¢ç”¨ ! å³å¯ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­è¦æ‰¾çš„æ˜¯æ²¡æœ‰è¿”å›ç±»å‹å£°æ˜çš„ Python å‡½æ•° lisp (function_definition !return_type) @no_return_type_func é‚£ä¹ˆå¯¹äº Anonymous AST èŠ‚ç‚¹å‘¢ï¼Ÿç›´æ¥æŒ‡å®šè¦åŒ¹é…çš„ç»“æœå³å¯ï¼Œä¸éœ€è¦ç”¨ ()ã€‚è¿˜æ˜¯ç”¨å‰é¢çš„ä»£ç ä½œä¸ºä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦æ‰¾äºŒå…ƒæ“ä½œï¼Œè€Œä¸”æ‰§è¡Œçš„æ˜¯ + æ³•ï¼Œå°±å¯ä»¥è¿™ä¹ˆå†™ lisp (binary_operator operator: \"+\") @add_op æŠ€å·§ åŒ¿å AST èŠ‚ç‚¹ä¸ä¼šåœ¨å¯¼å‡ºçš„ AST é‡Œé¢ï¼Œé‚£è¦å¦‚ä½•å†™ Query å‘¢ï¼ŸæŸ¥çœ‹å¯¹åº”ç¼–ç¨‹è¯­è¨€çš„ grammar.js æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±å‚è€ƒäº† è¿™å‡ è¡Œ ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:4:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#basic-query-syntax"},{"categories":["Program-Analysis"],"content":" Advanced Query SyntaxQuery è¿˜æ”¯æŒæ›´å¤šçš„è¯­æ³•ï¼Œåƒ [[Regex Expressions|æ­£åˆ™è¡¨è¾¾å¼]] é‡Œé¢çš„ *, ?, +, [abc] éƒ½æ”¯æŒçš„ï¼Œè€ƒè™‘è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„ 3 ä¸ª Python åˆ—è¡¨ python arr1 = [] arr2 = [1] arr3 = [1, 2] æˆ‘ä»¬æƒ³è¦æå–æ¯ä¸ªè¿™æ ·çš„åˆ—è¡¨é‡Œé¢çš„æ•°å­—ï¼Œä½†å¯èƒ½æœ‰ 0 ä¸ªï¼Œä¹Ÿå¯èƒ½æœ‰ä»»æ„ä¸ªï¼Œè¿™æ°æ°æ˜¯æ­£åˆ™è¡¨è¾¾å¼é‡Œé¢çš„ * çš„ç”¨æ³•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ Query lisp ((integer) (\",\" (integer))*)@int_list å¦å¤– Query è¿˜æ”¯æŒ . è¿™ç§æ ‡è®°ï¼Œæ ¹æ®å‡ºç°çš„ä½ç½®ä¸åŒå«ä¹‰ä¹Ÿä¸åŒï¼Œå‰é¢æåˆ°ï¼Œå¯¹äºä¸€ä¸ª (S1 S2 ... Sn) è¿™æ ·çš„ S è¡¨è¾¾å¼ï¼ŒS1 æ˜¯çˆ¶èŠ‚ç‚¹ï¼ŒS2 ... Sn éƒ½æ˜¯å®ƒçš„å­èŠ‚ç‚¹ å¦‚æœ . å‡ºç°åœ¨ S1 åé¢ï¼Œé‚£ä¹ˆ S2 å¿…é¡»æ˜¯çˆ¶èŠ‚ç‚¹ S1 çš„ç¬¬ä¸€ä¸ªå­©å­ã€‚ç°åœ¨å‡è®¾æˆ‘ä»¬è¦ä» arr1, arr2, arr3 ä¸­æå–ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆè‹¥æœ‰ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ lisp (list . (integer) @first_int) å¦‚æœ . å‡ºç°åœ¨ Sn çš„åé¢ï¼Œé‚£ä¹ˆ Sn å¿…é¡»æ˜¯çˆ¶èŠ‚ç‚¹ S1 çš„æœ€åä¸€ä¸ªå­©å­ï¼ŒåŒç†ï¼Œæˆ‘ä»¬å¯ä»¥æå– arr1, arr2, arr3 çš„æœ€åä¸€ä¸ªå…ƒç´  lisp (list (integer) @last_int .) ç°åœ¨æƒ…å†µæ›´åŠ è´Ÿè½½ï¼ŒPython åˆ—è¡¨æ˜¯åŠ¨æ€çš„ï¼Œå¯èƒ½åŒ…å«å„ç§æ•°æ®ç±»å‹çš„å…ƒç´ ï¼Œæ¯”å¦‚ python arr1 = [] arr2 = [None] arr3 = [1, 2, \"90\"] è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¸èƒ½ç”¨ (integer) å»åŒ¹é…äº†ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§ç‰¹æ®Šçš„è¡¨è¾¾å¼ï¼Œè¡¨ç¤ºå¯ä»¥åŒ¹é…ä»»æ„ AST èŠ‚ç‚¹ç±»å‹ï¼Œåœ¨ Python é‡Œé¢ï¼Œ_ å¯ä»¥èµ·åˆ°è¿™æ ·çš„åŠŸèƒ½ã€‚Tree-sitter çš„ Query ä¹Ÿæ˜¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ lisp (list (_) @last_int .) æŠ€å·§ (_) å¯ä»¥åŒ¹é… Named AST Nodeï¼Œ_ å¯ä»¥åŒ¹é… Named AST Node æˆ–è€… Anonymous AST Node ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:5:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#advanced-query-syntax"},{"categories":["Program-Analysis"],"content":" More Advanced Query Syntaxåªæ˜¯ç”¨ @variable_name è·å–è¢«åŒ¹é…çš„å†…å®¹ä¼¼ä¹æ²¡æœ‰å¤šå¤§ç”¨å¤„ï¼Œè¦æ˜¯å¯ä»¥åŸºäºè¢«åŒ¹é…çš„å†…å®¹åšè¿›ä¸€æ­¥çš„ç­›é€‰å°±å¥½äº†ï¼ŒTree-sitter Query ä¹Ÿæ˜¯æ”¯æŒçš„ï¼Œè¿™å«åš predicate æ¯ä¸€ä¸ª predicate ä¹Ÿæ˜¯ä¸€ä¸ª S è¡¨è¾¾å¼ï¼Œå½¢å¦‚ (S1 S2 S3) S1 çš„ä½ç½®å¯ä»¥æ˜¯ #eq?, #not-eq?, #any-eq?, #any-not-eq?, #match?, #not-match?, #any-match?, #any-not-match?, #any-of?, #not-any-of? ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œçœ‹åå­—å°±çŸ¥é“æ„æ€äº† S2 çš„ä½ç½®å¿…é¡»æ˜¯ @variable_name S3 çš„ä½ç½®å¯ä»¥æ˜¯ @variable_nameï¼Œæˆ–è€…æ˜¯å­—ç¬¦ä¸²ï¼ˆä½¿ç”¨ *eq? æ—¶ï¼‰ã€æ­£åˆ™è¡¨è¾¾å¼ï¼ˆä½¿ç”¨ *match? æ—¶ï¼‰ã€å€™é€‰åˆ—è¡¨ï¼ˆä½¿ç”¨ *-of? æ—¶ï¼Œ* ç›´æ¥åˆ—å‡ºæ¥å³å¯ï¼Œä¸éœ€è¦ç”¨ () æ‹¬èµ·æ¥ï¼‰ ä¿¡æ¯ Lisp æˆ–è€…æ˜¯å…¶ä»–çš„ Lisp æ–¹è¨€é‡Œé¢å°±æœ‰ä¸€ä¸ª eq? å‡½æ•° ç°åœ¨ï¼Œæˆ‘ä»¬å°è¯•ç”¨ predicate è¿›è¡Œç­›é€‰ï¼šæå–åˆ—è¡¨é‡Œé¢çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè€Œä¸”å½“ä¸”ä»…å½“å®ƒæ˜¯å­—ç¬¦ä¸² \"90\" çš„æ—¶å€™ï¼Œä¸éš¾ç”¨ä¸‹é¢çš„ Query è¡¨è¾¾å¼è¿›è¡ŒéªŒè¯ lisp (list (string) @last_str (#eq? @last_str \"90\") .) ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:6:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#more-advanced-query-syntax"},{"categories":["Program-Analysis"],"content":" Bindingså‰é¢éƒ½æ˜¯ç”¨å‘½ä»¤è¡Œå·¥å…·æˆ–è€…ç›´æ¥åœ¨å®˜ç½‘çš„ Playground ä¸Šè¿›è¡ŒéªŒè¯ï¼Œé‚£èƒ½å¦å°†è¿™äº›åŠŸèƒ½èå…¥å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ä»£ç é‡Œé¢å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œå…·ä½“å¤„ç½®çš„ç¼–ç¨‹è¯­è¨€å¯ä»¥çœ‹ å®˜ç½‘ ä»¥ Python çš„ binding ä¸ºä¾‹ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®‰è£… sh $ pip install tree-sitter $ pip install tree-sitter-python ç„¶åå°±å¯ä»¥å¼€å§‹ç¼–å†™ä»£ç äº†ï¼Œå…ˆç”Ÿæˆ Parser ç„¶åè§£æä»£ç å¾—åˆ° AST python import tree_sitter_python as tspython from tree_sitter import Language, Parser PY_LANGUAGE = Language(tspython.language()) code = \"\"\"def sum(x: int, y: int) -\u003e int: return x + y sum(1, 2) \"\"\" parser = Parser(PY_LANGUAGE) tree = parser.parse(bytes(code, encoding=\"utf8\")) ç°åœ¨ tree å°±æ˜¯è§£æå¾—åˆ°çš„ ASTï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ ¹èŠ‚ç‚¹çš„ç±»å‹ä»¥åŠå¯¹åº”çš„æºç çš„èµ·å§‹ä½ç½® python parser = Parser(PY_LANGUAGE) tree = parser.parse(bytes(code, encoding=\"utf8\")) root_node = tree.root_node print(root_node.type) # module print(root_node.start_point) # Point(row=0, column=0) print(root_node.end_point) # Point(row=5, column=0) å¯ä»¥çœ‹åˆ°ï¼Œç»“æœå’Œä¹‹å‰å‘½ä»¤è¡Œçš„è¾“å‡ºæ˜¯ä¸€è‡´çš„ lisp (module [0, 0] - [5, 0] ... ;; omit è¿™é‡Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ª Queryï¼Œæå–å‡½æ•°é‡Œé¢å¸¦ç±»å‹æç¤ºçš„å…¥å‚ï¼Œå¹¶æ‰“å°å‚æ•°åã€å‚æ•°ç±»å‹ python query = PY_LANGUAGE.query( \"\"\"(typed_parameter (identifier)@name type: (type (identifier)@val))\"\"\" ) captures = query.captures(root_node) for arg_name, arg_type in zip(captures[\"name\"], captures[\"val\"]): print(f\"{str(arg_name.text)}: {str(arg_type.text)}\") ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:7:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#bindings"},{"categories":["Program-Analysis"],"content":" æ€»ç»“Tree-sitter æ˜¯ä¸€ä¸ªå¼ºå¤§åˆè½»é‡çš„ Parser Generatorï¼Œåœ¨åšç¨‹åºåˆ†æçš„æ—¶å€™æˆ‘ç»å¸¸éƒ½ä¼šç”¨å®ƒç”Ÿæˆçš„ Parser åŠ ä¸Š Query åŠŸèƒ½åœ¨ AST é‡Œé¢æå–ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥ç”¨äºåšè¿›ä¸€æ­¥çš„åˆ†æã€‚å’Œ ANTLR ä»¥åŠå…¶ä»–çš„ Parser Generator ç›¸æ¯”ï¼Œæˆ‘æ„Ÿè§‰è¿˜æ˜¯ Tree-sitter æ›´å¥½ç”¨ä¸€äº›ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºæˆ‘å­¦è¿‡ Schemeã€Racket è¿™ç§ Lisp å½¢å¼çš„ç¼–ç¨‹è¯­è¨€ï¼Œç”¨ S è¡¨è¾¾å¼å†™ Query è®©æˆ‘æ„Ÿè§‰å¾ˆäº²åˆ‡ :) ","date":"2024-09-07","objectID":"/zh-cn/tree-sitter-and-its-query/:8:0","series":null,"tags":["Compiler","Program-Analysis"],"title":"Tree-sitter ä»¥åŠå®ƒçš„ Query åŠŸèƒ½","uri":"/zh-cn/tree-sitter-and-its-query/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":"å¯¹ Python 3.7 å¼•å…¥çš„ dataclass çš„ä¸€ä¸ªç®€æ˜æ•™ç¨‹ï¼Œè¦†ç›–è¯­æ³•ã€è¯­ä¹‰ç­‰","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€Python çš„ tuple å¾ˆå¥½ç”¨ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬å¿«é€Ÿåœ°å°†ä¸åŒç±»å‹çš„å€¼å°è£…åœ¨ä¸€èµ·ï¼Œä½œä¸ºä¸€ä¸ªæ•´ä½“è¿›è¡Œç®¡ç†ï¼Œè‡ªå¸¦çš„æ’åºè§„åˆ™ä¹Ÿååˆ†ç›´è§‚ï¼Œç®€å•æ˜“ç”¨ã€‚ä½†å®é™…ç”¨ä¸‹æ¥æˆ‘å‘ç°ï¼Œä¸€æ—¦ tuple çš„å­—æ®µæ¯”è¾ƒå¤šï¼Œæˆ‘å°±è¢«è¿«è¦è‡ªå·±å†™ä¸€ä¸‹æ³¨é‡Šæ³¨æ˜ä¸€ä¸‹ä¸åŒä½ç½®çš„å­—æ®µçš„å…·ä½“å«ä¹‰æ˜¯å•¥ï¼Œæ¯”å¦‚ python t = (3, 4, 3.5) # (x, y, value) åé¢æˆ‘å°±å¯ä»¥è·³åˆ°è¿™ä¸ªå®šä¹‰çš„åœ°æ–¹é€šè¿‡çœ‹æ³¨é‡Šæ¥å¼„æ¸…æ¥šæ¯ä¸ªå­—æ®µçš„å«ä¹‰ã€‚ä½†è¿™ç¡®å®å¸¦æ¥äº†è¯¸å¤šä¸ä¾¿ï¼Œä»£ç ä¸€æ—¦å˜é•¿å°±ä¸å¤§å¥½å®šä½è¯¥è¡Œè¯­å¥ äºæ˜¯æƒ³è¯´å¯ä»¥å†™ä¸€ä¸ªç±»ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥ã€Œç”¨åå­—è€Œä¸æ˜¯ä½ç½®ã€å»å¼•ç”¨æŸä¸ªå­—æ®µï¼Œä½†æ˜¯å†™ä¸€ä¸ªç±»è¦è‡ªå·±é‡å†™ __init__ã€__repr__ ç­‰ï¼Œè¿™é‡Œé¢å¾ˆå¤šä»£ç éƒ½æ˜¯å†—ä½™çš„ã€‚ä»Šå¤©è¦è®²çš„ dataclass å°±æ˜¯è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸ç”¨å†™å¾ˆå¤šå†—ä½™çš„ä»£ç ï¼Œå°±å¯ä»¥èµ·åˆ°ä¸€æ ·çš„æ•ˆæœï¼Œå³å®ç°ä¸€ä¸ª Named Tuple æŠ€å·§ å­¦ä¹ ä»»ä½•ä¸€ä¸ªè¯­è¨€çš„ç‰¹æ€§åªéœ€è¦å¼„æ¸…æ¥šå‡ ä¸ªé—®é¢˜ è¯­æ³•æ˜¯ä»€ä¹ˆï¼Ÿ è¯­ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ æœ‰å“ªäº›é€‚åˆçš„åœºæ™¯ï¼Ÿ ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:1:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" è¯­æ³• python from dataclasses import dataclass @dataclass class Point: x: int y: int value: float = 0.0 ä¸Šé¢æ˜¯å®šä¹‰äº†ä¸€ä¸ª Point çš„ä¾‹å­ï¼Œå®ƒåŒ…å« 3 ä¸ªå­—æ®µï¼Œåæ ‡ (x, y) å’Œè¯¥åæ ‡å¯¹åº”çš„å€¼ valueï¼ˆé»˜è®¤å€¼æ˜¯ 0ï¼‰ã€‚ä»ä¾‹å­ä¸­å¯ä»¥çœ‹å‡º dataclass æ˜¯ä¸€ä¸ª Python è£…é¥°å™¨ï¼Œç”¨æ¥è£…é¥°ä¸€ä¸ªç±» å¯¹äºç±»çš„å®ä¾‹å˜é‡ï¼Œå¿…é¡»åŠ ä¸Šç±»å‹æç¤ºï¼Œå¹¶ä¸”å…è®¸è®¾ç½®é»˜è®¤å€¼ ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:2:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#è¯­æ³•"},{"categories":["Programming-Languages"],"content":" è¯­ä¹‰é‚£ä¹ˆè¿™æ ·çš„ä¸€ä¸ªç±»æœ‰å•¥åŠŸèƒ½å‘¢ï¼Ÿ python ... # omitted foo = Point(3, 4, 3.5) # __init__ bar = Point(3, 4, 3.5) # __init__ print(foo) # __repr__ print(foo.x) # named reference print(foo == bar) # __eq__ å¯ä»¥çœ‹åˆ°ï¼Œ@dataclass è‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°äº† __init__, __repr__, __eq__ï¼Œå¹¶ä¸”æˆ‘ä»¬å¯ä»¥ç”¨åå­—å»å¼•ç”¨æŸä¸ªå­—æ®µçš„å€¼ ä»åŸç†ä¸Šæ¥çœ‹ï¼ŒåŠ ä¸Šç±»å‹æç¤ºçš„å­—æ®µä¼šè¢«å­˜å‚¨åœ¨ç±»çš„ __annotations__ å±æ€§é‡Œé¢ï¼ˆæŒ‰ç…§å£°æ˜çš„é¡ºåºï¼‰ python print(Point.__annotations__) # {'x': \u003cclass 'int'\u003e, 'y': \u003cclass 'int'\u003e, 'value': \u003cclass 'float'\u003e} æ‰€ä»¥æ€»ç»“æ¥è¯´ï¼Œè¯­ä¹‰æ˜¯è¿™æ ·çš„ï¼š æ ¹æ®å£°æ˜çš„å­—æ®µè‡ªåŠ¨ç”Ÿæˆ __init__, __repr__, __eq__ æ–¹æ³•ï¼Œå¦‚æœç±»æœ¬èº«å·²ç»æœ‰äº†è¿™äº›æ–¹æ³•ï¼Œåˆ™ä¼˜å…ˆç”¨ç±»è‡ªå·±å®šä¹‰çš„ å¸¦æœ‰ç±»å‹æç¤ºçš„å­—æ®µä¼šæˆä¸ºä¸Šè¿°ç”Ÿæˆçš„æ–¹æ³•çš„å‚æ•°ï¼Œå‚æ•°çš„é¡ºåºå°±æ˜¯å­—æ®µå£°æ˜çš„é¡ºåº ä»¥ __init__ ä¸ºä¾‹ï¼Œä¸Šé¢çš„ç±»å…¶å®ä¼šç”Ÿæˆä¸‹é¢çš„ __init__ æ–¹æ³• python class Point: ... def __init__(self, x: int, y: int, value: float = 0.0): self.x = x self.y = y self.value = value ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:3:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#è¯­ä¹‰"},{"categories":["Programming-Languages"],"content":" é«˜çº§ç”¨æ³•ä¸Šé¢çš„ä½¿ç”¨å·²ç»è¶³ä»¥è¦†ç›–å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ï¼Œä½† dataclass å…¶å®æä¾›äº†æ›´å¤šï¼Œå®ƒå…è®¸æˆ‘ä»¬æ§åˆ¶è£…é¥°ç±»çš„è¿‡ç¨‹ç”šè‡³æ˜¯æ¯ä¸ªå­—æ®µçš„è¡Œä¸ºï¼Œè¿™æ˜¯ä¸åŒç²’åº¦çš„æ§åˆ¶ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹æ•´ä½“ï¼Œä¸€ä¸ªæ˜¯é’ˆå¯¹å­—æ®µ @dataclass æœ¬èº«æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œè£…é¥°å™¨å°±æ˜¯å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ§åˆ¶å‡½æ•°çš„å‚æ•°æ¥æ§åˆ¶è£…é¥°ç±»çš„è¿‡ç¨‹ï¼Œæˆ‘æŠŠå‡ ä¸ªæ¯”è¾ƒé‡è¦çš„é…ç½®é¡¹ç½—åˆ—åœ¨ä¸‹é¢ï¼ŒåŒæ—¶æˆ‘ç»™å‡ºäº†è¿™äº›é…ç½®é¡¹çš„é»˜è®¤å€¼ python @dataclass( init=true, # generate __init__ method repr=true, # generate __repr__ method # default format: \u003cclassname\u003e(field1=..., field2=..., ...) eq=true, # compare dataclasses like tuples order=false, # generate __lt/lt/gt/ge__ methods frozen=false, # if true, assigning to fields will generate an exception ) ä»¥ order ä¸ºä¾‹ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸Œæœ›åˆšæ‰çš„ Point ç±»æ˜¯å¯ä»¥æ¯”è¾ƒçš„ï¼šå…ˆæŒ‰ç…§åæ ‡ (x, y) ç„¶åæŒ‰ç…§ value æ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ä»£ç  python from dataclasses import dataclass @dataclass(order=True) class Point: x: int y: int value: float foo = Point(3, 4, 3.5) # __init__ bar = Point(3, 4, 4.5) # __init__ print(foo \u003c bar) # __eq__ datclass çš„ field æ˜¯ç”¨æ¥æ§åˆ¶æ¯ä¸ªå­—æ®µçš„è¡Œä¸ºçš„ï¼ŒåŒæ ·æœ‰å¾ˆå¤šå¯ä»¥å®šåˆ¶çš„é€‰é¡¹ï¼Œå®Œæ•´çš„å¯ä»¥å‚è€ƒ è¿™é‡Œï¼Œæˆ‘ä¸‹é¢åªè®²ä¸€ä¸‹æœ€é‡è¦çš„å‡ ä¸ª defalt, default_factoryï¼Œè¿™ä¸¤ä¸ªæ˜¯ç”¨æ¥ç»™å­—æ®µè®¾ç½®é»˜è®¤å€¼çš„ï¼Œå‰ç½®ç›´æ¥è®¾ç½®é»˜è®¤å€¼ï¼Œåè€…åˆ™å¯ä»¥æŒ‡å®šäº†ä¸€ä¸ªä¸å¸¦æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ï¼ˆæ¯”å¦‚ list, set ç­‰éƒ½æ˜¯å¯ä»¥çš„ï¼‰ï¼Œæ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©å…¶ä¸­ä¸€ä¸ªå³å¯ reprï¼Œæ˜¯å¦è¦å°†è¿™ä¸ªå­—æ®µæ”¾åˆ° __repr__ é‡Œé¢ ä»ç„¶ç”¨å‰é¢çš„ Point ä½œä¸ºä¾‹å­ï¼Œæˆ‘ä»¬æƒ³è¦æŠŠ value å˜æˆ valuesï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå­—æ®µå¯ä»¥æœ‰ä¸€å †çš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ python from dataclasses import dataclass, field @dataclass class Point: x: int y: int value: list[float] = field(default_factory=list) foo = Point(3, 4, [3.5, 4.5, 5.5]) # __init__ print(foo.__annotations__) æœ€åå†è°ˆä¸€ä¸‹æ¶‰åŠåˆ°ç»§æ‰¿çš„åœºæ™¯ï¼Œè¢« @dataclass è£…é¥°çš„ç±»ä¹Ÿæ˜¯ç±»ï¼Œä¹Ÿèƒ½ç”¨äºç»§æ‰¿ï¼Œé‚£ä¹ˆå½“ä¸€ä¸ª data class ç»§æ‰¿å¦å¤–ä¸€ä¸ª data class ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿç‰¹åˆ«æ˜¯æœ‰ç›¸åŒåå­—çš„å­—æ®µçš„åœºæ™¯ï¼Œæ¯”å¦‚ python from dataclasses import dataclass @dataclass class A: x: int = 1 y: int = 2 z: int = 5 @dataclass class B(A): x: int = 3 y: int = 4 foo = B() print(foo) # B(x=3, y=4, z=5) ç»§æ‰¿çš„åŸç†æ˜¯è¿™æ ·çš„ 1 æ£€æŸ¥è¢«è£…é¥°ç±»çš„æ‰€æœ‰çˆ¶ç±»ï¼ˆæŒ‰ç…§ MRO çš„é€†åºï¼‰ï¼Œä¹Ÿå°±æ˜¯ä» Object å¼€å§‹ä¸€è·¯æ²¿ç€å­ç±»æ”¶é›† fields æœ€ååŠ ä¸Šè¢«è£…é¥°ç±»è‡ªå·±çš„ fieldsï¼Œè¿™æ ·å°±å®Œæˆäº†fields çš„åˆå¹¶ã€‚æ³¨æ„è¿™é‡Œå¯èƒ½å‡ºç°åŒåçš„ field è¿™ç§æƒ…å†µï¼Œåé¢çš„ä¼šè¦†ç›–å‰é¢çš„ ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:4:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#é«˜çº§ç”¨æ³•"},{"categories":["Programming-Languages"],"content":" FAQ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:5:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#faq"},{"categories":["Programming-Languages"],"content":" dataclass å¦‚ä½•åŒºåˆ†ç±»å˜é‡å’Œå®ä¾‹å˜é‡ï¼Ÿç”¨ç±»å‹æç¤ºåŒºåˆ†ç±»å˜é‡å’Œå®ä¾‹å˜é‡ï¼Œç±»å˜é‡çš„ç±»å‹æ˜¯ typing.ClassVar python from typing import ClassVar from dataclasses import dataclass, field @dataclass class Point: x: int y: int value: list[float] = field(default_factory=list) a_class_variable: ClassVar[int] = 3 a_point = Point(3, 4) print(Point.a_class_variable) ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:5:1","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#dataclass-å¦‚ä½•åŒºåˆ†ç±»å˜é‡å’Œå®ä¾‹å˜é‡"},{"categories":["Programming-Languages"],"content":" vs namedtupleå‚è€ƒè‡ª 1 @dataclass collections.namedtuple å­—æ®µå€¼ä¸€æ ·ä½†ä¸åŒç±»å‹æ˜¯å¦çœ‹ä½œç›¸ç­‰ï¼ˆPoint3D(2017, 6, 2) == Date(2017, 6, 2)) âŒ âœ… ä¸ºå­—æ®µè®¾ç½®é»˜è®¤å€¼ âœ… âŒ æ§åˆ¶æ¯ä¸ªå­—æ®µçš„è¡Œä¸ºï¼ˆ__init__, __repr__, etcï¼‰ âœ… âŒ é€šè¿‡ç»§æ‰¿çš„æ–¹å¼ç»“åˆå¤šä¸ªå­—æ®µ âœ… âŒ ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:5:2","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#vs-namedtuple"},{"categories":["Programming-Languages"],"content":" æ€»ç»“Python çš„ @dataclass è®©æˆ‘ä»¬å¯ä»¥ç”¨ declarative çš„å½¢å¼æè¿°ä¸€ä¸ªç±»ï¼Œæˆ‘ä»¬åªéœ€è¦æè¿°æ¯ä¸ªå­—æ®µçš„ç±»å‹ã€é»˜è®¤å€¼ç­‰ï¼Œä»–å°±ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆæœ‰ç”¨çš„ä¸€äº›å‡½æ•°ï¼Œå¯ä»¥ç†è§£ä¸º data class = mutable namedtuple with default value ğŸ‘ ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:6:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ PEP 557 â€“ Data ClassesÂ â†©ï¸Â â†©ï¸ ","date":"2024-08-17","objectID":"/zh-cn/learn-to-use-dataclass-in-python/:7:0","series":null,"tags":["Python"],"title":"@dataclass ç®€æ˜æ•™ç¨‹ï¼ˆPython3.7ï¼‰","uri":"/zh-cn/learn-to-use-dataclass-in-python/#å‚è€ƒ"},{"categories":["Software-Engineering"],"content":"åˆ©ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢çš„éƒ¨ç½²","date":"2024-07-29","objectID":"/zh-cn/use-github-actions-to-automate-hugo-build/","series":null,"tags":["DevOps","CI/CD","GitHub"],"title":"ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢éƒ¨ç½²","uri":"/zh-cn/use-github-actions-to-automate-hugo-build/"},{"categories":["Software-Engineering"],"content":" å‰è¨€æœ€è¿‘åœ¨å­¦ä¹  GitHub Actionsï¼ŒGitHub Actions æ˜¯ GitHub æä¾›çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå¯ä»¥ç”¨æ¥è‡ªåŠ¨åŒ–æ‰§è¡Œä¸€äº›æ­¥éª¤ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæœ€å¸¸è§çš„éœ€è¦è‡ªåŠ¨åŒ–çš„åœºæ™¯å¯èƒ½å°±æ˜¯æ„å»ºäº†ã€‚å¯¹äºç¼–è¯‘å‹çš„ç¼–ç¨‹è¯­è¨€ï¼ˆæ¯”å¦‚ C/C++ï¼‰ç¼–å†™çš„è½¯ä»¶ï¼Œé€šå¸¸éœ€è¦ç¼–å†™å¯¹åº”çš„æ„å»ºçš„è„šæœ¬ï¼Œè½¯ä»¶æ„å»ºçš„è¿‡ç¨‹æ¶‰åŠåˆ°ï¼šç¯å¢ƒå‡†å¤‡ã€ä¾èµ–ä¸‹è½½ã€å¯åŠ¨æ„å»ºç­‰ã€‚ä¸è¿‡ï¼Œåˆ©ç”¨ GitHub Actions æ¥è‡ªåŠ¨åŒ–è½¯ä»¶æ„å»ºè¿‡ç¨‹å¹¶ä¸æ˜¯æœ¬æ–‡çš„ä¸»é¢˜ã€‚åœ¨æˆ‘æ€è€ƒæˆ‘å¯ä»¥å°† GitHub Actions ç”¨äºä½•å¤„çš„æ—¶å€™ï¼Œæˆ‘æƒ³åˆ°äº†ï¼šåˆ©ç”¨ GitHub Actions æ¥è‡ªåŠ¨åŒ– Hugo åšå®¢çš„éƒ¨ç½²ã€‚å› ä¸º Hugo åšå®¢çš„éƒ¨ç½²ä¹Ÿæ¶‰åŠåˆ°ä¸å°‘ä¸€ç³»åˆ—å›ºå®šçš„æ­¥éª¤ :) ","date":"2024-07-29","objectID":"/zh-cn/use-github-actions-to-automate-hugo-build/:1:0","series":null,"tags":["DevOps","CI/CD","GitHub"],"title":"ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢éƒ¨ç½²","uri":"/zh-cn/use-github-actions-to-automate-hugo-build/#å‰è¨€"},{"categories":["Software-Engineering"],"content":" èƒŒæ™¯æˆ‘çš„ Hugo åšå®¢åŒ…å«äº† 2 ä¸ªä»“åº“ public ä»“åº“ - martinlwx.github.ioï¼Œå­˜æ”¾äº†ç”Ÿæˆçš„ Hugo é™æ€ç½‘ç«™ private ä»“åº“ï¼Œè¯¥ä»“åº“å­˜æ”¾äº† Hugo çš„é…ç½®æ–‡ä»¶ï¼Œä»¥åŠåšå®¢æ–‡ç« çš„åŸå§‹ Markdown æ–‡ä»¶ã€‚private ä»“åº“ä¸‹å­˜åœ¨ä¸€ä¸ª ./public ç›®å½•ï¼Œæ˜¯ä¸€ä¸ª git submoduleï¼ŒæŒ‡å‘äº†å‰é¢æåˆ°çš„ public ä»“åº“ å¤§æ¦‚é•¿ä¸‹é¢è¿™ä¸ªæ ·å­ flowchart LR private(\"Private repo\") --\u003e|git push| public(\"Public repo: martinlwx.github.io\") Warning å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ Algolia çš„è¯ï¼Œä½ å°±æ²¡æœ‰å¿…è¦ä¸Šä¼  index.json æ–‡ä»¶ éƒ¨ç½² Hugo åšå®¢çš„æµç¨‹æ˜¯è¿™æ ·å­çš„ï¼šå…ˆå†™å¥½æ–‡ç« ï¼Œç„¶åç”¨ Hugo ç”Ÿæˆé™æ€åšå®¢ï¼Œç„¶åå°†ç”Ÿæˆçš„ index.json æ–‡ä»¶ç”¨ atomic-algolia ä¸Šä¼ åˆ° Algoliaï¼Œæ‰€ä»¥æˆ‘ä¹‹å‰ç¼–å†™äº†å¦‚ä¸‹çš„ shell è„šæœ¬ï¼ˆå–åä¸º deploy.shï¼‰ sh #!/bin/bash echo \"Deploying hugo website...\" # delete all the files in public folder rm -rf public/* # build the website hugo -t DoIt # upload index.json node push_algolia_json.js # deploy the website msg=\"rebuild site on $(date)\" echo \"$msg\" cd public || exit git add . git commit -m \"$msg\" git push # backup private repo cd .. || exit git add . git commit -m \"backup hugo on $(date)\" git push echo \"Git push successfully!\" é‚£ä¹ˆï¼Œæˆ‘å°±å¯ä»¥ç”¨å¦‚ä¸‹çš„å‘½ä»¤å®Œæˆ Hugo åšå®¢çš„éƒ¨ç½² sh $ bash deploy.sh ","date":"2024-07-29","objectID":"/zh-cn/use-github-actions-to-automate-hugo-build/:2:0","series":null,"tags":["DevOps","CI/CD","GitHub"],"title":"ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢éƒ¨ç½²","uri":"/zh-cn/use-github-actions-to-automate-hugo-build/#èƒŒæ™¯"},{"categories":["Software-Engineering"],"content":" GitHub Actions ä¸­çš„æ¦‚å¿µåœ¨ GitHub Actions é‡Œé¢ï¼Œæ¶‰åŠåˆ°è®¸å¤šæ¦‚å¿µï¼ŒåŒ…æ‹¬ Workflowã€Eventã€Jobã€Actionã€Step Workflow é‡Œé¢å¯ä»¥åŒ…å«ä¸€åˆ°å¤šä¸ª Jobï¼Œæ¯ä¸ª Job é‡Œé¢åˆ™åŒ…å«äº†å¤šä¸ª Stepï¼Œæ¯ä¸ª Step å¯ä»¥è¿è¡Œ Shell å‘½ä»¤ã€Shell è„šæœ¬æˆ–è€…æ˜¯æ‰§è¡Œ actionï¼Œè¿™é‡Œçš„ action å¯ä»¥çœ‹æˆæ˜¯åˆ«äººå†™å¥½çš„è„šæœ¬ï¼Œé€šå¸¸æ˜¯ä¸€äº›å¤æ‚è€Œé‡å¤çš„æ“ä½œã€‚é€šè¿‡å¤ç”¨åˆ«äººçš„ action æˆ‘ä»¬å°±æå¤§ç¨‹åº¦å‡è½»äº†ç¼–å†™ Workflow çš„å·¥ä½œé‡ Workflow é€šå¸¸è¢«æˆ‘ä»¬è®¾ç½®å¥½çš„ Event è§¦å‘ï¼ŒEvent åŒ…æ‹¬è·Ÿ git æœ‰å…³çš„äº‹ä»¶ï¼Œæ¯”å¦‚ git pushã€æ”¶åˆ° PR è¯·æ±‚ç­‰ã€‚è§¦å‘ä¹‹å workflow å°±ä¼šå¼€å§‹è¿è¡Œäº†ã€‚ç”¨å›¾è¡¨ç¤ºå°±æ˜¯ timeline Event: push : pull request : ... Job1 : Step 1. Run action : Step 2. Run action : Step 3. Run action : Step 4. Run action : ... Job2: Step 1. Run action : Step 2. Run action : Step 3. Run action : Step 4. Run action : ... æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ª YAML æ–‡ä»¶æ¥æè¿° Workflowï¼Œè¿™ä¸ª YAML æ–‡ä»¶ä¼šæ”¾åˆ° git ä»“åº“é‡Œé¢å’Œæºä»£ç ä¸€èµ·ç®¡ç†ï¼Œè¯¦ç»†çš„è¯­æ³•å¯ä»¥åœ¨å®˜ç½‘æ‰¾åˆ° ","date":"2024-07-29","objectID":"/zh-cn/use-github-actions-to-automate-hugo-build/:3:0","series":null,"tags":["DevOps","CI/CD","GitHub"],"title":"ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢éƒ¨ç½²","uri":"/zh-cn/use-github-actions-to-automate-hugo-build/#github-actions-ä¸­çš„æ¦‚å¿µ"},{"categories":["Software-Engineering"],"content":" ç¼–å†™ YAML æ–‡ä»¶ Info ä¸‹é¢å‡å®šä½ å·²ç»å¯¹ GitHub Actions çš„åŸºæœ¬è¯­æ³•æœ‰ä¸€å®šçš„äº†è§£ï¼Œè¿™ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ :) æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦å°è¯•å°†å‰é¢æåˆ°çš„ Shell è„šæœ¬å˜æˆ GitHub Actions å¯¹åº”çš„ YAML æ–‡ä»¶ï¼ˆå–åä¸º build_and_deploy.yaml æ–‡ä»¶ï¼‰ yaml name: hugo-deploy on: push: branches: - master jobs: build-and-deploy: runs-on: ubuntu-latest steps: - name: Check out this repo uses: actions/checkout@v4 with: submodules: 'recursive' fetch-depth: 0 - name: Install Hugo CLI uses: peaceiris/actions-hugo@v3 with: hugo-version: 'latest' extended: true - name: Install node.js uses: actions/setup-node@v4 with: node-version: 'latest' - name: Install atomic-algolia run: npm install atomic-algolia - name: Build the website with the DoIt theme run: hugo -t DoIt - name: Upload index.json for search run: node push_algolia_json.js - name: Deploy uses: peaceiris/actions-gh-pages@v4 with: deploy_key: ${{ secrets.HUGO_PRIVATE_KEY }} external_repository: Martinlwx/martinlwx.github.io publish_branch: main publish_dir: ./public å…¶ä¸­ actions/checkout æ˜¯ä¸€ä¸ªåˆ«äººå†™å¥½çš„ actionï¼Œå¯ä»¥ç”¨æ¥å°† git ä»“åº“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œæˆ‘çš„ private ä»“åº“æ¶‰åŠåˆ° 2 ä¸ª git submodule DoItï¼Œæˆ‘çš„åšå®¢ä¸»é¢˜ public ä»“åº“ è¿™é‡Œéœ€è¦æŠŠä»–ä»¬éƒ½ clone åˆ°æœ¬åœ°ï¼Œæ‰€ä»¥è®¾ç½® submodules: trueï¼Œfetch-depth: 0 åˆ™ä¼šåœ¨ clone çš„æ—¶å€™å°†æ‰€æœ‰çš„ commit éƒ½ clone ä¸‹æ¥ æ¥ä¸‹æ¥æˆ‘ä»¬è¦å®‰è£… Hugoï¼Œè™½ç„¶å®˜ç½‘ä¸Šç»™å‡ºäº† è¯¦ç»†çš„æ­¥éª¤ï¼Œä½†æ˜¯æˆ‘è§‰å¾—è¾ƒä¸ºç¹çï¼Œäºæ˜¯æˆ‘æ‰¾åˆ°äº† actions-hugoï¼Œè¯¥ action å¯ä»¥è‡ªåŠ¨å¸®æˆ‘ä»¬ä¸‹è½½å¹¶å®‰è£…å¥½ Hugoï¼Œhugo-version: 'latest' åˆ™æ˜¯è®©å®ƒæ¯æ¬¡éƒ½ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Hugoã€‚å› ä¸º DoIt ä½¿ç”¨äº† admonition ç­‰ç‰¹æ€§ï¼Œæ‰€ä»¥è¿˜éœ€è¦è®¾ç½® extended: trueï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ extended ç‰ˆæœ¬çš„ Hugo Warning å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ Algolia çš„è¯ï¼Œä½ å°±æ²¡æœ‰å¿…è¦å®‰è£… node.jsï¼Œä¹Ÿæ²¡æœ‰å¿…è¦å®‰è£… atomic-algoliaï¼Œä¹Ÿæ²¡æœ‰å¿…è¦è¿›è¡Œ index.json æ–‡ä»¶çš„ä¸Šä¼  å®‰è£… node.js ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œå·²ç»æœ‰åˆ«äººå†™å¥½çš„äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿° åœ¨å®‰è£…å®Œ node.js ä¹‹åï¼Œç”¨ npm å®‰è£… atomic-algoliaï¼Œè¿™æ ·åé¢å°±å¯ä»¥ä¸Šä¼  index.json æ–‡ä»¶äº† åœ¨ä¸Šä¼  index.json æ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç”¨ Hugo ç”Ÿæˆé™æ€åšå®¢ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ index.json æ–‡ä»¶æ˜¯æœ€æ–°çš„ã€‚è·Ÿåœ¨æœ¬åœ°ç”Ÿæˆ Hugo é™æ€åšå®¢ä¸€æ ·ï¼Œç”¨ hugo -t DoIt æŒ‡å®šä¸»é¢˜å¹¶ç”Ÿæˆå³å¯ ç”Ÿæˆ index.json æ–‡ä»¶ä¹‹åå°±å¯ä»¥ç”¨ node push_algolia_json.js ä¸Šä¼ äº†ï¼Œpush_algolia_json.js æ–‡ä»¶æ€ä¹ˆå†™å¯ä»¥çœ‹ atomic-algolia æ–‡æ¡£ æœ€åï¼Œå°±æ¶‰åŠåˆ° Hugo åšå®¢çš„éƒ¨ç½²äº†ï¼Œactions-hugo çš„åŒä¸€ä¸ªä½œè€…è¿˜å†™äº†å¦å¤–ä¸€ä¸ª action actions-gh-pages å¯ä»¥ç”¨æ¥å¿«é€Ÿéƒ¨ç½²ã€‚è¿™é‡Œæƒ…å†µç¨å¾®å¤æ‚ä¸€äº›ï¼Œå‰é¢æåˆ°ï¼Œæˆ‘æœ‰ 1 ä¸ª public ä»“åº“å’Œ 1 ä¸ª private ä»“åº“ï¼Œè¿™é‡Œè¦åšçš„äº‹æƒ…å…¶å®æ˜¯è¦ä» private ä»“åº“éƒ¨ç½²åˆ° public ä»“åº“ã€‚æ ¹æ® actions-gh-pages çš„ README.md æ–‡æ¡£ï¼Œéœ€è¦è®¾ç½® external_repositoryï¼Œå°†å…¶æŒ‡å‘æˆ‘çš„ public ä»“åº“çš„è·¯å¾„ï¼Œæ ¼å¼ä¹Ÿå¾ˆå¥½æ‡‚ã€‚å¦å¤–å› ä¸ºéƒ¨ç½²è¦è·¨ git ä»“æ“ä½œï¼Œæ‰€ä»¥éœ€è¦è®¾ç½® deploy_keyï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ç”Ÿæˆ ssh-key å¹¶åˆ†åˆ«æ·»åŠ åˆ°ä¸åŒçš„ git ä»“åº“é‡Œï¼Œè¿™æ˜¯ç›¸å¯¹æ¯”è¾ƒéº»çƒ¦çš„ä¸€æ­¥ flowchart LR private(\"` Private repo (use the *private* ssh-key as a *secret*) `\") --\u003e|peaceiris/actions-gh-pages@v4| public(\"` Public repo (use the *public* ssh-key as a *deploy key*) `\") é¦–å…ˆï¼Œç”¨è‡ªå·±çš„ç”µè„‘ç”Ÿæˆé…å¯¹çš„ ssh-key sh # replace with your email here. $ ssh-keygen -t ed25519 -C martinlwx@163.com -f \"hugo\" åœ¨å½“å‰ç›®å½•ï¼Œä½ å°±å¯ä»¥çœ‹åˆ° hugo å’Œ hugo.pub è¿™ä¸¤ä¸ªæ–‡ä»¶äº†ï¼Œæ¥ä¸‹æ¥ ç‚¹å¼€ public ä»“åº“çš„ Settings -\u003e Deploy keys -\u003e Add deploey keyï¼Œå°† hugo.pub çš„å†…å®¹æ·»åŠ è¿›å»ï¼Œè¿™é‡Œ Title å–ä»€ä¹ˆåå­—æ— å…³ç´§è¦ï¼Œè¦ç´§çš„æ˜¯è®¾ç½® Allow Write Access ç‚¹å¼€ private ä»“åº“çš„ Settings -\u003e Secrets and variables -\u003e Actions -\u003e Manage repository secretï¼Œå°† hugo çš„å†…å®¹æ·»åŠ è¿›å»ï¼ŒTitle å¯ä»¥å–ä½œ HUGO_PRIVATE_KEYï¼Œå°±å¯ä»¥åœ¨ deploy_key å­—æ®µé‡Œé¢å¼•ç”¨ ${{ secrets.HUGO_PRIVATE_KEY }} å‰©ä¸‹æ²¡æœ‰è§£é‡Šçš„å‡ ä¸ªé…ç½®é¡¹ publish_branch: mainï¼Œçœ‹åå­—ä¹Ÿå¾ˆå¥½æ‡‚ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯éƒ¨ç½²çš„æ—¶å€™è¦éƒ¨ç½²åˆ°å“ªä¸ªåˆ†æ”¯ï¼Œæˆ‘çš„ public ä»“åº“ åªæœ‰ main åˆ†æ”¯ï¼Œæ‰€ä»¥å°±è¿™ä¹ˆè®¾ç½®äº† publish_dir: ./publicï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ä½ çš„ private ä»“åº“ç”Ÿæˆ Hugo é™æ€åšå®¢çš„æ—¶å€™è¾“å‡ºåˆ°ä»€ä¹ˆæ–‡ä»¶å¤¹ï¼Œæˆ‘çš„å°±æ˜¯è¾“å‡ºåˆ° ./public æ–‡ä»¶å¤¹ ä¸Šé¢çš„æ­¥éª¤éƒ½å®Œæˆä¹‹åï¼Œåœ¨ private ä»“åº“çš„æ ¹ç›®å½•æ–°å»º .github/workflows ç›®å½•ï¼Œå¹¶å°†å¦‚ä¸Šçš„ YAML ä¿å­˜åœ¨é‡Œé¢ï¼Œgit add \u0026 git push ä¸€ä¸‹å°±å¥½äº†ã€‚ä¹‹åç‚¹å¼€ä»“åº“çš„ Actions å°±å¯ä»¥çœ‹åˆ°è¯¥ workflow äº†ï¼Œå¦‚ä¸‹æ‰€ç¤º ","date":"2024-07-29","objectID":"/zh-cn/use-github-actions-to-automate-hugo-build/:4:0","series":null,"tags":["DevOps","CI/CD","GitHub"],"title":"ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢éƒ¨ç½²","uri":"/zh-cn/use-github-actions-to-automate-hugo-build/#ç¼–å†™-yaml-æ–‡ä»¶"},{"categories":["Software-Engineering"],"content":" æ€»ç»“åœ¨æ­å»ºå®Œæµæ°´çº¿ä¹‹åï¼Œæˆ‘å‘ç°æˆ‘çš„å·¥ä½œé‡ä¼¼ä¹å˜å¤šäº†ï¼Œæœ¬æ¥ bash deploy.sh å°±èƒ½æå®šçš„äº‹æƒ…ï¼Œç°åœ¨éœ€è¦è‡ªå·± git add å’Œ git commitï¼ˆä¸è¿‡è¿™ä¹Ÿæ˜¯å› ä¸ºä¹‹å‰çš„ commit message æ˜¯è°ƒç”¨å‘½ä»¤ç”Ÿæˆçš„ï¼‰ã€‚ä½†ä¸ç®¡æ€ä¹ˆè¯´ï¼Œè¿˜æ˜¯ä»ä¸­å­¦ä¹ åˆ°äº† GitHub Actions çš„ä½¿ç”¨ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½² Hugo åšå®¢æ˜¯ä¸€æ¬¡æœ‰æ„æ€çš„ CI/CD å®è·µã€‚å¸Œæœ›æœ¬æ–‡èƒ½ç»™å±å¹•å‰çš„ä½ å¸¦æ¥å¸®åŠ© :) ","date":"2024-07-29","objectID":"/zh-cn/use-github-actions-to-automate-hugo-build/:5:0","series":null,"tags":["DevOps","CI/CD","GitHub"],"title":"ä½¿ç”¨ GitHub Actions è‡ªåŠ¨åŒ– Hugo åšå®¢éƒ¨ç½²","uri":"/zh-cn/use-github-actions-to-automate-hugo-build/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":"å¯¹å°¾è°ƒç”¨ä»¥åŠå°¾è°ƒç”¨ä¼˜åŒ–çš„ç®€å•ä»‹ç»ï¼Œå¹¶é€šè¿‡ OCaml çš„ä»£ç ç ”ç©¶äº†æ˜¯å¦å¼€å¯å°¾è°ƒç”¨ä¼˜åŒ–çš„æ€§èƒ½å¼€é”€","date":"2024-03-22","objectID":"/zh-cn/tail-call-and-tail-call-optimization/","series":null,"tags":["OCaml","Programming-Languages","Performance-Engineering"],"title":"å°¾è°ƒç”¨ä¸å°¾è°ƒç”¨ä¼˜åŒ–","uri":"/zh-cn/tail-call-and-tail-call-optimization/"},{"categories":["Programming-Languages"],"content":" å°¾è°ƒç”¨ \u0026 å°¾é€’å½’å‡è®¾å‡½æ•° A è°ƒç”¨äº†å‡½æ•° Bï¼Œæˆ‘ä»¬ç§°å‡½æ•° A ä¸º Callerï¼Œå‡½æ•° B ä¸º Calleeã€‚ å°¾è°ƒç”¨ï¼ˆTail-callï¼‰æŒ‡çš„æ˜¯ï¼šCaller æœ€ååªéœ€è¦è¿”å› Callee è¿™ä¸ªå‡½æ•°è°ƒç”¨çš„è®¡ç®—ç»“æœï¼Œå…¶ä»–è¿ç®—éƒ½æ‰§è¡Œå®Œæˆäº†1 å¦‚æœ Callee å°±æ˜¯ Caller è‡ªå·±ï¼Œå³å‡ºç°äº†å°¾è°ƒç”¨ + é€’å½’è°ƒç”¨çš„æƒ…å†µï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ç¬¦åˆå°¾é€’å½’ï¼ˆTail-recursiveï¼‰çš„ç‰¹ç‚¹ï¼Œæš‚ä¸”ç§°å…¶ä¸ºå°¾é€’å½’å‡½æ•° ","date":"2024-03-22","objectID":"/zh-cn/tail-call-and-tail-call-optimization/:1:0","series":null,"tags":["OCaml","Programming-Languages","Performance-Engineering"],"title":"å°¾è°ƒç”¨ä¸å°¾è°ƒç”¨ä¼˜åŒ–","uri":"/zh-cn/tail-call-and-tail-call-optimization/#å°¾è°ƒç”¨--å°¾é€’å½’"},{"categories":["Programming-Languages"],"content":" å°¾è°ƒç”¨ä¼˜åŒ–ï¼ˆTCOï¼‰æ ¹æ®å‡½æ•°è°ƒç”¨çš„åŸç†ï¼Œæœ¬æ¥å‡½æ•° A è°ƒç”¨å‡½æ•° B çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå‡½æ•° B åˆ›å»ºä¸€ä¸ª stack frameï¼Œç„¶åå‹å…¥åˆ°å‡½æ•°è°ƒç”¨æ ˆä¸­ï¼Œåç»­éœ€è¦æ ¹æ® stack frame é‡Œé¢çš„å‡½æ•°è¿”å›åœ°å€è¿›è¡Œè¿”å›ã€‚ä½†å¦‚æœè¿™æ˜¯ä¸€ä¸ªå°¾è°ƒç”¨ï¼Œæˆ‘ä»¬ä½•å¿…å¤šæ­¤ä¸€ä¸¾å‘¢ï¼Ÿåæ­£å‡½æ•° A å·²ç»æ‰§è¡Œäº†å®ƒæ‰€æœ‰çš„è®¡ç®—è¿‡ç¨‹ï¼Œåªéœ€è¦ç­‰å¾…å°¾è°ƒç”¨çš„å‡½æ•° B çš„è¿”å›ç»“æœå¹¶å°†å…¶è¿”å›å³å¯ å°¾è°ƒç”¨ä¼˜åŒ–ï¼ˆTail-call Optimizationï¼ŒTCOï¼‰çš„æ€æƒ³å°±æ˜¯è¿™æ ·çš„ï¼šå¦‚æœæ˜¯å°¾è°ƒç”¨ï¼Œå°±ä¸åˆ›å»ºæ–°çš„ stack frameï¼Œè€Œæ˜¯å¤ç”¨ Caller çš„ stack frame å°±å¥½äº† 2 é‚£ä¹ˆï¼Œå°¾è°ƒç”¨ä¼˜åŒ–çš„å¥½å¤„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¾ç„¶ï¼Œå°¾é€’å½’å‡½æ•°çš„æ—¶é—´å¼€é”€å’Œç©ºé—´å¼€é”€å¤§å¤§é™ä½äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾å¿ƒåœ°éšæ„ç”¨å°¾é€’å½’è€Œä¸ä¼šç”¨æ‹…å¿ƒæ ˆæº¢å‡ºçš„é—®é¢˜ï¼Œåªè¦å¯¹åº”çš„ç¼–ç¨‹è¯­è¨€æ”¯æŒå°¾è°ƒç”¨ä¼˜åŒ–å¹¶å¼€å¯å³å¯ ","date":"2024-03-22","objectID":"/zh-cn/tail-call-and-tail-call-optimization/:1:1","series":null,"tags":["OCaml","Programming-Languages","Performance-Engineering"],"title":"å°¾è°ƒç”¨ä¸å°¾è°ƒç”¨ä¼˜åŒ–","uri":"/zh-cn/tail-call-and-tail-call-optimization/#å°¾è°ƒç”¨ä¼˜åŒ–tco"},{"categories":["Programming-Languages"],"content":" å°†æ™®é€šé€’å½’å‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’å‡½æ•° ä¿¡æ¯ ä¸‹é¢é‡‡ç”¨ OCaml ç¼–å†™ä»£ç ï¼Œå› ä¸ºå®ƒæ”¯æŒå°¾è°ƒç”¨ä¼˜åŒ–~ å¦‚æœä½ ä¼šå…¶ä»–å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çœ‹æ‡‚å®ƒåº”è¯¥ä¹Ÿæ²¡é—®é¢˜ :) ä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„é€’å½’å‡½æ•°éƒ½æ˜¯å°¾é€’å½’å‡½æ•°ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“å¦‚ä½•å°†ä»»æ„ä¸€ä¸ªé€’å½’å‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’å‡½æ•°ï¼Œä¸€ä¸ªæ¯”è¾ƒæµè¡Œçš„æ–¹å¼æ˜¯ Accumulator æ¨¡å¼ å…·ä½“æ­¥éª¤å¦‚ä¸‹ 3 åˆ›å»ºä¸€ä¸ªè¾…åŠ©å‡½æ•° helperï¼Œä¸€èˆ¬è€Œè¨€å®ƒä¼šæœ‰ 2 ä¸ªå‚æ•° å½“å‰æ­£åœ¨å¤„ç†çš„æ•°æ® å½“å‰å·²ç»â€œç´¯è®¡çš„å€¼â€ è¾…åŠ©å‡½æ•° helper çš„ base case å˜ä¸ºï¼šè¿”å›æœ€åâ€œç´¯è®¡çš„å€¼â€ åŸæœ¬é€’å½’å‡½æ•°çš„ base case å˜ä¸ºï¼šè°ƒç”¨è¾…åŠ©å‡½æ•° helper ç”¨ç»å…¸çš„æ±‚è§£é˜¶ä¹˜ç¨‹åºä¸ºä¾‹ï¼Œé¦–å…ˆç”¨ dune åˆ›å»ºä¸€ä¸ªé¡¹ç›® sh $ dune init project tco ç„¶ååœ¨ ./tco/bin/main.ml é‡Œé¢å†™ä¸‹æ±‚é˜¶ä¹˜çš„é€’å½’å‡½æ•° ocaml let rec factorial n = match n with 0 | 1 -\u003e 1 | n -\u003e n * factorial (n - 1) æ˜¾ç„¶ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå°¾é€’å½’å‡½æ•°ï¼Œè¿™æ˜¯å› ä¸ºï¼šæˆ‘ä»¬è®¡ç®—å®Œ factorial (n - 1) çš„æ—¶å€™ï¼Œè¿˜éœ€è¦æŠŠå®ƒä¹˜ä»¥ n æ‰èƒ½è¿”å›ï¼Œæ‰€ä»¥ï¼Œå®ƒå¹¶ä¸ç¬¦åˆæœ€ååªéœ€è¦è¿”å›å‡½æ•°è°ƒç”¨çš„ç»“æœè¿™ä¸ªè¦æ±‚ ç°åœ¨æˆ‘ä»¬å°†è¿™ä¸ªå‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’å‡½æ•° ocaml let factorial_tco n = let rec helper cur acc = match cur with | 0 | 1 -\u003e acc (* è¿”å›â€œè®¡ç®—å‡ºæ¥çš„å€¼â€ *) | cur -\u003e (helper [@tailcall]) (cur - 1) (acc * cur) in helper n 1 (* è°ƒç”¨è¾…åŠ©å‡½æ•° *) æŠ€å·§ åœ¨ OCaml é‡Œé¢ï¼Œå¯ä»¥åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ç”¨ [@tailcall] æ ‡æ³¨ç¡®ä¿æ˜¯å°¾è°ƒç”¨ï¼Œå¦åˆ™ç¼–è¯‘çš„æ—¶å€™ä¼šå¼¹å‡ºè­¦å‘Šï¼Œç”¨æ³•å°±æ˜¯ (fun_call[@tailcall]) ä¸ºäº†æµ‹è¯• 2 ä¸ªä¸åŒçš„å®ç°çš„æ€§èƒ½å·®å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ core_bench å·¥å…·ã€‚é¦–å…ˆï¼Œå…ˆå®‰è£…å¿…è¦çš„åº“ sh $ opam install core_bench æ¥ä¸‹æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå°† ./tco/bin/dune ä¿®æ”¹ä¸º lisp (executable (public_name tco) (name main) (libraries tco core core_bench core_unix.command_unix)) ç„¶åå¢åŠ å…³äºæ€§èƒ½æµ‹è¯•çš„ä»£ç ï¼Œæœ€å ./tco/bin/main.ml æ–‡ä»¶é•¿ä¸‹é¢è¿™æ · ocaml open Core open Core_bench let rec factorial n = match n with | 0 | 1 -\u003e 1 | n -\u003e n * factorial (n - 1) let factorial_tco n = let rec helper cur acc = match cur with | 0 | 1 -\u003e acc | cur -\u003e (helper [@tailcall]) (cur - 1) (acc * cur) in helper n 1 (* Benchmark *) let bench () = Bench.make_command [ Bench.Test.create ~name:\"factorial\" (fun () -\u003e factorial 10000); Bench.Test.create ~name:\"factorial_tco\" (fun () -\u003e factorial_tco 10000); ] |\u003e Command_unix.run let _ = bench () æ¥ä¸‹æ¥æ„å»ºé¡¹ç›®å¹¶æ‰§è¡Œå³å¯ sh $ dune build $ dune exec tco åœ¨æˆ‘çš„ MacBook M3 Air ä¸Šçš„è¾“å‡ºç»“æœå¦‚ä¸‹æ‰€ç¤º text Estimated testing time 20s (2 benchmarks x 10s). Change using '-quota'. â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Name â”‚ Time/Run â”‚ Percentage â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ factorial â”‚ 40.42us â”‚ 100.00% â”‚ â”‚ factorial_tco â”‚ 10.06us â”‚ 24.90% â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ å¯ä»¥çœ‹åˆ°ï¼Œå¼€å¯å°¾è°ƒç”¨ä¼˜åŒ–çš„é€’å½’å‡½æ•°çš„æ—¶é—´å¼€é”€æ˜¯åŸæ¥çš„ 1/4 è€Œå·²ğŸš€ è­¦å‘Š å› ä¸ºæµ‹è¯•æœºå™¨çš„ä¸åŒï¼Œä½ çš„è¾“å‡ºç»“æœè·Ÿæˆ‘çš„ä¼šæœ‰æ‰€å·®åˆ«ï¼Œä½†æ˜¯æ˜¯å¦å¼€å¯å°¾è°ƒç”¨ä¼˜åŒ–çš„æ€§èƒ½å·®å¼‚åº”è¯¥è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚å¦å¤–ï¼Œå°¾è°ƒç”¨ä¼˜åŒ–çš„æ•ˆæœè¿˜è·Ÿé€’å½’å‡½æ•°çš„è°ƒç”¨æ·±åº¦æœ‰å…³ç³»ï¼Œå¦‚æœå°† 10000 æ”¹æˆ 10 å°±å¯ä»¥çœ‹åˆ°æ€§èƒ½å·®è·ä¸æ˜¯é‚£ä¹ˆæ˜æ˜¾äº† ","date":"2024-03-22","objectID":"/zh-cn/tail-call-and-tail-call-optimization/:2:0","series":null,"tags":["OCaml","Programming-Languages","Performance-Engineering"],"title":"å°¾è°ƒç”¨ä¸å°¾è°ƒç”¨ä¼˜åŒ–","uri":"/zh-cn/tail-call-and-tail-call-optimization/#å°†æ™®é€šé€’å½’å‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’å‡½æ•°"},{"categories":["Programming-Languages"],"content":" æ€»ç»“ä»¥ä¸Šå°±æ˜¯å…³äºã€Œå°¾è°ƒç”¨ã€\u0026ã€Œå°¾è°ƒç”¨ä¼˜åŒ–ã€çš„å…¨éƒ¨å†…å®¹ï¼Œè¯´ç™½äº†ï¼Œå°¾è°ƒç”¨ä¼˜åŒ–å°±æ˜¯å°†è®¡ç®—çš„ç»“æœæš‚æ—¶å­˜å‚¨åœ¨å‡½æ•°çš„å‚æ•°é‡Œé¢ï¼Œä»è€Œé¿å…äº†ä¸æ–­åˆ›å»º stack frame çš„å¼€é”€ã€‚æ€§èƒ½ä¸Šæ˜¯æå‡äº†ä½†æ˜¯ä»£ç ä¹Ÿä¸é‚£ä¹ˆä¼˜ç¾äº†ã€‚æ‰€ä»¥ï¼Œå»ºè®®è¿˜æ˜¯æ­£å¸¸å†™é€’å½’å‡½æ•°ï¼Œå½“å‡ºç°æ€§èƒ½ç“¶é¢ˆçš„æ—¶å€™å†æ”¹å†™ä¸ºå°¾é€’å½’å‡½æ•°~ ","date":"2024-03-22","objectID":"/zh-cn/tail-call-and-tail-call-optimization/:3:0","series":null,"tags":["OCaml","Programming-Languages","Performance-Engineering"],"title":"å°¾è°ƒç”¨ä¸å°¾è°ƒç”¨ä¼˜åŒ–","uri":"/zh-cn/tail-call-and-tail-call-optimization/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ Tail Recursion | CourseraÂ â†©ï¸ Accumulators for Tail Recursion | CourseraÂ â†©ï¸ Perspective on Tail Recursion | CourseraÂ â†©ï¸ ","date":"2024-03-22","objectID":"/zh-cn/tail-call-and-tail-call-optimization/:4:0","series":null,"tags":["OCaml","Programming-Languages","Performance-Engineering"],"title":"å°¾è°ƒç”¨ä¸å°¾è°ƒç”¨ä¼˜åŒ–","uri":"/zh-cn/tail-call-and-tail-call-optimization/#å‚è€ƒ"},{"categories":["Vim-Neovim"],"content":"Learn to use text-object in vim/neovim","date":"2024-03-03","objectID":"/zh-cn/learn-to-use-text-objects-in-vim/","series":null,"tags":["Vim","Neovim"],"title":"å­¦ä¹ ä½¿ç”¨ Vim\u0026Neovim çš„ text-object","uri":"/zh-cn/learn-to-use-text-objects-in-vim/"},{"categories":["Vim-Neovim"],"content":" å¼•è¨€ä½ å¯èƒ½ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ text-objectï¼Œä½†æˆ‘ç›¸ä¿¡ä½ å¯èƒ½å·²ç»åœ¨ä½¿ç”¨äº†åªæ˜¯ä½ è‡ªå·±æ²¡æœ‰æ„è¯†åˆ°ã€‚æ¯”å¦‚ï¼Œåœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸æƒ³è¦ä¿®æ”¹å‡½æ•°è°ƒç”¨çš„å…¥å‚ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸‹é¢è¿™æ®µä»£ç ä¸­ï¼Œæƒ³è¦ä¿®æ”¹æˆ bar(3, 2, 1)ï¼Œè€Œä½ çš„å…‰æ ‡åœç•™åœ¨ () é‡Œé¢ python def foo(): ... res = bar(1, 2, 3) # ^ # The position of your cursor(on `,`) ... ä½ ä¼šå¦‚ä½•ä¿®æ”¹å‘¢ï¼Ÿå¦‚æœä½ ç”¨ Vim/Neovim å·²ç»å¾ˆç†Ÿç»ƒäº†ï¼Œä½ å¤šåŠä¼šä¸å‡æ€ç´¢åœ°æ•²ä¸‹ ci) æˆ–è€… ci(ï¼Œç„¶åå°±å¯ä»¥å¿«é€Ÿæ•²ä¸‹æ–°çš„å…¥å‚äº†ã€‚è¿™é‡Œçš„ i( æˆ–è€… i) å°±æ˜¯æ‰€è°“çš„ text-object äº† è­¦å‘Š ä¸å¥½çš„åšæ³•ï¼šç”¨ F( æ‰¾åˆ°å·¦æ‹¬å·ï¼Œç„¶åç”¨ x ä¸€ä¸ªå­—ç¬¦ä¸€ä¸ªå­—ç¬¦åˆ é™¤ ","date":"2024-03-03","objectID":"/zh-cn/learn-to-use-text-objects-in-vim/:1:0","series":null,"tags":["Vim","Neovim"],"title":"å­¦ä¹ ä½¿ç”¨ Vim\u0026Neovim çš„ text-object","uri":"/zh-cn/learn-to-use-text-objects-in-vim/#å¼•è¨€"},{"categories":["Vim-Neovim"],"content":" è‡ªå¸¦çš„ text-object æŠ€å·§ ç”¨ :h text-objects æŸ¥çœ‹æ›´å¤šå¸®åŠ©ä¿¡æ¯ ç®€å•æ¥è¯´ï¼Œtext-object æ˜¯æ–‡æœ¬å¯¹è±¡ï¼Œå¯¹åº”ä¸€å—åŒºåŸŸçš„æ–‡æœ¬ï¼Œè€Œä¸”è¿™ä¸€å—æ–‡æœ¬åŒ…å«ç»“æ„åœ¨é‡Œé¢ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥å½“æˆä¸€ä¸ª text-object æ¥å¤„ç†ï¼Œç»™å¾ˆå¤šæ“ä½œå¸¦æ¥æ–¹ä¾¿ Vim/Neovim è‡ªå¸¦çš„ text-object åŒ…å«ä¸¤ç§æƒ…å†µï¼Œç”±ä¸¤ä¸ªå­—æ¯ç»„æˆï¼š ç¬¬ä¸€ä¸ªå­—æ¯è¦ä¹ˆæ˜¯ i è¦ä¹ˆæ˜¯ a ç®€å•æ¥è¯´ï¼Œi æŒ‡çš„æ˜¯ text-object æœ¬èº«ï¼Œè€Œ a åˆ™è¿˜åŒ…å«äº†ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªç©ºæ ¼æˆ–è€…æ˜¯æˆå¯¹å­—ç¬¦ è®°å¿†ï¼ši = (i)nsideï¼Œa = (a)round ç¬¬äºŒä¸ªå­—æ¯æœ‰ä¸¤ç§æƒ…å†µ æˆå¯¹å­—ç¬¦ä¸­çš„ä¸€ä¸ª æˆå¯¹å­—ç¬¦ï¼š{}, (), [], '', \"\", \u003ctag\u003e\u003c/tag\u003eï¼Œå…¶ä¸­ \u003ctag\u003e\u003c/tag\u003e ç”¨ t ä»£æŒ‡ï¼Œæ¯”å¦‚åˆ é™¤ \u003ctag\u003efoobar\u003c/tag\u003e é‡Œé¢çš„ foobar ä½ åªéœ€è¦å°†å…‰æ ‡æ”¾åœ¨ tag é‡Œé¢å¹¶æŒ‰ä¸‹ dit e.g. a{ = (around) {ï¼Œé€‰ä¸­ {} å†…çš„æ‰€æœ‰ä¸œè¥¿ï¼ˆåŒ…æ‹¬ {}ï¼‰ (w)ord, (s)entences, (p)aragraphs æ¯ä¸€ç§éƒ½å¯ä»¥å’Œ i æˆ–è€… a æ­é…ä½¿ç”¨ï¼Œæ‰€ä»¥ä¼šæœ‰ iw, aw, is, as, ip, ap è¿™å‡ ç§ ","date":"2024-03-03","objectID":"/zh-cn/learn-to-use-text-objects-in-vim/:2:0","series":null,"tags":["Vim","Neovim"],"title":"å­¦ä¹ ä½¿ç”¨ Vim\u0026Neovim çš„ text-object","uri":"/zh-cn/learn-to-use-text-objects-in-vim/#è‡ªå¸¦çš„-text-object"},{"categories":["Vim-Neovim"],"content":" æ‰©å±• text-objectå‰é¢æˆ‘ä»¬æåˆ°ï¼Œtext-object å¯¹åº”çš„æ–‡æœ¬åŒ…å«ä¸€å®šçš„ç»“æ„ï¼Œé‚£ä¹ˆä»€ä¹ˆæ–‡æœ¬å¤©ç„¶æœ‰ç»“æ„ä¿¡æ¯å‘¢ï¼Ÿé‚£å°±æ˜¯ä»£ç ï¼Œä»£ç æ˜¯é«˜åº¦ç»“æ„åŒ–çš„æ–‡æœ¬ï¼Œå—åˆ°å¯¹åº”è¯­æ³•çš„ä¸¥æ ¼é™åˆ¶ åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸¸å¸¸æƒ³è¦ç›´æ¥åˆ æ‰æ•´ä¸ªå‡½æ•°ä½“é‡å†™ã€‚å¦‚æœå‡½æ•°ä½“æ˜¯ç”¨ {} æ‹¬èµ·æ¥çš„ï¼Œé‚£ä¹ˆé€šå¸¸æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ ci{ å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼Œåªæ˜¯éœ€è¦æ³¨æ„å…‰æ ‡æ‰€åœ¨çš„ä½ç½®ï¼Œè¦ç¡®ä¿å‡½æ•°ä½“çš„ {} æ˜¯æœ€é è¿‘å…‰æ ‡æ‰€åœ¨ä½ç½®çš„ï¼Œè¿™æœ‰ç‚¹æ¼äºº ç¤ºä¾‹ Rust ä»£ç çš„å‡½æ•°ä½“å°±æ˜¯ç”¨ {} æ‹¬èµ·æ¥çš„ï¼Œæ‰€ä»¥åˆ æ‰å‡½æ•°ä½“æˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†å…‰æ ‡åœåœ¨ if çš„ i ä¸Šï¼Œç„¶åç”¨ ci{ å°±å¥½äº† rust fn fib(n: i32) -\u003e i32 { // The position of your cursor(on `i`) // v if n == 1 || n == 2 { 1 } else { fib(n - 1) + fib(n-2) } } ä½†å¦‚æœå‡½æ•°ä½“å¹¶ä¸æ˜¯ç”¨ {} æ‹¬èµ·æ¥çš„å‘¢ï¼Ÿæ¯”å¦‚ Python ä»£ç ï¼Œæ­¤æ—¶ ci{ å°±ä¸èƒ½ç”¨äº† python def fib(n: int): if n == 1 or n == 2: return 1 return fib(n - 1) + fib(n - 2) è€ƒè™‘åˆ°ä»£ç æ˜¯é«˜åº¦ç»“æ„åŒ–çš„ï¼Œæ˜¯å¦å­˜åœ¨æŸä¸ªç‰¹æ®Šçš„ text-object è®©æˆ‘ä»¬å¯ä»¥é€‰ä¸­å‡½æ•°ä½“å¹¶æ•´ä¸ªåˆ é™¤å‘¢ï¼Ÿè¿™æ­£æ˜¯ nvim-treesitter-textobjects è¦åšçš„äº‹æƒ…ï¼Œå®ƒæ˜¯åŸºäº nvim-treesitter çš„ Lua æ’ä»¶ã€‚å®ƒé€šè¿‡å¯¹ä»£ç çš„ AST çš„åˆ†æï¼Œå¸®æˆ‘ä»¬å®šä¹‰äº†å‡½æ•°ä½“ã€å¾ªç¯ä½“ç­‰ text objectï¼Œä¹Ÿå«åš syntax aware text objectï¼Œå› ä¸ºå®ƒè·Ÿç¼–ç¨‹è¯­è¨€çš„è¯­æ³•æœ‰å…³ç³» æŠ€å·§ æŸ¥çœ‹å¯¹åº”çš„ commit äº†è§£æ–‡ä»¶å˜æ›´ï¼Œä»¥åŠæˆ‘æ˜¯å¦‚ä½•ç»„ç»‡é…ç½®æ–‡ä»¶çš„ ä½ çš„æ–‡ä»¶ç»„ç»‡æ–¹å¼å¯èƒ½è·Ÿæˆ‘ä¸åŒï¼Œä½†æˆ‘æƒ³ä¸‹é¢çš„å†…å®¹ç†è§£èµ·æ¥æ²¡æœ‰ä»€ä¹ˆå›°éš¾ :) å¦‚æœä½ ä¹Ÿç”¨çš„æ˜¯ lazy.nvim çš„è¯ï¼Œåªéœ€è¦åœ¨æ’ä»¶åˆ—è¡¨é‡Œé¢è¿½åŠ  lua require(\"lazy\").setup({ ... { \"nvim-treesitter/nvim-treesitter-textobjects\", dependencies = \"nvim-treesitter/nvim-treesitter\", config = function() require(\"config.nvim-treesitter-textobjects\") end, }, ... }) åœ¨ config ç›®å½•ä¸‹æ–°å¢ nvim-treesitter-textobjects.lua æ–‡ä»¶æ·»åŠ å¦‚ä¸‹çš„é…ç½®ï¼ˆå¤§éƒ¨åˆ†ä»£ç è¢«æˆ‘çœç•¥äº†ï¼Œå®Œæ•´æ–‡ä»¶åœ¨è¿™é‡Œï¼‰ lua local is_ok, configs = pcall(require, \"nvim-treesitter.configs\") if not is_ok then return end configs.setup({ textobjects = { select = { ... keymaps = { -- outer: outer part -- inner: inner part [\"af\"] = \"@function.outer\", [\"if\"] = \"@function.inner\", [\"ac\"] = \"@class.outer\", [\"ic\"] = \"@class.inner\", [\"al\"] = \"@loop.outer\", [\"il\"] = \"@loop.inner\", }, include_surrounding_whitespace = true, }, }, ... }) æ ¹æ®æˆ‘çš„ä¸ªäººéœ€è¦ï¼Œæˆ‘è®¾ç½®äº† 6 ç§ text-objectï¼Œåˆ†åˆ«æ˜¯ af, if, ac, ic, al, ilï¼Œåˆ†åˆ«ç”¨äºå¤„ç†å‡½æ•°ã€ç±»å’Œå¾ªç¯ï¼Œåœ¨å®˜æ–¹ä»“åº“çš„ README é‡Œä½ å¯ä»¥çœ‹åˆ°æ›´å¤šæ”¯æŒçš„ syntax aware text-object æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ç”¨ dif æ–¹ä¾¿åœ°åœ¨å‡½æ•°ä½“é‡Œçš„ä»»æ„ä½ç½®åˆ æ‰æ•´ä¸ªå‡½æ•°ä½“äº†ï¼ˆåªè¦ç¡®ä¿ä½ çš„å…‰æ ‡åœ¨å‡½æ•°ä½“å†…ï¼‰ï¼Œè¿˜æ˜¯æ–¹ä¾¿å¾ˆå¤šçš„ï¼ ","date":"2024-03-03","objectID":"/zh-cn/learn-to-use-text-objects-in-vim/:3:0","series":null,"tags":["Vim","Neovim"],"title":"å­¦ä¹ ä½¿ç”¨ Vim\u0026Neovim çš„ text-object","uri":"/zh-cn/learn-to-use-text-objects-in-vim/#æ‰©å±•-text-object"},{"categories":["Vim-Neovim"],"content":" æ€»ç»“text-object å°†æ–‡æœ¬ç»„ç»‡æˆå¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°å¯¹é½è¿›è¡Œæ“ä½œã€‚åœ¨ nvim-treesitter-textobjects çš„åŠ æŒä¸‹ï¼Œç¼–ç¨‹è¯­è¨€çš„å„ç§ç»“æ„ä¹Ÿå¯ä»¥è¢«å½“æˆæ˜¯ text-objectï¼Œä½¿ç”¨ä¸‹æ¥éå¸¸æ–¹ä¾¿ğŸº ","date":"2024-03-03","objectID":"/zh-cn/learn-to-use-text-objects-in-vim/:4:0","series":null,"tags":["Vim","Neovim"],"title":"å­¦ä¹ ä½¿ç”¨ Vim\u0026Neovim çš„ text-object","uri":"/zh-cn/learn-to-use-text-objects-in-vim/#æ€»ç»“"},{"categories":["Vim-Neovim"],"content":"ä»é›¶å¼€å§‹ç”¨ Neovim é…ç½® OCaml çš„å¼€å‘ç¯å¢ƒï¼ŒåŒ…æ‹¬ LSPã€Formatter ç­‰","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/"},{"categories":["Vim-Neovim"],"content":" Info æ›´æ–°è¯´æ˜: 2024-09-14. éƒ¨åˆ† LSP æœ¬èº«åŒ…å« Formatterï¼Œå°±ä¸éœ€è¦è‡ªå·±ä¸‹è½½ Formatter å†ç”¨ null-ls å¤„ç†ã€‚é€šè¿‡ä¿®æ”¹ vim.lsp.buf.format çš„ filter å‚æ•°å°±å¯ä»¥è®©è¿™ä¸¤ç§æƒ…å†µå¹¶å­˜ ","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/:0:0","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/#"},{"categories":["Vim-Neovim"],"content":" å‰è¨€åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ï¼Œæˆ‘è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä»é›¶å¼€å§‹é…ç½® Neovimï¼Œè®©å®ƒæ›´æ¥è¿‘ IDEã€‚ä½†æˆ‘æ²¡æœ‰è®²åˆ°çš„æ˜¯ï¼š æœ‰çš„ LSP æœ¬èº«ä¸æ”¯æŒä»£ç æ ¼å¼åŒ–ï¼Œè¦å¦‚ä½•é…ç½® Neovim è®©å®ƒå¯ä»¥ç”¨ç¬¬ä¸‰æ–¹çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Ÿ æ–°å¢ä¸€é—¨ç¼–ç¨‹è¯­è¨€æ”¯æŒçš„æ—¶å€™ï¼Œè¦æ€ä¹ˆä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Ÿ æœ€è¿‘åœ¨å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹éœ€è¦åœ¨æˆ‘çš„ Mac ä¸Šé…ç½® OCamlï¼Œæ­£å¥½ä»¥å®ƒä¸ºä¾‹ï¼Œå›ç­”ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ Info æœ¬æ–‡å‡å®šä½ å·²ç»é˜…è¯»è¿‡æˆ‘ä¹‹å‰çš„æ–‡ç« ï¼Œå› æ­¤å¯¹äºä¸€äº›ç»†èŠ‚é—®é¢˜ï¼Œæˆ‘å°±ä¸å†èµ˜è¿° ","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/:1:0","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/#å‰è¨€"},{"categories":["Vim-Neovim"],"content":" å®‰è£… OCaml Info å…¶ä»–ç³»ç»Ÿçš„å®‰è£…æ–¹æ³•å¯ä»¥çœ‹è¿™é‡Œ åœ¨ Mac ä¸Šå®‰è£… OCaml ç”¨ Homebrew æ¯”è¾ƒæ–¹ä¾¿ sh $ brew install opam æŒ‰ç…§ Homebrew çš„è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜éœ€è¦è¿›è¡Œé¢å¤–çš„é…ç½®ï¼Œéœ€è¦ä¿®æ”¹ ~/.zshrcï¼ˆå¦‚æœä½ ç”¨çš„æ˜¯ Zshï¼‰æˆ–è€…æ˜¯ ~/.bashrcï¼ˆå¦‚æœä½ ç”¨çš„æ˜¯ Bashï¼‰ sh $ opam init # æŒ‰ç…§æç¤ºæŒ‰ä¸‹ y ç¡®è®¤å³å¯ æ¥ä¸‹æ¥è®©æˆ‘ä»¬ä¸Šä¸€æ­¥çš„é…ç½®ç”Ÿæ•ˆ sh $ source ~/.zshrc # $ source ~/.bashrc # if you use bash æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„å‘½ä»¤æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ sh $ opam switch è¾“å‡ºåº”è¯¥è·Ÿä¸‹é¢çš„å·®ä¸å¤š text # switch compiler description -\u003e 5.0.0 ocaml-base-compiler.5.0.0 5.0.0 default ocaml.4.14.0 default Tip æ¥ä¸‹æ¥éœ€è¦å®‰è£…ä¸€äº›åŒ…ï¼Œå› ä¸ºç½‘ç»œåŸå› è®¿é—®å¯èƒ½ä¼šæ¯”è¾ƒæ…¢ã€‚åŠ é€Ÿå¯ä»¥é€šè¿‡æ¢æºå®ç°ï¼Œè¿™é‡Œç”¨çš„æ˜¯ä¸Šæµ·äº¤é€šå¤§å­¦çš„æºï¼Œé…ç½®å‘½ä»¤ä¸º sh $ opam repo \\ set-url default \\ https://mirrors.sjtug.sjtu.edu.cn/git/opam-repository.git \\ --all --set-default ç­‰å¾…è¯¥å‘½ä»¤æ‰§è¡Œå®Œå°±å®Œæˆäº†æ¢æº ç±»ä¼¼ Python æœ‰ REPLï¼Œå¦‚ IPythonã€‚åœ¨ OCaml é‡Œä¹Ÿæœ‰ç±»ä¼¼çš„å·¥å…·ï¼Œå«åš utop sh $ opam install utop æ¥ä¸‹æ¥å°è¯•ä½¿ç”¨ utop çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ sh $ utop å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä½ åº”è¯¥å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„è¾“å‡º text â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ Welcome to utop version 2.13.1 (using OCaml version 5.0.0)! â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ Type #utop_help for help about using utop. â”€( 10:33:26 )â”€\u003c command 0 \u003eâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€{ counter: 0 }â”€ utop # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚Afl_instrumentâ”‚Alias_analysisâ”‚Allocated_constâ”‚Annotâ”‚Applicativeâ”‚Archâ”‚Argâ”‚Arg_helperâ”‚Arrayâ”‚ArrayLabelsâ”‚Asmgenâ”‚Asmlibrarianâ”‚Asmlinkâ”‚Asmpackagerâ”‚Assert_failureâ”‚Ast_helperâ”‚Ast_invaâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜ ","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/:2:0","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/#å®‰è£…-ocaml"},{"categories":["Vim-Neovim"],"content":" é…ç½® OCaml LSP Tip å¦‚æœä½ è·Ÿç€æˆ‘ä¸Šä¸€ç¯‡çš„æ•™ç¨‹è¿›è¡Œé…ç½®ï¼Œé‚£ä¹ˆä½ çš„ç›®å½•ç»“æ„åº”è¯¥é•¿ä¸‹é¢è¿™æ · text nvim â”œâ”€â”€ init.lua â””â”€â”€ lua â”œâ”€â”€ colorscheme.lua â”œâ”€â”€ config â”‚Â â””â”€â”€ nvim-cmp.lua â”œâ”€â”€ keymaps.lua â”œâ”€â”€ lsp.lua â”œâ”€â”€ options.lua â””â”€â”€ plugins.lua ä¹‹å‰çš„æ–‡ç« é‡Œé¢æˆ‘ä»¬é…ç½® LSP çš„æ—¶å€™å€ŸåŠ©äº† mason.nvimã€‚è¦å¢åŠ æ–°çš„ç¼–ç¨‹è¯­è¨€çš„ LSP åŒæ ·å¯ä»¥ç”¨è¿™ä¸ªå·¥å…·ï¼Œæ­¥éª¤å¦‚ä¸‹ æ‰“å¼€ Neovimï¼Œè¾“å…¥ :Masonï¼Œåœ¨ (2) LSP é‡Œé¢æ‰¾åˆ° ocaml-lspï¼Œå°†å…‰æ ‡æ”¾åœ¨è¯¥è¡Œç„¶åæŒ‰ä¸‹ i å°±å¯ä»¥å®‰è£…äº†ï¼Œç¨å€™ç‰‡åˆ»â˜•ï¸ æ‰“å¼€ LSP é…ç½®æ–‡ä»¶ï¼ˆæˆ‘æ”¾åœ¨äº† lsp.lua æ–‡ä»¶é‡Œé¢ï¼‰ï¼Œæ·»åŠ å¦‚ä¸‹çš„å†…å®¹ lua ... -- rest of the configurations lspconfig.ocamllsp.setup({ on_attach = on_attach, }) Warning ä½ å¯èƒ½æœ‰è‡ªå·±çš„é…ç½®æ–‡ä»¶è€Œæ²¡æœ‰è·Ÿç€æˆ‘çš„ä¸Šä¸€ç¯‡ æ–‡ç« æ“ä½œï¼Œæ‰€ä»¥åœ¨ä½ çš„é…ç½®æ–‡ä»¶é‡Œé¢åŠ ä¸Šè¿™ä¸€æ®µä»£ç å¹¶ä¸ä¿è¯èƒ½å¤Ÿ workã€‚ä½ å¯ä»¥é€‰æ‹©æµè§ˆå®Œæ•´æ–‡ä»¶ æ¥ç†è§£è¿™æ®µä»£ç çš„ä½œç”¨ï¼Œå’Œå°è¯•è¿ç§»é…ç½®åˆ°ä½ çš„é…ç½®æ–‡ä»¶ä¸­ ä¿®æ”¹å®Œ lsp.lua æ–‡ä»¶ä¹‹åï¼Œé‡å¯ Neovim ä¹‹åå°±ç”Ÿæ•ˆäº† Warning å’Œ rust-analyzer ç±»ä¼¼ï¼Œocaml-lsp çš„ LSP ä¹Ÿåªæ”¯æŒåœ¨é¡¹ç›®é‡Œå¯ç”¨ï¼Œæ— æ³•åœ¨å•æ–‡ä»¶ä¸‹ç”Ÿæ•ˆ æ¥ä¸‹æ¥ï¼Œå¯ä»¥ç”¨ dune æ–°å»ºé¡¹ç›®ï¼Œå°è¯•å†™ä¸€ä¸‹ OCaml çš„ä»£ç ï¼Œæ£€æŸ¥ LSP æ˜¯å¦æ­£å¸¸å·¥ä½œ ","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/:3:0","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/#é…ç½®-ocaml-lsp"},{"categories":["Vim-Neovim"],"content":" é…ç½® OCaml Formatterocaml-lsp æœ¬èº«å¹¶ä¸æ”¯æŒ OCaml ä»£ç çš„æ ¼å¼åŒ–ï¼Œåœ¨å®Œæˆå¦‚ä¸Šçš„é…ç½®ä¹‹åï¼Œå¦‚æœä½ å°è¯•æ ¼å¼åŒ–ï¼Œä¼šå‘ç° Neovim æŠ¥é”™ï¼š text [LSP] Format request failed, no matching language servers. å› æ­¤ï¼Œæ¥ä¸‹æ¥è¦è®²è§£çš„å°±æ˜¯å¦‚ä½•é…ç½® OCaml çš„ä»£ç æ ¼å¼åŒ–åŠŸèƒ½ã€‚ ä¹‹å‰ä½ å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œåœ¨ Neovim é‡Œé¢è¾“å…¥ :Mason çš„æ—¶å€™å¯ä»¥çœ‹åˆ°ï¼Œå®ƒä¸ä»…æ”¯æŒå®‰è£… LSPï¼Œè¿˜å¯ä»¥å®‰è£… Linterã€Formatter ç­‰ã€‚å…¶ä¸­ Formatter å°±æ˜¯ç”¨äºä»£ç çš„æ ¼å¼åŒ–ã€‚OCaml çš„ Formmater æ˜¯ ocamlformatï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨ Mason çš„çª—å£ (5) Formatter é‡Œæ‰¾åˆ°å®ƒï¼Œå°†å…‰æ ‡åœç•™åœ¨è¯¥é€‰é¡¹ï¼Œç„¶åæŒ‰ä¸‹ i å®‰è£…ã€‚ç­‰å¾…ç‰‡åˆ»ä¹‹åå°±å¯ä»¥çœ‹åˆ°å®‰è£…æˆåŠŸäº†â˜•ï¸ ocamlformat æœ¬èº«åªæ˜¯ä¸€ä¸ª CLI å·¥å…·ï¼Œæ²¡æ³•æ–¹ä¾¿åœ°é›†æˆåˆ° Neovim é‡Œé¢ã€‚å¥½åœ¨è¿˜æœ‰ none-ls æ’ä»¶ï¼Œå®ƒå¯ä»¥å°† Linterã€Formatter æˆ–è€…å‘½ä»¤è¡Œç­‰å·¥å…·æš´éœ²æˆ LSP ç»™ Neovim Info none-ls.nvim çš„å‰èº«æ˜¯ null-ls.nvimï¼Œä½†æ˜¯ null-ls çš„å¼€å‘è€…å·²ç»ä¸å†ç»§ç»­æ›´æ–°äº†ï¼Œå› æ­¤ç¤¾åŒºçš„çƒ­å¿ƒå¼€å‘è€…ç»´æŠ¤äº†å¦å¤–ä¸€ä¸ªåŠŸèƒ½ä¸€æ ·çš„ç‰ˆæœ¬å«åš none-ls ä¸ºäº†è¿›ä¸€æ­¥å‡è½»é…ç½®çš„è´Ÿæ‹…ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ mason-null-ls.nvim æ’ä»¶ï¼Œä»åå­—å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒæ˜¯ mason.nvim çš„å¼€å‘è€…å¼€å‘çš„ã€‚æ‰“å¼€ plugins.lua æ–°å¢å¦‚ä¸‹ Lua ä»£ç ï¼Œä¿å­˜å¹¶é‡å¯å lazy.nvim å°±ä¼šè‡ªåŠ¨å®‰è£…æ–°æ’ä»¶ï¼Œç¨å€™ç‰‡åˆ»â˜•ï¸ lua ... -- rest of the configurations require(\"lazy\").setup({ -- Add hooks to LSP to support Linter \u0026\u0026 Formatter { \"jay-babu/mason-null-ls.nvim\", event = { \"BufReadPre\", \"BufNewFile\" }, dependencies = { \"williamboman/mason.nvim\", \"nvimtools/none-ls.nvim\", }, config = function() -- Note: -- the default search path for `require` is ~/.config/nvim/lua -- use a `.` as a path seperator -- the suffix `.lua` is not needed require(\"config.mason-null-ls\") end, }, ... -- rest of the configurations }) ç„¶ååœ¨ config æ–‡ä»¶å¤¹é‡Œæ–°å»º mason-null-ls.lua æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ lua local mason_ok, mason = pcall(require, \"mason\") if not mason_ok then return end local null_ls_ok, null_ls = pcall(require, \"null-ls\") if not null_ls_ok then return end local mason_null_ls_ok, mason_null_ls = pcall(require, \"mason-null-ls\") if not mason_null_ls_ok then return end mason.setup() mason_null_ls.setup({ -- A list of sources to install if they're not already installed. -- This setting has no relation with the `automatic_installation` setting. ensure_installed = {}, -- Run `require(\"null-ls\").setup`. -- Will automatically install masons tools based on selected sources in `null-ls`. -- Can also be an exclusion list. -- Example: `automatic_installation = { exclude = { \"rust_analyzer\", \"solargraph\" } }` automatic_installation = false, -- Sources found installed in mason will automatically be setup for null-ls. automatic_setup = true, handlers = { -- Hint: see https://github.com/nvimtools/none-ls.nvim/blob/main/doc/BUILTIN_CONFIG.md -- to see what sources are available -- Hint: see https://github.com/jose-elias-alvarez/null-ls.nvim/blob/main/doc/BUILTIN_CONFIG.md -- to check what we can configure for each source ocamlformat = function(source_name, methods) null_ls.register(null_ls.builtins.formatting.ocamlformat.with({ -- Add more arguments to a source's defaults -- Default: { \"--enable-outside-detected-project\", \"--name\", \"$FILENAME\", \"-\" } -- type `ocamlformat --help` in your terminal to check more args extra_args = { \"--if-then-else\", \"vertical\" }, })) end, }, }) null_ls.setup() Tip å½“ä½ å¼€å¯ automatic_setup = true çš„æ—¶å€™ï¼Œmason-null-ls ä¼šè‡ªåŠ¨å¸®ä½ è¿›è¡Œé…ç½®å®‰è£…äº†çš„ Formatterã€‚å¦‚æœæƒ³è¦ä¿®æ”¹é»˜è®¤é…ç½®ï¼Œå°±éœ€è¦åœ¨ handlers é‡Œé¢è¿›è¡Œä¿®æ”¹ FAQsï¼š å¦‚ä½•æ‰¾åˆ°å¯¹åº” Formatter çš„é»˜è®¤é…ç½®ï¼Ÿçœ‹ è¿™é‡Œ å¦‚ä½•é…ç½® handlersï¼Ÿçœ‹ è¿™é‡Œ å¦‚ä½•çŸ¥é“å¯¹åº”çš„ Formatter å…¶ä»–å¯é€‰é…ç½®é€‰é¡¹ï¼Ÿçœ‹å¯¹åº” LSP çš„å®˜æ–¹ GitHub ä»“åº“ã€‚æ¯”å¦‚ ocamlformat å°±åœ¨æ–‡æ¡£è¯´äº†ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥ ocamlformat --help å°±å¯ä»¥çœ‹åˆ°å„ç§é…ç½®é¡¹ æœ€åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹ lsp.lua æ–‡ä»¶ï¼ŒåŸæœ¬è·Ÿä»£ç æ ¼å¼åŒ–æœ‰å…³çš„è¡Œé•¿è¿™ä¸ªæ ·å­ lua ... vim.keymap.set(\"n\", \"\u003cspace\u003ef\", function() vim.lsp.buf.format({ async = true }) end, bufopts) ... ç°åœ¨å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ none-lsï¼Œç›¸å½“äºæ‰€æœ‰çš„æ ¼å¼åŒ–éƒ½äº¤ç»™å®ƒæ¥åšï¼Œå› æ­¤ï¼Œéœ€è¦æ–°å¢ filter å‚æ•° lua ... -- rest of the configurations vim.keymap.set(\"n\", \"\u003cspace\u003ef\", function() vim.lsp.buf.format({ async = true, -- Predicate used to filter clients. Receives a client as -- argument and must return a boolean. Clients matching the -- predicate are included. filter = function(client) return client.name == \"null-ls\" end, }) end, bufopts) ... -- rest of the configurations å®Œæˆæ–‡ä»¶ç¼–è¾‘ä¹‹åï¼Œé‡å¯ Neovim å°±ç”Ÿæ•ˆäº† Tip é‚£å¦‚æœä¸€ä¸ª LSP æœ¬èº«å°±åŒ…å«äº† Formatter å‘¢ï¼Ÿæ¯”å¦‚ Haskell-language-serverï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¸éœ€è¦è®© null-ls è¿›è¡Œæ ¼å¼åŒ–ï¼Œé€šè¿‡ä¿®æ”¹ filter å‚æ•°å°±å¯ä»¥è§£å†³ï¼Œåƒä¸‹é¢è¿™æ · lua ... -- rest of the configurations vim.keymap.set(\"n\", \"\u003cspace\u003ef\", function() vim.lsp.buf.format({ async = true, -- Predicate used to filter clients. Receives a client as -- argument and must return a boolean. Clients matching the -- predicat","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/:4:0","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/#é…ç½®-ocaml-formatter"},{"categories":["Vim-Neovim"],"content":" æ€»ç»“ç°åœ¨å¯¹å‰æ–‡çš„å†…å®¹è¿›è¡Œæ€»ç»“ï¼Œå¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·ä¹Ÿä½¿ç”¨ mason.nvim, mason-lspconfig, none-ls.nvim å’Œ mason-null-ls.nvim è¿™äº›æ’ä»¶ã€‚é‚£ä¹ˆåœ¨æ·»åŠ ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€çš„æ—¶å€™ï¼Œä½ å¯ä»¥è¿™æ ·é…ç½®ï¼š é¦–å…ˆåœ¨ä½ çš„æœºå™¨ä¸Šé…ç½®å¥½è¯¥ç¼–ç¨‹è¯­è¨€çš„å¼€å‘ç¯å¢ƒï¼ŒæŸ¥è¯¢å®˜æ–¹æ–‡æ¡£å³å¯ æ‰“å¼€ Neovimï¼Œè¾“å…¥ :Mason å®‰è£…å¯¹åº”çš„ LSPï¼Œå…ˆæ£€æŸ¥å®˜æ–¹æ–‡æ¡£çœ‹æœ‰æ²¡æœ‰è‡ªå¸¦ Formatterï¼Œå¦‚æœæ²¡æœ‰å°±ç”¨ :Mason å®‰è£…å¯¹åº”çš„ Formatter æ‰“å¼€ lsp.lua æ–‡ä»¶é…ç½® LSP å¦‚æœæ˜¯è‡ªå·±å•ç‹¬ä¸‹è½½çš„ Formatterï¼Œè¿˜éœ€è¦æ‰“å¼€ mason-null-ls.lua æ–‡ä»¶ä¿®æ”¹ handlers å‚æ•° å¯¹äºæœ¬æ–‡æ²¡æœ‰è¯´æ¸…æ¥šçš„åœ°æ–¹ï¼Œä½ å¯ä»¥æŸ¥çœ‹æˆ‘çš„ dotfiles é…ç½® æ¥äº†è§£æ›´å¤šçš„ä¿¡æ¯~~ ","date":"2024-01-23","objectID":"/zh-cn/neovim-setup-for-ocaml/:5:0","series":null,"tags":["Vim","Neovim","OCaml"],"title":"OCaml çš„ Neovim é…ç½®æ–¹æ¡ˆ","uri":"/zh-cn/neovim-setup-for-ocaml/#æ€»ç»“"},{"categories":["ML-DL"],"content":"ä»‹ç»äº† LLM æ¨ç†åŠ é€Ÿçš„æ–¹æ³•ä¹‹ä¸€ - KV Cache","date":"2023-10-12","objectID":"/zh-cn/llm-inference-optimization-kv-cache/","series":null,"tags":["NLP","Deep-Learning","LLM"],"title":"LLM æ¨ç†åŠ é€Ÿ - KV Cache","uri":"/zh-cn/llm-inference-optimization-kv-cache/"},{"categories":["ML-DL"],"content":" èƒŒæ™¯LLM ç”¨äºæ¨ç†çš„æ—¶å€™å°±æ˜¯ä¸æ–­åŸºäºå‰é¢çš„æ‰€æœ‰ token ç”Ÿæˆä¸‹ä¸€ä¸ª token å‡è®¾ç°åœ¨å·²ç»ç”Ÿæˆäº† $t$ ä¸ª tokenï¼Œç”¨ $x_{1:t}$ è¡¨ç¤ºã€‚åœ¨ä¸‹ä¸€è½®ï¼ŒLLM ä¼šç”Ÿæˆ $x_{1:t+1}$ï¼Œæ³¨æ„ä»–ä»¬çš„å‰ $t$ ä¸ª token æ˜¯ä¸€æ ·çš„ $$ x_{1:t+1}=\\text{LLM}(x_{1:t}) $$ å†ä¸‹ä¸€æ­¥ä¹Ÿæ˜¯ç›¸ä¼¼çš„ $$ x_{1:t+2}=\\text{LLM}(x_{1:t+1}) $$ æ¦‚æ‹¬æ¥è¯´ï¼Œæ¯ä¸€è½®ç”¨ä¸Šä¸€è½®çš„è¾“å‡ºå½“æˆæ–°çš„è¾“å…¥è®© LLM é¢„æµ‹ï¼Œä¸€èˆ¬è¿™ä¸ªè¿‡ç¨‹ä¼šæŒç»­åˆ°è¾“å‡ºè¾¾åˆ°æå‰è®¾å®šçš„æœ€å¤§é•¿åº¦æˆ–è€…æ˜¯ LLM è‡ªå·±ç”Ÿæˆäº†ç‰¹æ®Šçš„ç»“æŸ token ","date":"2023-10-12","objectID":"/zh-cn/llm-inference-optimization-kv-cache/:1:0","series":null,"tags":["NLP","Deep-Learning","LLM"],"title":"LLM æ¨ç†åŠ é€Ÿ - KV Cache","uri":"/zh-cn/llm-inference-optimization-kv-cache/#èƒŒæ™¯"},{"categories":["ML-DL"],"content":" KV Cache åŸç† ä¿¡æ¯ LLM çš„æ¨ç†è¿‡ç¨‹å¾ˆå¥½ç†è§£ï¼Œä½†æ˜¯è¿™ä¸ªç®€å•çš„å®ç°å­˜åœ¨ä¸€ä¸ªé—®é¢˜â€”â€”å­˜åœ¨ä¸å°‘çš„é‡å¤è®¡ç®—å¯¼è‡´è®¡ç®—æ•ˆç‡ä¸æ˜¯å¾ˆé«˜ğŸ§ åªéœ€è¦çœ‹ LLM çš„è¿ç»­ä¸¤æ¬¡å‰å‘ä¼ æ’­æ¨ç†è®¡ç®—å°±å¾ˆå¥½ç†è§£ä¸ºä»€ä¹ˆè¯´å­˜åœ¨é‡å¤è®¡ç®—äº† æ¯”å¦‚è€ƒè™‘ä¸‹é¢è¿™ä¸€æ­¥ $$ x_{1:t+1}=\\text{LLM}(x_{1:t}) $$ LLM çš„è¾“å…¥æ˜¯ $x_{1:t}$ï¼Œå…ˆåªçœ‹æœ€åä¸€ä¸ª token $x_t$ï¼Œå®ƒçš„ query å‘é‡ä¼šå’Œå‰é¢çš„æ¯ä¸ª token ä»¥åŠè‡ªå·±äº§ç”Ÿçš„ key å‘é‡è®¡ç®—å†…ç§¯ $$ \\mathbf q_{t}^T\\mathbf k_{1},\\mathbf q_{t}^T\\mathbf k_{2},â€¦,\\mathbf q_{t}^T\\mathbf k_{t} $$ ç„¶åçœ‹ä¸‹ä¸€æ­¥ $$ x_{1:t+2}=\\text{LLM}(x_{1:t+1}) $$ LLM çš„è¾“å…¥æ˜¯ $x_{1:t+1}$ï¼Œçœ‹æœ€åä¸€ä¸ª token $x_{t+1}$ï¼Œå®ƒçš„ query å‘é‡ä¹Ÿä¼šå’Œå‰é¢çš„æ¯ä¸ª token ä»¥åŠè‡ªå·±äº§ç”Ÿçš„ key å‘é‡è®¡ç®—å†…ç§¯ $$ \\mathbf q_{t+1}^T\\mathbf k_{1},\\mathbf q_{t+1}^T\\mathbf k_{2},â€¦,\\mathbf q_{t+1}^T\\mathbf k_{t+1} $$ æ­¤æ—¶è€ƒè™‘ $x_{t+1}$ çš„å‰ä¸€ä¸ª token $x_t$ï¼Œå®ƒä¹Ÿè¦ç»å†ç±»ä¼¼çš„æ­¥éª¤ $$ \\mathbf q_{t}^T\\mathbf k_{1},\\mathbf q_{t}^T\\mathbf k_{2},â€¦,\\mathbf q_{t}^T\\mathbf k_{t} $$ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªè®¡ç®—å®Œå…¨å’Œä¸Šä¸€è½®çš„è®¡ç®—é‡å¤äº†ï¼Œå¯¹äºåœ¨ $x_t$ ä¹‹å‰çš„ token ä¹Ÿæ˜¯è¿™ä¸ªé“ç†ã€‚æˆ‘ä»¬éœ€è¦é‡æ–°è®¡ç®—å¾—åˆ° $x_{1:t}$ çš„æ‰€æœ‰ key å‘é‡å’Œ value å‘é‡ï¼Œè€Œè¿™äº›å‘é‡çš„å€¼å…¶å®æ˜¯ä¸ä¼šå˜çš„ğŸ§ Tip é‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠä¹‹å‰ token çš„ key å‘é‡å’Œ value å‘é‡éƒ½ç¼“å­˜èµ·æ¥ï¼Œé‚£ä¹ˆå°±æ²¡æœ‰å¿…è¦é‡å¤è®¡ç®—äº†ï¼Œè¿™å°±æ˜¯ KV Cache çš„æ ¸å¿ƒæ€æƒ³ åœ¨è¿ç”¨äº† KV Cache ä¹‹åï¼Œé™¤äº†ç¬¬ä¸€è½®ä»¥å¤–çš„æ¯ä¸€è½®ï¼Œæˆ‘ä»¬éƒ½åªéœ€è¦å…³æ³¨è¾“å…¥çš„æœ€åä¸€ä¸ª tokenï¼Œç”¨è¿™ä¸ª token è®¡ç®—å¾—åˆ°å®ƒçš„ query, key, value å‘é‡ï¼Œç„¶åæ‹¿ç€è¿™ä¸‰ä¸ªæ–°å‘é‡å’Œä¹‹å‰æ‰€æœ‰ç¼“å­˜çš„ key/value å‘é‡è®¡ç®—è‡ªæ³¨æ„åŠ› æˆ‘ç”»äº†ä¸€ä¸ªç¤ºæ„å›¾æ¥å¸®åŠ©ç†è§£å¼€å¯ KV Cache ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆï¼Œè€ƒè™‘ LLM ä»æ— åˆ°æœ‰å¼€å§‹ç”Ÿæˆ 4 ä¸ª tokenï¼Œå…¶ä¸­è“è‰²çš„éƒ¨åˆ†è¡¨ç¤º KV Cache é‡Œé¢ç¼“å­˜çš„å€¼ï¼›çº¢è‰²åˆ™è¡¨ç¤ºæ²¡æœ‰è¢«ç¼“å­˜ ","date":"2023-10-12","objectID":"/zh-cn/llm-inference-optimization-kv-cache/:2:0","series":null,"tags":["NLP","Deep-Learning","LLM"],"title":"LLM æ¨ç†åŠ é€Ÿ - KV Cache","uri":"/zh-cn/llm-inference-optimization-kv-cache/#kv-cache-åŸç†"},{"categories":["ML-DL"],"content":" KV Cache çš„æ•ˆç‡åˆ†æKV Cache åŠ é€Ÿæ¨ç†çš„åŸç†æ˜¯ï¼šåœ¨è‡ªæ³¨æ„åŠ›å±‚ï¼Œæœ¬æ¥æ¯æ¬¡è¦åšçŸ©é˜µä¹˜æ³• $\\mathbf Q\\mathbf K^T$ï¼Œç°åœ¨å› ä¸º KV Cache çš„å­˜åœ¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ•´ä¸ª $\\mathbf Q$ å’Œ $\\mathbf K^T$ åšçŸ©é˜µä¹˜æ³•ï¼Œåªéœ€è¦æ¯æ¬¡è¾“å…¥çš„æœ€åä¸€ä¸ª token çš„ query å‘é‡ $\\mathbf q$ å’Œ $\\mathbf K$ åšå‘é‡ - çŸ©é˜µä¹˜æ³•ï¼Œä¹‹åæ›´æ–° KV Cache ç¼“å­˜å³å¯ é‡‡ç”¨äº† KV Cache çš„è¯ LLM çš„æ¨ç†è¿‡ç¨‹å¯ä»¥çœ‹æˆ 2 ä¸ªé˜¶æ®µ ç¬¬ä¸€æ¬¡è¿­ä»£çš„æ—¶å€™ï¼Œæ­¤æ—¶ KV Cache ä¸ºç©ºï¼Œæ‰€æœ‰çš„è¾“å…¥çš„ token éƒ½éœ€è¦ä¸ºå…¶è®¡ç®— key, value, query å‘é‡ï¼Œå…¶ä¸­ key å’Œ value ä¼šè¢«ç¼“å­˜èµ·æ¥ åç»­çš„æ¯ä¸€æ¬¡è¿­ä»£ï¼Œåªéœ€è¦ä¸ºæ–°çš„ token è®¡ç®— keyã€valueã€queryï¼Œå¹¶æ›´æ–° KV Cache KV Cache åŠ é€Ÿæ¨ç†çš„ä»£ä»·æ˜¯æ˜¾å­˜å ç”¨ä¼šå˜é«˜ï¼Œæ‰€ä»¥å®ƒæ˜¯ç©ºé—´æ¢æ—¶é—´çš„åŠæ³•ï¼Œå…³äºå¼€ä¸å¼€ KV Cache çš„æ˜¾å­˜å ç”¨å³°å€¼çš„å¯¹æ¯”å¯ä»¥çœ‹ è¿™é‡Œã€‚æˆ‘åœ¨è¿™é‡Œæ”¾ä¸€ä¸ªæ€»ç»“ï¼š ç”¨ KV Cache - 2 * hidden_size * num_layers * decoder_length 2ï¼šå› ä¸ºè¦å­˜å‚¨ key å’Œ value å‘é‡ hidden_sizeï¼škey å’Œ value å‘é‡çš„é•¿åº¦ num_layersï¼šæ¯ä¸€å±‚éƒ½è¦ç¼“å­˜ keyã€value å‘é‡ decoder_lengthï¼šåºåˆ—é•¿åº¦ ä¸ç”¨ KV Cache - 2 * hidden_size * 1 * decoder_length æ³¨æ„ å¯ä»¥çœ‹åˆ°ï¼Œå¼€å¯ KV Cache ä¹‹åï¼Œæ˜¾å­˜å ç”¨çš„å³°å€¼æ˜¯åŸæ¥çš„ num_layers å€ã€‚è¿™é‡Œç”¨â€œå³°å€¼â€è¿™ä¸ªè¯æ˜¯å› ä¸ºï¼ŒKV Cache å¼€å¯ä¹‹åæ˜¾å­˜æ˜¯ä¸æ–­ç´¯ç§¯å¢åŠ çš„ï¼›å…³é—­çš„è¯æ¯æ¬¡éƒ½ä¼šé‡æ–°è®¡ç®—ã€‚æ‰€ä»¥ç”¨â€œå³°å€¼â€ä¼šæ›´ä¸ºå‡†ç¡®ä¸€äº› ","date":"2023-10-12","objectID":"/zh-cn/llm-inference-optimization-kv-cache/:3:0","series":null,"tags":["NLP","Deep-Learning","LLM"],"title":"LLM æ¨ç†åŠ é€Ÿ - KV Cache","uri":"/zh-cn/llm-inference-optimization-kv-cache/#kv-cache-çš„æ•ˆç‡åˆ†æ"},{"categories":["ML-DL"],"content":" KV Cache APIHuggingface çš„ model.generate API æœ‰ä¸€ä¸ªå‚æ•°ä¸º use_cacheï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶æ˜¯å¦å¼€å¯ KV Cacheï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯é»˜è®¤æ‰“å¼€çš„1 ","date":"2023-10-12","objectID":"/zh-cn/llm-inference-optimization-kv-cache/:4:0","series":null,"tags":["NLP","Deep-Learning","LLM"],"title":"LLM æ¨ç†åŠ é€Ÿ - KV Cache","uri":"/zh-cn/llm-inference-optimization-kv-cache/#kv-cache-api"},{"categories":["ML-DL"],"content":" å‚è€ƒ GenerationConfigÂ â†©ï¸ ","date":"2023-10-12","objectID":"/zh-cn/llm-inference-optimization-kv-cache/:5:0","series":null,"tags":["NLP","Deep-Learning","LLM"],"title":"LLM æ¨ç†åŠ é€Ÿ - KV Cache","uri":"/zh-cn/llm-inference-optimization-kv-cache/#å‚è€ƒ"},{"categories":["ML-DL"],"content":"ä»‹ç»äº† LoRA å¾®è°ƒçš„åŸç†ï¼Œä»¥åŠç›¸å…³çš„æºä»£ç åˆ†æ","date":"2023-09-14","objectID":"/zh-cn/lora-finetuning/","series":null,"tags":["Paper","Internal","Deep-Learning"],"title":"LoRA å¾®è°ƒ","uri":"/zh-cn/lora-finetuning/"},{"categories":["ML-DL"],"content":" ä»€ä¹ˆæ˜¯ LoRA è‡ªä» LLM æ—¶ä»£åˆ°æ¥ä¹‹åï¼Œå¦‚ä½•å¾®è°ƒ LLM æˆä¸ºäº†ä¸€ä¸ªéš¾é¢˜ï¼Œå› ä¸º LLM çš„æ¨¡å‹å®åœ¨æ˜¯å¤ªå¤§äº†ï¼Œå¾ˆéš¾åšå…¨é‡å¾®è°ƒæ›´æ–°æ‰€æœ‰å‚æ•°ã€‚å¯é€‰çš„è·¯çº¿æœ‰ï¼šå†»ç»“æ•´ä¸ªæ¨¡å‹åš Prompt tuning æˆ–è€… In-context Learningï¼›å†»ç»“æ•´ä¸ªæ¨¡å‹ä½†æ˜¯ä¼šæ’å…¥å¯è®­ç»ƒçš„æ¨¡å—ã€‚ä»Šå¤©è¦ä»‹ç»çš„ LoRA(Low-Rank Adaptation) å°±å¯¹åº”äº†åè€…çš„æŠ€æœ¯è·¯çº¿ï¼Œè¿™æ˜¯å¾®è½¯å›¢é˜Ÿçš„å·¥ä½œ1 LoRA çš„æ€æƒ³å…¶å®æŒºç®€å•ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ·±åº¦å­¦ä¹ é‡Œé¢ï¼Œæ¨¡å‹çš„å‚æ•°æ˜¯é€šè¿‡æ¢¯åº¦ä¸‹é™è¿›è¡Œæ›´æ–°çš„ï¼Œè€ƒè™‘ä¸€ä¸ªçŸ©é˜µ $\\mathbf W_0\\in\\mathcal{R}^{d\\times d}$ï¼ˆè¿™é‡Œçš„ä¸‹æ ‡ 0 è¡¨ç¤ºå®ƒæ˜¯åˆå§‹å€¼ï¼‰ï¼Œå¯ä»¥ç”¨ $\\Delta \\mathbf W$ è¡¨ç¤ºå®ƒæœ€åè®­ç»ƒå®Œæˆçš„æ—¶å€™ç›¸å¯¹äºä¸€å¼€å§‹çš„åˆå§‹å€¼çš„å˜åŒ–é‡ï¼Œé‚£ä¹ˆè®­ç»ƒå®Œæˆä¹‹åè¿™ä¸ªçŸ©é˜µçš„å‚æ•°ä¼šæ˜¯ $$\\mathbf W_0+\\Delta \\mathbf W$$ LoRA å¾®è°ƒè¦è§£å†³çš„é—®é¢˜æ˜¯ - èƒ½ä¸èƒ½åœ¨å†»ç»“ $\\mathbf W_0$ çš„æƒ…å†µä¸‹ï¼Œæ±‚è§£å‡º $\\Delta \\mathbf W$ï¼Ÿè€Œä¸”æ±‚è§£çš„å¼€é”€è¦å°½å¯èƒ½ä½ï¼Ÿè¿™æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºç ”ç©¶äººå‘˜å‘ç°è®­ç»ƒå®Œæˆåçš„ LLM çš„æ¨¡å‹æƒé‡çš„ Intrinsic rank æ¯”è¾ƒä½ï¼Œäºæ˜¯ä½œè€…å‡è®¾ $\\Delta\\mathbf W$ ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹ $\\Delta \\mathbf W$ åšä½ç§©åˆ†è§£ï¼Œæœ€åå®éªŒè¡¨æ˜è¿™ä¸ªå‡è®¾æ˜¯æ­£ç¡®çš„ï¼ŒLoRA å¾®è°ƒæ•ˆæœæŒºå¥½1ï¼Œä½ç§©åˆ†è§£æŒ‡çš„æ˜¯ $$\\Delta \\mathbf W=\\mathbf B\\mathbf A$$ å…¶ä¸­ $\\mathbf B\\in\\mathcal{R}^{d\\times r}$ï¼Œ$\\mathbf A\\in\\mathcal{R}^{r\\times d}$ï¼Œ$\\mathbf B$ é‡‡ç”¨é›¶å€¼åˆå§‹åŒ–ï¼Œ$\\mathbf A$ åˆ™æ˜¯é‡‡ç”¨é«˜æ–¯å‡½æ•°åˆå§‹åŒ–ï¼Œè¿™æ ·åœ¨ä¸€å¼€å§‹è®­ç»ƒçš„æ—¶å€™ $\\mathbf B\\mathbf A=0$ï¼ŒLoRA æ¨¡å—å¯¹æœ¬æ¥çš„æ¨¡å‹ä¸é€ æˆå½±å“ å¦‚æœè¾“å…¥æ˜¯ $\\mathbf x$ï¼Œé‚£ä¹ˆ LoRA çš„è®¡ç®—æ–¹å¼å°±æ˜¯ $$\\mathbf W_0\\mathbf x+\\frac{\\alpha}{r}\\Delta \\mathbf W\\mathbf x=\\mathbf W_0\\mathbf x+\\frac{\\alpha}{r}\\mathbf B\\mathbf A\\mathbf x$$ è¿™é‡Œçš„ $\\alpha$ å°±æ˜¯æ”¾ç¼©å› å­ï¼Œ$r$ åˆ™æ˜¯é™ç»´çŸ©é˜µé™ç»´åçš„å¤§å°ï¼Œæ•´ä½“ä½œä¸ºä¸€ä¸ªç¼©æ”¾å› å­ï¼Œåœ¨åé¢çš„æºç åˆ†æä¼šæœ‰æ‰€ä½“ç° LoRA å¾®è°ƒè®­ç»ƒçš„æ—¶å€™åªéœ€è¦é€šè¿‡æ¢¯åº¦ä¸‹é™æ›´æ–° $\\mathbf B$ å’Œ $\\mathbf A$ï¼Œè€Œæ¨ç†çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥æŠŠ $\\mathbf W_0$ å’Œ $\\mathbf B\\mathbf A$ åˆå¹¶èµ·æ¥ï¼Œå°±åƒ LoRA æ¨¡å—ä¸å­˜åœ¨ä¸€æ ·ã€‚è¿™æ˜¯ LoRA ä¸€ä¸ªæ˜¾è‘—ä¼˜åŠ¿ï¼šå®ƒå¹¶ä¸ä¼šå¸¦æ¥æ¨ç†å»¶è¿ŸğŸ‘ å¦å¤–å¯ä»¥è®¡ç®—ä¸€ä¸‹ä½¿ç”¨ LoRA ä¹‹åï¼Œå¯å­¦ä¹ çš„å‚æ•°é‡çš„å˜åŒ– $$ (\\mathbf W_0+\\frac{\\alpha}{r}\\Delta\\mathbf W)\\mathbf x=\\mathbf W_0\\mathbf x+\\frac{\\alpha}{r}\\Delta \\mathbf W\\mathbf x=\\mathbf W_0\\mathbf x+\\frac{\\alpha}{r}\\mathbf B\\mathbf A\\mathbf x $$ è¿™é‡Œçš„ $rÂ«d$ï¼Œå› æ­¤å¯ä»¥å‡å°‘å¾ˆå¤šéœ€è¦è®­ç»ƒçš„æ¨¡å‹å‚æ•°ï¼Œæ‰€ä»¥ LoRA æ˜¯å‚æ•°é«˜æ•ˆçš„å¾®è°ƒæ–¹æ³•ğŸ‘ è¿˜å‰©ä¸‹ä¸¤ä¸ªé—®é¢˜ â€”â€” LoRA è¦åŠ åœ¨ Transformer çš„å“ªä¸€ä¸ªéƒ¨åˆ†ï¼Ÿæœ€ä½³çš„ r æ˜¯å¤šå°‘ï¼Ÿ åœ¨è®ºæ–‡çš„ 7.1 é‡Œé¢ï¼Œä½œè€…å¯¹æ¯”ä¹‹åå‘ç°åŒæ—¶åŠ åœ¨ $\\mathbf W_q$ å’Œ $\\mathbf W_v$ ä¸Šçš„æ•ˆæœæ˜¯æœ€å¥½çš„1 åœ¨è®ºæ–‡çš„ 7.2 é‡Œé¢ï¼Œä½œè€…å‘ç°ä¸€å‘³å¢å¤§ r å¹¶æ²¡æœ‰å¸¦æ¥å¤ªå¤šçš„æå‡ï¼Œ4 ~ 8 æ•ˆæœå°±ä¸é”™äº†ï¼Œè¿™éªŒè¯äº† LLM çš„æ¨¡å‹æƒé‡çš„ Intrinsic rank ç¡®å®æ¯”è¾ƒä½1 ","date":"2023-09-14","objectID":"/zh-cn/lora-finetuning/:1:0","series":null,"tags":["Paper","Internal","Deep-Learning"],"title":"LoRA å¾®è°ƒ","uri":"/zh-cn/lora-finetuning/#ä»€ä¹ˆæ˜¯-lora"},{"categories":["ML-DL"],"content":" å¦‚ä½•ä½¿ç”¨ LoRAï¼ŸHuggingface çš„ peft å°±æ”¯æŒ LoRA å¾®è°ƒï¼Œåœ¨ Github ä»“åº“çš„ README.md æ–‡ä»¶å°±ç»™äº†ä¸€ä¸ªä¾‹å­ï¼Œåªéœ€è¦ç”¨ LoraConfig å¯¹å‚æ•°è¿›è¡Œé…ç½®ï¼Œç„¶åç”¨ get_peft_model å°±å®Œæˆäº†å¯¹æ¨¡å‹çš„æ”¹é€ ï¼Œå°±å¯ä»¥ç”¨äºåç»­è®­ç»ƒäº† python from transformers import AutoModelForCausalLM from peft import get_peft_config, get_peft_model, LoraConfig, TaskType model_name_or_path = \"facebook/opt-350m\" peft_config = LoraConfig( task_type=TaskType.CAUSAL_LM, r=8, lora_alpha=32, lora_dropout=0.1, ) model = AutoModelForCausalLM.from_pretrained(model_name_or_path) model = get_peft_model(model, peft_config) model.print_trainable_parameters() # output: trainable params: 786,432 # || all params: 331,982,848 # || trainable%: 0.2368893467652883 è®­ç»ƒå®Œæˆä¹‹åéœ€è¦ä¿å­˜æ¨¡å‹ï¼Œè°ƒç”¨ model.save_pretrained(output_dir) å³å¯ï¼Œå…¶ä¸­ output_dir å°±æ˜¯è¦ä¿å­˜çš„è·¯å¾„ï¼Œè§‚å¯Ÿç›®å½•ç»“æ„å¯ä»¥å‘ç°ï¼Œåªä¿å­˜ LoRA æ¨¡å—çš„æƒé‡è€Œä¸éœ€è¦ä¿å­˜æ•´ä¸ªæ¨¡å‹ã€‚ç›®å½•ç»“æ„é•¿ä¸‹é¢è¿™æ · sh output_dir â”œâ”€â”€ README.md â”œâ”€â”€ adapter_config.json â””â”€â”€ adapter_model.bin åç»­è¦åŠ è½½æ¨¡å‹ä¹Ÿå¾ˆç®€å• python from peft import AutoPeftModelForCausalLM peft_model_name_or_path = \"./output_dir\" model = AutoPeftModelForCausalLM.from_pretrained(peft_model_name_or_path) ","date":"2023-09-14","objectID":"/zh-cn/lora-finetuning/:2:0","series":null,"tags":["Paper","Internal","Deep-Learning"],"title":"LoRA å¾®è°ƒ","uri":"/zh-cn/lora-finetuning/#å¦‚ä½•ä½¿ç”¨-lora"},{"categories":["ML-DL"],"content":" LoRA æºç é˜…è¯» ä¸‹é¢çš„ä»£ç æˆ‘å»æ‰äº†ä¸€äº›æ— å…³çš„ä»£ç ï¼Œæ¯”å¦‚é”™è¯¯å¤„ç†ã€è¿‡äºå†—é•¿çš„ç±»å‹æç¤ºç­‰ã€‚å‚è€ƒçš„æºä»£ç æ˜¯ peft 0.5.0 ç‰ˆæœ¬ LoRA å¾®è°ƒçš„æ ¸å¿ƒæ˜¯ LoraModel ç±» python class LoraModel(BaseTuner): def __init__(self, model, config, adapter_name) -\u003e None: super().__init__(model, config, adapter_name) ... LoraModel ç»§æ‰¿è‡ª BaseTuner å¹¶ä¸”è°ƒç”¨äº† BaseTuner çš„æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥å»æŸ¥çœ‹çˆ¶ç±»æ„é€ å‡½æ•°åšäº†ä»€ä¹ˆï¼Œå®šä½åˆ°çˆ¶ç±» BaseTuner python class BaseTuner(nn.Module, ABC): def __init__(self, model, peft_config, adapter_name) -\u003e None: super().__init__() self.model = model self.inject_adapter(self.model, adapter_name) self.model.peft_config = self.peft_config æ ¸å¿ƒåº”è¯¥æ˜¯è¿™ä¸ª inject_adapter æ–¹æ³• python class BaseTuner(nn.Module, ABC): def inject_adapter(self, model: nn.Module, adapter_name: str): peft_config = self.peft_config[adapter_name] is_target_modules_in_base_model = False key_list = [key for key, _ in model.named_modules()] peft_config = self._prepare_adapter_config(peft_config, model_config) for key in key_list: if not self._check_target_module_exists(peft_config, key): continue is_target_modules_in_base_model = True parent, target, target_name = _get_submodules(model, key) optionnal_kwargs = { \"loaded_in_8bit\": getattr(model, \"is_loaded_in_8bit\", False), \"loaded_in_4bit\": getattr(model, \"is_loaded_in_4bit\", False), \"current_key\": key, } self._create_and_replace( peft_config, adapter_name, target, target_name, parent, **optionnal_kwargs, ) # æ˜¾è€Œæ˜“è§ï¼Œå°±æ˜¯æ ‡è®°ä¸€ä¸‹åªæœ‰ adapter æ˜¯å¯ä»¥è®­ç»ƒçš„ self._mark_only_adapters_as_trainable() # å¦‚æœæ˜¯æ¨ç†é˜¶æ®µï¼Œé‚£ä¹ˆå°±æ‰€æœ‰çš„å‚æ•°éƒ½å†»ç»“ if self.peft_config[adapter_name].inference_mode: for n, p in self.model.named_parameters(): if adapter_name in n: p.requires_grad = False å¯ä»¥çœ‹åˆ° inject_adapters åšçš„äº‹æƒ…æ— éå°±æ˜¯éå†æ¯ä¸ª Module çœ‹å“ªäº›æ˜¯è¦ä¿®æ”¹çš„ï¼Œé‡ç‚¹æ˜¯è¿™ä¸ª _create_and_replace æ–¹æ³•ï¼Œäºæ˜¯æ¥ä¸‹æ¥å°±å®šä½åˆ°äº† LoraModel çš„ _create_and_replace æ–¹æ³• python class LoraModel(BaseTuner): def _create_and_replace( self, lora_config, adapter_name, target, target_name, parent, **optionnal_kwargs, ): bias = hasattr(target, \"bias\") and target.bias is not None kwargs = { \"r\": lora_config.r, \"lora_alpha\": lora_config.lora_alpha, \"lora_dropout\": lora_config.lora_dropout, \"fan_in_fan_out\": lora_config.fan_in_fan_out, \"init_lora_weights\": lora_config.init_lora_weights, } kwargs[\"loaded_in_8bit\"] = optionnal_kwargs.pop(\"loaded_in_8bit\", False) kwargs[\"loaded_in_4bit\"] = optionnal_kwargs.pop(\"loaded_in_4bit\", False) kwargs[\"bias\"] = bias if isinstance(target, LoraLayer) and isinstance(target, torch.nn.Conv2d): ... else: new_module = self._create_new_module( lora_config, adapter_name, target, **kwargs ) self._replace_module(parent, target_name, new_module, target) è¿™é‡Œçœ‹åˆ°äº† LoraLayerï¼ŒçŒœæµ‹åº”è¯¥æ˜¯æ”¹å˜ä¹‹åçš„ Linear å±‚ï¼Œä½†æˆ‘ä»¬å…³å¿ƒçš„æ˜¯ LoRA å¦‚ä½•åœ¨ nn.Linear å±‚ä¸Šé¢åšæ”¹åŠ¨ï¼Œå› æ­¤åº”è¯¥çœ‹ _create_new_module æ–¹æ³• python class LoraModel(BaseTuner): def _create_new_module(lora_config, adapter_name, target, **kwargs): if loaded_in_8bit and isinstance(target, bnb.nn.Linear8bitLt): ... else: if isinstance(target, torch.nn.Linear): # æ‹·è´æœ¬æ¥çš„æƒé‡çŸ©é˜µçš„ in_features å’Œ out_features å±æ€§ in_features, out_features = target.in_features, target.out_features elif isinstance(target, Conv1D): ... else: ... new_module = Linear( adapter_name, in_features, out_features, bias=bias, **kwargs ) return new_module é€šè¿‡æ‹·è´æœ¬æ¥çš„ nn.Linear çš„ in_features å’Œ out_features å±æ€§ï¼ŒLoRA åˆ›å»ºäº†ä¸€ä¸ª Linear ç±»ï¼Œåœ¨åŒä¸ªæ–‡ä»¶ä¸­å¯ä»¥æ‰¾åˆ°è¿™ä¸ªç±»çš„å®šä¹‰ python class Linear(nn.Linear, LoraLayer): def __init__( self, adapter_name: str, in_features: int, out_features: int, r: int = 0, lora_alpha: int = 1, lora_dropout: float = 0.0, fan_in_fan_out: bool = False, is_target_conv_1d_layer: bool = False, **kwargs, ): init_lora_weights = kwargs.pop(\"init_lora_weights\", True) nn.Linear.__init__(self, in_features, out_features, **kwargs) LoraLayer.__init__(self, in_features=in_features, out_features=out_features) # Freezing the pre-trained weight matrix self.weight.requires_grad = False nn.Linear.reset_parameters(self) self.update_layer(adapter_name, r, lora_alpha, lora_dropout, init_lora_weights) self.active_adapter = adapter_name Linear ç±»é‡‡ç”¨äº† Mixin çš„è®¾è®¡æ¨¡å¼ï¼Œåˆ†åˆ«è°ƒç”¨äº† nn.Linear å’Œ LoraLayer çš„æ„é€ å‡½æ•°ï¼Œæ³¨æ„è¿™é‡Œçš„ self.weight æ˜¯æ¨¡å‹æœ¬æ¥çš„ nn.Linear å±‚çš„æƒé‡ï¼Œå¯ä»¥çœ‹åˆ°è¢«å†»ç»“äº†ï¼Œè€Œ LoRA å¼•å…¥çš„æƒé‡çŸ©é˜µåˆ™æ˜¯ç”¨ update_layer æ–¹æ³•è®¾ç½®ï¼Œæœç´¢è¯¥æ–¹æ³•å°†","date":"2023-09-14","objectID":"/zh-cn/lora-finetuning/:3:0","series":null,"tags":["Paper","Internal","Deep-Learning"],"title":"LoRA å¾®è°ƒ","uri":"/zh-cn/lora-finetuning/#lora-æºç é˜…è¯»"},{"categories":["ML-DL"],"content":" å‚è€ƒ LoRA: Low-Rank Adaptation of Large Language ModelsÂ â†©ï¸Â â†©ï¸Â â†©ï¸Â â†©ï¸ ","date":"2023-09-14","objectID":"/zh-cn/lora-finetuning/:4:0","series":null,"tags":["Paper","Internal","Deep-Learning"],"title":"LoRA å¾®è°ƒ","uri":"/zh-cn/lora-finetuning/#å‚è€ƒ"},{"categories":["Algorithm"],"content":"ä»‹ç»äº†ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜çš„ç®—æ³•ä»¥åŠ Python å®ç°","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/"},{"categories":["Algorithm"],"content":" å¼•è¨€æœ‰æ—¶å€™æˆ‘ä»¬ä¼šæƒ³è¦ç”Ÿæˆä¸€ä¸ªåºåˆ—çš„ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€æˆ–è€…æ˜¯ã€Œä¸Šä¸€ä¸ªæ’åˆ—ã€ï¼Œä½ ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿå¦‚æœä½ å¯¹ C++ å¾ˆç†Ÿæ‚‰çš„è¯ï¼Œä¸éš¾æƒ³åˆ°å¯ä»¥ç”¨ next_permutation1 å’Œ prev_permutation2ã€‚ä½†æ˜¯ Python å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼çš„ APIã€‚å› æ­¤ä»Šå¤©è¦æ¢è®¨çš„å°±æ˜¯å¦‚ä½•ç”¨ Python å®ç°è¿™ 2 ä¸ª APIï¼Œåˆå› ä¸ºã€Œä¸Šä¸€ä¸ªæ’åˆ—ã€å’Œã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€çš„æ–¹æ³•å…¶å®å¤§åŒå°å¼‚ï¼Œå› æ­¤è®©æˆ‘ä»¬èšç„¦å…¶ä¸­çš„ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€é—®é¢˜ ","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/:1:0","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/#å¼•è¨€"},{"categories":["Algorithm"],"content":" ç®—æ³•æµç¨‹ä¹Ÿè®¸ä¼šè®©ä½ æ„Ÿåˆ°æ„å¤–çš„æ˜¯ï¼Œã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€é—®é¢˜åœ¨ 14 ä¸–çºªçš„æ—¶å€™å°±æœ‰äººæƒ³å‡ºè§£å†³åŠæ³•æ¥äº†3ï¼Œå‡è®¾ç°åœ¨ç»™å®šä¸€ä¸ªåºåˆ— aï¼Œä¸‹é¢æ˜¯å…·ä½“çš„ç®—æ³•æ­¥éª¤ æ‰¾åˆ°æœ€å¤§çš„ç´¢å¼• k ä½¿å¾— a[k] \u003c a[k + 1]ï¼Œå¦‚æœä¸å­˜åœ¨è¿™æ ·çš„ç´¢å¼•çš„è¯ï¼Œé‚£ä¹ˆè¯´æ˜å½“å‰çš„åºåˆ—å·²ç»æ˜¯æœ€åä¸€ä¸ªæ’åˆ—äº† æ‰¾åˆ°æœ€å¤§çš„ç´¢å¼• lï¼Œl \u003e k è€Œä¸” a[k] \u003c a[l] äº¤æ¢ a[k], a[l] çš„å€¼ ç¿»è½¬ä» a[k + 1] å¼€å§‹çš„éƒ¨åˆ† è¿™æ ·ä½ å°±å¾—åˆ°äº†ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€ï¼Œä½†ä¸ºä»€ä¹ˆè¿™ä¸ªç®—æ³•æ˜¯æ­£ç¡®çš„ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬é€æ­¥æ‹†è§£ä¸€ä¸‹è¿™äº›æ­¥éª¤èƒŒåçš„åŸç† ","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/:2:0","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/#ç®—æ³•æµç¨‹"},{"categories":["Algorithm"],"content":" ç®—æ³•çš„ç†è§£è¯•é—®ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ä¸çŸ¥é“è¿™ä¸ªç®—æ³•ä¹‹å‰ï¼Œä½ ä¼šå¦‚ä½•è§£å†³ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€é—®é¢˜ï¼Ÿå¦‚æœä½ å¯¹å›æº¯ç®—æ³•å¾ˆç†Ÿæ‚‰çš„è¯ï¼Œåº”è¯¥ä¸éš¾æƒ³åˆ°æˆ‘ä»¬å¯ä»¥å¹²è„†ä»ç¬¬ä¸€ä¸ªæ’åˆ—å¼€å§‹æš´åŠ›æšä¸¾ï¼Œé€ä¸ªå¯¹æ¯”å°±å®¹æ˜“å®šä½åˆ°å½“å‰åºåˆ—çš„ä¸‹ä¸€ä¸ªæ’åˆ—äº†ã€‚å½“ç„¶è¿™ä¸ªç®—æ³•çš„å¤æ‚åº¦å¤ªé«˜ï¼Œè¾¾åˆ°äº† $O(N!)$ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å°è¯•ä¼˜åŒ–ä¸€ä¸‹ï¼Œè¿™å°±å¸¦æ¥äº†ç¬¬ä¸€ä¸ªé—®é¢˜ Q1 - ç”¨å›æº¯ç®—æ³•ç”Ÿæˆå½“å‰åºåˆ—çš„ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€çš„æ—¶å€™æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ æˆ‘ä»¬å¯ä»¥æŒ‰é¡ºåºæ‰“å‡º [1, 2, 3, 4] çš„æ‰€æœ‰æ’åˆ—å¹¶å°è¯•æ‰¾ä¸€ä¸‹è§„å¾‹ Python [[1, 2, 3, 4], [1, 2, 4, 3], [1, 3, 2, 4], [1, 3, 4, 2], [1, 4, 2, 3], [1, 4, 3, 2], [2, 1, 3, 4], ... # omit [4, 3, 2, 1]] å°±çœ‹å…¶ä¸­ä¸€ä¸ªä¾‹å­å¥½äº†ï¼Œ[1, 4, 3, 2] ä¸ºä»€ä¹ˆä¸‹ä¸€ä¸ªæ’åˆ—æ˜¯ [2, 1, 3, 4]ï¼Ÿä½ èƒ½å¦å‘ç°ä»€ä¹ˆè§„å¾‹ï¼Ÿæ›´ç¡®åˆ‡åœ°è¯´ï¼Œä¸ºä»€ä¹ˆç¬¬ä¸€ä½ä» 1 å˜æˆäº† 2ï¼Ÿ[1, 4, 3, 2] è¿™ä¸ªåºåˆ—æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿå¯ä»¥çœ‹åˆ°æœ«å°¾çš„ 4, 3, 2 æ˜¯æœ€é•¿éé€’å¢åç¼€çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªè§„å¾‹é€‚ç”¨ä»»ä½•æƒ…å†µå—ï¼Ÿä¸å¦¨å†çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­ï¼Œ[1, 2, 4, 3] -\u003e [1, 3, 2, 4]ï¼Œä½ ä¼šå‘ç°ï¼ŒåŒæ ·çš„ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªæœ€é•¿éé€’å¢åç¼€ [4, 3]ï¼ŒåŒæ—¶ç¬¬äºŒä½çš„ 2 å˜æˆäº† 3ï¼ŒæŠŠè¿™äº›å¹¶æ’æ”¾åœ¨ä¸€èµ·å¯èƒ½ä¼šæ›´ç›´è§‚äº›ï¼š Python [1, 4, 3, 2] ^ # non-increasing suffix [2, 1, 3, 4] ^ # change this [1, 2, 4, 3] ^ # non-increasing suffix [1, 3, 2, 4] ^ # change this æ‰€ä»¥ç»“è®ºä¼¼ä¹æ˜¯â€”â€”æ‰¾åˆ°åºåˆ—æœ«å°¾çš„æœ€é•¿éé€’å¢åç¼€çš„å¼€å§‹ä½ç½® jï¼Œè¦ç”Ÿæˆä¸‹ä¸€ä¸ªåºåˆ—çš„è¯éœ€è¦è°ƒå¤§ j - 1 çš„ä½ç½®çš„å€¼ã€‚è¿™æ°æ°æ˜¯å‰é¢ç®—æ³•æµç¨‹çš„ç¬¬ä¸€æ­¥åšçš„äº‹æƒ…ã€‚å¦‚æœä»ä¸Šé¢çš„è§‚å¯Ÿå¯¼å‡ºè¿™ä¸ªç»“è®ºæ— æ³•è¯´æœä½ ï¼Œé‚£ä¹ˆå¯ä»¥ä»å›æº¯çš„ä»£ç è§’åº¦å…¥æ‰‹ï¼Œä»€ä¹ˆæ—¶å€™ä¼šä¿®æ”¹ j - 1 çš„å€¼ï¼Ÿç­”æ¡ˆæ˜¯å½“æˆ‘ä»¬å·²ç»æšä¸¾å®Œ a[j:] éƒ¨åˆ†çš„æ‰€æœ‰æ’åˆ—çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ a[j:] æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç‰¹ç‚¹æ˜¯ï¼Œä» a[j:] ä¼šæ˜¯éé€’å¢çš„ï¼Œå› ä¸ºæˆ‘ä»¬å›æº¯çš„æ—¶å€™æ˜¯æŒ‰ç…§å­—å…¸åºä»å°åˆ°å¤§æšä¸¾ Python indices: 0, 1, 2, ..., j - 1, j, ..., n - 1 # a[j - 1] \u003c a[j] A1 - åœ¨ç”Ÿæˆä¸‹ä¸€ä¸ªæ’åˆ—çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šè°ƒå¤§æœ«å°¾çš„æœ€é•¿éé€’å¢åç¼€çš„å·¦è¾¹ä¸€ä¸ªä½ç½®çš„å…ƒç´  ä¸ºäº†åç»­è®¨è®ºæ–¹ä¾¿ï¼Œæˆ‘ä»¬ç§°å‰é¢æ‰¾åˆ°çš„æœ€é•¿éé€’å¢åç¼€å·¦è¾¹çš„ä½ç½®ä¸º pivotï¼ˆä¹Ÿå°±æ˜¯å‰é¢çš„ j - 1ï¼‰ã€‚é‚£ä¹ˆç°åœ¨å°±å¼•å‡ºäº†ç¬¬äºŒä¸ªé—®é¢˜ Q2 - a[pivot] çš„å€¼è¦æ€ä¹ˆæ”¹å˜ï¼Ÿ å› ä¸ºè¦æ±‚è§£çš„æ˜¯ä¸‹ä¸€ä¸ªæ’åˆ—ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ› a[pivot] è¦å¢åŠ ï¼Œè€Œä¸”ä¸è¦å¢åŠ å¤ªå¤šï¼Œåº”è¯¥å¢åŠ â€œä¸€ç‚¹ç‚¹â€å°±å¥½ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯è¿™ä¸ªâ€œä¸€ç‚¹ç‚¹â€ï¼Ÿä»ç„¶ä»å›æº¯çš„è§’åº¦ç†è§£ï¼Œæˆ‘ä»¬ä¼šæŒ‰ç…§å­—å…¸åºä»å°åˆ°å¤§æšä¸¾ï¼Œå› æ­¤ a[pivot] åº”è¯¥è¦å˜æˆæ¯”å®ƒæ›´å¤§çš„ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸‹ä¸€ä¸ªæ›´å¤§çš„å…ƒç´ å»å“ªé‡Œæ‰¾ï¼Ÿç­”æ¡ˆæ˜¯åœ¨ a[pivot + 1:] é‡Œé¢æ‰¾ï¼Œæ¢è¨€ä¹‹ï¼Œæˆ‘ä»¬è¦å» a[pivot + 1:] é‡Œé¢æ‰¾æ¯” a[pivot] å¤§è€Œä¸”å°½é‡å°çš„å…ƒç´  åˆ«å¿˜äº† a[pivot + 1:] çš„ç‰¹ç‚¹ï¼šå®ƒæ˜¯éé€’å¢çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»å³åˆ°å·¦æ£€æŸ¥ a[pivot + 1:] è¿™ä¸ªéƒ¨åˆ†çš„å…ƒç´ çš„å€¼ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯” a[pivot] å¤§çš„ï¼Œè¿™åˆè§£é‡Šäº†å‰é¢ç®—æ³•çš„ç¬¬äºŒä¸ªæ­¥éª¤ A2 - ä»å³åˆ°å·¦åœ¨ a[pivot + 1:] é‡Œé¢æ‰¾ç¬¬ä¸€ä¸ªå€¼æ¯” a[pivot] å¤§çš„ç´¢å¼•ï¼ˆè¿™ä¸ªç´¢å¼•æˆ‘ä»¬è®°ä½œ rï¼‰ å‰é¢æåˆ°çš„ç®—æ³•è¿˜æœ‰æœ€åä¸¤ä¸ªæ­¥éª¤æ²¡æœ‰è§£é‡Šï¼Œè¿™ä¸¤ä¸ªå…¶å®æ˜¯äº’ç›¸å…³è”çš„ Q3 - ä¸ºä»€ä¹ˆè¦äº¤æ¢ a[pivot] å’Œ a[r]ï¼Œä»¥åŠä¸ºä»€ä¹ˆéšåè¦ç¿»è½¬ a[pivot + 1:]ï¼Ÿ ç†è®ºä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬ä¿®æ”¹äº† a[pivot] çš„å€¼ä¹‹åï¼Œa[pivot + 1:] è¿™ä¸ªéƒ¨åˆ†ä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆé—®é¢˜æ˜¯å¦‚ä½•ä¿®æ”¹ï¼Ÿä»å›æº¯çš„è§’åº¦æ¥çœ‹ï¼Œa[pivot + 1:] åº”è¯¥ä»æœ€å°å­—å…¸åºå¼€å§‹æšä¸¾ï¼Œè¿™æ„å‘³ç€ a[pivot + 1:] åº”è¯¥æ˜¯éé€’å‡çš„ã€‚æœ‰è¶£çš„æ˜¯ï¼Œäº¤æ¢ a[pivot] å’Œ a[r] ä¹‹åï¼Œa[pivot + 1:] è¿™ä¸ªåç¼€ä»ç„¶æ˜¯éé€’å¢çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦æŠŠå®ƒå˜æˆéé€’å‡çš„åªéœ€è¦ç¿»è½¬ä¸€ä¸‹è¿™ä¸ªéƒ¨åˆ†å°±è¡Œï¼Œè¿™å°±è§£é‡Šäº†å‰é¢ç®—æ³•çš„ç¬¬ä¸‰æ­¥å’Œç¬¬å››æ­¥ A3 - äº¤æ¢ a[pivot] å’Œ a[r] ä¹‹å a[pivot + 1:] ä»ç„¶æ˜¯éé€’å¢ï¼Œç¿»è½¬æ“ä½œæŠŠè¿™ä¸ªåç¼€å˜æˆäº†éé€’å‡ ","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/:3:0","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/#ç®—æ³•çš„ç†è§£"},{"categories":["Algorithm"],"content":" ä»£ç Leetcode æœ‰ä¸€é“é¢˜ç›®å¯ä»¥ç»ƒä¹ ï¼Œæ¨èå…ˆæŒ‰ç…§è‡ªå·±çš„ç†è§£åŠ¨æ‰‹å®ç°ä¸‹å†å‚è€ƒä¸‹é¢çš„ä»£ç  :) Python class Solution: def nextPermutation(self, nums: List[int]) -\u003e None: # Step 1. Find the rightmost i s.t. a[i] \u003e a[i - 1] # and set pivot to i - 1 pivot = -1 for i in reversed(range(len(nums))): if i - 1 \u003e= 0 and nums[i] \u003e nums[i - 1]: pivot = i - 1 break if pivot == -1: nums.reverse() return # Step 2. Find the rightmost value s.t. a[i] \u003e a[pivot] for i in reversed(range(len(nums))): if nums[i] \u003e nums[pivot]: nums[i], nums[pivot] = nums[pivot], nums[i] break # Step 3. Reverse the (pivot, len(nums)) part left, right = pivot + 1, len(nums) - 1 while left \u003c right: nums[left], nums[right] = nums[right], nums[left] left += 1 right -= 1 return None ","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/:4:0","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/#ä»£ç "},{"categories":["Algorithm"],"content":" æ€»ç»“ä»å›æº¯çš„è§’åº¦æ¥ç†è§£ã€Œä¸‹ä¸€ä¸ªæ’åˆ—ã€é—®é¢˜çš„ç®—æ³•å°±å¾ˆè‡ªç„¶äº†ï¼ˆèµ·ç å¯¹æˆ‘æ¥è¯´ï¼‰ï¼Œå¸Œæœ›ä½ ä¹Ÿèƒ½æœ‰æ‰€æ”¶è· :) ","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/:5:0","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/#æ€»ç»“"},{"categories":["Algorithm"],"content":" å‚è€ƒ std::next_permutationÂ â†©ï¸ std::prev_permutationÂ â†©ï¸ Permutation-WikiÂ â†©ï¸ ","date":"2023-09-06","objectID":"/zh-cn/the-next-lexicographical-permutation-problem/:6:0","series":null,"tags":["Algorithm"],"title":"ä¸‹ä¸€ä¸ªæ’åˆ—é—®é¢˜","uri":"/zh-cn/the-next-lexicographical-permutation-problem/#å‚è€ƒ"},{"categories":["NLP"],"content":"ä»‹ç»äº† BPE ç®—æ³•ç”¨æ¥åˆ†è¯çš„åŸç†","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/"},{"categories":["NLP"],"content":" BPE ç®€ä»‹åœ¨ NLP é‡Œé¢ï¼Œä¸€ä¸ªæ ¸å¿ƒçš„é—®é¢˜æ˜¯ï¼Œå¦‚ä½•å¯¹æ–‡æœ¬è¿›è¡Œåˆ†è¯ï¼Ÿä»åˆ†ç±»çš„è§’åº¦ä¸Šé¢æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºï¼š Char level Word level Subword level å…ˆçœ‹ Char level åˆ†è¯ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠæ–‡æœ¬æ‹†åˆ†æˆä¸€ä¸ªä¸ªå­—ç¬¦å•ç‹¬è¡¨ç¤ºï¼Œæ¯”å¦‚ highest -\u003e h, i, g, h, e, s, tï¼Œä¸€ä¸ªæ˜¾ç„¶çš„å¥½å¤„æ˜¯ï¼ŒVocab ä¸ä¼šå¤ªå¤§ï¼ŒVocab çš„å¤§å°ä¸ºå­—ç¬¦é›†çš„å¤§å°ï¼Œä¹Ÿä¸ä¼šé‡åˆ° Out-of-vocabulary(OOV) çš„é—®é¢˜ï¼Œä½†æ˜¯å­—ç¬¦æœ¬èº«å¹¶æ²¡æœ‰ä¼ è¾¾å¤ªå¤šçš„è¯­ä¹‰ï¼Œè€Œä¸”åˆ†è¯ä¹‹åä¼šæœ‰å¤ªå¤šçš„ tokenï¼Œå…‰æ˜¯ä¸€ä¸ª highest å°±å¯ä»¥å¾—åˆ° 7 ä¸ª tokenï¼Œéš¾ä»¥æƒ³è±¡å¾ˆé•¿çš„æ–‡æœ¬åˆ†å‡ºæ¥ä¼šæœ‰å¤šå°‘ä¸ªğŸ˜¨ å†çœ‹ Word level åˆ†è¯ï¼ŒWord level åˆ†è¯ä¸€èˆ¬é€šè¿‡ç©ºæ ¼æˆ–è€…æ ‡ç‚¹ç¬¦å·æ¥æŠŠæ–‡æœ¬åˆ†æˆä¸€ä¸ªä¸ªå•è¯ï¼Œè¿™æ ·åˆ†è¯ä¹‹åçš„ token æ•°é‡å°±ä¸ä¼šå¤ªå¤šï¼Œæ¯”å¦‚ Today is a good day -\u003e Today, is, a, good, dayã€‚ä½† Word level åˆ†è¯ä¹Ÿæœ‰é—®é¢˜ï¼Œæ¯”å¦‚è‹±æ–‡ä¸­çš„ high, higher, highest è¿™ä¸‰ä¸ªå•è¯æ˜¾ç„¶è¯­ä¹‰ç›¸ä¼¼ï¼Œå› ä¸ºå¦å¤–ä¸¤ä¸ªåªæ˜¯æ¯”è¾ƒçº§ï¼Œä½†æ˜¯ Word level åˆ†è¯ä¼šæŠŠä»–ä»¬çœ‹æˆ 3 ä¸ªå•ç‹¬çš„å•è¯ ğŸ¤”ï¸ é‚£ä¹ˆæ˜¯å¦å­˜åœ¨ä¸€ç§æŠ˜ä¸­çš„åŠæ³•ï¼Œä½¿å¾—æˆ‘ä»¬å¤§æ¦‚ç‡ä¸ä¼šé‡åˆ° OOV çš„é—®é¢˜ï¼›åˆ†è¯å¾—åˆ°çš„ token æ•°é‡åˆä¸èƒ½å¤ªå¤šï¼›è€Œä¸”åˆ†è¯èƒ½å¤Ÿè€ƒè™‘åˆ°å¤åˆè¯ã€æ—¶æ€å˜åŒ–ã€å•å¤æ•°å‘¢ï¼Ÿè¿™å°±æ˜¯ Subword level åšçš„äº‹æƒ…ï¼Œä»ç„¶æ˜¯åˆšæ‰çš„ä¾‹å­ï¼Œæ ¹æ®è‹±è¯­çš„è¯æ ¹åŸç†çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ higher åˆ’åˆ†ä¸º high, erï¼Œhighest åˆ’åˆ†ä¸º high, estï¼Œæ‰€ä»¥ Subword level åˆ†è¯å°±æ˜¯æŠŠä¸€ä¸ªå•è¯ç”¨å¤šä¸ªå­è¯è¡¨ç¤ºï¼Œä»Šå¤©è¦ä»‹ç»çš„ BPE å°±å±äº Subword level çš„ä¸€ç§ BPE çš„å…¨ç§°æ˜¯ Byte Pair Encodingï¼Œè¿™é‡Œæœ‰ä¸ªç»†èŠ‚å€¼å¾—æ€è€ƒï¼Œä»€ä¹ˆæ˜¯ Byte pairï¼ŸASCII ç¼–ç çš„è¯ä»»ä½•å­—ç¬¦éƒ½æ˜¯ 1 byteï¼Œä½†å¦‚æœæ˜¯ utf-8 ç¼–ç å‘¢ï¼Ÿä¸€ä¸ªå­—ç¬¦ä¸ä¸€å®šæ˜¯ 1 byteï¼Œå®ƒå¯ä»¥æ˜¯ 3 bytes ä¹Ÿå¯ä»¥æ˜¯ 4 bytesï¼ŒğŸ¤”ï¸ é‚£å¦‚æœ BPE ç”¨åœ¨ utf-8 çš„æ–‡æœ¬é‡Œé¢ï¼Œbyte pair åˆæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Ÿæ‰€ä»¥æˆ‘æ„Ÿè§‰è¿™é‡Œæ˜¯æœ‰ç‚¹æ­§ä¹‰æ€§çš„ï¼Œå› æ­¤æ›´æ°å½“çš„ç†è§£æ–¹å¼ä¹Ÿè®¸æ˜¯ï¼Œbyte pair å…¶å®æ˜¯ char pairï¼Œè¿™é‡Œçš„ char æ˜¯ utf-8 çš„ char ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:0","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#bpe-ç®€ä»‹"},{"categories":["NLP"],"content":" BPE è®­ç»ƒæµç¨‹æ¥ä¸‹æ¥æ­£å¼ä»‹ç» BPE åˆ†è¯ç®—æ³•çš„è®­ç»ƒæµç¨‹ï¼Œå‡è®¾æˆ‘ä»¬æ‰‹å¤´æœ‰ä¸€å †æ–‡æ¡£ $D={d_1,d_2,â€¦}$ æŠŠæ¯ä¸ªæ–‡æ¡£ $d$ å˜æˆå•è¯åˆ—è¡¨ï¼Œæ¯”å¦‚ä½ å¯ä»¥ç®€å•ç”¨ç©ºæ ¼åˆ†è¯ ç»Ÿè®¡æ¯ä¸ªå•è¯ $w$ åœ¨æ‰€æœ‰æ–‡æ¡£ $D$ ä¸­çš„å‡ºç°é¢‘ç‡ï¼Œå¹¶è®¡ç®—åˆå§‹å­—ç¬¦é›† alphabet ä½œä¸ºä¸€å¼€å§‹çš„ Vocabï¼ˆåŒ…æ‹¬åé¢çš„ \u003c/w\u003eï¼‰ï¼Œå­—ç¬¦é›†çš„æ„æ€å°±æ˜¯æ‰€æœ‰æ–‡æ¡£ $D$ ä¸­ä¸åŒçš„å­—ç¬¦é›†åˆ å…ˆå°†æ¯ä¸ªå•è¯åˆ’åˆ†ä¸ºä¸€ä¸ªä¸ª utf-8 charï¼Œç§°ä¸ºä¸€ä¸ªåˆ’åˆ†ï¼Œæ¯”å¦‚ highest -\u003e h, i, g, h, e, s, t ç„¶åï¼Œåœ¨æ¯ä¸ªå•è¯çš„åˆ’åˆ†æœ€åé¢åŠ ä¸Š \u003c/w\u003eï¼Œé‚£ä¹ˆç°åœ¨ highest -\u003e h, i, g, h, e, s, t, \u003c/w\u003e é‡å¤ä¸‹é¢æ­¥éª¤ç›´åˆ°æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ä¸­çš„ä»»æ„ä¸€ä¸ªï¼š1ï¼‰Vocab è¾¾åˆ°ä¸Šé™ã€‚2ï¼‰è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•° æ‰¾åˆ°æœ€ç»å¸¸ä¸€èµ·å‡ºç°çš„ pairï¼Œå¹¶è®°å½•è¿™ä¸ªåˆå¹¶è§„åˆ™ï¼Œæ”¾åœ¨ merge table é‡Œé¢ï¼ŒåŒæ—¶æŠŠåˆå¹¶ä¹‹åçš„ç»“æœæ”¾åˆ° Vocab é‡Œé¢ æ›´æ–°æ‰€æœ‰å•è¯çš„åˆ’åˆ†ï¼Œå‡è®¾æˆ‘ä»¬å‘ç° (h, i) æœ€ç»å¸¸ä¸€èµ·å‡ºç°ï¼Œé‚£ä¹ˆ hi å°±ä¼šè¢«æ·»åŠ åˆ° Vocab é‡Œé¢ï¼ŒåŒæ—¶ä¿®æ”¹åˆ’åˆ†æ–¹å¼ä¸ºï¼šhighest -\u003e hi, g, h, e, s, t, \u003c/w\u003e ä½ å¯èƒ½ä¼šæœ‰ä¸‹é¢ 3 ä¸ªç–‘æƒ‘ï¼š ä¸ºä»€ä¹ˆè¦ç»Ÿè®¡è¯é¢‘ï¼Ÿå› ä¸ºç»Ÿè®¡è¯é¢‘ä¼šè®©æ‰¾æœ€ç»å¸¸å‡ºç°çš„ pair è¿™ä»¶äº‹å˜å¾—ç®€å• ä¸ºä»€ä¹ˆè¦åŠ  \u003c/w\u003eï¼Ÿå› ä¸ºæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè¿˜åŸè¾“å…¥ï¼Œå› æ­¤éœ€è¦åšä¸ªæ ‡è®°è¡¨ç¤ºè¿™æ˜¯å•è¯ä¹‹é—´çš„è¾¹ç•Œ å¦‚æœå¤šä¸ª pair çš„è¯é¢‘ä¸€æ ·æ€ä¹ˆå¤„ç†ï¼Ÿè¿™ä¸ªä¸åŒå®ç°å¯èƒ½ä¸ä¸€æ ·ï¼Œä½†åœ¨æˆ‘çœ‹æ¥åº”è¯¥å…³ç³»ä¸å¤§ ğŸ’¡ ä»ç®—æ³•æµç¨‹å¯ä»¥çœ‹åˆ°ï¼ŒBPE åˆ†è¯ç®—æ³•åˆå¹¶æœ€ç»å¸¸ä¸€èµ·å‡ºç°çš„ pair çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šè·¨è¶Šå•è¯ ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:1","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#bpe-è®­ç»ƒæµç¨‹"},{"categories":["NLP"],"content":" BPE åº”ç”¨æµç¨‹åœ¨ BPE å®Œæˆè®­ç»ƒä¹‹åï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ª merge tableï¼Œä¹Ÿä¼šå¾—åˆ°ä¸€ä¸ª Vocabï¼Œå‡è®¾ç°åœ¨è¦å¤„ç†æ–‡æœ¬ s å’Œè®­ç»ƒçš„æ—¶å€™é‡‡ç”¨ä¸€æ ·çš„æ–¹æ³•ï¼Œå…ˆæŠŠ s æ‹†åˆ†æˆå•è¯åˆ—è¡¨ï¼Œæ¯ä¸ªå•è¯æ‹†åˆ†ä¸ºä¸€ä¸ªä¸ª utf-8 charï¼Œè®°å¾—æ¯ä¸ªå•è¯çš„åˆ’åˆ†æœ€åè¦åŠ ä¸Š \u003c/w\u003e éå† merge tableï¼Œå¹¶æ£€æŸ¥æ¯ä¸ªåˆå¹¶è§„åˆ™æ˜¯å¦å¯ä»¥ç”¨æ¥æ›´æ–°æ¯ä¸ªå•è¯çš„åˆ’åˆ†ï¼Œå¯ä»¥çš„è¯å°±åˆå¹¶æ›´æ–° ğŸ’¡ è¿™é‡Œæœ‰ä¸ªç»†èŠ‚ï¼šä¹‹å‰æˆ‘ä»¬æ˜¯æ‰¾æœ€ç»å¸¸ä¸€èµ·å‡ºç°çš„ pair å¹¶è®°å½•è¿™ä¸ªåˆå¹¶è§„åˆ™ã€‚æ‰€ä»¥æŒ‰åºéå† merge table å°±å·²ç»éšå«äº†ã€Œä¼˜å…ˆåˆå¹¶æœ€ç»å¸¸å‡ºç°çš„ pairã€è¿™ä»¶äº‹äº†ï¼Œæ³¨æ„ä½“ä¼š~ ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:2","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#bpe-åº”ç”¨æµç¨‹"},{"categories":["NLP"],"content":" BPE ä¾‹å­åœç•™åœ¨ç®—æ³•ä¸æä¾›ä¾‹å­çš„è¯ï¼Œç»å¸¸è¿˜æ˜¯ä¼šäº‘é‡Œé›¾é‡Œï¼Œæ‰€ä»¥ç°åœ¨æ¥ç»“åˆä¸€ä¸ªä¾‹å­çœ‹ BPE æ˜¯å¦‚ä½•å·¥ä½œçš„ æ¯”å¦‚è¯­æ–™åº“æ˜¯ python corpus = [\"highest\", \"higher\", \"lower\", \"lowest\", \"cooler\", \"coolest\"] è¿™é‡Œè·³è¿‡ç»Ÿè®¡è¯é¢‘ï¼Œå› ä¸ºæ¯ä¸€ä¸ªéƒ½æ˜¯ 1ã€‚å…ˆæŠŠæ¯ä¸ªå•è¯å˜æˆä¸€ä¸ªä¸ª utf-8 å­—ç¬¦ç„¶ååŠ ä¸Š \u003c/w\u003e python { \"highest\": [\"h\", \"i\", \"g\", \"h\", \"e\", \"s\", \"t\", \"\u003c/w\u003e\"], \"higher\": [\"h\", \"i\", \"g\", \"h\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lower\": [\"l\", \"o\", \"w\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lowest\": [\"l\", \"o\", \"w\", \"e\", \"s\", \"t\", \"\u003c/w\u003e\"], \"cooler\": [\"c\", \"o\", \"o\", \"l\", \"e\", \"r\", \"\u003c/w\u003e\"], \"collest\": [\"c\", \"o\", \"o\", \"l\", \"e\", \"s\", \"t\", \"\u003c/w\u003e\"], } å¯ä»¥çœ‹åˆ° (e, s) æ€»å…±å‡ºç°äº† 3 æ¬¡ï¼Œæ˜¯æœ€å¤šæ¬¡çš„ï¼Œå°† es æ·»åŠ åˆ° Vocab é‡Œé¢ï¼Œç„¶åé‡æ–°åˆ’åˆ†ã€‚æ³¨æ„è¿™é‡Œ (e, r) å…¶å®ä¹Ÿæœ‰ä¸€æ ·çš„å‡ºç°é¢‘ç‡ï¼Œæ‰€ä»¥é€‰ (e, r) åˆå¹¶ä¹Ÿæ˜¯å¯ä»¥çš„ python { \"highest\": [\"h\", \"i\", \"g\", \"h\", \"es\", \"t\", \"\u003c/w\u003e\"], \"higher\": [\"h\", \"i\", \"g\", \"h\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lower\": [\"l\", \"o\", \"w\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lowest\": [\"l\", \"o\", \"w\", \"es\", \"t\", \"\u003c/w\u003e\"], \"cooler\": [\"c\", \"o\", \"o\", \"l\", \"e\", \"r\", \"\u003c/w\u003e\"], \"collest\": [\"c\", \"o\", \"o\", \"l\", \"es\", \"t\", \"\u003c/w\u003e\"], } æ¥ä¸‹æ¥å‘ç°æœ€å¤šçš„æ˜¯ (es, t)ï¼Œæ›´æ–°åˆ’åˆ† python { \"highest\": [\"h\", \"i\", \"g\", \"h\", \"est\", \"\u003c/w\u003e\"], \"higher\": [\"h\", \"i\", \"g\", \"h\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lower\": [\"l\", \"o\", \"w\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lowest\": [\"l\", \"o\", \"w\", \"est\", \"\u003c/w\u003e\"], \"cooler\": [\"c\", \"o\", \"o\", \"l\", \"e\", \"r\", \"\u003c/w\u003e\"], \"collest\": [\"c\", \"o\", \"o\", \"l\", \"est\", \"\u003c/w\u003e\"], } æ¥ä¸‹æ¥å‘ç°æœ€å¤šçš„æ˜¯ (est, \u003c/w\u003e)ï¼Œæ›´æ–°åˆ’åˆ† python { \"highest\": [\"h\", \"i\", \"g\", \"h\", \"est\u003c/w\u003e\"], \"higher\": [\"h\", \"i\", \"g\", \"h\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lower\": [\"l\", \"o\", \"w\", \"e\", \"r\", \"\u003c/w\u003e\"], \"lowest\": [\"l\", \"o\", \"w\", \"est\u003c/w\u003e\"], \"cooler\": [\"c\", \"o\", \"o\", \"l\", \"e\", \"r\", \"\u003c/w\u003e\"], \"collest\": [\"c\", \"o\", \"o\", \"l\", \"est\u003c/w\u003e\"], } æ¥ä¸‹æ¥å‘ç°æœ€å¤šçš„æ˜¯ (e, r)ï¼Œæ›´æ–°åˆ’åˆ† python { \"highest\": [\"h\", \"i\", \"g\", \"h\", \"est\u003c/w\u003e\"], \"higher\": [\"h\", \"i\", \"g\", \"h\", \"er\", \"\u003c/w\u003e\"], \"lower\": [\"l\", \"o\", \"w\", \"er\", \"\u003c/w\u003e\"], \"lowest\": [\"l\", \"o\", \"w\", \"est\u003c/w\u003e\"], \"cooler\": [\"c\", \"o\", \"o\", \"l\", \"er\", \"\u003c/w\u003e\"], \"collest\": [\"c\", \"o\", \"o\", \"l\", \"est\u003c/w\u003e\"], } æ¥ä¸‹æ¥å‘ç°æœ€å¤šçš„æ˜¯ (er, \u003c/w\u003e)ï¼Œæ›´æ–°åˆ’åˆ† python { \"highest\": [\"h\", \"i\", \"g\", \"h\", \"est\u003c/w\u003e\"], \"higher\": [\"h\", \"i\", \"g\", \"h\", \"er\u003c/w\u003e\"], \"lower\": [\"l\", \"o\", \"w\", \"er\u003c/w\u003e\"], \"lowest\": [\"l\", \"o\", \"w\", \"est\u003c/w\u003e\"], \"cooler\": [\"c\", \"o\", \"o\", \"l\", \"er\u003c/w\u003e\"], \"collest\": [\"c\", \"o\", \"o\", \"l\", \"est\u003c/w\u003e\"], } åé¢è¿˜å¯ä»¥ç»§ç»­è¿­ä»£æ›´æ–°ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ï¼Œç›¸ä¿¡ä¸Šé¢çš„ä¾‹å­å·²ç»å¤Ÿæ¸…æ¥šäº†ã€‚è€Œä¸”åˆ°è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº† er, est è¿™ä¸¤ä¸ªæœ‰æ„ä¹‰çš„åç¼€ :) ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:3","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#bpe-ä¾‹å­"},{"categories":["NLP"],"content":" BPE çš„ Huggingface å®ç°Huggingface æä¾›çš„ API è¿˜æŒºç®€å•çš„ï¼Œå¯ä»¥æ³¨æ„åˆ° CharBPETokenizer çš„ Charï¼Œä¹Ÿè¯æ˜äº†å‰é¢æˆ‘è¯´çš„â€”â€”BPE æ˜¯æŒ‰ç…§ char pair æ¥çš„ python from tokenizers import CharBPETokenizer # Instantiate tokenizer tokenizer = CharBPETokenizer() tokenizer.train_from_iterator( corpus, vocab_size=17, min_frequency=2, ) ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:4","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#bpe-çš„-huggingface-å®ç°"},{"categories":["NLP"],"content":" æ‰‹åŠ¨å®ç° BPEæœ€å¥½ç†è§£ä¸€ä¸ªç®—æ³•çš„åŠæ³•æ°¸è¿œéƒ½æ˜¯å°è¯•è‡ªå·±å®ç°ä¸€ä¸ªã€‚æˆ‘è¿™é‡ŒæŒ‰ç…§å‰é¢æè¿°çš„ç®—æ³•æµç¨‹å®ç°äº†ä¸€ä¸ª BPE ç±»ï¼Œå¦‚æœåˆå§‹åŒ–çš„æ—¶å€™è®¾ç½® debug=True å°±å¯ä»¥çœ‹åˆ°æ•´ä¸ª BPE æ˜¯å¦‚ä½•æ›´æ–°çš„ é¦–å…ˆæ¥çœ‹æ„é€ å‡½æ•°å’Œç”¨æ¥è®­ç»ƒçš„ train æ–¹æ³• python from collections import defaultdict, Counter from pprint import pprint class BPE: def __init__( self, corpus: list[str], vocab_size: int, max_iter: int | None = None, debug: bool = False, ): self.corpus = corpus self.vocab_size = vocab_size self.vocab = [] self.word_freq = Counter() self.splits = {} # e.g. highest: [high, est\u003c/w\u003e] self.merges = {} # e.g. [high, est\u003c/w\u003e]: highest self.max_iter = max_iter self.debug = debug def train(self): \"\"\"Train a BPE Tokenizer\"\"\" # count the word frequency for document in self.corpus: # split each document in corpus by whitespace words = document.split() self.word_freq += Counter(words) # initialize the self.splits for word in self.word_freq: self.splits[word] = list(word) + [\"\u003c/w\u003e\"] if self.debug: print(f\"Init splits: {self.splits}\") alphabet = set() for word in self.word_freq: alphabet |= set(list(word)) alphabet.add(\"\u003c/w\u003e\") self.vocab = list(alphabet) self.vocab.sort() cnt = 0 while len(self.vocab) \u003c self.vocab_size: if self.max_iter and cnt \u003e= self.max_iter: break # find the most frequent pair pair_freq = self.get_pairs_freq() if len(pair_freq) == 0: print(\"No pair available\") break pair = max(pair_freq, key=pair_freq.get) self.update_splits(pair[0], pair[1]) if self.debug: print(f\"Updated splits: {self.splits}\") self.merges[pair] = pair[0] + pair[1] self.vocab.append(pair[0] + pair[1]) if self.debug: print( f\"Most frequent pair({max(pair_freq.values())} times) \" f\"is : {pair[0]}, {pair[1]}. Vocab size: {len(self.vocab)}\" ) cnt += 1 æµç¨‹è¿˜æ˜¯æŒºæ¸…æ™°çš„ï¼Œæ ¸å¿ƒçš„å‡ ä¸ªå‡½æ•°å®ç°å¦‚ä¸‹ python ... def update_splits(self, lhs: str, rhs: str): \"\"\"If we see lhs and rhs appear consecutively, we merge them\"\"\" for word, word_split in self.splits.items(): new_split = [] cursor = 0 while cursor \u003c len(word_split): if ( word_split[cursor] == lhs and cursor + 1 \u003c len(word_split) and word_split[cursor + 1] == rhs ): new_split.append(lhs + rhs) cursor += 2 else: new_split.append(word_split[cursor]) cursor += 1 self.splits[word] = new_split # if word_split != new_split: # print(f\"old: {word_split}\") # print(f\"new: {new_split}\") def get_pairs_freq(self) -\u003e dict: \"\"\"Compute the pair frequency\"\"\" pairs_freq = defaultdict(int) for word, freq in self.word_freq.items(): split = self.splits[word] for i in range(len(split)): if i + 1 \u003c len(split): pairs_freq[(split[i], split[i + 1])] += freq return pairs_freq æœ€åæˆ‘ä»¬å°±å¯ä»¥å†™ä¸€ä¸ª tokenize å‡½æ•° python ... def tokenize(self, s: str) -\u003e list[str]: splits = [list(t) + [\"\u003c/w\u003e\"] for t in s.split()] for lhs, rhs in self.merges: for idx, split in enumerate(splits): new_split = [] cursor = 0 while cursor \u003c len(split): if ( cursor + 1 \u003c len(split) and split[cursor] == lhs and split[cursor + 1] == rhs ): new_split.append(lhs + rhs) cursor += 2 else: new_split.append(split[cursor]) cursor += 1 assert \"\".join(new_split) == \"\".join(split) splits[idx] = new_split return sum(splits, []) å°è¯•ç”¨è‡ªå·±å†™çš„ BPE å¯¹åˆšæ‰çš„ corpus è¿›è¡Œåˆ†è¯ python bpe = BPE(corpus, vocab_size=17, debug=False) bpe.train() bpe.tokenize(\" \". join(corpus)) è¾“å‡ºæ˜¯ï¼š python ['h', 'i', 'g', 'h', 'est\u003c/w\u003e', 'h', 'i', 'g', 'h', 'er\u003c/w\u003e', 'l', 'o', 'w', 'er\u003c/w\u003e', 'l', 'o', 'w', 'est\u003c/w\u003e', 'c', 'o', 'o', 'l', 'er\u003c/w\u003e', 'c', 'o', 'o', 'l', 'est\u003c/w\u003e'] ğŸ¤”ï¸ è¯´æ˜ä»£ç å†™å¯¹äº†ï¼Œè€Œä¸”å¤šäºäº† \u003c/w\u003eï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ¥šçœ‹åˆ°å•è¯ä¹‹é—´çš„è¾¹ç•Œï¼Œä¹Ÿå¯ä»¥è¿˜åŸå‡ºæœ¬æ¥çš„è¾“å…¥ ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:5","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#æ‰‹åŠ¨å®ç°-bpe"},{"categories":["NLP"],"content":" æ€»ç»“BPE ç®—æ³•ç®€å•è€Œä¸”å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯å½“æ·±å…¥åˆ°å®ç°çš„æ—¶å€™ï¼Œä½ å‘ç°ä¼šæœ‰ä¸å°‘ç»†èŠ‚é—®é¢˜ï¼Œä½†æ­£æ˜¯å› ä¸ºæ¥è§¦åˆ°è¿™äº›ç»†èŠ‚æ‰ä½¿å¾—å¯¹ BPE çš„ç†è§£æ›´åŠ æ·±åˆ»ğŸº è¿™é‡Œå¯ä»¥è®¨è®ºä¸€ä¸‹ BPE çš„å±€é™æ€§ï¼Œé‚£å°±æ˜¯ä½ ä¼šå‘ç°æŠŠæ–‡æ¡£å˜æˆä¸€ä¸ªä¸ªå•è¯æˆ‘ä»¬è¿™é‡Œç”¨çš„æ˜¯ç©ºæ ¼åˆ’åˆ†ï¼Œä½†æ˜¯åƒä¸­æ–‡çš„è¯ï¼Œç©ºæ ¼å¹¶ä¸æ˜¯å•è¯ä¹‹é—´çš„è¾¹ç•Œï¼Œè¿™å°±ä¸å¤§å¥½åŠäº† ","date":"2023-08-24","objectID":"/zh-cn/the-bpe-tokenizer/:1:6","series":null,"tags":["NLP","LLM"],"title":"BPE åˆ†è¯è§£å¯† - å®ç°æ–¹æ³•ä¸ç¤ºä¾‹è®²è§£","uri":"/zh-cn/the-bpe-tokenizer/#æ€»ç»“"},{"categories":["NLP"],"content":"ä»‹ç»äº† NLP ä¸­çš„ TF-IDF æ¨¡å‹","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/"},{"categories":["NLP"],"content":" ä»€ä¹ˆæ˜¯ TF-IDF æ¨¡å‹åœ¨ä¹‹å‰çš„ æ–‡ç«  ä¸­è°ˆåˆ°äº†è¯è¢‹æ¨¡å‹ï¼Œä¹Ÿè®²åˆ°äº†å®ƒçš„è®¸å¤šä¸è¶³ï¼Œåœ¨ä»Šå¤©çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è¦å°è¯•è§£å†³è¯è¢‹æ¨¡å‹çš„ç¼ºç‚¹ä¹‹ä¸€ï¼šæ¯ä¸ªè¯çš„é‡è¦æ€§æ˜¯ä¸€æ ·çš„ Quesstion é‚£ä¹ˆï¼Œæ ¸å¿ƒé—®é¢˜å°±æ˜¯â€”â€”â€”â€”å¦‚ä½•å®šä¹‰ã€Œå•è¯çš„é‡è¦æ€§ã€è¿™ä¸ªæ¦‚å¿µï¼Ÿ ä¸€ä¸ªæƒ³æ³•æ˜¯ï¼šä¸€ä¸ªå•è¯åœ¨ä¸€ä¸ªæ–‡æ¡£é‡Œé¢å‡ºç°å¾—è¶Šé¢‘ç¹ï¼Œåˆ™è¿™ä¸ªå•è¯å¯¹äºè¿™ä¸ªæ–‡æ¡£æ¥è¯´è¶Šé‡è¦ã€‚æ¯”å¦‚ä¸€ç¯‡è®¨è®ºç‹—çš„æ–‡ç« ï¼Œå¤§æ¦‚ç‡æ–‡ç« é‡Œé¢ä¼šå‡ºç°å¾ˆå¤šã€Œç‹—ã€ï¼Œå³è¯é¢‘é«˜çš„å•è¯åæ˜ äº†æ–‡æ¡£çš„ä¸»é¢˜ ä½†å¦‚æœè¿™ä¸ªè¯åœ¨è¯­æ–™åº“çš„æ‰€æœ‰æ–‡æ¡£ä¸­éƒ½å‡ºç°å¾—å¾ˆé¢‘ç¹å‘¢ï¼Ÿæ¯”å¦‚ã€Œçš„ã€ï¼Œåœ¨æ¯ä¸ªæ–‡æ¡£ä¸­ï¼Œå®ƒçš„è¯é¢‘åº”è¯¥éƒ½ä¸ä½ï¼Œé‚£èƒ½è¯´è¿™ä¸ªå•è¯æ›´é‡è¦å—ï¼Ÿæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ï¼Œã€Œçš„ã€æ›´å¤šæ˜¯æœåŠ¡äºè¯­æ³•ç»“æ„è€Œæ²¡åŒ…å«å¤ªå¤šçš„è¯­ä¹‰ä¿¡æ¯ã€‚äºæ˜¯æˆ‘ä»¬æœ‰äº†å¦å¤–ä¸€ä¸ªçº¿ç´¢ï¼šå¦‚æœä¸€ä¸ªå•è¯åœ¨æ¯ä¸ªæ–‡æ¡£ä¸­çš„è¯é¢‘éƒ½å¾ˆé«˜ï¼Œé‚£ä¹ˆè¿™ä¸ªå•è¯çš„é‡è¦æ€§åº”è¯¥å°±æ²¡é‚£ä¹ˆé‡è¦ å› æ­¤ä¸€ä¸ªåˆç†çš„è§£å†³æ–¹æ¡ˆåº”è¯¥è€ƒè™‘å•è¯åœ¨ã€Œå•ä¸ªæ–‡æ¡£ã€çš„è¯é¢‘ï¼Œä½†ä¹Ÿåº”è¯¥è€ƒè™‘å®ƒåœ¨ã€Œå¤šä¸ªæ–‡æ¡£ã€çš„è¯é¢‘ï¼ŒTF-IDF å°±å…¼é¡¾äº†è¿™ä¸¤ç‚¹ Note æ¦‚æ‹¬æ¥è¯´ï¼ŒTF-IDF çš„â€œç›´è§‰â€ç†è§£å°±æ˜¯ï¼šç›¸ä¼¼çš„æ–‡æ¡£ç”¨çš„è¯ ä¹Ÿè®¸ æ˜¯å·®ä¸å¤šçš„ï¼Œè€Œä¸åŒçš„è¯çš„é‡è¦æ€§åº”è¯¥æ˜¯ä¸ä¸€æ ·çš„ ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:1:0","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#ä»€ä¹ˆæ˜¯-tf-idf-æ¨¡å‹"},{"categories":["NLP"],"content":" TF-IDF æ¨¡å‹ç»†èŠ‚TF-IDF ç”± 2 ä¸ªéƒ¨åˆ†ç»„æˆï¼šè¯é¢‘ï¼ˆTerm frequencyï¼ŒTFï¼‰ + é€†æ–‡æ¡£é¢‘ç‡ï¼ˆInverse document frequencyï¼ŒIDFï¼‰ï¼Œå…ˆè¯´ TF å†è¯´ IDF ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:2:0","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#tf-idf-æ¨¡å‹ç»†èŠ‚"},{"categories":["NLP"],"content":" TFæ‰€è°“ TFï¼Œå¯ä»¥çœ‹æˆæ˜¯å…³äºæ–‡æ¡£ $d$ å’Œå•è¯ $w$ çš„å‡½æ•° $\\text{TF}(w, d)$ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š $$ \\text{TF}(w, d)=\\frac{\\text{frequency of}\\ w\\ \\text{in}\\ d}{\\text{word counts of } d} $$ ä¹Ÿå°±æ˜¯ç»Ÿè®¡æ–‡æ¡£ $d$ çš„å•è¯ $w$ çš„è¯é¢‘ï¼Œç„¶åé™¤ä»¥å¯¹åº”æ–‡æ¡£ $d$ çš„æ€»çš„å•è¯æ•°é‡å³å¯ Bug åœ¨ Scikit-Learn æ¡†æ¶ä¸­ï¼ŒTF çš„è®¡ç®—ä¸å¤§ä¸€æ ·ï¼Œå®ƒå¹¶æ²¡æœ‰é™¤ä»¥æ–‡æ¡£çš„æ€»çš„å•è¯æ•°é‡ã€‚å…¶å®é™¤ä»¥æ–‡æ¡£çš„æ€»çš„å•è¯æ•°é‡æ˜¯ä¸ºäº†è®©ä¸€ä¸ªæ–‡æ¡£ $d$ çš„æ‰€æœ‰å•è¯çš„ $\\text{TF}(w, d)$ åŠ èµ·æ¥ä¸ºä¸€ï¼Œèµ·åˆ°ä¸€ä¸ªå½’ä¸€åŒ–çš„ä½œç”¨ Scikit-Learn æ˜¯åœ¨ TF-IDF è®¡ç®—å®Œæˆä¹‹åæ‰åšå½’ä¸€åŒ–çš„ã€‚åé¢æˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªä¾‹å­è¯æ˜è¿™ç‚¹ ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:2:1","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#tf"},{"categories":["NLP"],"content":" IDFåœ¨å†™ä¸‹ IDF çš„å…·ä½“å…¬å¼ä¹‹å‰ï¼Œåˆ«å¿˜äº†æˆ‘ä»¬çš„ç›®çš„ï¼šé™ä½æ¯ä¸ªæ–‡æ¡£éƒ½å‡ºç°çš„å¸¸è§è¯çš„é‡è¦æ€§ã€‚æ‰€ä»¥ IDF æ˜¯ä¸€ä¸ªå…³äºå•è¯ $w$ å’Œè¯­æ–™åº“ $corpus$ çš„å‡½æ•° $$ \\text{IDF}(w, corpus)=log\\ \\frac{\\text{document count of }corpus}{1+\\text{count of document which contains }w} $$ æ³¨æ„åˆ†æ¯ä½ç½®çš„ 1 é¿å…äº†é™¤ 0 çš„æƒ…å†µ Note $corpus$ ä¸€èˆ¬æ˜¯å›ºå®šä¸‹æ¥ä¸å˜çš„ï¼Œå¯ä»¥çœ‹æˆä¸€ä¸ªå¸¸é‡è€Œä¸æ˜¯è‡ªå˜é‡ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŠŠ IDF çœ‹æˆæ˜¯åªè·Ÿå•è¯ $w$ æœ‰å…³ç³» Warning æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œçš„ $log$ æ˜¯ $log_2$ è¿˜æ˜¯ $log_{10}$ è¿˜æ˜¯ $ln$ ï¼Ÿä¸åŒçš„æ¡†æ¶çš„å®ç°å¯èƒ½ä¼šæœ‰å·®å¼‚ï¼ŒScikit-Learn ç”¨çš„æ˜¯è‡ªç„¶å¯¹æ•° $ln$ Bug åœ¨ Scikit-Learn æ¡†æ¶ä¸­ï¼ŒIDF çš„è®¡ç®—è·Ÿä¸Šé¢çš„å…¬å¼å¹¶ä¸ä¸€æ ·ï¼Œé»˜è®¤æƒ…å†µä¸‹ Scikit-Learn çš„ IDF æ˜¯è¿™æ ·çš„ 1 $$ \\text{IDF}(w, corpus)=log\\ \\frac{1 + \\text{document count of }corpus}{1+\\text{count of document which contains }w} + 1 $$ ğŸ¤”ï¸ æˆ‘ä¸ªäººç†è§£çš„è¯å°±æ˜¯ï¼ŒScikit-Learn åšçš„æ”¹åŠ¨ä½¿å¾— $\\text{IDF}(w)$ ä¸å¯èƒ½å°äº 1ï¼Œè€Œæœ¬æ¥çš„å…¬å¼å¦‚æœä¸€ä¸ªå•è¯ $w$ åœ¨æ¯ä¸ªæ–‡æ¡£éƒ½å‡ºç°äº†çš„è¯ï¼Œ$\\text{IDF}(w)$ ç®—å‡ºæ¥ä¼šæ˜¯è´Ÿçš„ï¼Œå› æ­¤ Scikit-Learn çš„æ”¹åŠ¨æ„Ÿè§‰æ›´å®ç”¨äº†ï¼Œä¸åŒå•è¯çš„ IDF æ¯”è¾ƒèµ·æ¥å°±å¾ˆç›´è§‚ ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:2:2","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#idf"},{"categories":["NLP"],"content":" TF-IDFæŠŠ TF å’Œ IDF ç›¸ä¹˜ï¼Œå°±å¾—åˆ°äº†æœ€åçš„ TF-IDF è¡¨è¾¾å¼ï¼š $$ \\text{TF-IDF}(w, d, corpus)=\\text{TF}(w, d) * \\text{IDF}(w, corpus) $$ ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:2:3","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#tf-idf"},{"categories":["NLP"],"content":" Scikit-Learn çš„ TF-IDFè™½ç„¶ TF-IDF å®ç°èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯å®é™…ç”¨çš„æ—¶å€™ï¼Œä½ å¤šåŠè¿˜æ˜¯ä¸ä¼šè‡ªå·±å®ç° TF-IDFï¼Œè€Œæ˜¯ç›´æ¥ç”¨æˆç†Ÿçš„ Scikit-Learn æä¾›çš„ APIã€‚è¿™é‡Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹ Scikit-Learn æ€ä¹ˆè®¡ç®— TF-IDFã€‚æˆ‘ä»¬ç»§ç»­æ²¿ç”¨ Scikit-Learn çš„å®˜æ–¹ä¾‹å­ python toy_corpus = [ 'This is the first document.', 'This is the second second document.', 'And the third one.', 'Is this the first document?', ] tokenized_toy_corpus = [ ['this', 'is', 'the', 'first', 'document'], ['this', 'is', 'the', 'second', 'second', 'document'], ['and', 'the', 'third', 'one'], ['is', 'this', 'the', 'first', 'document'] ] è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Scikit-Learn é‡Œé¢å¦‚ä½•è®¡ç®— TF-IDF python from sklearn.feature_extraction.text import TfidfVectorizer # set norm=None for comparison vectorizer = TfidfVectorizer(norm=None) X = vectorizer.fit_transform(toy_corpus) é€šè¿‡ X.toarray() å°±å¯ä»¥æ‹¿åˆ° TF-IDF çŸ©é˜µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼ˆæ³¨æ„æˆ‘å…³é—­äº†å½’ä¸€åŒ–ï¼Œæ‰€ä»¥ä¸€ä¸ªæ–‡æ¡£å†…çš„ä¸åŒå•è¯çš„ TF-IDF å€¼åŠ èµ·æ¥ä¸ä¸º 1ï¼‰ and document first is one second the third this document1 0.0 1.22314 1.51082 1.22314 0.0 0.0 1.0 0.0 1.22314 document2 0.0 1.22314 0.0 1.22314 0.0 3.83258 1.0 0.0 1.22314 document3 1.91629 0.0 0.0 0.0 1.91629 0.0 1.0 1.91629 0.0 document4 0.0 1.22314 1.51082 1.22314 0.0 0.0 1.0 0.0 1.22314 ä¸‹é¢åˆ™æ˜¯ä¹‹å‰è¯è¢‹æ¨¡å‹çš„è¾“å‡º and document first is one second the third this document1 0 1 1 1 0 0 1 0 1 document2 0 1 0 1 0 2 1 0 1 document3 1 0 0 0 1 0 1 1 0 document4 0 1 1 1 0 0 1 0 1 ğŸ¤”ï¸ å¯¹æ¯”ä¸€ä¸‹ä¸¤è€…ä½ ä¼šå‘ç°ï¼Œç°åœ¨ document1 æ–‡æ¡£é‡Œé¢ documentï¼Œfirst è¿™ä¸¤ä¸ªå•è¯çš„é‡è¦æ€§ä¸ä¸€æ ·äº†ï¼šdocument çš„ TF-IDF æ˜¯ 1.22314ï¼Œè€Œ first çš„ TF-IDF æ˜¯ 1.51082ï¼Œå› ä¸ºè¯­æ–™åº“ä¸­åŒ…å«ä»–ä»¬çš„æ–‡æ¡£æ•°é‡å¹¶ä¸ç›¸åŒã€‚è€Œè¯è¢‹æ¨¡å‹è®¤è¯†ä¸åˆ°è¿™ç‚¹ï¼Œè®¤ä¸ºä¸¤è€…éƒ½æ˜¯ 1 é€šè¿‡ vectorizer çš„ idf_ å±æ€§æˆ‘ä»¬å°±èƒ½å¤Ÿæ‹¿åˆ° Scikit-Learn è®¡ç®—å‡ºæ¥çš„æ¯ä¸ªå•è¯çš„ IDF python print(vectorizer.idf_) # [1.91629073 1.22314355 1.51082562 1.22314355 1.91629073 # 1.91629073 1. 1.91629073 1.22314355] ğŸ¤”ï¸ æ­¤æ—¶ä½ è¦æ˜¯æŠŠè¿™ä¸ª IDF å‘é‡ä¹˜ä»¥è¯è¢‹æ¨¡å‹è¾“å‡ºçš„çŸ©é˜µï¼ˆæ³¨æ„å‘é‡ä¼šè¢«å¹¿æ’­ï¼‰ï¼Œä½ å°±å¾—åˆ°äº† Scikit-Learn ç®—å‡ºæ¥çš„ TF-IDF çŸ©é˜µï¼Œè¿™éªŒè¯äº†å‰é¢æˆ‘ä»¬è¯´çš„ï¼š Scikit-Learn ç›´æ¥ç”¨è¯è¢‹æ¨¡å‹çš„è¾“å‡ºå½“æˆ TF Scikit-Learn çš„ IDF è®¡ç®—è·Ÿæ ‡å‡†çš„ä¸ä¸€æ · ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:3:0","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#scikit-learn-çš„-tf-idf"},{"categories":["NLP"],"content":" æ‰‹åŠ¨å®ç° TF-IDFæ‰‹åŠ¨å®ç°ä¹Ÿå¹¶ä¸å¤æ‚ï¼Œä¸‹é¢å‡è®¾è¯­æ–™åº“æˆ–è€…æ˜¯æ–‡æ¡£éƒ½æ˜¯åˆ†è¯å¥½çš„ï¼Œé‡‡ç”¨å’Œ Scikit-Learn ä¸€æ ·çš„ TF-IDF è®¡ç®—æ–¹å¼ Warning æ³¨æ„ä¸‹é¢çš„ä»£ç æœªç»ä¼˜åŒ–ï¼Œåªæ˜¯ä¸ºäº†æ¼”ç¤º python import math def TF(word: str, tokenized_document: list[str]) -\u003e float: return tokenized_document.count(word) def IDF(word: str, tokenized_corpus: list[list[str]]) -\u003e float: doc_count_contains_word = 0 for doc in tokenized_corpus: if word in doc: doc_count_contains_word += 1 return math.log((1 + len(tokenized_corpus)) / (1 + doc_count_contains_word)) + 1 def TF_IDF( word: str, tokenized_document: list[str], tokenized_corpus: list[list[str]], ) -\u003e float: return TF(word, tokenized_document) * IDF(word, tokenized_corpus) ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:4:0","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#æ‰‹åŠ¨å®ç°-tf-idf"},{"categories":["NLP"],"content":" æ€»ç»“åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº† TF-IDF å¦‚ä½•å¯¹è¯è¢‹æ¨¡å‹åšå‡ºäº†æ”¹è¿›ï¼šé¢å¤–è€ƒè™‘ä¸€ä¸ªå•è¯åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­çš„è¯é¢‘æ¥è°ƒæ•´å®ƒçš„é‡è¦æ€§ã€‚é€šè¿‡åˆ†æå®˜æ–¹çš„ä¾‹å­ï¼Œæˆ‘ä»¬ä¹ŸéªŒè¯äº†ç¡®å®å•è¯çš„é‡è¦æ€§ç°åœ¨æ˜¯ä¸ä¸€æ ·çš„äº†ï¼Œè¿™æ˜¯å¯¹è¯è¢‹æ¨¡å‹ä¸€ä¸ªä¸é”™çš„æ”¹è¿› ä»å®ç°çš„è§’åº¦æ¥è¯´ï¼ŒTF-IDF çš„è®¡ç®—åªéœ€è¦éå†è¯­æ–™åº“ä¸€æ¬¡å³å¯ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­é¢å¤–ç»´æŠ¤å‡ ä¸ªå˜é‡ï¼šæ¯ä¸ªå•è¯å‡ºç°åœ¨äº†å¤šå°‘ä¸ªæ–‡æ¡£é‡Œé¢ï¼›å¤„ç†çš„æ–‡æ¡£æ•°é‡ç­‰ï¼ŒGensim çš„ Dictionary ç±»å°±æ˜¯è¿™ä¹ˆè®¾è®¡çš„ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹ä¸‹æºä»£ç  ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:5:0","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#æ€»ç»“"},{"categories":["NLP"],"content":" å‚è€ƒ TF-IDF term weightingÂ â†©ï¸ ","date":"2023-08-16","objectID":"/zh-cn/an-introduction-of-tf-idf-model/:6:0","series":null,"tags":["NLP","Machine-Learning","Internal"],"title":"TF-IDF æ¨¡å‹","uri":"/zh-cn/an-introduction-of-tf-idf-model/#å‚è€ƒ"},{"categories":["NLP"],"content":"è¯è¢‹æ¨¡å‹ç®€ä»‹","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/"},{"categories":["NLP"],"content":" ä»€ä¹ˆæ˜¯è¯è¢‹æ¨¡å‹åœ¨ NLP ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†æ–‡æ¡£ï¼ˆdocumentï¼‰è¡¨ç¤ºä¸ºå‘é‡ï¼Œè¿™æ˜¯å› ä¸ºæœºå™¨å­¦ä¹ åªèƒ½å¤Ÿå¤„ç†æ•°å­—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°ä¸‹é¢è¿™ä¹ˆä¸€ä¸ªç¥å¥‡çš„å‡½æ•°ï¼š $$ f(\\text{document}) = vector $$ ä»Šå¤©è¦è®¨è®ºçš„æ˜¯è¯è¢‹æ¨¡å‹ï¼ˆbag-of-word, BoWï¼‰ï¼Œè¯è¢‹æ¨¡å‹å¯ä»¥è®©æˆ‘ä»¬æŠŠè¾“å…¥çš„æ–‡æ¡£è½¬å˜æˆä¸€ä¸ªå‘é‡è¡¨ç¤º ğŸ’¡ å°½ç®¡è¯è¢‹æ¨¡å‹åœ¨ 2023 å¹´å·²ç»è¿‡æ—¶äº†ï¼Œæˆ‘ä»ç„¶é¼“åŠ±ä½ å­¦ä¹ è¯è¢‹æ¨¡å‹ï¼Œå¹¶ä¸”æ€è€ƒä¸‹é¢å‡ ä¸ªé‡è¦é—®é¢˜ï¼š Motivation æ˜¯ä»€ä¹ˆï¼Ÿ ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ å¦‚ä½•æŠŠå®ƒå˜å¾—æ›´å¥½ï¼Ÿ ","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/:1:0","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/#ä»€ä¹ˆæ˜¯è¯è¢‹æ¨¡å‹"},{"categories":["NLP"],"content":" è¯è¢‹æ¨¡å‹çš„ motivation å’Œç›´è§‚ç†è§£åœ¨äº†è§£è¯è¢‹æ¨¡å‹ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘æƒ³å…ˆç»™ä½ ä¸€ä¸ªè¯è¢‹æ¨¡å‹å¯èƒ½æ˜¯æœ‰ç”¨çš„ç›´è§‰ â€”â€” ç›¸ä¼¼çš„æ–‡æ¡£ç”¨çš„è¯ä¹Ÿè®¸æ˜¯å·®ä¸å¤šçš„ ä½ å¯èƒ½æŒåå¯¹æ„è§ï¼Œå¹¶ä¸”å¯ä»¥ç»™å‡ºè®¸å¤šåä¾‹ã€‚æˆ‘æ‰¿è®¤ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ›´åŠ å¼ºå¤§çš„æ¨¡å‹ :) ","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/:1:1","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/#è¯è¢‹æ¨¡å‹çš„-motivation-å’Œç›´è§‚ç†è§£"},{"categories":["NLP"],"content":" è¯è¢‹æ¨¡å‹ç»†èŠ‚æ„é€ ä¸€ä¸ªè¯è¢‹æ¨¡å‹åªéœ€è¦åšä¸¤ä»¶äº‹æƒ… åˆ›å»ºè¯æ±‡è¡¨ï¼ˆVocabï¼‰ï¼Œæ¯ä¸ªå•è¯éƒ½åœ¨è¯æ±‡è¡¨é‡Œé¢æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„ IDï¼ˆä¸€èˆ¬ä» 0 å¼€å§‹ï¼‰ã€‚æ³¨æ„è¯è¢‹æ¨¡å‹è¾“å‡ºçš„å‘é‡çš„é•¿åº¦ç­‰äºè¯æ±‡è¡¨çš„å¤§å° éå†è¯­æ–™åº“ä¸­çš„æ¯ä¸ªæ–‡æ¡£ï¼ŒæŠŠè¿™ä¸ªæ–‡æ¡£æ–°å‡ºç°çš„å•è¯æ·»åŠ åˆ°è¯æ±‡è¡¨é‡Œé¢ åœ¨æ„é€ å¥½è¯è¢‹æ¨¡å‹ä¹‹åï¼Œå°±å¯ä»¥æŠŠä»»ä½•æ–‡æ¡£éƒ½è½¬å˜æˆå‘é‡è¡¨ç¤ºäº†ã€‚æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåªè¦ç»Ÿè®¡æ–‡æ¡£ä¸­æ¯ä¸ªå•è¯å‡ºç°çš„æ¬¡æ•°ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯¹äºæ–‡æ¡£ä¸­ä¸åœ¨è¯æ±‡è¡¨é‡Œé¢çš„å•è¯ï¼Œä¸€èˆ¬ç›´æ¥å°±å¿½ç•¥ä¸è®¡ è®©æˆ‘ä»¬æ¥ç»“åˆä¸€ä¸ªç®€å•ä¾‹å­ç†è§£1 python toy_corpus = [ 'This is the first document.', 'This is the second second document.', 'And the third one.', 'Is this the first document?', ] åˆ é™¤æ ‡ç‚¹ç¬¦å·ï¼Œç„¶åç”¨ç©ºæ ¼åˆ†è¯ï¼ŒåŒæ—¶æŠŠæ‰€æœ‰çš„å•è¯å˜æˆå°å†™ï¼Œé¢„å¤„ç†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° python tokenized_toy_corpus = [ ['this', 'is', 'the', 'first', 'document'], ['this', 'is', 'the', 'second', 'second', 'document'], ['and', 'the', 'third', 'one'], ['is', 'this', 'the', 'first', 'document'] ] ä¸ºäº†ç®€å•ï¼Œæˆ‘ä»¬è¿™é‡Œè€ƒè™‘æŠŠæ‰€æœ‰æ–‡æ¡£çš„æ‰€æœ‰å•è¯éƒ½åŒ…æ‹¬åœ¨è¯æ±‡è¡¨é‡Œé¢ python flatten_list_as_set = set(sum(tokenized_toy_corpus, start=[])) print(f\"the toy vocab size: {len(flatten_list_as_set)}\") the toy vocab size: 9 ğŸ’¡ ä¸€ä¸ªç”¨ sum å‡½æ•°æ‘Šå¹³ list çš„å°æŠ€å·§ :D ç„¶åï¼Œè®©æˆ‘ä»¬ç»™è¯æ±‡è¡¨é‡Œé¢çš„æ¯ä¸ªå•è¯ä¸€ä¸ªç‹¬ç‰¹çš„ ID python toy_token2id = {} for token in sorted(flatten_list_as_set): toy_token2id[token] = len(toy_token2id) print(toy_token2id) { 'and': 0, 'document': 1, 'first': 2, 'is': 3, 'one': 4, 'second': 5, 'the': 6, 'third': 7, 'this': 8 } å¯ä»¥çœ‹åˆ°ï¼Œè¯æ±‡è¡¨çš„å¤§å°æ˜¯ 9ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå°±çŸ¥é“ï¼Œæ¯ä¸ªæ–‡æ¡£å¯ä»¥ç”¨ä¸€ä¸ªé•¿åº¦ä¸º 9 çš„å‘é‡è¡¨ç¤º è®©æˆ‘ä»¬æ‰‹åŠ¨è®¡ç®—ä¸€ä¸‹æ¯ä¸ªæ–‡æ¡£çš„è¯è¢‹æ¨¡å‹å‘é‡æ¥æ£€æŸ¥æˆ‘ä»¬æ˜¯å¦ç†è§£æ­£ç¡® python BoW_matrix = [] for document in tokenized_toy_corpus: temp = [0] * 9 for token in document: temp[toy_token2id[token]] += 1 BoW_matrix.append(temp) print(BoW_matrix) [ [0, 1, 1, 1, 0, 0, 1, 0, 1], [0, 1, 0, 1, 0, 2, 1, 0, 1], [1, 0, 0, 0, 1, 0, 1, 1, 0], [0, 1, 1, 1, 0, 0, 1, 0, 1] ] ç›´æ¥çœ‹æ•°å­—çš„è¯ä¸æ˜¯å¾ˆç›´è§‚ï¼Œå¯ä»¥å¤šå¢åŠ ä¸€è¡Œä¸€åˆ—ï¼Œå°±èƒ½æŠŠå•è¯å’Œè¯é¢‘å¯¹åº”ä¸Šäº†ã€‚å¦‚æœä½ æ£€æŸ¥ç­”æ¡ˆ1çš„è¯ï¼Œä½ ä¼šå‘ç°å’Œæˆ‘ä»¬ç®—å‡ºæ¥çš„ä¸€æ¨¡ä¸€æ · and document first is one second the third this document1 0 1 1 1 0 0 1 0 1 document2 0 1 0 1 0 2 1 0 1 document3 1 0 0 0 1 0 1 1 0 document4 0 1 1 1 0 0 1 0 1 å¦‚ä½•è§£è¯»è¿™ä¸ªè¡¨æ ¼ï¼Ÿ æ¯ä¸€è¡Œå°±æ˜¯å¯¹åº”æ–‡æ¡£çš„è¯è¢‹æ¨¡å‹è¾“å‡ºçš„å‘é‡è¡¨ç¤ºï¼Œä»¥ document2 ä¸ºä¾‹ï¼Œå®ƒåŒ…å«äº†ä¸‹é¢è¿™äº›å•è¯ document * 1 is * 1 second * 2 the * 1 this * 1 ä¹‹å‰æåˆ°ï¼Œåˆ†è¯ä¹‹åçš„ document2 æ˜¯ ['this', 'is', 'the', 'second', 'second', 'document']ï¼Œæ˜¾ç„¶å’Œè¿™ä¸ªå‘é‡è¡¨ç¤ºæ˜¯å¯¹åº”çš„ ç°åœ¨ä½ å°±çŸ¥é“å¦‚ä½•è§£è¯»è¿™ä¸ªäº†çŸ©é˜µäº† :D ğŸ§ ä½ ä¹Ÿè®¸æ³¨æ„åˆ°äº†ï¼Œè¿™ä¸ªçŸ©é˜µä¸­æœ‰å¾ˆå¤š 0ã€‚BoW çš„çŸ©é˜µç¡®å®æ˜¯è¿™æ ·çš„ï¼Œæ˜¯ä¸€ä¸ªç¨€ç–çŸ©é˜µï¼Œè¿™ä¹Ÿæ˜¯å®ƒçš„ç¼ºç‚¹ä¹‹ä¸€ python from sklearn.metrics.pairwise import cosine_similarity æˆ‘ä»¬å¯ä»¥ç”¨å‘é‡å†…ç§¯è®¡ç®— 2 ä¸ªå‘é‡ä¹‹é—´çš„ç›¸ä¼¼åº¦ ä¹‹å‰çš„ tokenized_toy_corpus å¦‚ä¸‹ python tokenized_toy_corpus = [ ['this', 'is', 'the', 'first', 'document'], ['this', 'is', 'the', 'second', 'second', 'document'], ['and', 'the', 'third', 'one'], ['is', 'this', 'the', 'first', 'document'] ] ç°åœ¨ï¼Œå‡è®¾æŸ¥è¯¢ï¼ˆqueryï¼‰æ˜¯æœ€åä¸€ä¸ªæ–‡æ¡£ â€”â€” ['is', 'this', 'the', 'first', 'document']ï¼Œå‰ 3 ä¸ªæ–‡æ¡£ä¸­å“ªä¸€ä¸ªè·Ÿå®ƒæœ€åƒï¼Ÿ æˆ‘ä»¬å¯ä»¥ä¸€çœ¼çœ‹å‡ºç­”æ¡ˆæ˜¯ç¬¬ä¸€ä¸ªï¼Œé‚£ä¹ˆæœºå™¨èƒ½å¦ä¹Ÿå‘ç°è¿™ç‚¹ï¼Ÿ python print( cosine_similarity([BoW_matrix[3]], [BoW_matrix[0]]), cosine_similarity([BoW_matrix[3]], [BoW_matrix[1]]), cosine_similarity([BoW_matrix[3]], [BoW_matrix[2]]), ) [[1.]] [[0.63245553]] [[0.2236068]] ğŸ¤”ï¸ æœºå™¨ä¹Ÿçœ‹å‡ºæ¥äº† ","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/:1:2","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/#è¯è¢‹æ¨¡å‹ç»†èŠ‚"},{"categories":["NLP"],"content":" æ›´å¤æ‚çš„çœŸå®æ•°æ®é›†å‰é¢çš„ä¾‹å­å¤ªç®€å•äº†ï¼Œä¸‹é¢æˆ‘ä¼šç”¨ä¸€ä¸ªæ›´å¤æ‚çš„çœŸå®æ•°æ®é›† â€”â€” CodeSearchNetã€‚å®ƒåŒ…å«äº†è®¸å¤šç¼–ç¨‹è¯­è¨€çš„å‡½æ•°ï¼Œè¿™é‡Œæˆ‘æŒ‘ Python æ¥å±•ç¤º å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä½ æ„Ÿå…´è¶£çš„ç¼–ç¨‹è¯­è¨€ :) python from datasets import load_dataset from gensim import corpora def process_data(partition: str) -\u003e list[str]: \"\"\" Get data from the datasets library from huggingface. Only keep the `whole_func_string` column Arg --- `partition`: train/validation/test Return ----- return a list of python functions \"\"\" raw_datasets = load_dataset(\"code_search_net\", \"python\") return raw_datasets[partition][\"whole_func_string\"] å–å†³äºä½ çš„ç½‘ç»œè¿™å¯èƒ½å¾—èŠ±ä¸Šä¸€ç‚¹æ—¶é—´ï¼Œå‹ç¼©æ–‡ä»¶å¤§å°æ˜¯ 941MB python # use the test dataset to speed up the process corpus = process_data(\"test\") æ¥çœ‹ä¸€ä¸‹æ•°æ®ä¸­çš„ä¸€ä¸ªä¾‹å­ python print(corpus[0]) def get_vid_from_url(url): \"\"\"Extracts video ID from URL. \"\"\" return match1(url, r'youtu\\.be/([^?/]+)') or \\ match1(url, r'youtube\\.com/embed/([^/?]+)') or \\ match1(url, r'youtube\\.com/v/([^/?]+)') or \\ match1(url, r'youtube\\.com/watch/([^/?]+)') or \\ parse_query_param(url, 'v') or \\ parse_query_param(parse_query_param(url, 'u'), 'v') åœ¨å‰é¢çš„è‹±æ–‡åˆ†è¯ä¸­ï¼Œæˆ‘ä»¬åˆ é™¤äº†æ ‡ç‚¹ç¬¦å·ï¼Œç”¨ç©ºæ ¼åˆ†è¯ã€‚ä»£ç çš„åˆ†è¯åˆ™æ¯”è¾ƒä¸ä¸€æ ·ï¼Œç¼–ç¨‹è¯­è¨€æœ‰è‡ªå·±å¯¹åº”çš„è¯­æ³•ï¼ˆä¸Šä¸‹æ–‡æ— å…³æ–‡æ³•ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨è¯æ³•åˆ†æå™¨æ‹¿åˆ°ä¸€ä¸ªä¸ª tokenã€‚æˆ‘è¿™é‡Œç”¨ Python è‡ªå¸¦çš„ tokenize ç®€å•å®ç°äº†ä¸€ä¸‹ ä¸‹é¢çš„å‡½æ•°å¦‚æœçœ‹ä¸æ‡‚ä¹Ÿæ²¡å…³ç³»ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ã€‚ç”¨è¯æ³•åˆ†æå™¨åˆ†è¯åªæ˜¯ä¸ºäº†å¾—åˆ°æ›´ç²¾ç¡®çš„åˆ†è¯ç»“æœ :) python import ast from io import BytesIO import tokenize def get_token_stream(code: str) -\u003e list[str]: \"\"\" Tokenize the source code and return a token stream Note that the following token type will be removed: - COMMENT - NEWLINE - NL - INDENT - DEDENT - ENCODING - STRING \"\"\" # see https://docs.python.org/3/library/token.html useless_token_type = { tokenize.COMMENT, tokenize.NEWLINE, tokenize.NL, # non-terminating newline tokenize.INDENT, tokenize.DEDENT, tokenize.ENCODING, tokenize.STRING, } parse_tree = ast.parse(code) origin_tokens = tokenize.tokenize(BytesIO(code.encode(\"utf-8\")).readline) token_as_strlist = [ token.string for token in origin_tokens if token.type not in useless_token_type ] return token_as_strlist æ³¨æ„ä¸¤ä»¶äº‹æƒ…ï¼š æˆ‘åˆ é™¤äº†æ‰€æœ‰çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬æ–‡æ¡£ã€f-stringã€æ™®é€šå­—ç¬¦ä¸²å’Œæ³¨é‡Šç­‰ æˆ‘æ²¡æœ‰æŠŠå˜é‡åæˆ–è€…å‡½æ•°åæ ¹æ® camelCase æˆ–è€… snake_case è¿™ä¸¤ç§å‘½åæƒ¯ä¾‹è¿›ä¸€æ­¥åˆ†è¯ é¦–å…ˆï¼Œå…ˆç”¨ get_token_stream æŠŠæ•°æ®ä¸­çš„ Python ä»£ç éƒ½åˆ†è¯ä¸€ä¸‹ã€‚æ³¨æ„æ•°æ®ä¸­åŒ…å«äº† Python2 å’Œ Python3ï¼Œè¿™é‡Œç›´æ¥ä¸¢å¼ƒäº† Python2 çš„ä»£ç  python from tqdm.auto import tqdm py2_cnt, py3_cnt = 0, 0 new_corpus = [] codes = [] for code in tqdm(corpus): try: codes.append(get_token_stream(code)) new_corpus.append(code) py3_cnt += 1 except SyntaxError: py2_cnt += 1 print(f\"Python2: {py2_cnt}, Python3: {py3_cnt}\") corpus = new_corpus è®©æˆ‘ä»¬éªŒè¯ä¸€ä¸‹ get_token_stream æ˜¯å¦åˆ†è¯åˆ†å¯¹äº† python print(codes[0]) [ 'def', 'get_vid_from_url', '(', 'url', ')', ':', 'return', 'match1', '(', 'url', ',', ')', 'or', 'match1', '(', 'url', ',', ')', 'or', 'match1', '(', 'url', ',', ')', 'or', 'match1', '(', 'url', ',', ')', 'or', 'parse_query_param', '(', 'url', ',', ')', 'or', 'parse_query_param', '(', 'parse_query_param', '(', 'url', ',', ')', ',', ')', '' ] ç°åœ¨ï¼Œå¯ä»¥åˆ©ç”¨ Gensim æä¾›çš„ API æ¥åˆ›å»ºè¯æ±‡è¡¨ python from gensim import corpora dictionary = corpora.Dictionary(codes) print(dictionary) Dictionary\u003c77242 unique tokens: ['', '(', ')', ',', ':']...\u003e å¯ä»¥çœ‹åˆ°ï¼Œè¯æ±‡è¡¨å¤ªå¤§äº†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹èƒ½å¦ä¼˜åŒ–ä¸€ä¸‹ ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¸ä¼šå…³å¿ƒåªå‡ºç°ä¸€æ¬¡çš„ tokenï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–ä»¬åˆ é™¤æ‰ python once_ids = [ token_id for token_id, doc_freq in dictionary.dfs.items() if doc_freq == 1 ] dictionary.filter_tokens(once_ids) dictionary.compactify() print(dictionary) Dictionary\u003c31933 unique tokens: ['', '(', ')', ',', ':']...\u003e ç°åœ¨åªå‰©ä¸‹ 31933 tokens äº†ï¼Œè¿™å·²ç»å¥½å¤šäº†ï¼Œæˆ‘çŒœæµ‹ token è¿™ä¹ˆå¤šçš„åŸå› æ˜¯æœ‰å¾ˆå¤šå˜é‡/å‡½æ•°åéƒ½ä¸ä¸€æ · ğŸ§ Dictionary æä¾›äº† most_common æ–¹æ³•å¯ä»¥æ‰¾åˆ°è¯é¢‘æœ€å¤šçš„ tokenï¼Œè®©æˆ‘ä»¬çœ‹ä¸‹èƒ½å¦å‘ç°ä¸€äº›æœ‰æ„æ€çš„äº‹æƒ… python dictionary.most_common(25) [ ('.', 202834), ('(', 199868), (')', 199868), (',', 162853), ('=', 142808), (':', 110829), ('self', 71699), ('[', 55736), (']', 55736), ('if', 40272), ('return', 24021), ('def', 23557), ('', 21948), ('None', 19797), ('in', 19437), ('for', 13509), ('1', 13345), ('0', 13213), ('not', 11826), ('else', 10634), ('+', 10617), ('==', 9323), ('name', 8290), ('is', 7601), ('-', 7544) ] ğŸ§ å‘ç°äº†ä¸€ä¸ªæœ‰æ„æ€çš„ç°è±¡ï¼Œ( å’Œ ) çš„è¯é¢‘ä¸€æ ·ï¼Œ[ å’Œ ] ä¹Ÿæ˜¯çš„ï¼Œå› ä¸ºä»£ç çš„è¯­æ³•å°±æ˜¯è¿™ä¹ˆè§„å®šçš„ ç„¶åç”¨ doc2bow API å°±å¯ä»¥å¾—åˆ°æ¯ä¸ªæ–‡æ¡£ï¼ˆä»£ç ï¼‰çš„è¯è¢‹æ¨¡å‹å‘é‡ python BoW_matrix_for_code = [dictionary.doc2bow(d) for d in codes] print(BoW_matrix_for_code[0]) [ (0, 1), (1,","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/:2:0","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/#æ›´å¤æ‚çš„çœŸå®æ•°æ®é›†"},{"categories":["NLP"],"content":" æ€»ç»“ç°åœ¨ï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ BoW çš„ä¸€äº›ç¼ºç‚¹ã€‚ä½ å¯èƒ½å·²ç»è‡ªå·±å¼„æ¸…æ¥šäº†å…¶ä¸­ä¸€äº›ï¼š å•è¯ä¹‹é—´çš„é¡ºåºä¿¡æ¯æ²¡æœ‰å¾—åˆ°ä¿ç•™ã€‚The cat chased the dog å’Œ The dog chased the cat æ„æ€å®Œå…¨ä¸ä¸€æ · æ²¡æœ‰è¯­ä¹‰ä¿¡æ¯ã€‚ è¯è¢‹æ¨¡å‹å°†æ¯ä¸ªå•è¯è§†ä¸ºä¸€ä¸ªç‹¬ç«‹çš„å®ä½“ è¯è¢‹æ¨¡å‹è¾“å‡ºçš„å‘é‡æ˜¯é«˜ç»´ç¨€ç–å‘é‡ã€‚ è®¡ç®—é‡å¾ˆå¤§ï¼Œå‘é‡é•¿åº¦å–å†³äºä½ çš„è¯æ±‡è¡¨å¤§å° æ¯ä¸ªè¯éƒ½æœ‰ç›¸åŒçš„é‡è¦æ€§ã€‚ ä½†æœ‰äº›è¯å¯èƒ½æä¾›æ›´å¤šä¿¡æ¯ æ— æ³•å¤„ç†ä¸åœ¨è¯æ±‡è¡¨é‡Œé¢çš„å•è¯ã€‚ å¦‚æœæ–‡æ¡£åŒ…å«å¾ˆå¤šä¸åœ¨è¯æ±‡è¡¨ä¸­çš„å•è¯è¦æ€ä¹ˆåŠï¼Ÿ â€¦ è¯è¢‹æ¨¡å‹æœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä½ å¯èƒ½åªä¼šåœ¨æ•™ç¨‹é‡Œé¢çœ‹åˆ°å®ƒã€‚é‰´äºè¿™äº›é™åˆ¶ï¼Œåé¢äººä»¬åˆå¼€å‘äº† Word2Vecã€GloVe å’ŒåŸºäº Transformer çš„æ¶æ„ï¼ˆä¾‹å¦‚ BERTã€GPTï¼‰ç­‰æ›´å…ˆè¿›çš„æ¨¡å‹æ¥å…‹æœè¿™äº›ç¼ºç‚¹ ","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/:3:0","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/#æ€»ç»“"},{"categories":["NLP"],"content":" å‚è€ƒ CountVectorizerÂ â†©ï¸Â â†©ï¸ ","date":"2023-08-11","objectID":"/zh-cn/an-introduction-of-bag-of-word-model/:4:0","series":null,"tags":["NLP","Machine-Learning","AI4SE"],"title":"è¯è¢‹æ¨¡å‹","uri":"/zh-cn/an-introduction-of-bag-of-word-model/#å‚è€ƒ"},{"categories":["ML-DL"],"content":"ä»‹ç»äº†å¦‚ä½•ç”¨ç»´åº¦åˆ†ææŠ€å·§å¿«é€Ÿæ±‚è§£æ¢¯åº¦","date":"2023-07-26","objectID":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/","series":null,"tags":["Deep-Learning","Machine-Learning"],"title":"æœºå™¨å­¦ä¹ æ±‚è§£æ¢¯åº¦çš„å°æŠ€å·§","uri":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/"},{"categories":["ML-DL"],"content":" å¼•è¨€ä¹Ÿè®¸ä½ å’Œæˆ‘ä¸€æ ·åœ¨æ±‚è§£æœºå™¨å­¦ä¹ çš„æ¢¯åº¦æ—¶æœ‰å„ç§å›°éš¾ï¼Œå³ä½¿çœ‹ç€ç›¸å…³çš„ Cookbook ä¸€è¾¹æ¨å¯¼ä¾ç„¶æ˜¯æœ‰å›°æƒ‘ï¼Œä»Šå¤©æˆ‘è¦åˆ†äº«çš„æ˜¯æœ€è¿‘å­¦ä¹ åˆ°çš„ä¸€ä¸ªå®ç”¨æŠ€å·§ï¼šåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæ±‚è§£åå¯¼æ•°çš„æ—¶å€™å¯ä»¥å…ˆå…¨éƒ¨çœ‹æˆæ ‡é‡å¤„ç†ï¼Œæœ€åè®©ç»´åº¦åŒ¹é…å³å¯ å…è´£å£°æ˜ï¼šè¿ç”¨å¦‚ä¸Šçš„æŠ€å·§å¹¶ä¸ä¿è¯æ¢¯åº¦æ˜¯æ­£ç¡®çš„ï¼Œå¯èƒ½ç»´åº¦æ˜¯å¯¹çš„ï¼Œä½†æ˜¯æ¢¯åº¦æ˜¯é”™çš„ï¼Œå¼ºè°ƒä¸€ä¸‹ä¸ºäº†ç¡®ä¿æ¢¯åº¦è®¡ç®—æ­£ç¡®è¯·åšå¥½æ¢¯åº¦æ£€æŸ¥ ","date":"2023-07-26","objectID":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/:1:0","series":null,"tags":["Deep-Learning","Machine-Learning"],"title":"æœºå™¨å­¦ä¹ æ±‚è§£æ¢¯åº¦çš„å°æŠ€å·§","uri":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/#å¼•è¨€"},{"categories":["ML-DL"],"content":" åº”ç”¨ ğŸ’¡ å¤§å†™çš„é»‘è‰²ç²—ä½“å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼Œä¸åŠ ç²—çš„å­—æ¯éƒ½æ˜¯æ ‡é‡ ","date":"2023-07-26","objectID":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/:2:0","series":null,"tags":["Deep-Learning","Machine-Learning"],"title":"æœºå™¨å­¦ä¹ æ±‚è§£æ¢¯åº¦çš„å°æŠ€å·§","uri":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/#åº”ç”¨"},{"categories":["ML-DL"],"content":" åå‘ä¼ æ’­çŸ©é˜µå½¢å¼æ¨å¯¼åœ¨ä¹‹å‰çš„ åå‘ä¼ æ’­æ¨å¯¼ è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»æ ‡é‡è§’åº¦æ¥æ¨å¯¼äº†åå‘ä¼ æ’­ï¼Œå› ä¸ºè¿™ä¸ªæ¯”è¾ƒå¥½ç†è§£ï¼Œä½†å¦‚æœä½ å°è¯•å®ç°åå‘ä¼ æ’­æˆ–è€…æ˜¯å‰å‘ä¼ æ’­ï¼Œä½ ä¼šå‘ç°éƒ½æ˜¯ç”¨çŸ©é˜µå½¢å¼ï¼Œæˆ‘ä»¬æ€»æ˜¯æŠŠå®ƒå˜æˆçŸ©é˜µä¹˜æ³•ï¼Œå› ä¸ºçŸ©é˜µä¹˜æ³•ä¼šå¿«å¾ˆå¤šã€‚å› æ­¤éœ€è¦å¼„æ¸…æ¥šã€Œåå‘ä¼ æ’­çš„çŸ©é˜µå½¢å¼ã€æ˜¯å¦‚ä½•è¿›è¡Œçš„ï¼Œä¸‹é¢æˆ‘å°†åˆ©ç”¨å‰é¢æåˆ°çš„æŠ€å·§æ¥è¿›è¡Œæ¨å¯¼ ä¸ºäº†å…¬å¼ç®€æ´ï¼Œä¸‹é¢çœç•¥äº† bias åªè€ƒè™‘ weight è€ƒè™‘ä¸€ä¸ªç®€å•çš„ $L$ å±‚çš„ MLP æ¨¡å‹ï¼Œç”¨ $\\mathbf Z^l$ è¡¨ç¤º $l$ å±‚çš„è¾“å‡ºï¼Œç‰¹åˆ«çš„ï¼Œå°†è¾“å…¥å±‚ä¹Ÿç”¨ $\\mathbf Z$ è¡¨ç¤ºï¼Œæœ‰ $$\\mathbf Z^0=\\mathbf X$$ å…¶ä¸­ $\\mathbf X\\in\\mathcal{R}^{m\\times d}$ï¼Œ$m$ ä¸ºæ ·æœ¬æ•°é‡ï¼Œ$d$ ä¸ºæ¯ä¸ªæ ·æœ¬çš„ç‰¹å¾é•¿åº¦ æ¨¡å‹ $f_\\theta$ çš„è¾“å‡ºæ˜¯ $$f_\\theta(\\mathbf X)=\\mathbf Z^{L}$$ å…¶ä¸­ $\\theta$ è¡¨ç¤ºæ¨¡å‹çš„å¯å­¦ä¹ å‚æ•° ç›¸é‚»ä¸¤å±‚ä¹‹é—´çš„å…³ç³»æ˜¯ $$\\mathbf Z^{l+1}=\\sigma_{l+1}(\\mathbf Z^l\\mathbf W^{l+1}),l=0,â€¦,L-1$$ å…¶ä¸­ $\\sigma_{l+1}$ ä¸º $l+1$ å±‚çš„æ¿€æ´»å‡½æ•° ç»´åº¦ä¿¡æ¯å¦‚ä¸‹: $$\\mathbf Z^l\\in\\mathcal{R}^{m\\times n_l}$$ $$\\mathbf W^{l+1} \\in \\mathcal R^{n_l\\times n_{l+1}}$$ å…¶ä¸­ $n_l$ ç”¨äºè¡¨ç¤º $l$ å±‚çš„ç¥ç»å…ƒä¸ªæ•° æˆ‘ä»¬æƒ³è¦ç¡®å®šæŸå¤± $J$ å¯¹æ¨¡å‹ä»»æ„å¯å­¦ä¹ å‚æ•°çš„æ¢¯åº¦ï¼ˆæ ‡é‡å¯¹çŸ©é˜µæ±‚å¯¼ï¼‰ï¼Œè¿™æ ·æ‰èƒ½ç”¨æ¢¯åº¦ä¸‹é™ç®—æ³•æ›´æ–°å¯å­¦ä¹ å‚æ•°ï¼Œå‡è®¾æˆ‘ä»¬è¦æ±‚è§£ $\\mathbf W^l$ çš„æ¢¯åº¦ $$ \\frac{\\partial J}{\\partial \\mathbf W^l}=\\frac{\\partial J}{\\partial\\mathbf Z^{L}}\\cdot \\frac{\\partial \\mathbf Z^{L}}{\\partial\\mathbf Z^{L-1}}\\cdot â€¦\\cdot \\frac{\\partial \\mathbf Z^{l+1}}{\\partial\\mathbf Z^{l}}\\cdot\\frac{\\partial \\mathbf Z^{l}}{\\partial\\mathbf W^l} $$ ğŸ¤”ï¸ é‚£å¦‚æœæ±‚è§£çš„æ˜¯å…³äº $\\mathbf W^{l-1}$ çš„æ¢¯åº¦å‘¢ï¼Ÿ $$ \\frac{\\partial J}{\\partial \\mathbf W^{l-1}}=\\frac{\\partial J}{\\partial\\mathbf Z^{L}}\\cdot \\frac{\\partial \\mathbf Z^{L}}{\\partial\\mathbf Z^{L-1}}\\cdot â€¦\\cdot \\frac{\\partial \\mathbf Z^{l+1}}{\\partial\\mathbf Z^{l}} \\cdot \\frac{\\partial \\mathbf Z^{l}}{\\partial\\mathbf Z^{l-1}}\\cdot\\frac{\\partial \\mathbf Z^{l-1}}{\\partial\\mathbf W^{l-1}} $$ ä½ ä¼šå‘ç°ï¼Œä¸åŒå‚æ•°çš„æ¢¯åº¦å…¬å¼å­˜åœ¨å¤§é‡ç›¸åŒçš„éƒ¨åˆ†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å¼•å…¥é¢å¤–ä¸€ä¸ªè®°å· $\\mathbf G^l$ï¼Œè¡¨ç¤ºæŸå¤±å¯¹ $\\mathbf Z^l$ çš„æ¢¯åº¦ $$\\mathbf G^{l}=\\frac{\\partial J}{\\partial \\mathbf Z^{l}}$$ ä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥æ¨å¯¼ $\\mathbf G^l$ å’Œ $\\mathbf G^{l+1}$ çš„å…³ç³» $$ \\begin{equation} \\begin{aligned} \\mathbf G^{l} \u0026=\\frac{\\partial J}{\\partial \\mathbf Z^{l+1}}\\cdot\\frac{\\partial \\mathbf Z^{l+1}}{\\partial \\mathbf Z^l} \\\\\\ \u0026=\\mathbf G^{l+1}\\cdot \\frac{\\partial \\mathbf Z^{l+1}}{\\partial \\mathbf Z^l} \\\\\\ \u0026=\\mathbf G^{l+1}\\cdot \\frac{\\partial \\sigma_{l+1}(\\mathbf Z^{l}\\mathbf W^{l+1})}{\\partial \\mathbf Z^{l}\\mathbf W^{l+1}}\\cdot\\frac{\\partial \\mathbf Z^{l}\\mathbf W^{l+1}}{\\partial \\mathbf Z^l} \\\\\\ \u0026=\\mathbf G^{l+1}\\cdot \\sigmaâ€™(\\mathbf Z^{l}\\mathbf W^{l+1})\\cdot \\mathbf W^{l+1}\\ (cheat) \\end{aligned} \\end{equation} $$ åœ¨ä¸Šé¢çš„æœ€åä¸€è¡Œï¼Œæˆ‘ä»¬æŠŠçŸ©é˜µå½“æˆæ ‡é‡å¤„ç†ç›´æ¥æ±‚å¯¼ï¼Œç„¶åæ ¹æ®å‰é¢è¯´çš„ï¼Œæ¥ä¸‹æ¥è®©ç»´åº¦åŒ¹é…å°±å¯ä»¥ï¼Œå…ˆæ¥çœ‹ä¸Šé¢çš„æ¯ä¸ªéƒ¨åˆ†çš„ç»´åº¦ $$\\mathbf G^{l+1}\\in\\mathcal{R}^{m\\times n_{l+1}}$$ $$\\sigma_{l+1}â€™(\\mathbf Z^{l}\\mathbf W^{l+1})\\in\\mathcal{R}^{m\\times n_{l+1}}$$ $$ \\mathbf W^{l+1}\\in\\mathcal{R}^{n_l\\times n_{l+1}} $$ æˆ‘ä»¬æƒ³è¦å¾—åˆ°å¤§å°ä¸º $m\\times n_l$ çš„çŸ©é˜µï¼Œå› ä¸º $$\\mathbf G^l\\in\\mathcal{R}^{m\\times n_l}$$ æ‰€ä»¥å¯ä»¥è¿™ä¹ˆå‡‘ $$\\mathbf G^{l}=\\Big (\\mathbf G^{l+1}\\odot\\sigma_{l+1}â€™(\\mathbf Z^{l}\\mathbf W^{l+1})\\Big )(\\mathbf{W}^{l+1})^T=\\Big (\\mathbf G^{l+1}\\odot\\sigma_{l+1}â€™(\\mathbf Z^{l+1})\\Big )(\\mathbf{W}^{l+1})^T$$ ç°åœ¨å›åˆ°æˆ‘ä»¬æœ¬æ¥è¦åšçš„äº‹æƒ…â€”â€”æ±‚è§£å…³äº $\\mathbf W^l$ çš„æ¢¯åº¦ï¼š $$\\frac{\\partial J}{\\partial \\mathbf W^l}=\\mathbf G^{l}\\cdot\\frac{\\partial \\mathbf Z^l}{\\mathbf W^l}$$ è®©æˆ‘ä»¬æ¥å±•å¼€ä¸Šé¢çš„å…¬å¼ $$ \\begin{equation} \\begin{aligned} \\frac{\\partial J}{\\partial \\mathbf W^l}\u0026=\\mathbf G^{l}\\cdot\\frac{\\partial \\mathbf Z^l}{\\mathbf W^l} \\\\\\ \u0026= \\mathbf G^{l}\\cdot\\frac{\\partial \\mathbf \\sigma_{l}(\\mathbf Z^{l-1}\\mathbf W^l)}{\\partial \\mathbf Z^{l-1}\\mathbf W^l}\\cdot \\frac{\\partial \\mathbf Z^{l-1}\\mathbf W^l}{\\partial\\mathbf W^l} \\\\\\ \u0026= \\mathbf G^{l}\\cdot\\mathbf \\sigma_{l}â€™(\\mathbf Z^{l-1}\\mathbf W^l)\\cdot \\mathbf Z^{l-1}(cheat) \\end{aligned} \\end{equation} $$ æˆ‘ä»¬æƒ³è¦å¾—åˆ°å’Œ $\\mathbf W^l$ ä¸€æ ·å¤§å°çš„çŸ©é˜µï¼š$(n_{l-1}, n_{l})$ï¼Œå†æ¬¡æŠŠçŸ©é˜µå½“ä½œæ ‡é‡å¤„ç†è®©æœ€åçš„ç»´åº¦æ˜¯æ­£ç¡®çš„ï¼š $$ \\frac{\\partial J}{\\partial \\mathbf W^l}=(\\mathbf Z^{l-1})^T\\Big(\\mathbf G^{l}\\odot\\mathbf \\sigma_{l+1}â€™(\\mathbf Z^{l-1}\\mathbf W^l) \\Big )\\ =(\\mathbf Z^{l-1})^T\\Big(\\mathbf G^{l}\\odot\\mathbf \\sigma_{l+1}â€™(\\mathbf Z^l) \\Big )\\ $$ åˆ©ç”¨ $\\mathbf G^l$ å’Œ $\\mathbf G^{l+1}$ çš„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥ä» $\\mathbf G^{l+1}$ æ¨å¯¼å‡º $\\mathbf G^l$ï¼Œç„¶åä¹Ÿå¯ä»¥è¿›ä¸€æ­¥è®¡ç®— $\\mathbf W^l$ çš„æ¢¯åº¦ï¼Œä¹Ÿå°±æ˜¯ä»åå¾€å‰è®¡ç®—ï¼Œè¿™ä¹Ÿå°±æ˜¯åå‘ä¼ æ’­çš„å«ä¹‰ ğŸ¤”ï¸ æ³¨æ„ $\\mathbf G^l$ çš„è®¡ç®—å’Œ $\\frac{\\partial J}{\\partial \\mathbf W^l}$ ç”¨åˆ°äº† $\\mathbf Z^{l-1}, \\mathbf Z^{l}, \\mathbf Z^{l+1}$ï¼Œä¹Ÿå°±æ˜¯ä¸åŒå±‚çš„æ¿€æ´»å‡½æ•°çš„è¾“å‡ºï¼Œè¿™æ„å‘³ç€åœ¨åå‘ä¼ æ’­çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ç¼“å­˜å‰å‘ä¼ æ’­çš„å€¼ï¼Œç¼“å­˜æ„å‘³ç€éœ€è¦æ¶ˆè€—å†…å­˜ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºå•¥æ¨¡å‹è¶Šå¤§ï¼ŒGPU å°±éœ€è¦æ›´å¤šçš„æ˜¾å­˜ ","date":"2023-07-26","objectID":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/:2:1","series":null,"tags":["Deep-Learning","Machine-Learning"],"title":"æœºå™¨å­¦ä¹ æ±‚è§£æ¢¯åº¦çš„å°æŠ€å·§","uri":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/#åå‘ä¼ æ’­çŸ©é˜µå½¢å¼æ¨å¯¼"},{"categories":["ML-DL"],"content":" çº¿æ€§å›å½’çŸ©é˜µå½¢å¼æ¢¯åº¦æ¨å¯¼ä¹‹å‰åœ¨ çº¿æ€§å›å½’ é‡Œé¢æˆ‘ä»¬éœ€è¦æ±‚è§£ä¸‹é¢è¿™ä¸ªå…¬å¼ $$ \\begin{aligned} \\frac{\\partial}{\\partial \\theta}\\ J(w,b) \u0026= \\frac{\\partial}{\\partial \\theta}\\ \\frac{1}{2m}(\\mathbf X\\theta - \\vec{y})^T(\\mathbf X\\theta - \\vec{y}) \\\\\\ \\end{aligned} $$ åˆ©ç”¨ç»´åº¦åˆ†æçš„æŠ€å·§ï¼Œå¯ä»¥è¿™ä¹ˆæ¨å¯¼ $$ \\begin{equation} \\begin{aligned} \\frac{\\partial}{\\partial \\theta}\\ J(w,b) \u0026= \\frac{\\partial}{\\partial \\theta}\\ \\frac{1}{2m}(\\mathbf X\\theta - \\vec{y})^T(\\mathbf X\\theta - \\vec{y}) \\\\\\ \u0026= \\frac{1}{2m}\\frac{\\partial(\\ \\mathbf X\\theta - \\vec{y})^T(\\mathbf X\\theta - \\vec{y}) }{\\partial (\\mathbf X\\theta-\\vec y)}\\cdot \\frac{\\partial (\\mathbf X\\theta-\\vec y)}{\\partial \\theta}\\\\\\ \u0026= \\frac{1}{2m}\\cdot2(\\mathbf X\\theta-\\vec y)\\cdot\\mathbf X\\ (cheat) \\end{aligned} \\end{equation} $$ è€ƒè™‘ç»´åº¦ä¿¡æ¯ $$(\\mathbf X\\theta-\\vec y)\\in\\mathcal{R}^{m\\times 1}$$ $$\\mathbf X\\in\\mathcal{R}^{m\\times(n+1)}$$ æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„æ˜¯è·Ÿ $\\theta$ ä¸€æ ·ç»´åº¦å¤§å°çš„ï¼š $$\\theta\\in\\mathcal{R}^{(n+1)\\times 1}$$ å› æ­¤ç›´æ¥å‡‘å‡ºæ¥å°±å¥½ï¼š $$\\frac{1}{m}\\mathbf X^T(\\mathbf X\\theta-\\vec y)$$ ","date":"2023-07-26","objectID":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/:2:2","series":null,"tags":["Deep-Learning","Machine-Learning"],"title":"æœºå™¨å­¦ä¹ æ±‚è§£æ¢¯åº¦çš„å°æŠ€å·§","uri":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/#çº¿æ€§å›å½’çŸ©é˜µå½¢å¼æ¢¯åº¦æ¨å¯¼"},{"categories":["ML-DL"],"content":" æ€»ç»“å°½ç®¡è¿™æ˜¯ä¸€ä¸ªä¸ä¸¥æ ¼çš„æŠ€å·§ï¼Œåƒæ˜¯ä½œå¼Šä¸€æ ·ğŸ˜¨ï¼Œä½†æˆ‘å‘ç°è¿˜è›®å®ç”¨çš„âœŒï¸ï¼Œå­¦ä¼šè¿™ä¸ªæŠ€å·§ä¹‹åï¼Œæœºå™¨å­¦ä¹ é‡Œé¢çš„å…¬å¼æ¨å¯¼ä¼šè½»æ¾å¾ˆå¤šï¼Œå½“ç„¶åˆ«å¿˜äº†åˆ©ç”¨æ¢¯åº¦æ£€æŸ¥ç¡®ä¿å¼å­æ˜¯æ­£ç¡®çš„ :) ","date":"2023-07-26","objectID":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/:3:0","series":null,"tags":["Deep-Learning","Machine-Learning"],"title":"æœºå™¨å­¦ä¹ æ±‚è§£æ¢¯åº¦çš„å°æŠ€å·§","uri":"/zh-cn/a-trick-to-calculating-partial-derivatives-in-ml/#æ€»ç»“"},{"categories":["ML-DL","Internal"],"content":"ä»‹ç»äº† Pytorch çš„å¼ é‡çš„ strides æ ¼å¼åŸç†","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/"},{"categories":["ML-DL","Internal"],"content":" å¼•è¨€å°½ç®¡æˆ‘å·²ç»ä½¿ç”¨ Numpy å’Œ Pytorch å¥½é•¿ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æˆ‘ä¸€ç›´ä¸çŸ¥é“ä»–ä»¬æ˜¯å¦‚ä½•å®ç°åº•å±‚çš„å¼ é‡ï¼ˆtensorï¼‰ï¼Œè€Œä¸”è¿™ä¹ˆé«˜æ•ˆã€‚æœ€è¿‘åœ¨çœ‹ Deep Learning Systems è¿™é—¨è¯¾ï¼Œç»ˆäºæœ‰æœºä¼šå°è¯•è‡ªå·±å®ç°å¼ é‡ï¼Œå®ç°ä¸€éä¹‹åå¯¹å¼ é‡çš„ç†è§£æ›´æ·±åˆ»äº†ğŸ§ ä½œä¸º Pytorch çš„ä½¿ç”¨è€…æœ‰å¿…è¦ç†è§£åº•å±‚çš„å¼ é‡å­˜å‚¨åŸç†å—ï¼Ÿæˆ‘è§‰å¾—æ˜¯æœ‰å¿…è¦çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ç†è§£åº•å±‚åŸç†éƒ½èƒ½è®©ä½ æ›´å¥½ç†è§£ä¸Šå±‚çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ç†è§£å¼ é‡çš„å­˜å‚¨åŸç†ä¹‹åæœ‰åŠ©äºä½ ä¼šå›ç­”ä¸‹é¢è¿™å‡ ä¸ªé—®é¢˜ å¹¿æ’­æ“ä½œæ¶‰åŠåˆ°æ•°ç»„çš„æ‹·è´å—ï¼Ÿ Pytorch çš„ contiguous ä¸­æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:1:0","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#å¼•è¨€"},{"categories":["ML-DL","Internal"],"content":" æŒ‰è¡Œå­˜å‚¨ä¸æŒ‰åˆ—å­˜å‚¨è®©æˆ‘ä»¬ä»ç®€å•çš„äºŒç»´æ•°ç»„å‡ºå‘ï¼ŒäºŒç»´æ•°ç»„åœ¨å†…å­˜ä¸­å æ®è¿ç»­çš„ä½ç½®ï¼Œä½†æ˜¯è¦æŒ‰è¡Œå­˜å‚¨è¿˜æ˜¯æŒ‰åˆ—å­˜å‚¨è¿™ç‚¹å¯èƒ½ä¸ç›¸åŒ æ¯”å¦‚ç°åœ¨æœ‰ä¸‹é¢è¿™ä¸ª $2\\times 3$ çš„äºŒç»´æ•°ç»„ A python [[0.2949, 0.9608, 0.0965], [0.5463, 0.4176, 0.8146]] å¦‚æœæ˜¯æŒ‰è¡Œå­˜å‚¨ï¼Œé‚£ä¹ˆå†…å­˜ä¸­çš„æ’åˆ—ï¼ˆè¿™é‡Œè®°ä¸º A_in_rowï¼‰æ˜¯ï¼š python [0.2949, 0.9608, 0.0965, 0.5463, 0.4176, 0.8146] æŒ‰è¡Œå­˜å‚¨çš„æ—¶å€™ï¼Œè¦è®¿é—® (i, j) ä½ç½®çš„å€¼çš„å…¬å¼æ˜¯ python A[i][j] = A_in_row[i * A.shape[1] + j] å¦‚æœæ˜¯æŒ‰åˆ—å­˜å‚¨ï¼Œé‚£ä¹ˆå†…å­˜ä¸­çš„æ’åˆ—ï¼ˆè¿™é‡Œè®°ä¸º A_in_colï¼‰æ˜¯ï¼š python [0.2949, 0.5463, 0.9608, 0.4176, 0.0965, 0.8146] æŒ‰åˆ—å­˜å‚¨çš„æ—¶å€™ï¼Œè¦è®¿é—® (i, j) ä½ç½®çš„å€¼çš„å…¬å¼æ˜¯ python A[i][j] = A_in_col[j * A.shape[0] + i] ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:2:0","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#æŒ‰è¡Œå­˜å‚¨ä¸æŒ‰åˆ—å­˜å‚¨"},{"categories":["ML-DL","Internal"],"content":" Strides æ ¼å¼å¼ é‡åœ¨åº•å±‚å¯ä»¥æ˜¯æŒ‰è¡Œå­˜å‚¨ä¹Ÿå¯ä»¥æ˜¯æŒ‰åˆ—å­˜å‚¨ã€‚Numpy å’Œ Pytorch éƒ½é‡‡ç”¨äº†æŒ‰è¡Œå­˜å‚¨çš„æ–¹å¼ï¼Œä»»ä½•ç»´åº¦çš„å¼ é‡åœ¨åº•å±‚å­˜å‚¨éƒ½å æ®ç€å†…å­˜ä¸­è¿ç»­çš„ç©ºé—´ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæˆ‘ä»¬å¦‚ä½•è®¿é—®åˆ°æˆ‘ä»¬æƒ³è¦çš„ä½ç½®çš„æ•°æ®ï¼Ÿ ç­”æ¡ˆå°±æ˜¯ strides æ ¼å¼ã€‚strides æ ¼å¼å¯ä»¥çœ‹æˆæ˜¯å‰é¢ä¸¤ç§ç´¢å¼•æ ¼å¼çš„æ³›åŒ–ç‰ˆæœ¬ï¼Œå‡è®¾ç°åœ¨æœ‰ä¸€ä¸ª $N$ ç»´çš„å¼ é‡ Aï¼ˆå‡è®¾ç»´åº¦ä» 0 å¼€å§‹ï¼‰ï¼Œå®ƒçš„åº•å±‚å­˜å‚¨ä¸º A_internalï¼Œæˆ‘ä»¬æƒ³è¦è®¿é—® A[i0][i1][i2]...ï¼Œé‚£ä¹ˆç´¢å¼•çš„æ–¹å¼å¦‚ä¸‹ï¼š python A[i0][i1][i2]... = A_internal[ stride_offset + i0 * A.strides[0] + i1 * A.strides[1] + i2 * A.strides[2] + ... + in-1 * A.strides[n-1] ] Strides æ ¼å¼æœ‰ä¸¤ä¸ªç»„æˆéƒ¨åˆ† offset - è¡¨ç¤ºå¼ é‡ç›¸å¯¹äºåº•å±‚å­˜å‚¨ A_internal çš„åç§»é‡ strides æ•°ç»„ï¼Œé•¿åº¦å’Œå¼ é‡çš„ç»´åº¦ä¸€æ ·ï¼Œstrides[i] è¡¨ç¤ºå¼ é‡åœ¨ç¬¬ $i$ ä¸ªç»´åº¦ä¸Šç§»åŠ¨â€œä¸€ä¸ªå•ä½â€éœ€è¦åœ¨å†…å­˜ä¸Šè·³è¿‡å¤šå°‘ä¸ªå…ƒç´  ä¸¾ä¾‹æ¥è¯´ï¼Œå‰é¢æåˆ°çš„äºŒç»´æ•°ç»„çš„ä¾‹å­ï¼Œå¦‚æœç”¨ strides çš„æ ¼å¼æ¥ç†è§£çš„è¯ï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™æ · python A[i][j] = A_in_row[ 0 + i * A.shape[1] + j * 1 ] å³å¯¹äºä¸€ä¸ªå¤§å°ä¸º (A.shape[0], A.shape[1]) çš„äºŒç»´æ•°ç»„ï¼Œå®ƒçš„ offset æ˜¯ 0ï¼Œstrides = [A.shape[1], 1](row-major)ã€‚ğŸ¤”ï¸ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡åœ¨ç¬¬ä¸€ä¸ªç»´åº¦ä¸Šè¦è·³è·ƒâ€œä¸€ä¸ªå•ä½â€ï¼Œéœ€è¦è·³è¿‡åº•å±‚çš„ A.shape[1] ä¸ªå…ƒç´ ï¼ŒA.shape[1] ä¹Ÿå°±æ˜¯è¡Œçš„é•¿åº¦ æˆ‘åšäº†ä¸‹é¢è¿™å¼ å›¾ç‰‡ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£ :) ğŸ§ é‚£ä¹ˆå¦‚ä½•å¾—åˆ° $N$ ç»´å¼ é‡çš„ strides æ•°ç»„ï¼Ÿå‡è®¾è¦æ±‚è§£çš„æ˜¯ strides[k] å³ç¬¬ $k$ ä¸ªç»´åº¦çš„ strideï¼Œæˆ‘ä»¬çŸ¥é“å®ƒçš„è¯­ä¹‰æ˜¯ã€Œåœ¨ç¬¬ $k$ ç»´ä¸Šç§»åŠ¨â€œä¸€ä¸ªå•ä½â€éœ€è¦åœ¨å†…å­˜ä¸Šè·³è¿‡å¤šå°‘ä¸ªå…ƒç´ ã€ï¼Œå¦‚æœè¿™ä¸ªå¼ é‡çš„åº•å±‚å­˜å‚¨åœ¨å†…å­˜ä¸Šæ˜¯è¿ç»­å­˜å‚¨ï¼ˆç´§å‡‘æ ¼å¼ï¼‰ï¼Œé‚£å°±æ˜¯ ã€Œ$k+1,k+2,â€¦,N-1$ ç»´åº¦çš„å¤§å°çš„ä¹˜ç§¯ã€ï¼Œå¦‚æœ $k=N-1$ï¼Œé‚£ä¹ˆ strides[N - 1] = 1 æ•°å­¦å…¬å¼å°±æ˜¯ä¸‹é¢è¿™æ ·ï¼Œ $$strides[k]=\\prod_{i=k+1}^{N-1}shape[i]$$ ğŸ’¡ å†æ¬¡å¼ºè°ƒï¼Œä¸Šé¢çš„å…¬å¼åªæœ‰åœ¨å¼ é‡çš„åº•å±‚å­˜å‚¨åœ¨å†…å­˜ä¸Šæ˜¯è¿ç»­å­˜å‚¨ï¼ˆç´§å‡‘æ ¼å¼ï¼‰çš„æ—¶å€™æˆç«‹ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:3:0","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#strides-æ ¼å¼"},{"categories":["ML-DL","Internal"],"content":" Why stridesï¼ŸçŸ¥é“äº† strides çš„å­˜å‚¨æ ¼å¼ä¹‹åï¼Œæˆ‘ä»¬è¿˜è¦ç†è§£ä¸ºä»€ä¹ˆè¿™ä¹ˆè®¾è®¡ï¼Œstrides ç©¶ç«Ÿç»™æˆ‘ä»¬å¸¦æ¥äº†ä»€ä¹ˆï¼Ÿæœ€å¤§çš„å¥½å¤„æ˜¯ï¼šå¾ˆå¤šå…³äºå¼ é‡çš„æ“ä½œéƒ½å¯ä»¥æ˜¯é›¶æ‹·è´ï¼ˆZero-copyï¼‰çš„ã€‚é€šè¿‡ strides æ ¼å¼ï¼Œã€Œåº•å±‚å­˜å‚¨ã€å’Œã€Œè§†å›¾ã€ä¹‹é—´æ˜¯åˆ†ç¦»å¼€çš„ï¼Œä¸‹é¢æˆ‘æ¥è®²è§£ä¸€ä¸‹å‡ ä¸ªå¸¸è§çš„æ“ä½œ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:4:0","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#why-strides"},{"categories":["ML-DL","Internal"],"content":" print_internal å‡½æ•°åœ¨å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªå‡½æ•°è·å– Pytorch çš„å¼ é‡åº•å±‚å­˜å‚¨ é¦–å…ˆæ˜¯ Pytorch æä¾›çš„ data_ptr() è¿™ä¸ªæ–¹æ³•ï¼Œä»–ä¼šè¿”å›å¼ é‡åº•å±‚å­˜å‚¨è¡¨ç¤ºçš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å†…å­˜åœ°å€ ç„¶åé€šè¿‡ Pytorch æä¾›çš„ storage().nbytes() å°±å¯ä»¥çŸ¥é“å¼ é‡çš„åº•å±‚å­˜å‚¨åœ¨å†…å­˜ä¸Šå æ®äº†å¤šå¤§çš„ç©ºé—´1ï¼Œè€Œå¼ é‡çš„ dtype å±æ€§åˆ™å‘Šè¯‰äº†æˆ‘ä»¬æ¯ä¸ªå…ƒç´ å æ®å¤šå¤§ï¼Œæ¯”å¦‚ torch.float32 å°±æ˜¯ 4 ä¸ªå­—èŠ‚ æœ€åé€šè¿‡ ctypes.string_at(address, size=-1) å‡½æ•°å°±å¯ä»¥è¯»å–è¿™ä¸ªå¼ é‡ä¸º C çš„å­—ç¬¦ä¸²ï¼ˆbufferï¼‰ï¼Œè€Œ torch.frombuffer å¯ä»¥ä»ä¸€ä¸ª buffer åˆ›å»ºå‡º tensor é€šè¿‡ä¸Šé¢å‡ ä¸ªæ­¥éª¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿˜åŸå‡º Pytorch åº•å±‚çš„æ•°ç»„è¡¨ç¤ºï¼Œä¸‹é¢å‘½åä¸º print_internal å‡½æ•° python def print_internal(t: torch.Tensor): print( torch.frombuffer( ctypes.string_at(t.data_ptr(), t.storage().nbytes()), dtype=t.dtype ) ) ç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»´åº¦ä¸º (1, 2, 3, 4) çš„å¼ é‡ t å¹¶è§‚å¯Ÿå®ƒçš„åº•å±‚è¡¨ç¤ºï¼Œåé¢çš„æ“ä½œè®²è§£ä¼šåŸºäºè¿™ä¸ªå¼ é‡ t python torch.arange(0, 24).reshape(1, 2, 3, 4) print(t) # tensor([[[[ 0, 1, 2, 3], # [ 4, 5, 6, 7], # [ 8, 9, 10, 11]], # [[12, 13, 14, 15], # [16, 17, 18, 19], # [20, 21, 22, 23]]]]) print(t.stride()) # (24, 12, 4, 1) print_internal(t) # tensor([0, 1, 2, 3, # 4, 5, 6, 7, # 8, 9, 10, 11, # 12, 13, 14, 15, # 16, 17, 18, 19, # 20, 21, 22, 23]) æŒ‰ç…§æˆ‘ä»¬å‰é¢è¯´çš„ä»å¼ é‡çš„ç»´åº¦æ¨å¯¼ stride çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸éš¾çŸ¥é“è¿™ä¸ª tensor çš„ stride åº”è¯¥æ˜¯ (2 * 3 * 4, 3 * 4, 4, 1) ä¹Ÿå°±æ˜¯ (24, 12, 4, 1) åœ¨ Pytorch é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ tensor çš„ stride() æ–¹æ³•è·å¾— strideï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç¡®å®è·Ÿæˆ‘ä»¬æ‰‹åŠ¨è®¡ç®—å‡ºæ¥çš„ä¸€æ ·ğŸ¤”ï¸ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:4:1","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#print_internal-å‡½æ•°"},{"categories":["ML-DL","Internal"],"content":" permute æ“ä½œå‡è®¾æˆ‘ä»¬ç”¨ permute é‡æ–°æ’åˆ—äº†å„ä¸ªç»´åº¦ï¼Œé‚£ä¹ˆ strides å¦‚ä½•å˜åŒ–ï¼Ÿ python print(t.stride()) # (24, 12, 4, 1) print(t.permute((1, 2, 3, 0)).is_contiguous()) # True print(t.permute((1, 2, 3, 0)).stride()) # (12, 4, 1, 24) print(t.permute((0, 2, 3, 1)).is_contiguous()) # False print(t.permute((0, 2, 3, 1)).stride()) # (24, 4, 1, 12) print(t.permute((1, 0, 3, 2)).is_contiguous()) # False print(t.permute((1, 0, 3, 2)).stride()) # (12, 24, 1, 4) print_internal(t.permute((1, 2, 3, 0))) # tensor([0, 1, 2, 3, # 4, 5, 6, 7, # 8, 9, 10, 11, # 12, 13, 14, 15, # 16, 17, 18, 19, # 20, 21, 22, 23]) ä»ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œpermute æ“ä½œä¸ä¼šå½±å“ offsetï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œpermute æ“ä½œä¼šå¯¼è‡´åº•å±‚å­˜å‚¨ä¸ç´§å‡‘ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ permute ä¹‹åçš„æ–°çš„ç»´åº¦ new_shape ç„¶åæ ¹æ®å®šä¹‰è®¡ç®—å‡º stridesï¼Œä½†æ˜¯æ›´å¿«çš„åŠæ³•æ˜¯ï¼Œç›´æ¥åœ¨ strides ä¸Šä¹Ÿåšä¸€æ ·çš„ permute æ“ä½œå³å¯ã€‚print_internal å‡½æ•°çš„è¾“å‡ºè¯æ˜äº† permute æ“ä½œæ˜¯ Lazy çš„2 ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:4:2","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#permute-æ“ä½œ"},{"categories":["ML-DL","Internal"],"content":" broadcast_to æ“ä½œå¹¿æ’­æ“ä½œæ˜¯æ¯”è¾ƒæœ‰æ„æ€çš„ï¼Œåœ¨ä¸äº†è§£å¼ é‡çš„å­˜å‚¨åŸç†ä¹‹å‰ï¼Œä½ å¯èƒ½ä»¥ä¸ºå¹¿æ’­æ“ä½œå°±æ˜¯åœ¨å¯¹åº”çš„ç»´åº¦ä¸Šæ‹·è´å¤šä»½ï¼Œä½†å…¶å®ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å‘ç”Ÿæ‹·è´ï¼Œåªæ˜¯ä¿®æ”¹äº† strides æ•°ç»„çš„å€¼è€Œå·²ã€‚æ›´ç¡®åˆ‡æ¥è¯´ï¼ŒPytorch ä¼šæŠŠè¢«å¹¿æ’­çš„ç»´åº¦ï¼ˆæœ¬æ¥çš„ç»´åº¦å¤§å°æ˜¯ 1ï¼‰çš„ stride è®¾ç½®ä¸º 03 æ¯”å¦‚ç°åœ¨æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªç»´åº¦ä¸Šåšå¹¿æ’­ï¼Œè§‚å¯Ÿå¹¿æ’­ä¹‹åçš„ç»´åº¦å¤§å°ï¼Œä»¥åŠ strides æ•°ç»„çš„å˜åŒ–æƒ…å†µ python print(t.broadcast_to((2, 2, 3, 4)).is_contiguous()) # False print(t.broadcast_to((2, 2, 3, 4)).shape) # torch.Size([2, 2, 3, 4]) print(t.stride()) # (24, 12, 4, 1) print(t.broadcast_to((2, 2, 3, 4)).stride()) # (0, 12, 4, 1) print_internal(t.broadcast_to((2, 2, 3, 4))) # tensor([0, 1, 2, 3, # 4, 5, 6, 7, # 8, 9, 10, 11, # 12, 13, 14, 15, # 16, 17, 18, 19, # 20, 21, 22, 23]) ä½ ï¼ˆå¯èƒ½ï¼‰ä¼šæƒŠè®¶åœ°å‘ç°ï¼ŒPytorch ç¡®å®æ²¡æœ‰åœ¨å¹¿æ’­çš„æ—¶å€™æ‹·è´å¯¹åº”ç»´åº¦çš„å¼ é‡ï¼Œä»…ä»…åªæ˜¯ä¿®æ”¹ strides æ•°ç»„äº†è€Œå·²ã€‚å›å¿† strides[i] çš„å«ä¹‰ï¼Œè¢«å¹¿æ’­çš„ç»´åº¦çš„ stride è®¾ç½®ä¸º 0 æ„å‘³ç€è¿™ä¸ªç»´åº¦ä¸Šç§»åŠ¨â€œä¸€ä¸ªå•ä½â€œå¹¶ä¸éœ€è¦åœ¨å†…å­˜ä¸Šè·³è¿‡å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åœ¨è¢«å¹¿æ’­çš„ç»´åº¦ä¸Šæˆ‘ä»¬ä¸€ç›´åœ¨è®¿é—®çš„æ˜¯åŒä¸€å—åŒºåŸŸ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:4:3","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#broadcast_to-æ“ä½œ"},{"categories":["ML-DL","Internal"],"content":" reshape æ“ä½œå’Œ contiguous æ“ä½œç´¢å¼•æ“ä½œå¯èƒ½ä¼šä¿®æ”¹ offsetï¼Œå› ä¸ºç´¢å¼•ä¹‹åå½¢æˆçš„å¼ é‡ä¸ä¸€å®šä»æœ¬æ¥åº•å±‚å­˜å‚¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼ŒåŒæ—¶ç´¢å¼•æ“ä½œå¯èƒ½ä¼šç´¢å¼•åˆ°åº•å±‚å­˜å‚¨ä¸­çš„ã€Œéè¿ç»­ã€éƒ¨åˆ†ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ç´¢å¼•æ“ä½œæ¥ç ”ç©¶ reshape æ“ä½œå’Œ contiguous æ“ä½œæ˜¯å¦‚ä½•èµ·ä½œç”¨çš„ ç°åœ¨å‡è®¾æˆ‘ä»¬æƒ³è¦ä» t æ‹¿åˆ°ä¸‹é¢è¿™ä¸ªå¼ é‡ python [[[2, 6, 10], [14, 18, 22]]] å¯¹åº”çš„ç´¢å¼•æ“ä½œå¦‚ä¸‹ python print(t[:, :, :, 2]) # tensor([[[ 2, 6, 10], # [14, 18, 22]]]) æ³¨æ„åˆ°è¿™ä¸ªæ“ä½œåŒæ—¶ç¬¦åˆæˆ‘å‰é¢è¯´çš„ï¼š offset æ”¹å˜äº†ï¼Œå› ä¸ºç°åœ¨æ˜¯ä» 2 è€Œä¸æ˜¯ä» 0 å¼€å§‹äº† ç´¢å¼•åˆ°çš„å…ƒç´ åœ¨æœ¬æ¥çš„å†…å­˜ä¸Šä¸æ˜¯è¿ç»­çš„ ä¸‹é¢çš„ä»£ç éªŒè¯äº†æˆ‘ä»¬çš„çŒœæƒ³ python print(t.storage_offset()) # 0 print(t[:, :, :, 2].storage_offset()) # 2 print(t[:, :, :, 2].is_contiguous()) # False ç°åœ¨æ¥è§‚å¯Ÿåº•å±‚å­˜å‚¨ python print_internal(t[:, :, :, 2]) # tensor([ 2, 3, # 4, 5, 6, 7, # 8, 9, 10, 11, # 12, 13, 14, 15, # 16, 17, 18, 19, # 20, 21, 22, 23 # 1152921504606846976, -8070441752123218147]]) # ignore the last row because t.data_ptr() has changed but t.storage().nbytes() # kept the same. # As a result, we read 2 invalid elements and get 2 meaningless values Pytorch çš„å¼ é‡æœ‰ä¸ªæ–¹æ³•å«åš storage_offset å¯ä»¥æ‹¿åˆ°å¼ é‡ç›¸å¯¹äºåº•å±‚å­˜å‚¨çš„åç§»é‡ï¼Œå¯ä»¥çœ‹åˆ°ç°åœ¨ä»åº•å±‚å­˜å‚¨çš„ç¬¬äºŒä¸ªä½ç½®å¼€å§‹äº†ï¼Œç¬¬äºŒä¸ªä½ç½®æ°å¥½æ˜¯ t[:, :, :, 2] çš„ç¬¬ä¸€ä¸ªå…ƒç´  2ã€‚è€Œæ‰“å°å‡ºåº•å±‚å­˜å‚¨ä½ ä¼šå‘ç°ï¼Œåº•å±‚å­˜å‚¨è¿˜æ˜¯æœ¬æ¥çš„æ•°ç»„ æ³¨æ„è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼Œå› ä¸ºåº•å±‚å­˜å‚¨æ²¡æœ‰å˜åŒ–ï¼Œt.storage().nbytes() è·ŸåŸæ¥ä¸€æ ·ã€‚ä½†æ˜¯ data_ptr() ä¼šç»™æˆ‘ä»¬ç¬¬äºŒä¸ªå…ƒç´ çš„åœ°å€ï¼Œå¯¼è‡´æœ€å print_internal æ‰“å°åº•å±‚å­˜å‚¨çš„æ—¶å€™ä¼šå¤šæ‰“å° 2 ä¸ªæ— æ•ˆçš„ä½ç½®ï¼ˆä¹Ÿå°±æ˜¯ä¸Šé¢çš„æœ€åä¸€è¡Œï¼‰ï¼Œæ‰€ä»¥å¾—åˆ°äº† 2 ä¸ªæ²¡æœ‰æ„ä¹‰çš„æ•°å­— ğŸ¤”ï¸ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°è¯•æ‰§è¡Œ reshape(3, 2) å¹¶è§‚å¯Ÿåº•å±‚å­˜å‚¨æƒ…å†µ python print_internal(t[:, :, :, 2].reshape(3, 2)) # tensor([ 2, 3, # 4, 5, 6, 7, # 8, 9, 10, 11, # 12, 13, 14, 15, # 16, 17, 18, 19, # 20, 21, 22, 23 # 1152921504606846976, -8070441752123218147]]) reshape æ“ä½œä¹‹åå‘ç°åº•å±‚å­˜å‚¨è¿˜æ˜¯æ²¡æœ‰å˜åŒ–ï¼Œè¿™æ°å¥½å¯¹åº”æ–‡æ¡£é‡Œé¢æ‰€è¯´çš„ï¼šå¯èƒ½çš„æƒ…å†µä¸‹ï¼Œreshape ä¹‹åï¼Œè¿”å›çš„å¼ é‡å°½å¯èƒ½æ˜¯åŒä¸€ä»½å­˜å‚¨4 ä½†å¦‚æœæˆ‘ä»¬æƒ³è¦ reshape ä¹‹åçš„å¼ é‡åœ¨åº•å±‚çš„å­˜å‚¨æ˜¯ç´§å‡‘çš„å‘¢ï¼Ÿæ­¤æ—¶å°±å¯ä»¥ç´§è·Ÿç€è°ƒç”¨ contiguous æ–¹æ³• python print_internal(t[:, :, :, 2].reshape(3, 2).contiguous()) # tensor([ 2, 6, 10, 14, 18, 22]) ğŸ˜º å¯ä»¥å‘ç°ï¼Œcontiguous ä¹‹åç¡®å®åº•å±‚å­˜å‚¨å°±ç´§å‡‘äº†ï¼Œæ­¤æ—¶çš„ strides æ•°ç»„åº”è¯¥ç¬¦åˆæˆ‘ä»¬å‰é¢æåˆ°çš„å…¬å¼ï¼š python # before contiguous print(t[:, :, :, 2].reshape(3, 2).stride()) # (8, 4) # after contiguous print(t[:, :, :, 2].reshape(3, 2).contiguous().shape) # (3, 2) print(t[:, :, :, 2].reshape(3, 2).contiguous().stride()) # (2, 1) ğŸ§ ä¸€ä¸ªæ¯”è¾ƒæœ‰æŒ‘æˆ˜æ€§çš„é—®é¢˜ï¼Œç´¢å¼•æ“ä½œä¼šå¦‚ä½•å½±å“ stridesï¼Ÿ è®©æˆ‘ä»¬ä»¥åˆšæ‰çš„ç´¢å¼•æ“ä½œä¸ºä¾‹å­ï¼Œé¦–å…ˆï¼Œç´¢å¼•ä¹‹åå¾—åˆ°æ–°çš„ç»´åº¦åº”è¯¥æ˜¯ (1, 2, 3)ï¼Œæ˜¾ç„¶ [:, :, :, 2] è¿™æ ·çš„ç´¢å¼•å¯¼è‡´åº•å±‚å­˜å‚¨åœ¨å†…å­˜ä¸Šä¸ç´§å‡‘ï¼Œå› æ­¤è§„å¾‹ä¸é€‚ç”¨ï¼Œé‚£ä¹ˆåªèƒ½ä»å®šä¹‰ä¸Šå‡ºå‘ï¼Œå‡è®¾ t[:, :, :, 2] çš„ strides æ˜¯ [x, y, z] å…ˆè§‚å¯Ÿ t[:, :, :, 2] åŒ…å«å“ªä¸€äº›å…ƒç´  python print(t[:, :, :, 2]) # tensor([[[ 2, 6, 10], # [14, 18, 22]]]) å› ä¸ºæˆ‘å®šä¹‰çš„å¼ é‡æ˜¯ä» 0 å¼€å§‹çš„æ•´æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥è§‚å¯Ÿå€¼çš„å˜åŒ–æ¥è®¡ç®— strides çš„å˜åŒ–ï¼ˆè¿™æ˜¯ä¸€ä¸ªå°æŠ€å·§ï¼‰ å¯¹äº zï¼Œä» 2 -\u003e 6 -\u003e 10ï¼Œæ¯æ¬¡è·³è¿‡äº† 4 ä¸ªä½ç½®ï¼Œæ‰€ä»¥ z = 4 å¯¹äº yï¼Œ2 -\u003e 14ï¼Œ6 -\u003e 18ï¼Œ10 -\u003e 22ï¼Œæ¯æ¬¡éƒ½è·³è¿‡äº† 12 ä¸ªä½ç½®ï¼Œå› æ­¤ y = 12 å¯¹äº xï¼Œå› ä¸ºåº•å±‚å­˜å‚¨å¹¶æ²¡æœ‰æ”¹å˜ï¼ŒåŸæœ¬çš„å¼ é‡ t çš„ stride[0] = 24ï¼Œå¦‚æœå¼ é‡ t çš„ç¬¬ä¸€ä¸ªç»´åº¦ä¸æ˜¯ 1 è€Œæ˜¯ä¸€ä¸ªæ›´å¤§çš„å€¼ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¯æ¬¡ä¼šè·³è¿‡ stride[0] ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥ x = 24 æ‰€ä»¥ t[:, :, :, 2] çš„ strides åº”è¯¥æ˜¯ (24, 12, 4) è®©æˆ‘ä»¬æ¥è°ƒç”¨ä¸€ä¸‹ API çœ‹è¿™æ˜¯å¦æ­£ç¡® python print(t.stride()) # (24, 12, 4, 1) print(t[:, :, :, 2].stride()) # (24, 12, 4) # what if the first dimension is not 1 but 2? another_t = torch.arange(0, 48).reshape(2, 2, 3, 4) print(another_t[:, :, :, 2]) # tensor([[[ 2, 6, 10], # [14, 18, 22]], # [[26, 30, 34], # [38, 42, 46]]]) # you can see that 2 -\u003e 26, 6 -\u003e 30, 10 -\u003e 35 # , so the stride[0] = 24 is true ä¸Šé¢çš„ä»£ç éªŒè¯äº†æˆ‘ä»¬çš„çŒœæƒ³ ä½†æ˜¯ï¼Œç´¢å¼•æ“ä½œå¯èƒ½è¿œè¿œæ¯”æˆ‘ä»¬è¿™é‡Œè®²è§£çš„ [:, :, :, 2] å¤æ‚å¾—å¤šï¼Œæ¯”å¦‚ [2, 1:3, 1:6:3] è¿™ç§ï¼Œæ­¤æ—¶ strides å’Œ offset åˆè¯¥å¦‚ä½•å˜åŒ–ï¼Ÿè¿™é‡Œä¸å±•å¼€ï¼Œä½†æ˜¯å¯ä»¥æ”¾ä¸€ä¸ªæç¤ºï¼šæŠŠæ¯ä¸ªæ ¼å¼éƒ½å˜æˆ Python çš„ Slice å¯¹è±¡ï¼Œç„¶åä» strides[i] çš„å®šä¹‰å‡ºå‘è¿›è¡Œæ¨å¯¼ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:4:4","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#reshape-æ“ä½œå’Œ-contiguous-æ“ä½œ"},{"categories":["ML-DL","Internal"],"content":" æ€»ç»“å¯ä»¥çœ‹åˆ°ï¼ŒPytorch çš„å¼ é‡çš„ä¸å°‘æ“ä½œéƒ½æ˜¯é€šè¿‡æ”¹å˜ strides çš„ offset æˆ–ï¼ˆå’Œï¼‰strides æ•°ç»„å®ç°çš„ï¼Œè¿™è®©å¾ˆå¤šæ“ä½œç»´æŒäº†é›¶æ‹·è´å¼€é”€ï¼Œå› æ­¤æ•ˆç‡ä¼šå¾ˆé«˜ï¼Œè€Œä¸”ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥æŠŠä¸å°‘å¼ é‡æ“ä½œå®ç°ä¸º Lazy çš„ã€‚ç†è§£ strides æ ¼å¼æœ‰åŠ©äºæ„å»ºå¼ é‡çš„ mental modelï¼Œå®ƒèƒ½å¤Ÿè®©ä½ æ›´å¥½ç†è§£å¼ é‡çš„æ“ä½œçš„ä»£ç ã€‚é¡ºä¾¿æ¨èä¸€ä¸‹è¿™ä¸ªè§†é¢‘ï¼Œåœ¨è¿™ä¸ªè§†é¢‘ä¸­ï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä½•æ“çºµ strides æ¥å®ç°é«˜æ•ˆçš„å·ç§¯æ“ä½œ ç°åœ¨æˆ‘ä»¬å¯ä»¥å›ç­”å‰é¢æˆ‘æŠ›å‡ºçš„é—®é¢˜äº†ï¼š å¹¿æ’­æ“ä½œæ¶‰åŠåˆ°æ•°ç»„çš„æ‹·è´å—ï¼Ÿ å¹¶æ²¡æœ‰æ‹·è´ï¼Œåªæ˜¯ä¿®æ”¹äº† strides æ•°ç»„ Pytorch çš„ contiguous ä¸­æ˜¯å¹²ä»€ä¹ˆçš„ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦è¿™ä¸ªå‡½æ•°ï¼Ÿ å› ä¸º contiguous ä¹‹åï¼Œå¼ é‡çš„åº•å±‚å­˜å‚¨æ˜¯å†…å­˜ç´§å‡‘çš„ï¼Œè™½ç„¶æœ‰æ‹·è´çš„å¼€é”€ï¼Œä½†æ˜¯åç»­æ‰§è¡Œä¸€äº›å¼ é‡ç›¸å…³çš„æ“ä½œçš„æ—¶å€™å†…å­˜å±€éƒ¨æ€§ä¼šæ›´å¥½ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:5:0","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#æ€»ç»“"},{"categories":["ML-DL","Internal"],"content":" å‚è€ƒ Tensor type memory usage - Memory Format - PyTorch ForumsÂ â†©ï¸ torch.permute - PyTorch 2.3 documentationÂ â†©ï¸ torch.expand - PyTorch 2.0 documentationÂ â†©ï¸ torch.reshape â€” PyTorch 2.0 documentationÂ â†©ï¸ ","date":"2023-07-14","objectID":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/:6:0","series":null,"tags":["Internal","Pytorch","Deep-Learning"],"title":"Pytorch å¼ é‡çš„ strides æ ¼å¼æ˜¯ä»€ä¹ˆ","uri":"/zh-cn/how-to-reprensent-a-tensor-or-ndarray/#å‚è€ƒ"},{"categories":["Data-Structure"],"content":"ä»‹ç»äº†å¦‚ä½•åœ¨ 2-3-4 æ ‘ä¸Šæ€è€ƒçº¢é»‘æ ‘çš„æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œå‡è½»è®°å¿†è´Ÿæ‹…","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/"},{"categories":["Data-Structure"],"content":" å¼•è¨€å¦‚æœä½ ç‚¹è¿›äº†è¿™ä¸€ç¯‡æ–‡ç« ï¼Œç›¸ä¿¡ä½ ä¹Ÿè·Ÿæˆ‘ä¸€æ ·ï¼šçº¢é»‘æ ‘å­¦ä¸€æ¬¡å¿˜ä¸€æ¬¡ï¼Œåˆè¦åšæ ‘çš„æ—‹è½¬ï¼Œåˆè¦ç»™èŠ‚ç‚¹é‡æ–°ä¸Šè‰²ï¼Œå¯¼è‡´æ¯æ¬¡éƒ½æ˜¯å­¦å®Œäº†å°±å¿˜è®°ã€‚æˆ‘ä¹Ÿæ›¾ç»ä»”ç»†é˜…è¯»è¿‡ CLRS å†™çš„ã€Šç®—æ³•å¯¼è®ºã€‹ï¼Œä½†æ˜¯ä¸Šé¢çš„åˆ†ç±»è®¨è®ºåªæ˜¯è®©æˆ‘æ›´åŠ å¤´ç–¼ å½“ç„¶ï¼Œè®°ä½ä¸€é¡¹ä¸œè¥¿çš„æœ€ä½³æ–¹å¼æ°¸è¿œéƒ½æ˜¯ç†è§£å®ƒï¼Œè€Œæœ€è¿‘çœ‹åˆ°æ–¯å¦ç¦çš„ CS166 é«˜çº§æ•°æ®ç»“æ„è¯¾ç¨‹çš„è¯¾ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä¼¼ä¹ç†è§£äº†çº¢é»‘æ ‘â€”â€”â€”â€”çº¢é»‘æ ‘å’Œ 2-3-4 æ ‘æ˜¯ç­‰åŒï¼ˆisometryï¼‰çš„æ•°æ®ç»“æ„ï¼Œä»–ä»¬åªæ˜¯ç”¨äº†ä¸åŒçš„æ–¹å¼è¡¨ç¤º 2-3-4 æ ‘1ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡ 2-3-4 æ ‘ä¸Šçš„èŠ‚ç‚¹å˜åŒ–ï¼Œè¿›è€Œæ¨å¯¼å‡ºçº¢é»‘æ ‘ä¸Šçš„å½¢çŠ¶å’Œé¢œè‰²çš„å˜åŒ–ï¼Œè€Œ 2-3-4 æ ‘çš„èŠ‚ç‚¹å˜åŒ–ï¼Œæ˜¯ç®€å•å¾ˆå¤šçš„ åœ¨å¼€å§‹ä¹‹å‰ï¼Œæˆ‘å‡å®šä½ å¯¹ä»¥ä¸‹çš„å†…å®¹å¾ˆç†Ÿæ‚‰ ä½ çŸ¥é“ 2-3-4 æ ‘æˆ–è€…è¯´ B æ ‘æ˜¯ä»€ä¹ˆï¼Œ2-3-4 æ ‘å…¶å®å°±æ˜¯ B æ ‘çš„ä¸€ç§ã€‚ä½ éœ€è¦çŸ¥é“åœ¨ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤å’Œæ’å…¥æ“ä½œå¦‚ä½•è¿›è¡Œï¼Œä»€ä¹ˆæ—¶å€™ä¼šå‘ç”ŸèŠ‚ç‚¹çš„ overflowã€underflowï¼Œä»¥åŠè¿™ç§æ—¶å€™è¦å¦‚ä½•å¤„ç† ä½ çŸ¥é“å¦‚ä½•åœ¨äºŒå‰æœç´¢æ ‘ä¸­æ’å…¥å’Œåˆ é™¤èŠ‚ç‚¹ï¼Œæ¯•ç«Ÿçº¢é»‘æ ‘æœ¬èº«å°±æ˜¯ä¿è¯é«˜åº¦æ˜¯ $O(log\\ n)$ çš„äºŒå‰æœç´¢æ ‘ï¼Œè¦çŸ¥é“å¦‚ä½•æ‰¾åˆ°æ’å…¥ä½ç½®ï¼Œå¦‚ä½•ç¡®å®šè¦åˆ é™¤çš„èŠ‚ç‚¹ç­‰ ä½ éœ€è¦çŸ¥é“çº¢é»‘æ ‘å’Œ 2-3-4 æ ‘çš„å®šä¹‰ï¼Œéœ€è¦ç†è§£çº¢é»‘æ ‘æœ‰ä»€ä¹ˆæ€§è´¨ï¼Œä»¥åŠåœ¨çº¢é»‘æ ‘ä¸Šæ’å…¥èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹éƒ½å¯èƒ½æ‰“ç ´å“ªäº›æ€§è´¨ æœ€é‡è¦çš„ï¼Œä½ ä¸éœ€è¦è®°ä½çº¢é»‘æ ‘çš„æ—‹è½¬å’Œé¢œè‰²å˜åŒ–æ“ä½œï¼Œå› ä¸ºåªè¦ä½ æŒæ¡äº†ä»Šå¤©è¦è®²çš„æŠ€å·§ï¼Œä½ å°±å¯ä»¥åœ¨çº¢é»‘æ ‘çš„æ“ä½œå’Œ 2-3-4 æ ‘ä¸Šçš„æ“ä½œä¹‹é—´å»ºç«‹ç›´è§‰ä¸Šçš„è”ç³» ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:1:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#å¼•è¨€"},{"categories":["Data-Structure"],"content":" èŠ‚ç‚¹æ˜ å°„å®šä¹‰2-3-4 æ ‘ä¸Šä¸€å…±åªæœ‰å¯èƒ½æœ‰ä¸‹é¢ 3 ç§èŠ‚ç‚¹ï¼š 2-nodeï¼Œæœ‰ 2 ä¸ªå­©å­ï¼Œå« 1 ä¸ª key 3-nodeï¼Œæœ‰ 3 ä¸ªå­©å­ï¼Œå« 2 ä¸ª key 4-nodeï¼Œæœ‰ 4 ä¸ªå­©å­ï¼Œå« 3 ä¸ª key é€šè¿‡èŠ‚ç‚¹æ˜ å°„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥å°† 2-3-4 æ ‘ä¸Šçš„èŠ‚ç‚¹è½¬åŒ–ä¸ºå¯¹åº”çš„çº¢é»‘æ ‘ç»“æ„ï¼Œåä¹‹ä¾ç„¶ã€‚æ³¨æ„ä»–ä»¬éƒ½æ˜¯é»‘è‰²èŠ‚ç‚¹å¼€å§‹ï¼Œåé¢æˆ‘ä»¬ä¼šå¤šæ¬¡ç”¨åˆ°è¿™ä¸ªæ˜ å°„è¡¨ å·¦è¾¹æ˜¯ 2-3-4 æ ‘çš„ 2-node, 3-node, 4-nodeï¼Œå³è¾¹æ˜¯å¯¹åº”çš„çº¢é»‘æ ‘ç»“æ„ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:2:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#èŠ‚ç‚¹æ˜ å°„å®šä¹‰"},{"categories":["Data-Structure"],"content":" æ–°å¢èŠ‚ç‚¹æ“ä½œå…ˆæ¥ç®€å•å›é¡¾ä¸€ä¸‹ï¼Œå¾€çº¢é»‘æ ‘èŠ‚ç‚¹ä¸­æ–°å¢ä¸€ä¸ªèŠ‚ç‚¹çš„æ­¥éª¤ çº¢é»‘æ ‘æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥ä¸€å¼€å§‹æŒ‰ç…§äºŒå‰æœç´¢æ ‘æ’å…¥èŠ‚ç‚¹çš„åŠæ³•æ‰¾åˆ°è¦æ’å…¥çš„ä½ç½® å¦‚æœæ–°æ’å…¥çš„ç‚¹ä¼šæˆä¸ºæ ¹èŠ‚ç‚¹ï¼ˆå³æœ¬æ¥çš„çº¢é»‘æ ‘ä¸ºç©ºï¼‰ï¼Œåˆ™æ–°æ’å…¥çš„èŠ‚ç‚¹ä¸ºé»‘è‰²ï¼›å…¶ä»–æƒ…å†µåˆ™ä¸ºçº¢è‰²ï¼Œå› ä¸ºçº¢é»‘æ ‘æœ‰ä¸ªæ€§è´¨æ˜¯ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„çš„é»‘è‰²èŠ‚ç‚¹ï¼Œè®©æ–°æ’å…¥çš„èŠ‚ç‚¹çš„é¢œè‰²ä¸ºçº¢è‰²å°±å¯ä»¥ç»´æŠ¤è¿™ä¸ªæ€§è´¨ã€‚ä¸‹é¢æˆ‘ä»¬åªè€ƒè™‘æ–°æ’å…¥çš„èŠ‚ç‚¹ä¸ºçº¢è‰²çš„æƒ…å†µ æ–°æ’å…¥çš„èŠ‚ç‚¹æ˜¯çº¢è‰²çš„è¯è¿™æ„å‘³ç€å¯èƒ½æ‰“ç ´çº¢é»‘æ ‘çš„å¦å¤–ä¸€ä¸ªæ€§è´¨â€”â€”ä¸èƒ½æœ‰ 2 ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ã€‚çº¢é»‘æ ‘ä¸­é€šè¿‡æ ‘æ—‹è½¬å’ŒèŠ‚ç‚¹é‡æ–°ä¸Šè‰²ğŸ¨è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯è§„åˆ™æ¯”è¾ƒå¤æ‚ä¸å¥½è®° åœ¨è®²è§£å…·ä½“ä¾‹å­ä¹‹å‰ï¼Œå…ˆæ¦‚æ‹¬ä¸€ä¸‹é€šç”¨çš„æ€è·¯ï¼š æ‰¾åˆ°è¦æ’å…¥çš„ä½ç½®æ’å…¥æ–°èŠ‚ç‚¹ï¼Œè®¾ç½®æ–°èŠ‚ç‚¹çš„é¢œè‰²ä¸ºçº¢è‰² å°†çº¢é»‘æ ‘ä¸Šã€Œè¿èƒŒè§„åˆ™çš„éƒ¨åˆ†ã€è½¬åŒ–ä¸ºã€Œ2-3-4 æ ‘ä¸Šç­‰åŒçš„å½¢å¼ã€ æ€è€ƒå¦‚æœåœ¨ 2-3-4 æ ‘çš„è¿™ä¸ªç­‰ä»·å½¢å¼è¦å¦‚ä½•å¤„ç† åœ¨ 2-3-4 æ ‘ä¸Šå¤„ç†å¥½ä¹‹åï¼Œå†è½¬åŒ–ä¸ºçº¢é»‘æ ‘ï¼Œæ­¤æ—¶å½¢çŠ¶å’Œé¢œè‰²éƒ½å†³å®šå¥½äº† ğŸ’¡ ä¸ºäº†å¸®åŠ©è¯»è€…ç†è§£å¦‚ä½•åœ¨ 2-3-4 æ ‘å’Œçº¢é»‘æ ‘ä¹‹é—´å˜æ¢ï¼Œåœ¨å˜æ¢å‰åçš„ç­‰åŒéƒ¨åˆ†ï¼Œæˆ‘ç”¨äº†ä¸€ä¸ªå¸¦é¢œè‰²çš„é€æ˜æ¡†æ ‡è®°äº† ğŸ’¡ æˆ‘é€‰æ‹©äº†ç›´æ¥ç”¨å…·ä½“çš„æ•°å€¼è€Œä¸æ˜¯æŠ½è±¡çš„ç¬¦å·ï¼Œå› ä¸ºè¿™æ ·ä¼šæ›´åŠ ç›´è§‚ï¼Œæ›´æ–¹ä¾¿è¯»è€…åœ¨ 2-3-4 æ ‘å’Œçº¢é»‘æ ‘ä¹‹é—´æ‰¾åˆ°è”ç³» ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:3:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#æ–°å¢èŠ‚ç‚¹æ“ä½œ"},{"categories":["Data-Structure"],"content":" æ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²èŠ‚ç‚¹ä¸€ä¸ªç®€å•æƒ…å†µæ˜¯ï¼Œæ–°æ’å…¥çš„çº¢è‰²èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²ï¼Œæ­¤æ—¶æ»¡è¶³è¦æ±‚ä»ç„¶æ˜¯çº¢é»‘æ ‘ï¼Œä¸éœ€è¦ä»»ä½•æ”¹åŠ¨ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:3:1","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#æ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯é»‘è‰²èŠ‚ç‚¹"},{"categories":["Data-Structure"],"content":" æ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹è€Œä¸”ä¸å­˜åœ¨ uncle èŠ‚ç‚¹æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ç¨å¾®å¤æ‚ç‚¹çš„æƒ…å†µï¼Œæ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼Œçº¢é»‘æ ‘ä¸å…è®¸è¿™æ ·çš„æƒ…å†µå‡ºç°ã€‚æ­¤æ—¶å®ƒå¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰ unlce èŠ‚ç‚¹ï¼Œè®©æˆ‘ä»¬å…ˆè€ƒè™‘å®ƒæ²¡æœ‰ uncle èŠ‚ç‚¹çš„æƒ…å†µï¼Œå¯ä»¥å¾ˆè½»æ¾ç”»å‡ºä¸‹é¢å‡ ç§å¯èƒ½çš„å½¢å¼ æ³¨æ„è¿™å‡ ç§éƒ½æ˜¯ç­‰ä»·çš„ï¼Œä¸‹é¢æˆ‘åªå±•ç¤ºä¸Šå›¾ç¬¬ä¸€ä¸ªä¾‹å­æ˜¯å¦‚ä½•æ“ä½œçš„ ğŸ’¡ åé¢å½“æˆ‘ä»¬è®¨è®ºå…¶ä»–æƒ…å†µçš„æ—¶å€™ï¼Œä»–ä»¬ä¹Ÿå¯èƒ½ä¼šå­˜åœ¨ç­‰ä»·å½¢å¼ï¼Œä½†å…¶å®æ–¹æ³•éƒ½å¤§åŒå°å¼‚ï¼Œæˆ‘ä¼šæ¯æ¬¡æŒ‘å…¶ä¸­ä¸€ä¸ªè®² æ ¹æ®ä¹‹å‰æåˆ°çš„èŠ‚ç‚¹æ˜ å°„å…³ç³»ï¼Œæ’å…¥å‰çš„çº¢é»‘æ ‘æ­£å¥½å¯¹åº” 2-3-4 æ ‘ä¸Šçš„ 3-nodeï¼Œç„¶åæˆ‘ä»¬åœ¨çº¢é»‘æ ‘ä¸­æ’å…¥èŠ‚ç‚¹ 1ï¼Œä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨ 3-node ä¸Šä¹Ÿè¿›è¡Œæ’å…¥æ“ä½œï¼Œå¾—åˆ°äº†ä¸€ä¸ª 4-nodeï¼Œ4-node ç¬¦åˆ 2-3-4 æ ‘è¦æ±‚ï¼Œæ‰€ä»¥ä¹Ÿä¸éœ€è¦åˆ†è£‚èŠ‚ç‚¹ï¼Œæ­¤æ—¶å†æ ¹æ®èŠ‚ç‚¹æ˜ å°„å…³ç³»è½¬åŒ–ä¸ºçº¢é»‘æ ‘ æ­¤æ—¶ä½ å¯èƒ½è§‰å¾—ä¼¼ä¹ 2-3-4 æ ‘æ²¡æœ‰å¸¦æ¥å¤šå¤§æ–¹ä¾¿ï¼Œå› ä¸ºè¿™é‡Œä¸€ä¸ªç®€å•å³æ—‹ï¼Œç„¶åé‡æ–°æŸ“è‰²å¹¶ä¸æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹æƒ…ï¼Œä½†æ˜¯ä¹‹åéšç€æƒ…å†µè¶Šæ¥è¶Šå¤æ‚ï¼Œä½ ä¼šå‘ç° 2-3-4 æ ‘çš„ç†è§£è§’åº¦å®¹æ˜“ç†è§£å¾ˆå¤šğŸ¤”ï¸ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:3:2","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#æ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹è€Œä¸”ä¸å­˜åœ¨-uncle-èŠ‚ç‚¹"},{"categories":["Data-Structure"],"content":" æ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹è€Œä¸”å­˜åœ¨ uncle èŠ‚ç‚¹ç°åœ¨è®©æˆ‘ä»¬æ¥è€ƒè™‘å®ƒæœ‰ uncle èŠ‚ç‚¹çš„æƒ…å†µï¼Œå®ƒå¯èƒ½ä¸ºé»‘è‰²ï¼Œä¹Ÿå¯èƒ½ä¸ºçº¢è‰² å…ˆæ¥çœ‹çœ‹å¦‚æœ uncle èŠ‚ç‚¹ä¸ºé»‘è‰²çš„å…¶ä¸­ä¸€ç§å¯èƒ½æƒ…å†µ æ ¹æ®èŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠçº¢é»‘æ ‘çš„ 2, 5 æ˜ å°„ä¸º 2-3-4 æ ‘ä¸Šçš„ 3-nodeï¼Œè€Œçº¢é»‘æ ‘ä¸Šçš„ 7 å°±æ˜ å°„ä¸ºä¸€ä¸ª 2-nodeï¼Œåœ¨çº¢é»‘æ ‘ä¸Šæ’å…¥ 1ï¼Œå› æ­¤ä¹Ÿåœ¨ 2, 5 è¿™ä¸ª 3-node ä¸Šæ’å…¥ 1ï¼Œå¾—åˆ°çš„ 1, 2, 5 æ ¹æ®èŠ‚ç‚¹æ˜ å°„å…³ç³»ï¼Œæ˜ å°„ä¸ºä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹åŠ ä¸¤ä¸ªçº¢è‰²å­©å­èŠ‚ç‚¹ï¼Œè€Œ 7 åˆ™æ˜ å°„ä¸ºä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ é‚£å¦‚æœ uncle èŠ‚ç‚¹æ˜¯çº¢è‰²å‘¢ï¼Ÿæ¯”å¦‚åƒä¸‹é¢è¿™æ · è¿™ä¸ªä¼šç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºåœ¨ç­‰ä»·çš„ 2-3-4 æ ‘æ’å…¥ 1 ä¹‹åæˆ‘ä»¬éœ€è¦å¯¹ 1, 2, 5, 7 è¿›è¡Œåˆ†è£‚æ“ä½œï¼Œä¹Ÿå°±æ˜¯å°†å›¾ä¸Šçš„èŠ‚ç‚¹ 5 æ’å…¥åˆ°çˆ¶èŠ‚ç‚¹ä¸­ï¼Œå› ä¸ºä¸çŸ¥é“çˆ¶èŠ‚ç‚¹ä»€ä¹ˆæƒ…å†µï¼Œå› æ­¤èŠ‚ç‚¹ 5 ä¸¤è¾¹ç”¨çœç•¥å·è¡¨ç¤ºï¼Œåœ¨ 2-3-4 æ ‘ä¸­å¾€çˆ¶èŠ‚ç‚¹æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹æ„å‘³ç€å¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹ä¹Ÿ overflowï¼Œæœ€åçš„æƒ…å†µæˆ‘ä»¬æ˜¯éœ€è¦è¿™æ ·ä¸€è·¯ä¸€ç›´ä¿®æ”¹å›å» å¦å¤–æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ’å…¥çš„æ–°èŠ‚ç‚¹çš„ç¥–å…ˆï¼ˆgrandparentï¼‰èŠ‚ç‚¹åº”è¯¥æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼Œä¾‹å­ä¸­çš„èŠ‚ç‚¹ 5 å°±æ˜¯æ–°å¢èŠ‚ç‚¹ 1 çš„ç¥–å…ˆèŠ‚ç‚¹ã€‚è¿™æ ·æ‰èƒ½ä¿è¯ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„çš„é»‘è‰²èŠ‚ç‚¹ï¼Œä½†æ˜¯æœ‰ä¸ªä¾‹å¤–ï¼Œé‚£å°±æ˜¯ç¥–å…ˆèŠ‚ç‚¹æ˜¯çº¢é»‘æ ‘çš„æ ¹èŠ‚ç‚¹çš„æ—¶å€™ï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥æ˜¯é»‘è‰²ï¼Œä¸‹å›¾æ¸…æ™°å±•ç¤ºäº†è¿™ 2 ç§å¯èƒ½ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:3:3","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#æ–°å¢èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹æ˜¯çº¢è‰²èŠ‚ç‚¹è€Œä¸”å­˜åœ¨-uncle-èŠ‚ç‚¹"},{"categories":["Data-Structure"],"content":" åˆ é™¤èŠ‚ç‚¹æ“ä½œå…ˆæ¥ç®€å•å›é¡¾ä¸€ä¸‹ï¼Œåœ¨çº¢é»‘æ ‘èŠ‚ç‚¹ä¸­åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹çš„æ­¥éª¤ æŒ‰ç…§äºŒå‰æœç´¢æ ‘åˆ é™¤èŠ‚ç‚¹çš„æ–¹å¼ï¼Œæ‰¾åˆ°è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œå‡è®¾è¦è¢«åˆ é™¤çš„èŠ‚ç‚¹æ˜¯ z é‚£ä¹ˆæ ¹æ® z çš„èŠ‚ç‚¹é¢œè‰²å¯ä»¥åˆ†å‡ºä¸‹é¢ä¸¤ç§æƒ…å†µ z æ˜¯çº¢è‰²èŠ‚ç‚¹ï¼Œåˆ é™¤çº¢è‰²èŠ‚ç‚¹æ˜¯æ¯”è¾ƒå®¹æ˜“çš„ï¼Œå› ä¸ºä¸ä¼šæ‰“ç ´çº¢é»‘æ ‘çš„æ€§è´¨ï¼Œå°±æ˜¯æ­£å¸¸çš„äºŒå‰æœç´¢æ ‘åˆ é™¤èŠ‚ç‚¹çš„æ“ä½œï¼Œè¿™é‡Œä¸å±•å¼€ z æ˜¯é»‘è‰²èŠ‚ç‚¹ï¼Œåˆ é™¤é»‘è‰²èŠ‚ç‚¹å¯èƒ½æ‰“ç ´çº¢é»‘æ ‘çš„æ€§è´¨â€”â€”ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­èŠ‚ç‚¹çš„è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°é‡çš„çš„é»‘è‰²èŠ‚ç‚¹ï¼Œåœ¨çº¢é»‘æ ‘ä¸­ï¼Œé‡åˆ°è¿™ç§æƒ…å†µä»ç„¶æ˜¯éœ€è¦ç”¨æ ‘çš„æ—‹è½¬å’ŒèŠ‚ç‚¹é‡æ–°ä¸Šè‰²ğŸ¨è§£å†³é—®é¢˜ã€‚ä¸‹é¢çš„è®¨è®ºä¸»è¦è€ƒè™‘çš„æ˜¯è¿™ç§æƒ…å†µ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:4:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#åˆ é™¤èŠ‚ç‚¹æ“ä½œ"},{"categories":["Data-Structure"],"content":" è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰çº¢è‰²å³å­©å­ ğŸ’¡ æ³¨æ„ï¼Œæ ¹æ®äºŒå‰æœç´¢æ ‘çš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œæˆ‘ä»¬çŸ¥é“è¦åˆ é™¤çš„èŠ‚ç‚¹ z ä¸€å®šæ²¡æœ‰å·¦å­©å­ï¼Œå¦‚æœå®ƒæœ‰å³å­©å­çš„è¯ï¼Œæˆ‘ä»¬è®°ä¸º y ğŸ’¡ é»„è‰²èŠ‚ç‚¹è¡¨ç¤ºä¸çŸ¥é“é¢œè‰²æˆ–è€…æ˜¯ä¸å…³å¿ƒå®ƒä»€ä¹ˆé¢œè‰² åˆ é™¤é»‘è‰²çš„ zï¼Œç„¶åç”¨å®ƒçš„çº¢è‰²å³å­©å­ y ä»£æ›¿ z ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:4:1","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰çº¢è‰²å³å­©å­"},{"categories":["Data-Structure"],"content":" è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰é»‘è‰²å³å­©å­æˆ‘ä»¬æš‚æ—¶ç”¨é»‘è‰²çš„ y ä»£æ›¿è¢«åˆ é™¤çš„é»‘è‰²çš„ zï¼Œå¹¶ä¸”è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œåœ¨å›¾ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹ + åœ†ç¯å°±è¡¨ç¤º â€œdouble blackâ€2 ğŸ’¡ â€œdouble blackâ€ å¯¹äºçº¢é»‘æ ‘è€Œè¨€ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦è®©è¿™è¾¹æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼›å¯¹äº 2-3-4 æ ‘è€Œè¨€ï¼Œé‚£å°±å¯¹åº” 2-3-4 æ ‘ä¸­åˆ é™¤ 2-node çš„ keyä¹‹åå¼•å‘çš„ underflow åˆ é™¤é»‘è‰²çš„ zï¼Œç„¶åç”¨å®ƒçš„é»‘è‰²å³å­©å­ y ä»£æ›¿ zï¼Œæ ‡è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®ã€Œâ€œdouble blackâ€ çš„å…„å¼ŸèŠ‚ç‚¹ã€æ¥åˆ†æƒ…å†µæ¨å¯¼ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸€ä¸ªçº¢è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ transfer æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 6, 7 æ˜¯ä¸€ä¸ª 3-nodeï¼Œè¿˜æœ‰å¾—å€Ÿã€‚transfer æ“ä½œä¹Ÿå°±æ˜¯çˆ¶èŠ‚ç‚¹çš„ key ç§»åŠ¨åˆ°è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åå…„å¼ŸèŠ‚ç‚¹çš„æœ€å°çš„ key ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹å¡«è¡¥ç©ºç¼º ğŸ’¡ æ³¨æ„çœ‹ï¼Œç°åœ¨ 4 å’Œ 5 æ˜¯ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œå…ˆå‰è¿™é‡Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œç°åœ¨æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹äº†ï¼Œâ€œdouble blackâ€ ä¹Ÿå°±æ²¡æœ‰å¿…è¦äº†ã€‚è¿™ä¹Ÿæ˜¯å®ƒå«åšè¿™ä¸ªåå­—çš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦æé†’è‡ªå·±è¿™é‡Œéœ€è¦ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ ğŸ’¡ æ³¨æ„è¿™é‡ŒèŠ‚ç‚¹ 6 çš„é¢œè‰²å°±æ˜¯æœ¬æ¥èŠ‚ç‚¹ 5 çš„é¢œè‰² å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ fusion æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 7 æ˜¯ä¸€ä¸ª 2-nodeï¼Œæ²¡å¾—å€Ÿã€‚fusion æ“ä½œå°±æ˜¯ä»çˆ¶èŠ‚ç‚¹é‚£è¾¹å€Ÿä¸€ä¸ª key ä¸‹æ¥ï¼Œç„¶åå’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼Œæˆä¸ºä¸€ä¸ª 3-nodeï¼Œä¹Ÿå°±æ˜¯å›¾ä¸Šçš„ 5, 7 ğŸ’¡ ä½†æ˜¯æ³¨æ„è¿™é‡Œçš„ Fusion æ“ä½œæ‰¾çˆ¶èŠ‚ç‚¹å€Ÿäº†ä¸€ä¸ª keyï¼Œè¿™å¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹ underflow äº†ï¼Œæ­£å¦‚å‰é¢æˆ‘ä»¬åœ¨æ–°å¢èŠ‚ç‚¹çš„æ—¶å€™å¯èƒ½ overflow ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™ä¸ªä¾‹å­çš„èŠ‚ç‚¹ 5 åº”è¯¥æ˜¯é»‘è‰²ï¼ˆæ ¹æ®å‰é¢å¯¹èŠ‚ç‚¹æ˜ å°„çš„è§„å®šï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³ â€œdouble blackâ€ çš„è¦æ±‚ï¼Œä½†æ˜¯ä¸è¦å¿˜äº† 5 è‡ªå·±æ˜¯æœ‰é¢œè‰²çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºç°åœ¨çš„èŠ‚ç‚¹ 7 å°±æ˜¯çº¢è‰²ï¼Œçº¢é»‘æ ‘è¿˜æ˜¯å¹³è¡¡çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿˜æ˜¯ä¼šå°‘äº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ 5 å°±å˜æˆäº†æ–°çš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¾—å‘ä¸Šç»§ç»­è°ƒæ•´ã€‚è¿™æ°æ°æ˜¯å¯¹åº”äº† 2-3-4 æ ‘ä¸­å‘ç”Ÿäº† underflow çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ bototm-up ä¸€è·¯è°ƒæ•´å›å»ã€‚æœ€åå¦‚æœå‘ç°æ ¹èŠ‚ç‚¹æ˜¯ä¸€ä¸ª â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæŠŠæ ¹èŠ‚ç‚¹å˜æˆé»‘è‰²èŠ‚ç‚¹å³å¯ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€æœ€åä¸€ç§æƒ…å†µï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œè€Œä¸”æœ‰ 2 ä¸ªé»‘è‰²å­©å­ ğŸ’¡ æ³¨æ„ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œä»–ä»¬çš„å…±åŒçˆ¶èŠ‚ç‚¹è‚¯å®šæ˜¯é»‘è‰²ï¼Œå› ä¸ºçº¢é»‘æ ‘ä¸å…è®¸æœ‰ 2 ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ è¿™ä¸ªå¯ä»¥é€šè¿‡å–å·§çš„åŠæ³•æ¥è½¬åŒ–ä¸ºå‰é¢æƒ…å†µï¼š ç°åœ¨èŠ‚ç‚¹ 4 çš„å…„å¼ŸèŠ‚ç‚¹å°±æ˜¯é»‘è‰²èŠ‚ç‚¹äº†ï¼Œè½¬åŒ–ä¸ºå‰é¢çš„æƒ…å†µï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„åŠæ³•å¤„ç† ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:4:2","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰é»‘è‰²å³å­©å­"},{"categories":["Data-Structure"],"content":" è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰é»‘è‰²å³å­©å­æˆ‘ä»¬æš‚æ—¶ç”¨é»‘è‰²çš„ y ä»£æ›¿è¢«åˆ é™¤çš„é»‘è‰²çš„ zï¼Œå¹¶ä¸”è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œåœ¨å›¾ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹ + åœ†ç¯å°±è¡¨ç¤º â€œdouble blackâ€2 ğŸ’¡ â€œdouble blackâ€ å¯¹äºçº¢é»‘æ ‘è€Œè¨€ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦è®©è¿™è¾¹æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼›å¯¹äº 2-3-4 æ ‘è€Œè¨€ï¼Œé‚£å°±å¯¹åº” 2-3-4 æ ‘ä¸­åˆ é™¤ 2-node çš„ keyä¹‹åå¼•å‘çš„ underflow åˆ é™¤é»‘è‰²çš„ zï¼Œç„¶åç”¨å®ƒçš„é»‘è‰²å³å­©å­ y ä»£æ›¿ zï¼Œæ ‡è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®ã€Œâ€œdouble blackâ€ çš„å…„å¼ŸèŠ‚ç‚¹ã€æ¥åˆ†æƒ…å†µæ¨å¯¼ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸€ä¸ªçº¢è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ transfer æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 6, 7 æ˜¯ä¸€ä¸ª 3-nodeï¼Œè¿˜æœ‰å¾—å€Ÿã€‚transfer æ“ä½œä¹Ÿå°±æ˜¯çˆ¶èŠ‚ç‚¹çš„ key ç§»åŠ¨åˆ°è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åå…„å¼ŸèŠ‚ç‚¹çš„æœ€å°çš„ key ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹å¡«è¡¥ç©ºç¼º ğŸ’¡ æ³¨æ„çœ‹ï¼Œç°åœ¨ 4 å’Œ 5 æ˜¯ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œå…ˆå‰è¿™é‡Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œç°åœ¨æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹äº†ï¼Œâ€œdouble blackâ€ ä¹Ÿå°±æ²¡æœ‰å¿…è¦äº†ã€‚è¿™ä¹Ÿæ˜¯å®ƒå«åšè¿™ä¸ªåå­—çš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦æé†’è‡ªå·±è¿™é‡Œéœ€è¦ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ ğŸ’¡ æ³¨æ„è¿™é‡ŒèŠ‚ç‚¹ 6 çš„é¢œè‰²å°±æ˜¯æœ¬æ¥èŠ‚ç‚¹ 5 çš„é¢œè‰² å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ fusion æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 7 æ˜¯ä¸€ä¸ª 2-nodeï¼Œæ²¡å¾—å€Ÿã€‚fusion æ“ä½œå°±æ˜¯ä»çˆ¶èŠ‚ç‚¹é‚£è¾¹å€Ÿä¸€ä¸ª key ä¸‹æ¥ï¼Œç„¶åå’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼Œæˆä¸ºä¸€ä¸ª 3-nodeï¼Œä¹Ÿå°±æ˜¯å›¾ä¸Šçš„ 5, 7 ğŸ’¡ ä½†æ˜¯æ³¨æ„è¿™é‡Œçš„ Fusion æ“ä½œæ‰¾çˆ¶èŠ‚ç‚¹å€Ÿäº†ä¸€ä¸ª keyï¼Œè¿™å¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹ underflow äº†ï¼Œæ­£å¦‚å‰é¢æˆ‘ä»¬åœ¨æ–°å¢èŠ‚ç‚¹çš„æ—¶å€™å¯èƒ½ overflow ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™ä¸ªä¾‹å­çš„èŠ‚ç‚¹ 5 åº”è¯¥æ˜¯é»‘è‰²ï¼ˆæ ¹æ®å‰é¢å¯¹èŠ‚ç‚¹æ˜ å°„çš„è§„å®šï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³ â€œdouble blackâ€ çš„è¦æ±‚ï¼Œä½†æ˜¯ä¸è¦å¿˜äº† 5 è‡ªå·±æ˜¯æœ‰é¢œè‰²çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºç°åœ¨çš„èŠ‚ç‚¹ 7 å°±æ˜¯çº¢è‰²ï¼Œçº¢é»‘æ ‘è¿˜æ˜¯å¹³è¡¡çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿˜æ˜¯ä¼šå°‘äº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ 5 å°±å˜æˆäº†æ–°çš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¾—å‘ä¸Šç»§ç»­è°ƒæ•´ã€‚è¿™æ°æ°æ˜¯å¯¹åº”äº† 2-3-4 æ ‘ä¸­å‘ç”Ÿäº† underflow çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ bototm-up ä¸€è·¯è°ƒæ•´å›å»ã€‚æœ€åå¦‚æœå‘ç°æ ¹èŠ‚ç‚¹æ˜¯ä¸€ä¸ª â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæŠŠæ ¹èŠ‚ç‚¹å˜æˆé»‘è‰²èŠ‚ç‚¹å³å¯ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€æœ€åä¸€ç§æƒ…å†µï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œè€Œä¸”æœ‰ 2 ä¸ªé»‘è‰²å­©å­ ğŸ’¡ æ³¨æ„ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œä»–ä»¬çš„å…±åŒçˆ¶èŠ‚ç‚¹è‚¯å®šæ˜¯é»‘è‰²ï¼Œå› ä¸ºçº¢é»‘æ ‘ä¸å…è®¸æœ‰ 2 ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ è¿™ä¸ªå¯ä»¥é€šè¿‡å–å·§çš„åŠæ³•æ¥è½¬åŒ–ä¸ºå‰é¢æƒ…å†µï¼š ç°åœ¨èŠ‚ç‚¹ 4 çš„å…„å¼ŸèŠ‚ç‚¹å°±æ˜¯é»‘è‰²èŠ‚ç‚¹äº†ï¼Œè½¬åŒ–ä¸ºå‰é¢çš„æƒ…å†µï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„åŠæ³•å¤„ç† ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:4:2","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ä¸€ä¸ªçº¢è‰²å­©å­"},{"categories":["Data-Structure"],"content":" è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰é»‘è‰²å³å­©å­æˆ‘ä»¬æš‚æ—¶ç”¨é»‘è‰²çš„ y ä»£æ›¿è¢«åˆ é™¤çš„é»‘è‰²çš„ zï¼Œå¹¶ä¸”è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œåœ¨å›¾ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹ + åœ†ç¯å°±è¡¨ç¤º â€œdouble blackâ€2 ğŸ’¡ â€œdouble blackâ€ å¯¹äºçº¢é»‘æ ‘è€Œè¨€ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦è®©è¿™è¾¹æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼›å¯¹äº 2-3-4 æ ‘è€Œè¨€ï¼Œé‚£å°±å¯¹åº” 2-3-4 æ ‘ä¸­åˆ é™¤ 2-node çš„ keyä¹‹åå¼•å‘çš„ underflow åˆ é™¤é»‘è‰²çš„ zï¼Œç„¶åç”¨å®ƒçš„é»‘è‰²å³å­©å­ y ä»£æ›¿ zï¼Œæ ‡è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®ã€Œâ€œdouble blackâ€ çš„å…„å¼ŸèŠ‚ç‚¹ã€æ¥åˆ†æƒ…å†µæ¨å¯¼ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸€ä¸ªçº¢è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ transfer æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 6, 7 æ˜¯ä¸€ä¸ª 3-nodeï¼Œè¿˜æœ‰å¾—å€Ÿã€‚transfer æ“ä½œä¹Ÿå°±æ˜¯çˆ¶èŠ‚ç‚¹çš„ key ç§»åŠ¨åˆ°è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åå…„å¼ŸèŠ‚ç‚¹çš„æœ€å°çš„ key ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹å¡«è¡¥ç©ºç¼º ğŸ’¡ æ³¨æ„çœ‹ï¼Œç°åœ¨ 4 å’Œ 5 æ˜¯ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œå…ˆå‰è¿™é‡Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œç°åœ¨æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹äº†ï¼Œâ€œdouble blackâ€ ä¹Ÿå°±æ²¡æœ‰å¿…è¦äº†ã€‚è¿™ä¹Ÿæ˜¯å®ƒå«åšè¿™ä¸ªåå­—çš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦æé†’è‡ªå·±è¿™é‡Œéœ€è¦ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ ğŸ’¡ æ³¨æ„è¿™é‡ŒèŠ‚ç‚¹ 6 çš„é¢œè‰²å°±æ˜¯æœ¬æ¥èŠ‚ç‚¹ 5 çš„é¢œè‰² å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ fusion æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 7 æ˜¯ä¸€ä¸ª 2-nodeï¼Œæ²¡å¾—å€Ÿã€‚fusion æ“ä½œå°±æ˜¯ä»çˆ¶èŠ‚ç‚¹é‚£è¾¹å€Ÿä¸€ä¸ª key ä¸‹æ¥ï¼Œç„¶åå’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼Œæˆä¸ºä¸€ä¸ª 3-nodeï¼Œä¹Ÿå°±æ˜¯å›¾ä¸Šçš„ 5, 7 ğŸ’¡ ä½†æ˜¯æ³¨æ„è¿™é‡Œçš„ Fusion æ“ä½œæ‰¾çˆ¶èŠ‚ç‚¹å€Ÿäº†ä¸€ä¸ª keyï¼Œè¿™å¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹ underflow äº†ï¼Œæ­£å¦‚å‰é¢æˆ‘ä»¬åœ¨æ–°å¢èŠ‚ç‚¹çš„æ—¶å€™å¯èƒ½ overflow ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™ä¸ªä¾‹å­çš„èŠ‚ç‚¹ 5 åº”è¯¥æ˜¯é»‘è‰²ï¼ˆæ ¹æ®å‰é¢å¯¹èŠ‚ç‚¹æ˜ å°„çš„è§„å®šï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³ â€œdouble blackâ€ çš„è¦æ±‚ï¼Œä½†æ˜¯ä¸è¦å¿˜äº† 5 è‡ªå·±æ˜¯æœ‰é¢œè‰²çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºç°åœ¨çš„èŠ‚ç‚¹ 7 å°±æ˜¯çº¢è‰²ï¼Œçº¢é»‘æ ‘è¿˜æ˜¯å¹³è¡¡çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿˜æ˜¯ä¼šå°‘äº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ 5 å°±å˜æˆäº†æ–°çš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¾—å‘ä¸Šç»§ç»­è°ƒæ•´ã€‚è¿™æ°æ°æ˜¯å¯¹åº”äº† 2-3-4 æ ‘ä¸­å‘ç”Ÿäº† underflow çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ bototm-up ä¸€è·¯è°ƒæ•´å›å»ã€‚æœ€åå¦‚æœå‘ç°æ ¹èŠ‚ç‚¹æ˜¯ä¸€ä¸ª â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæŠŠæ ¹èŠ‚ç‚¹å˜æˆé»‘è‰²èŠ‚ç‚¹å³å¯ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€æœ€åä¸€ç§æƒ…å†µï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œè€Œä¸”æœ‰ 2 ä¸ªé»‘è‰²å­©å­ ğŸ’¡ æ³¨æ„ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œä»–ä»¬çš„å…±åŒçˆ¶èŠ‚ç‚¹è‚¯å®šæ˜¯é»‘è‰²ï¼Œå› ä¸ºçº¢é»‘æ ‘ä¸å…è®¸æœ‰ 2 ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ è¿™ä¸ªå¯ä»¥é€šè¿‡å–å·§çš„åŠæ³•æ¥è½¬åŒ–ä¸ºå‰é¢æƒ…å†µï¼š ç°åœ¨èŠ‚ç‚¹ 4 çš„å…„å¼ŸèŠ‚ç‚¹å°±æ˜¯é»‘è‰²èŠ‚ç‚¹äº†ï¼Œè½¬åŒ–ä¸ºå‰é¢çš„æƒ…å†µï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„åŠæ³•å¤„ç† ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:4:2","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ä¸¤ä¸ªé»‘è‰²å­©å­"},{"categories":["Data-Structure"],"content":" è¢«åˆ é™¤çš„èŠ‚ç‚¹æœ‰é»‘è‰²å³å­©å­æˆ‘ä»¬æš‚æ—¶ç”¨é»‘è‰²çš„ y ä»£æ›¿è¢«åˆ é™¤çš„é»‘è‰²çš„ zï¼Œå¹¶ä¸”è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œåœ¨å›¾ä¸Šï¼Œé»‘è‰²èŠ‚ç‚¹ + åœ†ç¯å°±è¡¨ç¤º â€œdouble blackâ€2 ğŸ’¡ â€œdouble blackâ€ å¯¹äºçº¢é»‘æ ‘è€Œè¨€ï¼Œæ„å‘³ç€æˆ‘ä»¬è¦è®©è¿™è¾¹æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼›å¯¹äº 2-3-4 æ ‘è€Œè¨€ï¼Œé‚£å°±å¯¹åº” 2-3-4 æ ‘ä¸­åˆ é™¤ 2-node çš„ keyä¹‹åå¼•å‘çš„ underflow åˆ é™¤é»‘è‰²çš„ zï¼Œç„¶åç”¨å®ƒçš„é»‘è‰²å³å­©å­ y ä»£æ›¿ zï¼Œæ ‡è®° y ä¸º â€œdouble blackâ€ èŠ‚ç‚¹ æ¥ä¸‹æ¥æˆ‘ä»¬è¦æ ¹æ®ã€Œâ€œdouble blackâ€ çš„å…„å¼ŸèŠ‚ç‚¹ã€æ¥åˆ†æƒ…å†µæ¨å¯¼ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸€ä¸ªçº¢è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ transfer æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 6, 7 æ˜¯ä¸€ä¸ª 3-nodeï¼Œè¿˜æœ‰å¾—å€Ÿã€‚transfer æ“ä½œä¹Ÿå°±æ˜¯çˆ¶èŠ‚ç‚¹çš„ key ç§»åŠ¨åˆ°è¢«åˆ é™¤çš„èŠ‚ç‚¹çš„ä½ç½®ï¼Œç„¶åå…„å¼ŸèŠ‚ç‚¹çš„æœ€å°çš„ key ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹å¡«è¡¥ç©ºç¼º ğŸ’¡ æ³¨æ„çœ‹ï¼Œç°åœ¨ 4 å’Œ 5 æ˜¯ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œå…ˆå‰è¿™é‡Œæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œç°åœ¨æœ‰ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹äº†ï¼Œâ€œdouble blackâ€ ä¹Ÿå°±æ²¡æœ‰å¿…è¦äº†ã€‚è¿™ä¹Ÿæ˜¯å®ƒå«åšè¿™ä¸ªåå­—çš„åŸå› ï¼Œæˆ‘ä»¬éœ€è¦æé†’è‡ªå·±è¿™é‡Œéœ€è¦ 2 ä¸ªé»‘è‰²èŠ‚ç‚¹ ğŸ’¡ æ³¨æ„è¿™é‡ŒèŠ‚ç‚¹ 6 çš„é¢œè‰²å°±æ˜¯æœ¬æ¥èŠ‚ç‚¹ 5 çš„é¢œè‰² å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯é»‘è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€ åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œè½¬åŒ–ä¸ºç­‰ä»·çš„ 2-3-4 æ ‘ä¸Šçš„åˆ é™¤èŠ‚ç‚¹æ“ä½œï¼Œåœ¨ 2-3-4 æ ‘ä¸­é‡åˆ°è¿™ç§æƒ…å†µéœ€è¦æ‰§è¡Œ fusion æ“ä½œï¼Œå› ä¸ºå…„å¼ŸèŠ‚ç‚¹ 7 æ˜¯ä¸€ä¸ª 2-nodeï¼Œæ²¡å¾—å€Ÿã€‚fusion æ“ä½œå°±æ˜¯ä»çˆ¶èŠ‚ç‚¹é‚£è¾¹å€Ÿä¸€ä¸ª key ä¸‹æ¥ï¼Œç„¶åå’Œå…„å¼ŸèŠ‚ç‚¹åˆå¹¶ï¼Œæˆä¸ºä¸€ä¸ª 3-nodeï¼Œä¹Ÿå°±æ˜¯å›¾ä¸Šçš„ 5, 7 ğŸ’¡ ä½†æ˜¯æ³¨æ„è¿™é‡Œçš„ Fusion æ“ä½œæ‰¾çˆ¶èŠ‚ç‚¹å€Ÿäº†ä¸€ä¸ª keyï¼Œè¿™å¯èƒ½å¯¼è‡´çˆ¶èŠ‚ç‚¹ underflow äº†ï¼Œæ­£å¦‚å‰é¢æˆ‘ä»¬åœ¨æ–°å¢èŠ‚ç‚¹çš„æ—¶å€™å¯èƒ½ overflow ç†è®ºä¸Šæ¥è¯´ï¼Œè¿™ä¸ªä¾‹å­çš„èŠ‚ç‚¹ 5 åº”è¯¥æ˜¯é»‘è‰²ï¼ˆæ ¹æ®å‰é¢å¯¹èŠ‚ç‚¹æ˜ å°„çš„è§„å®šï¼‰ï¼Œè¿™æ ·æ‰èƒ½æ»¡è¶³ â€œdouble blackâ€ çš„è¦æ±‚ï¼Œä½†æ˜¯ä¸è¦å¿˜äº† 5 è‡ªå·±æ˜¯æœ‰é¢œè‰²çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯çº¢è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºç°åœ¨çš„èŠ‚ç‚¹ 7 å°±æ˜¯çº¢è‰²ï¼Œçº¢é»‘æ ‘è¿˜æ˜¯å¹³è¡¡çš„ å¦‚æœ 5 æœ¬æ¥æ˜¯é»‘è‰²ï¼Œé‚£ä¹ˆæŠŠ 5 å˜æˆé»‘è‰²æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿˜æ˜¯ä¼šå°‘äº†ä¸€ä¸ªé»‘è‰²èŠ‚ç‚¹ï¼Œé‚£ä¹ˆèŠ‚ç‚¹ 5 å°±å˜æˆäº†æ–°çš„ â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œæˆ‘ä»¬è¿˜å¾—å‘ä¸Šç»§ç»­è°ƒæ•´ã€‚è¿™æ°æ°æ˜¯å¯¹åº”äº† 2-3-4 æ ‘ä¸­å‘ç”Ÿäº† underflow çš„æƒ…å†µï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦ bototm-up ä¸€è·¯è°ƒæ•´å›å»ã€‚æœ€åå¦‚æœå‘ç°æ ¹èŠ‚ç‚¹æ˜¯ä¸€ä¸ª â€œdouble blackâ€ èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæŠŠæ ¹èŠ‚ç‚¹å˜æˆé»‘è‰²èŠ‚ç‚¹å³å¯ å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²è€Œä¸”æœ‰ã€Œä¸¤ä¸ªé»‘è‰²å­©å­ã€æœ€åä¸€ç§æƒ…å†µï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹ä¸ºçº¢è‰²ï¼Œè€Œä¸”æœ‰ 2 ä¸ªé»‘è‰²å­©å­ ğŸ’¡ æ³¨æ„ï¼Œå¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²ï¼Œä»–ä»¬çš„å…±åŒçˆ¶èŠ‚ç‚¹è‚¯å®šæ˜¯é»‘è‰²ï¼Œå› ä¸ºçº¢é»‘æ ‘ä¸å…è®¸æœ‰ 2 ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹ è¿™ä¸ªå¯ä»¥é€šè¿‡å–å·§çš„åŠæ³•æ¥è½¬åŒ–ä¸ºå‰é¢æƒ…å†µï¼š ç°åœ¨èŠ‚ç‚¹ 4 çš„å…„å¼ŸèŠ‚ç‚¹å°±æ˜¯é»‘è‰²èŠ‚ç‚¹äº†ï¼Œè½¬åŒ–ä¸ºå‰é¢çš„æƒ…å†µï¼Œå¯ä»¥æŒ‰ç…§å‰é¢çš„åŠæ³•å¤„ç† ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:4:2","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#å¦‚æœå…„å¼ŸèŠ‚ç‚¹æ˜¯çº¢è‰²è€Œä¸”æœ‰ä¸¤ä¸ªé»‘è‰²å­©å­"},{"categories":["Data-Structure"],"content":" æ€»ç»“ç»è¿‡å‰é¢çš„ä¾‹å­å±•ç¤ºï¼Œæˆ‘ä»¬å‘ç°å¯ä»¥åœ¨ 2-3-4 æ ‘ä¸Šæ€è€ƒè¦å¦‚ä½•å¤„ç†ï¼Œå¤„ç†å®Œæˆä¹‹åè½¬å˜å›çº¢é»‘æ ‘ï¼Œè€Œ 2-3-4 æ ‘çš„èŠ‚ç‚¹æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œè¿™ä¹Ÿæ˜¯è¿™å¥—æ–¹æ³•çš„ä»·å€¼æ‰€åœ¨ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œç»ˆäºå¯ä»¥ä¸ç”¨è®°ä½æ—‹è½¬é¡ºåºå’Œæ€ä¹ˆäº¤æ¢é¢œè‰²äº†ğŸ‘ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:5:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#æ€»ç»“"},{"categories":["Data-Structure"],"content":" æ¨èé˜…è¯»å…³äº 2-3-4 æ ‘å’Œçº¢é»‘æ ‘çš„å¯¹åº”å…³ç³»ï¼Œè¿˜æœ‰ä¸‹é¢çš„å‡ ä¸ªå‚è€ƒèµ„æºå¯ä»¥é˜…è¯» CS166. Balanced Trees, Part I CS166. Balanced Trees, Part II CS280. Mapping 2-3-4 trees into Red-Black trees ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:6:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#æ¨èé˜…è¯»"},{"categories":["Data-Structure"],"content":" å‚è€ƒ CS166. Balanced Trees, Part IIÂ â†©ï¸ Red Black TreesÂ â†©ï¸ ","date":"2023-07-01","objectID":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/:7:0","series":null,"tags":["Data-Structure"],"title":"å¦‚ä½•è®°å¿†çº¢é»‘æ ‘çš„æ“ä½œ","uri":"/zh-cn/how-to-memorize-insertion-and-deletion-in-rb-tree/#å‚è€ƒ"},{"categories":["Git"],"content":"ä»‹ç»äº†å°‘ä¸ºäººçŸ¥çš„ git bundle å‘½ä»¤","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/"},{"categories":["Git"],"content":" git bundle æ˜¯ä»€ä¹ˆgit bundle æ˜¯ä¸€ä¸ªæ¯”è¾ƒå°‘çœ‹åˆ°çš„ git å‘½ä»¤ï¼Œå®ƒçš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ª git ä»“åº“æ‰“åŒ…ğŸ“¦æˆä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶ååˆ«äººå¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶è¿˜åŸå‡ºæœ¬æ¥çš„ git ä»“åº“ï¼Œè€Œä¸” git bundle è¿˜æ”¯æŒå¢é‡æ›´æ–°åŠŸèƒ½ã€‚åœ¨çŸ¥é“ git bundle å‘½ä»¤ä¹‹å‰ï¼Œæˆ‘æœ‰æ—¶å€™æ‰“åŒ…ä¸€ä¸ª git ä»“åº“ä¸€èˆ¬å°±ç›´æ¥ tar czf some_git_repoã€‚å‰é˜µå­å¶ç„¶å‘ç°äº† git bundle å‘ç°è¿˜æŒºå®ç”¨çš„ğŸ» è¿™ä¸ªå‘½ä»¤æœ€å¥½é€šè¿‡ä¾‹å­æ¥è¯´æ˜ï¼Œå› æ­¤ä¸‹é¢æˆ‘ç”¨ HostA å’Œ HostB è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹æ¨¡æ‹Ÿä¸¤å°ä¸»æœºï¼Œå‡è®¾åœ¨ HostA ä¸Šå­˜åœ¨æŸä¸ª git ä»“åº“ fooï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š text â”œâ”€â”€ HostA â”‚Â â””â”€â”€ foo â”‚Â â”œâ”€â”€ 1.txt â”‚Â â”œâ”€â”€ 2.txt â”‚Â â””â”€â”€ 3.txt â”œâ”€â”€ HostB å…¶ä¸­ foo æœ‰ 3 ä¸ª commitsï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š text * 21486d5 (HEAD -\u003e main) add 3.txt * a051186 add 2.txt * 2820a6c add 1.txt ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:1:0","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#git-bundle-æ˜¯ä»€ä¹ˆ"},{"categories":["Git"],"content":" ä½¿ç”¨åœºæ™¯","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:2:0","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#ä½¿ç”¨åœºæ™¯"},{"categories":["Git"],"content":" HostA ä¸Šé¦–æ¬¡æ‰“åŒ…é¦–æ¬¡æ‰“åŒ…é‚£ä¹ˆå¿…å®šæ˜¯è¦å¯¹æ•´ä¸ª git ä»“åº“è¿›è¡Œæ‰“åŒ…ï¼Œæ‰“åŒ… HostA ä¸Šçš„ foo ä»“åº“çš„å‘½ä»¤å¾ˆç®€å• sh # in HostA/foo # syntax: git bundle create \u003cfilename\u003e \u003cgit-rev-list-args\u003e $ git bundle create foo.bundle HEAD main æ¯”è¾ƒéš¾æ‡‚çš„æ˜¯ \u003cgit-rev-list-args\u003eï¼Œå®ƒçš„å«ä¹‰æ˜¯æˆ‘ä»¬è¦æŠŠä»€ä¹ˆä¸œè¥¿æ‰“åŒ…åˆ°è¿™ä¸ª bundle æ–‡ä»¶é‡Œé¢ã€‚è¿™é‡Œæˆ‘ä»¬æ˜¯è¦æ‰“åŒ… HostA çš„ foo ä»“åº“ï¼Œå®ƒæœ‰ä¸€ä¸ª main åˆ†æ”¯ï¼ŒåŒæ—¶æˆ‘ä»¬æŠŠ HEAD å½“å‰æŒ‡å‘çš„ä½ç½®ä¹Ÿæ‰“åŒ…åˆ°è¿™ä¸ª bundle æ–‡ä»¶é‡Œé¢ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯ HEAD main ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:2:1","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#hosta-ä¸Šé¦–æ¬¡æ‰“åŒ…"},{"categories":["Git"],"content":" HostB ä¸Šå…‹éš†ä»“åº“ç°åœ¨å‡è®¾ HostB ä¸Šæ‹¿åˆ°äº†å‰é¢æ‰“åŒ…å¥½çš„ foo.bundle æ–‡ä»¶ï¼Œé‚£ä¹ˆè¿˜åŸå‡ºæœ¬æ¥çš„ä»“åº“ä¹Ÿå¾ˆç®€å•ï¼Œå‘½ä»¤å¦‚ä¸‹æ‰€ç¤º sh # in HostB # syntax: git clone \u003cfilename\u003e \u003ctarget_dir\u003e $ git clone foo.bundle foo å¯ä»¥çœ‹åˆ°ï¼Œæå– bundle æ–‡ä»¶çš„ä¿¡æ¯å°±åƒæ˜¯ä»ä¸€ä¸ªæ™®é€šçš„ URL å…‹éš†ä»“åº“ä¸€æ ·ï¼Œåªä¸è¿‡æŠŠ URL æ¢æˆäº† bundle æ–‡ä»¶çš„è·¯å¾„ æ­¤æ—¶çœ‹ä¸‹è¿™ä¸ªä»“åº“çš„è¿œç¨‹ä»“åº“ä¿¡æ¯ï¼Œä½ ä¼šå‘ç°å®ƒçš„è¿œç¨‹ä»“åº“è¢«è®¾ç½®æˆäº† foo.bundle æ–‡ä»¶ sh # in HostB/foo $ git remote -v # output: # origin \u003cpath_to_foo.bundle\u003e (fetch) # origin \u003cpath_to_foo.bundle\u003e (push) ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:2:2","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#hostb-ä¸Šå…‹éš†ä»“åº“"},{"categories":["Git"],"content":" HostA ä¸Šç»§ç»­æ›´æ–°ç°åœ¨å‡è®¾ HostA ä¸Šçš„ foo ä»“åº“å¤šæ›´æ–°äº†å‡ ä¸ª commitï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š text * 9ac69b0 (HEAD -\u003e main) add 5.txt -- new commit * 0350a1e add 4.txt -- new commit * 21486d5 add 3.txt * a051186 add 2.txt * 2820a6c add 1.txt æˆ‘ä»¬æƒ³è¦æŠŠ HostA ä¸Šè¿™ä¸¤ä¸ªæ–°çš„ commit æ‰“åŒ…ğŸ“¦åå‘é€ç»™ HostB è®© HostB å¯ä»¥å’Œ HostA ä¿æŒåŒæ­¥ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ git æä¾›çš„æŒ‡å®š commit range çš„è¯­æ³•ï¼Œé€‰ä¸­è¿™ä¸¤ä¸ª commits1 sh # in HostA/foo # let's verify what will be bundled first $ git log --oneline 21486d5..main $ git bundle create increment.bundle 21486d5..main ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:2:3","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#hosta-ä¸Šç»§ç»­æ›´æ–°"},{"categories":["Git"],"content":" HostB ä¸Šå¢é‡æ›´æ–°ç°åœ¨å‡è®¾ HostB æ‹¿åˆ°äº† increment.bundleï¼Œé‚£ä¹ˆç”¨ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æå–é‡Œé¢çš„ commits sh # in HostB/foo # syntax: git fetch \u003cBUNDLE_FILE\u003e \u003cBRANCH_IN_BUNDLE\u003e:\u003cBRANCH_IN_LOCAL_REPO\u003e $ git fetch increment.bundle main:feature ä¸Šé¢è¿™ä¸ªå‘½ä»¤ä¼šå°† increment.bundle æ–‡ä»¶åŒ…å«çš„ commit æ”¾åˆ°æ–°çš„ feature åˆ†æ”¯ä¸Š sh # in HostB/foo $ git log --oneline --graph --all # output: # * 9ac69b0 (feature) add 5.txt # * 0350a1e add 4.txt # * 21486d5 (HEAD -\u003e main, origin/main, origin/HEAD) add 3.txt # * a051186 add 2.txt # * 2820a6c add 1.txt ç¡®å®šæ²¡æœ‰é—®é¢˜ä¹‹åæˆ‘ä»¬å¯ä»¥å°è¯•åˆå¹¶ feature åˆ†æ”¯ï¼Œå¹¶åˆ é™¤ feature åˆ†æ”¯ sh # in HostB/foo $ git merge feature $ git branch -d feature $ git log --oneline --graph --all # output: # * 9ac69b0 (HEAD -\u003e main) add 5.txt # * 0350a1e add 4.txt # * 21486d5 (origin/main, origin/HEAD) add 3.txt # * a051186 add 2.txt # * 2820a6c add 1.txt ğŸ¤”ï¸ é‚£ä¹ˆèƒ½å¦ç›´æ¥å°† increment.bundle æ–‡ä»¶é‡Œçš„ commits åˆå¹¶åˆ° HostB çš„ foo çš„ main åˆ†æ”¯ä¸Šå‘¢ï¼Ÿä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå‘½ä»¤æ˜¯ï¼šgit pull increment.bundle main:mainï¼Œä½†æ˜¯å¹¶ä¸å»ºè®®è¿™ä¹ˆåšï¼Œå› ä¸º HostB/foo ä¹Ÿæœ‰å¯èƒ½æ›´æ–°äº†ä»“åº“ï¼Œå…ˆ fetch å† merge æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ ä½ å¯èƒ½è¿˜è®°å¾—ï¼ŒHostB ä¸Šçš„ foo è¿™ä¸ªä»“åº“çš„è¿œç¨‹åˆ†æ”¯è¢«è®¾ç½®ä¸ºæŸä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆèƒ½å¦åƒä¸€èˆ¬ä½¿ç”¨ git é‚£æ ·ç›´æ¥ git pull å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°† increment.bundle æ–‡ä»¶é‡å‘½åä¸º foo.bundle æ–‡ä»¶ç„¶åæ”¾åœ¨ git remote -v æ˜¾ç¤ºçš„è·¯å¾„å°±è¡Œï¼ˆå½“ç„¶æ”¹ remote ä¿¡æ¯ä¹Ÿå¯ï¼‰ ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:2:4","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#hostb-ä¸Šå¢é‡æ›´æ–°"},{"categories":["Git"],"content":" FAQæ€ä¹ˆçŸ¥é“ bundle æ–‡ä»¶é‡Œé¢æœ‰ä»€ä¹ˆåˆ†æ”¯å¯ä»¥ç”¨å‘¢ï¼Ÿä¸‹é¢çš„å‘½ä»¤å¯ä»¥æ˜¾ç¤º bundle æ–‡ä»¶é‡Œé¢æ‰€æœ‰çš„åˆ†æ”¯ sh # syntax: git bundle list-heads \u003cBUNDLE_FILE\u003e $ git bundle list-heads increment.bundle # output: 9ac69b08060859bc4b2172a8238cb841846ec5e0 refs/heads/main æ€ä¹ˆç¡®å®šä¸€ä¸ª bundle æ–‡ä»¶èƒ½å¦ç”¨äºå½“å‰çš„æŸä¸ª git ä»“åº“ä¸Šå‘¢ï¼Ÿåªéœ€è¦å°† bundle æ–‡ä»¶æ”¾åœ¨è¿™ä¸ª git ä»“åº“é‡Œç„¶åè¿è¡Œ git bundle verify sh # in HostB/foo # syntax: git bundle verify \u003cBUNDLE_FILE\u003e $ git bundle verify increment.bundle # output: # The bundle contains this ref: # 9ac69b08060859bc4b2172a8238cb841846ec5e0 refs/heads/main # The bundle requires this ref: # 21486d53326de40678a54159de656714a59b8d09 # The bundle uses this hash algorithm: sha1 # increment.bundle is okay ä»ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹åˆ°ï¼Œincrement.bundle è¦æ±‚ä»“åº“æœ‰ 21486d5 è¿™ä¸ª commit æ‰èƒ½å¤Ÿè¢«ç”¨æ¥æ›´æ–°ã€‚å‰é¢çš„ HostB/foo åœ¨åŒæ­¥ä¹‹å‰çš„æœ€åä¸€ä¸ª commit å°±æ˜¯è¿™ä¸ª ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:3:0","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#faq"},{"categories":["Git"],"content":" æ€»ç»“git bundle æ‰“åŒ… git ä»“åº“è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œç»“åˆé€‰å– commit range çš„è¯­æ³•è¿˜å¯ä»¥åªé€‰ä¸­éƒ¨åˆ† commits å¢é‡æ›´æ–°ï¼Œè¿™æ ·è¿™ä¸ª bundle æ–‡ä»¶å°±ä¸ä¼šå¤ªå¤§ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œä¼ è¾“ã€‚æœ€é‡è¦çš„æ˜¯å®ƒä¿ç•™äº†æ‰€æœ‰çš„ git å†å²ğŸ‘ ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:4:0","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#æ€»ç»“"},{"categories":["Git"],"content":" å‚è€ƒ Git Revision SelectionÂ â†©ï¸ ","date":"2023-06-16","objectID":"/zh-cn/git-bundle-tutorial/:5:0","series":null,"tags":["Git"],"title":"Git Bundle æŒ‡å—","uri":"/zh-cn/git-bundle-tutorial/#å‚è€ƒ"},{"categories":["GNN"],"content":"ç”¨ MPNN æ¡†æ¶è§£è¯»å›¾ç¥ç»ç½‘ç»œä¸­çš„ GAT","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/"},{"categories":["GNN"],"content":" ä»€ä¹ˆæ˜¯ MPNN æ¡†æ¶Justin Gilmer æå‡ºäº† MPNNï¼ˆMessage Passing Neural Networkï¼‰æ¡†æ¶1 ï¼Œç”¨äºæè¿°è¢«ç”¨æ¥åšå›¾ä¸Šçš„ç›‘ç£å­¦ä¹ çš„å›¾ç¥ç»ç½‘ç»œæ¨¡å‹ã€‚æˆ‘å‘ç°è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„æ¡†æ¶ï¼Œå¯ä»¥å¾ˆå¥½ç†è§£ä¸åŒçš„ GNN æ¨¡å‹æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ–¹ä¾¿å¿«é€Ÿå¼„æ¸…æ¥šä¸åŒçš„ GNN æ¨¡å‹ä¹‹é—´çš„å·®åˆ«ã€‚æˆ‘ä»¬è€ƒè™‘å›¾ $G$ ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ $v$ï¼Œå®ƒçš„å‘é‡è¡¨ç¤º $h_v$ çš„æ›´æ–°æ–¹å¼å¦‚ä¸‹ï¼š $$m_v^{t+1}=\\sum_{u\\in \\mathcal{N}(v)}M_t(h_v^t,h_u^t,e_{vu})$$ $$h_v^{t+1}=U_t(h_v^t,m_v^{t+1})$$ å…¶ä¸­ $u$ ä¸º $v$ çš„é‚»å±…èŠ‚ç‚¹ï¼Œ$\\mathcal{N}(v)$ åˆ™è¡¨ç¤ºèŠ‚ç‚¹ $v$ çš„æ‰€æœ‰é‚»å±… $e_{vu}$ æ˜¯å¯é€‰é¡¹ï¼Œè¡¨ç¤ºè¾¹ä¸Šçš„ç‰¹å¾ï¼ˆè‹¥æœ‰ï¼‰ $M_t$ æ˜¯æ¶ˆæ¯å‡½æ•°ï¼Œ$m_v^{t+1}$ å°±æ˜¯æ‰€æœ‰é‚»å±…èŠ‚ç‚¹çš„æ¶ˆæ¯èšåˆä¹‹åçš„ç»“æœ $U_t$ æ˜¯èŠ‚ç‚¹æ›´æ–°å‡½æ•° åœ¨æ›´æ–°å®Œå›¾ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºä¹‹åï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è¦åšå›¾çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡ï¼Œåœ¨ MPNN æ¡†æ¶ä¸­å¯¹åº”ä¸ºï¼š $$\\hat y=R({h_v^T|v\\in G})$$ å…¶ä¸­ï¼š $R$ ä¸ºå›¾è¯»å‡ºå‡½æ•°ï¼Œè¾“å…¥æ˜¯å›¾ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºï¼Œè¾“å‡ºä¸ºä¸€ä¸ªç‰¹å¾å‘é‡ç”¨äºå›¾çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:1:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#ä»€ä¹ˆæ˜¯-mpnn-æ¡†æ¶"},{"categories":["GNN"],"content":" ä»€ä¹ˆæ˜¯ GAT ğŸ§ æˆ‘å‘ç°å°†è®ºæ–‡çš„å…¬å¼å’Œå…·ä½“çš„ä»£ç è”ç³»èµ·æ¥æ€»æ˜¯èƒ½å¤Ÿå¸®åŠ©ç†è§£ï¼Œå› æ­¤ä¸‹é¢å…³äº GAT å…¬å¼çš„è®²è§£æˆ‘ä¼šåœ¨ç”¨ MPNN æ¡†æ¶çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶é™„ä¸Šç›¸å…³çš„ä»£ç ï¼ˆç”¨ ... è¡¨ç¤ºå…¶ä»–çœç•¥çš„éƒ¨åˆ†ï¼‰ã€‚ä»£ç æ¥è‡ªäº DGL å®˜æ–¹æä¾›çš„ GAT æ¨¡å—çš„æºç  ğŸ§ GAT å¯ä»¥æ–¹ä¾¿å †å å¤šå±‚ï¼Œä¸‹é¢çš„è®¨è®ºéƒ½æ˜¯ä»æŸä¸€å±‚ $l$çš„æŸä¸ªèŠ‚ç‚¹ $v$ çš„è§’åº¦æ¥è°ˆçš„ Step 1. å¯¹èŠ‚ç‚¹åšçº¿æ€§å˜æ¢$$h_v^{l}=W^lh_v^{l}$$ è®¾æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºçš„é•¿åº¦ä¸º $F$ï¼Œåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå¯¹å›¾ä¸Šæ¯ä¸ªç»“ç‚¹çš„å‘é‡å…ˆåšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå…¶ä¸­ $W\\in\\mathcal{R}^{Fâ€™\\times F}$, å› æ­¤æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡éƒ½æ›´æ–°é•¿åº¦ä¸º $Fâ€™$ã€‚ä¸ºäº†åŒºåˆ†ä¸åŒå±‚çš„å‘é‡ï¼Œç”¨ä¸Šè§’æ ‡ $l$ è¡¨ç¤ºè¿™æ˜¯ç¬¬ $l$ å±‚çš„ã€‚æ³¨æ„åœ¨ç¬¬ $l$ å±‚ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å…±ç”¨åŒä¸€ä¸ªæƒé‡çŸ©é˜µ $W$ ğŸ“’ æ³¨æ„åé¢çš„ $h_v^l$ æˆ–è€… $h_u^l$ éƒ½æ˜¯ç»è¿‡çº¿æ€§å˜æ¢ä¹‹åçš„ python class GATConv(nn.Module): def __init__(self, ...): ... self.fc = nn.Linear( self._in_src_feats, out_feats * num_heads, bias=False ) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" ... src_prefix_shape = dst_prefix_shape = feat.shape[:-1] h_src = h_dst = self.feat_drop(feat) # h_src: (N, *, D_in) feat_src = feat_dst = self.fc(h_src).view( *src_prefix_shape, self._num_heads, self._out_feats ) # feat_src/feat_dst: (N, *, num_heads, out_feat) ... æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­çš„ h_src ä¼šå‡ºæ¥ä¸¤ä¸ªä¸€æ ·çš„ feat_src å’Œ feat_dst æ˜¯å› ä¸º DGL é‡‡ç”¨äº†æ•°å­¦ä¸Šç­‰ä»·ä½†æ˜¯è®¡ç®—æ•ˆç‡ä¼šæ›´é«˜çš„å®ç°ã€‚åé¢ä¼šè§£é‡Š Step 2. è®¡ç®—æ³¨æ„åŠ›$$e_{vu}^l=LeakyReLU\\Big((a^l)^T[h_v^{l}||h_u^{l}]\\Big)$$ $$\\alpha_{vu}^l=Softmax_u(e_{vu}^l)$$ ç¬¬äºŒæ­¥å°±æ˜¯è¦è®¡ç®—ä¸­å¿ƒèŠ‚ç‚¹ $v$ å’Œå®ƒçš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´çš„æ³¨æ„åŠ›äº†ã€‚åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼š $e_{vu}^l$ è¡¨ç¤ºæ³¨æ„åŠ›ç³»æ•°ï¼ˆattention coefficientï¼‰ã€‚è®ºæ–‡ä¸­æåˆ°å®Œå…¨å¯ä»¥é‡‡ç”¨ä¸åŒçš„æ³¨æ„åŠ›è®¡ç®—æ–¹å¼ï¼Œåœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…é€‰æ‹©ç”¨ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œè®¡ç®—æ³¨æ„åŠ›2ã€‚æ³¨æ„è¿™é‡Œçš„ $e_{vu}^l$ è·Ÿ MPNN çš„ $e_{vu}$ æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œåªæ˜¯æ°å¥½è®°å·ä¸€æ ·äº†è€Œå·² $||$ è¡¨ç¤ºæ‹¼æ¥æ“ä½œï¼Œå³æˆ‘ä»¬ä¼šå°†ä¸­å¿ƒèŠ‚ç‚¹å’Œå®ƒå¯¹åº”çš„é‚»å±…ç»“ç‚¹çš„å‘é‡è¡¨ç¤ºæ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º $2Fâ€™$ çš„å‘é‡ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $[h_v^{l}||h_u^{l}]$ï¼Œç„¶åæŠŠå®ƒé€å…¥åˆ°å‰é¢æåˆ°çš„ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $(a^l)^T[h_v^{l}||h_u^{l}]$ï¼Œå…¶ä¸­ $(a^l)^T$ æŒ‡çš„æ˜¯ç¬¬ $l$ å±‚çš„å•å±‚å‰é¦ˆç¥ç»ç½‘ç»œçš„å‚æ•° æ¿€æ´»å‡½æ•°é€‰ç”¨çš„æ˜¯ $LeakyReLU$ æœ€ååœ¨èŠ‚ç‚¹ $v$ çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´ç”¨ Softmax åšå½’ä¸€åŒ– ğŸ¤”ï¸ æ­¥éª¤ä¸€å’Œæ­¥éª¤äºŒå¯¹åº” MPNN æ¡†æ¶çš„ $m_v^{t+1}$ çš„è®¡ç®— å¤šå¤´æ³¨æ„åŠ›æ­£å¦‚ Transformer ä¸­æœ‰å¤šå¤´æ³¨æ„åŠ›ä¸€æ ·ï¼ŒGAT çš„ä½œè€…åŒæ ·åœ¨èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™é‡‡ç”¨äº†å¤šå¤´æ³¨æ„åŠ›çš„æœºåˆ¶ï¼š $$h_v^{l+1}= ||^{K^l} \\sigma(\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,l)}W^{(k,l)}h_u^{l})$$ è®°å·è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œä½†æ˜¯ä»”ç»†æ€ç´¢ä¸€ç•ªè¿˜æ˜¯å¯ä»¥ç†æ¸…æ¥šçš„ï¼Œä¸Šè§’æ ‡ $(k,l)$ çš„æ„æ€æ˜¯ç¬¬ $l$ å±‚çš„ç¬¬ $k$ ä¸ªå¤´ã€‚å…¶ä¸­ $K^l$ ä¸ºç¬¬ $l$ å±‚â€œå¤´â€çš„æ•°é‡ã€‚ä¸Šé¢çš„å…¬å¼çš„æ„æ€å°±æ˜¯æ¯ä¸ªâ€œå¤´â€ä¼šè®¡ç®—å‡ºä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œç„¶åä¸åŒâ€œå¤´â€ä¹‹é—´çš„ä¼šæ‹¼æ¥èµ·æ¥ python class GATConv(nn.Module): def __init__(self, ...): ... self.attn_l = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.attn_r = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.leaky_relu = nn.LeakyReLU(negative_slope) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" # feat_src/feat_dst: (N, *, num_heads, out_feat) el = (feat_src * self.attn_l).sum(dim=-1).unsqueeze(-1) er = (feat_dst * self.attn_r).sum(dim=-1).unsqueeze(-1) # el/er: (N, *, num_heads, 1) graph.srcdata.update({\"ft\": feat_src, \"el\": el}) graph.dstdata.update({\"er\": er}) graph.apply_edges(fn.u_add_v(\"el\", \"er\", \"e\")) e = self.leaky_relu(graph.edata.pop(\"e\")) # e: (N, *, num_heads, 1) # normalization graph.edata[\"a\"] = self.attn_drop(edge_softmax(graph, e)) # a: (N, *, num_heads, 1) # weighted sum graph.update_all( # ft: (N, *, num_heads, out_feat) # a: (N, *, num_heads, 1) # m: (N, *, num_heads, out_feat) fn.u_mul_e(\"ft\", \"a\", \"m\"), fn.sum(\"m\", \"ft\") ) rst = graph.dstdata[\"ft\"] # rst: (N, *, num_heads, out_feat) ... DGL çš„å®ç°åŸºäºä¸‹é¢è¿™ä¸ªäº‹å®ï¼š $$a^T[h_v||h_u]=a_l^Th_v+a_r^Th_u$$ ä¸ºä»€ä¹ˆä¼šæ›´ä¸ºé«˜æ•ˆå‘¢ï¼Ÿ ä¸éœ€è¦å­˜å‚¨ $[h_v||h_u]$ è¿™ä¸ªä¸­é—´å˜é‡äº†ï¼ˆDGL ä¼šå°†æ¶ˆæ¯å­˜å‚¨ä¸ºè¾¹çš„å±æ€§ï¼‰ åŠ æ³•å¯ä»¥ç”¨ DGL ä¼˜åŒ–è¿‡çš„ fn.u_add_v å‡½æ•° Step 3. èšåˆé‚»å±…æ¶ˆæ¯æœ€åèŠ‚ç‚¹æ›´æ–°çš„æ–¹å¼å°±æ˜¯è®¡ç®—é‚»å±…çš„å‘é‡è¡¨ç¤ºçš„åŠ æƒå’Œï¼ˆåŸºäºå‰é¢ç®—å¥½çš„æ³¨æ„åŠ›ï¼‰ï¼š $$h_v^{l+1}=\\sigma(\\sum_{u\\in \\mathcal{N}(i)}\\alpha_{vu}W^{l}h_u^{l})$$ ğŸ¤”ï¸ ä¸Šé¢å°±å¯¹åº” MPNN æ¡†æ¶ä¸­çš„ $h_v^{t+1}$ çš„è®¡ç®—ï¼Œæ³¨æ„ GAT ç®— $h_t^{l+1}$ çš„æ—¶å€™å¹¶ä¸ä¼šç”¨åˆ°è‡ªå·±ä¸Šä¸€å±‚è¡¨ç¤º $h_t^l$ã€‚åŒæ—¶ GAT çš„æå‡ºæ˜¯ç”¨äºè§£å†³å›¾ä¸Šçš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å›¾è¯»å‡ºçš„æ“ä½œã€‚ åœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…æ˜¯è¦å°† GAT ç”¨äºèŠ‚ç‚¹çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡2ã€‚å‡è®¾æˆ‘ä»¬å †å äº† $L$ å±‚çš„ GAT ä¹‹åï¼Œåœ¨æœ€åä¸€å±‚å¦‚æœè¿˜é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚å› æ­¤ä½œè€…åœ¨æœ€åä¸€å±‚ GAT ä¸­ï¼Œæ˜¯å–å¤šä¸ªå¤´çš„å¹³å‡å€¼ä¹‹åæ‰åº”ç”¨äº†æ¿€æ´»å‡½æ•°ï¼Œè¿™é‡Œçš„æ¿€æ´»å‡½æ•°å¦‚æœé‡‡ç”¨ Softmaxï¼Œå°±å¯ä»¥ç›´æ¥åšèŠ‚ç‚¹åˆ†ç±»äº†2ã€‚å…¬å¼å¦‚ä¸‹æ‰€ç¤º: $$final\\ embedding\\ of\\ h_v= \\sigma\\Big(\\frac{1}{K^L}\\sum_{k=1}^{K^L}\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,L)}W^{(k,L)}h_u^{L}\\Big)$$ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:2:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#ä»€ä¹ˆæ˜¯-gat"},{"categories":["GNN"],"content":" ä»€ä¹ˆæ˜¯ GAT ğŸ§ æˆ‘å‘ç°å°†è®ºæ–‡çš„å…¬å¼å’Œå…·ä½“çš„ä»£ç è”ç³»èµ·æ¥æ€»æ˜¯èƒ½å¤Ÿå¸®åŠ©ç†è§£ï¼Œå› æ­¤ä¸‹é¢å…³äº GAT å…¬å¼çš„è®²è§£æˆ‘ä¼šåœ¨ç”¨ MPNN æ¡†æ¶çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶é™„ä¸Šç›¸å…³çš„ä»£ç ï¼ˆç”¨ ... è¡¨ç¤ºå…¶ä»–çœç•¥çš„éƒ¨åˆ†ï¼‰ã€‚ä»£ç æ¥è‡ªäº DGL å®˜æ–¹æä¾›çš„ GAT æ¨¡å—çš„æºç  ğŸ§ GAT å¯ä»¥æ–¹ä¾¿å †å å¤šå±‚ï¼Œä¸‹é¢çš„è®¨è®ºéƒ½æ˜¯ä»æŸä¸€å±‚ $l$çš„æŸä¸ªèŠ‚ç‚¹ $v$ çš„è§’åº¦æ¥è°ˆçš„ Step 1. å¯¹èŠ‚ç‚¹åšçº¿æ€§å˜æ¢$$h_v^{l}=W^lh_v^{l}$$ è®¾æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºçš„é•¿åº¦ä¸º $F$ï¼Œåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå¯¹å›¾ä¸Šæ¯ä¸ªç»“ç‚¹çš„å‘é‡å…ˆåšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå…¶ä¸­ $W\\in\\mathcal{R}^{Fâ€™\\times F}$, å› æ­¤æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡éƒ½æ›´æ–°é•¿åº¦ä¸º $Fâ€™$ã€‚ä¸ºäº†åŒºåˆ†ä¸åŒå±‚çš„å‘é‡ï¼Œç”¨ä¸Šè§’æ ‡ $l$ è¡¨ç¤ºè¿™æ˜¯ç¬¬ $l$ å±‚çš„ã€‚æ³¨æ„åœ¨ç¬¬ $l$ å±‚ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å…±ç”¨åŒä¸€ä¸ªæƒé‡çŸ©é˜µ $W$ ğŸ“’ æ³¨æ„åé¢çš„ $h_v^l$ æˆ–è€… $h_u^l$ éƒ½æ˜¯ç»è¿‡çº¿æ€§å˜æ¢ä¹‹åçš„ python class GATConv(nn.Module): def __init__(self, ...): ... self.fc = nn.Linear( self._in_src_feats, out_feats * num_heads, bias=False ) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" ... src_prefix_shape = dst_prefix_shape = feat.shape[:-1] h_src = h_dst = self.feat_drop(feat) # h_src: (N, *, D_in) feat_src = feat_dst = self.fc(h_src).view( *src_prefix_shape, self._num_heads, self._out_feats ) # feat_src/feat_dst: (N, *, num_heads, out_feat) ... æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­çš„ h_src ä¼šå‡ºæ¥ä¸¤ä¸ªä¸€æ ·çš„ feat_src å’Œ feat_dst æ˜¯å› ä¸º DGL é‡‡ç”¨äº†æ•°å­¦ä¸Šç­‰ä»·ä½†æ˜¯è®¡ç®—æ•ˆç‡ä¼šæ›´é«˜çš„å®ç°ã€‚åé¢ä¼šè§£é‡Š Step 2. è®¡ç®—æ³¨æ„åŠ›$$e_{vu}^l=LeakyReLU\\Big((a^l)^T[h_v^{l}||h_u^{l}]\\Big)$$ $$\\alpha_{vu}^l=Softmax_u(e_{vu}^l)$$ ç¬¬äºŒæ­¥å°±æ˜¯è¦è®¡ç®—ä¸­å¿ƒèŠ‚ç‚¹ $v$ å’Œå®ƒçš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´çš„æ³¨æ„åŠ›äº†ã€‚åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼š $e_{vu}^l$ è¡¨ç¤ºæ³¨æ„åŠ›ç³»æ•°ï¼ˆattention coefficientï¼‰ã€‚è®ºæ–‡ä¸­æåˆ°å®Œå…¨å¯ä»¥é‡‡ç”¨ä¸åŒçš„æ³¨æ„åŠ›è®¡ç®—æ–¹å¼ï¼Œåœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…é€‰æ‹©ç”¨ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œè®¡ç®—æ³¨æ„åŠ›2ã€‚æ³¨æ„è¿™é‡Œçš„ $e_{vu}^l$ è·Ÿ MPNN çš„ $e_{vu}$ æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œåªæ˜¯æ°å¥½è®°å·ä¸€æ ·äº†è€Œå·² $||$ è¡¨ç¤ºæ‹¼æ¥æ“ä½œï¼Œå³æˆ‘ä»¬ä¼šå°†ä¸­å¿ƒèŠ‚ç‚¹å’Œå®ƒå¯¹åº”çš„é‚»å±…ç»“ç‚¹çš„å‘é‡è¡¨ç¤ºæ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º $2Fâ€™$ çš„å‘é‡ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $[h_v^{l}||h_u^{l}]$ï¼Œç„¶åæŠŠå®ƒé€å…¥åˆ°å‰é¢æåˆ°çš„ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $(a^l)^T[h_v^{l}||h_u^{l}]$ï¼Œå…¶ä¸­ $(a^l)^T$ æŒ‡çš„æ˜¯ç¬¬ $l$ å±‚çš„å•å±‚å‰é¦ˆç¥ç»ç½‘ç»œçš„å‚æ•° æ¿€æ´»å‡½æ•°é€‰ç”¨çš„æ˜¯ $LeakyReLU$ æœ€ååœ¨èŠ‚ç‚¹ $v$ çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´ç”¨ Softmax åšå½’ä¸€åŒ– ğŸ¤”ï¸ æ­¥éª¤ä¸€å’Œæ­¥éª¤äºŒå¯¹åº” MPNN æ¡†æ¶çš„ $m_v^{t+1}$ çš„è®¡ç®— å¤šå¤´æ³¨æ„åŠ›æ­£å¦‚ Transformer ä¸­æœ‰å¤šå¤´æ³¨æ„åŠ›ä¸€æ ·ï¼ŒGAT çš„ä½œè€…åŒæ ·åœ¨èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™é‡‡ç”¨äº†å¤šå¤´æ³¨æ„åŠ›çš„æœºåˆ¶ï¼š $$h_v^{l+1}= ||^{K^l} \\sigma(\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,l)}W^{(k,l)}h_u^{l})$$ è®°å·è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œä½†æ˜¯ä»”ç»†æ€ç´¢ä¸€ç•ªè¿˜æ˜¯å¯ä»¥ç†æ¸…æ¥šçš„ï¼Œä¸Šè§’æ ‡ $(k,l)$ çš„æ„æ€æ˜¯ç¬¬ $l$ å±‚çš„ç¬¬ $k$ ä¸ªå¤´ã€‚å…¶ä¸­ $K^l$ ä¸ºç¬¬ $l$ å±‚â€œå¤´â€çš„æ•°é‡ã€‚ä¸Šé¢çš„å…¬å¼çš„æ„æ€å°±æ˜¯æ¯ä¸ªâ€œå¤´â€ä¼šè®¡ç®—å‡ºä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œç„¶åä¸åŒâ€œå¤´â€ä¹‹é—´çš„ä¼šæ‹¼æ¥èµ·æ¥ python class GATConv(nn.Module): def __init__(self, ...): ... self.attn_l = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.attn_r = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.leaky_relu = nn.LeakyReLU(negative_slope) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" # feat_src/feat_dst: (N, *, num_heads, out_feat) el = (feat_src * self.attn_l).sum(dim=-1).unsqueeze(-1) er = (feat_dst * self.attn_r).sum(dim=-1).unsqueeze(-1) # el/er: (N, *, num_heads, 1) graph.srcdata.update({\"ft\": feat_src, \"el\": el}) graph.dstdata.update({\"er\": er}) graph.apply_edges(fn.u_add_v(\"el\", \"er\", \"e\")) e = self.leaky_relu(graph.edata.pop(\"e\")) # e: (N, *, num_heads, 1) # normalization graph.edata[\"a\"] = self.attn_drop(edge_softmax(graph, e)) # a: (N, *, num_heads, 1) # weighted sum graph.update_all( # ft: (N, *, num_heads, out_feat) # a: (N, *, num_heads, 1) # m: (N, *, num_heads, out_feat) fn.u_mul_e(\"ft\", \"a\", \"m\"), fn.sum(\"m\", \"ft\") ) rst = graph.dstdata[\"ft\"] # rst: (N, *, num_heads, out_feat) ... DGL çš„å®ç°åŸºäºä¸‹é¢è¿™ä¸ªäº‹å®ï¼š $$a^T[h_v||h_u]=a_l^Th_v+a_r^Th_u$$ ä¸ºä»€ä¹ˆä¼šæ›´ä¸ºé«˜æ•ˆå‘¢ï¼Ÿ ä¸éœ€è¦å­˜å‚¨ $[h_v||h_u]$ è¿™ä¸ªä¸­é—´å˜é‡äº†ï¼ˆDGL ä¼šå°†æ¶ˆæ¯å­˜å‚¨ä¸ºè¾¹çš„å±æ€§ï¼‰ åŠ æ³•å¯ä»¥ç”¨ DGL ä¼˜åŒ–è¿‡çš„ fn.u_add_v å‡½æ•° Step 3. èšåˆé‚»å±…æ¶ˆæ¯æœ€åèŠ‚ç‚¹æ›´æ–°çš„æ–¹å¼å°±æ˜¯è®¡ç®—é‚»å±…çš„å‘é‡è¡¨ç¤ºçš„åŠ æƒå’Œï¼ˆåŸºäºå‰é¢ç®—å¥½çš„æ³¨æ„åŠ›ï¼‰ï¼š $$h_v^{l+1}=\\sigma(\\sum_{u\\in \\mathcal{N}(i)}\\alpha_{vu}W^{l}h_u^{l})$$ ğŸ¤”ï¸ ä¸Šé¢å°±å¯¹åº” MPNN æ¡†æ¶ä¸­çš„ $h_v^{t+1}$ çš„è®¡ç®—ï¼Œæ³¨æ„ GAT ç®— $h_t^{l+1}$ çš„æ—¶å€™å¹¶ä¸ä¼šç”¨åˆ°è‡ªå·±ä¸Šä¸€å±‚è¡¨ç¤º $h_t^l$ã€‚åŒæ—¶ GAT çš„æå‡ºæ˜¯ç”¨äºè§£å†³å›¾ä¸Šçš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å›¾è¯»å‡ºçš„æ“ä½œã€‚ åœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…æ˜¯è¦å°† GAT ç”¨äºèŠ‚ç‚¹çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡2ã€‚å‡è®¾æˆ‘ä»¬å †å äº† $L$ å±‚çš„ GAT ä¹‹åï¼Œåœ¨æœ€åä¸€å±‚å¦‚æœè¿˜é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚å› æ­¤ä½œè€…åœ¨æœ€åä¸€å±‚ GAT ä¸­ï¼Œæ˜¯å–å¤šä¸ªå¤´çš„å¹³å‡å€¼ä¹‹åæ‰åº”ç”¨äº†æ¿€æ´»å‡½æ•°ï¼Œè¿™é‡Œçš„æ¿€æ´»å‡½æ•°å¦‚æœé‡‡ç”¨ Softmaxï¼Œå°±å¯ä»¥ç›´æ¥åšèŠ‚ç‚¹åˆ†ç±»äº†2ã€‚å…¬å¼å¦‚ä¸‹æ‰€ç¤º: $$final\\ embedding\\ of\\ h_v= \\sigma\\Big(\\frac{1}{K^L}\\sum_{k=1}^{K^L}\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,L)}W^{(k,L)}h_u^{L}\\Big)$$ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:2:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#step-1-å¯¹èŠ‚ç‚¹åšçº¿æ€§å˜æ¢"},{"categories":["GNN"],"content":" ä»€ä¹ˆæ˜¯ GAT ğŸ§ æˆ‘å‘ç°å°†è®ºæ–‡çš„å…¬å¼å’Œå…·ä½“çš„ä»£ç è”ç³»èµ·æ¥æ€»æ˜¯èƒ½å¤Ÿå¸®åŠ©ç†è§£ï¼Œå› æ­¤ä¸‹é¢å…³äº GAT å…¬å¼çš„è®²è§£æˆ‘ä¼šåœ¨ç”¨ MPNN æ¡†æ¶çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶é™„ä¸Šç›¸å…³çš„ä»£ç ï¼ˆç”¨ ... è¡¨ç¤ºå…¶ä»–çœç•¥çš„éƒ¨åˆ†ï¼‰ã€‚ä»£ç æ¥è‡ªäº DGL å®˜æ–¹æä¾›çš„ GAT æ¨¡å—çš„æºç  ğŸ§ GAT å¯ä»¥æ–¹ä¾¿å †å å¤šå±‚ï¼Œä¸‹é¢çš„è®¨è®ºéƒ½æ˜¯ä»æŸä¸€å±‚ $l$çš„æŸä¸ªèŠ‚ç‚¹ $v$ çš„è§’åº¦æ¥è°ˆçš„ Step 1. å¯¹èŠ‚ç‚¹åšçº¿æ€§å˜æ¢$$h_v^{l}=W^lh_v^{l}$$ è®¾æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºçš„é•¿åº¦ä¸º $F$ï¼Œåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå¯¹å›¾ä¸Šæ¯ä¸ªç»“ç‚¹çš„å‘é‡å…ˆåšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå…¶ä¸­ $W\\in\\mathcal{R}^{Fâ€™\\times F}$, å› æ­¤æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡éƒ½æ›´æ–°é•¿åº¦ä¸º $Fâ€™$ã€‚ä¸ºäº†åŒºåˆ†ä¸åŒå±‚çš„å‘é‡ï¼Œç”¨ä¸Šè§’æ ‡ $l$ è¡¨ç¤ºè¿™æ˜¯ç¬¬ $l$ å±‚çš„ã€‚æ³¨æ„åœ¨ç¬¬ $l$ å±‚ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å…±ç”¨åŒä¸€ä¸ªæƒé‡çŸ©é˜µ $W$ ğŸ“’ æ³¨æ„åé¢çš„ $h_v^l$ æˆ–è€… $h_u^l$ éƒ½æ˜¯ç»è¿‡çº¿æ€§å˜æ¢ä¹‹åçš„ python class GATConv(nn.Module): def __init__(self, ...): ... self.fc = nn.Linear( self._in_src_feats, out_feats * num_heads, bias=False ) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" ... src_prefix_shape = dst_prefix_shape = feat.shape[:-1] h_src = h_dst = self.feat_drop(feat) # h_src: (N, *, D_in) feat_src = feat_dst = self.fc(h_src).view( *src_prefix_shape, self._num_heads, self._out_feats ) # feat_src/feat_dst: (N, *, num_heads, out_feat) ... æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­çš„ h_src ä¼šå‡ºæ¥ä¸¤ä¸ªä¸€æ ·çš„ feat_src å’Œ feat_dst æ˜¯å› ä¸º DGL é‡‡ç”¨äº†æ•°å­¦ä¸Šç­‰ä»·ä½†æ˜¯è®¡ç®—æ•ˆç‡ä¼šæ›´é«˜çš„å®ç°ã€‚åé¢ä¼šè§£é‡Š Step 2. è®¡ç®—æ³¨æ„åŠ›$$e_{vu}^l=LeakyReLU\\Big((a^l)^T[h_v^{l}||h_u^{l}]\\Big)$$ $$\\alpha_{vu}^l=Softmax_u(e_{vu}^l)$$ ç¬¬äºŒæ­¥å°±æ˜¯è¦è®¡ç®—ä¸­å¿ƒèŠ‚ç‚¹ $v$ å’Œå®ƒçš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´çš„æ³¨æ„åŠ›äº†ã€‚åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼š $e_{vu}^l$ è¡¨ç¤ºæ³¨æ„åŠ›ç³»æ•°ï¼ˆattention coefficientï¼‰ã€‚è®ºæ–‡ä¸­æåˆ°å®Œå…¨å¯ä»¥é‡‡ç”¨ä¸åŒçš„æ³¨æ„åŠ›è®¡ç®—æ–¹å¼ï¼Œåœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…é€‰æ‹©ç”¨ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œè®¡ç®—æ³¨æ„åŠ›2ã€‚æ³¨æ„è¿™é‡Œçš„ $e_{vu}^l$ è·Ÿ MPNN çš„ $e_{vu}$ æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œåªæ˜¯æ°å¥½è®°å·ä¸€æ ·äº†è€Œå·² $||$ è¡¨ç¤ºæ‹¼æ¥æ“ä½œï¼Œå³æˆ‘ä»¬ä¼šå°†ä¸­å¿ƒèŠ‚ç‚¹å’Œå®ƒå¯¹åº”çš„é‚»å±…ç»“ç‚¹çš„å‘é‡è¡¨ç¤ºæ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º $2Fâ€™$ çš„å‘é‡ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $[h_v^{l}||h_u^{l}]$ï¼Œç„¶åæŠŠå®ƒé€å…¥åˆ°å‰é¢æåˆ°çš„ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $(a^l)^T[h_v^{l}||h_u^{l}]$ï¼Œå…¶ä¸­ $(a^l)^T$ æŒ‡çš„æ˜¯ç¬¬ $l$ å±‚çš„å•å±‚å‰é¦ˆç¥ç»ç½‘ç»œçš„å‚æ•° æ¿€æ´»å‡½æ•°é€‰ç”¨çš„æ˜¯ $LeakyReLU$ æœ€ååœ¨èŠ‚ç‚¹ $v$ çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´ç”¨ Softmax åšå½’ä¸€åŒ– ğŸ¤”ï¸ æ­¥éª¤ä¸€å’Œæ­¥éª¤äºŒå¯¹åº” MPNN æ¡†æ¶çš„ $m_v^{t+1}$ çš„è®¡ç®— å¤šå¤´æ³¨æ„åŠ›æ­£å¦‚ Transformer ä¸­æœ‰å¤šå¤´æ³¨æ„åŠ›ä¸€æ ·ï¼ŒGAT çš„ä½œè€…åŒæ ·åœ¨èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™é‡‡ç”¨äº†å¤šå¤´æ³¨æ„åŠ›çš„æœºåˆ¶ï¼š $$h_v^{l+1}= ||^{K^l} \\sigma(\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,l)}W^{(k,l)}h_u^{l})$$ è®°å·è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œä½†æ˜¯ä»”ç»†æ€ç´¢ä¸€ç•ªè¿˜æ˜¯å¯ä»¥ç†æ¸…æ¥šçš„ï¼Œä¸Šè§’æ ‡ $(k,l)$ çš„æ„æ€æ˜¯ç¬¬ $l$ å±‚çš„ç¬¬ $k$ ä¸ªå¤´ã€‚å…¶ä¸­ $K^l$ ä¸ºç¬¬ $l$ å±‚â€œå¤´â€çš„æ•°é‡ã€‚ä¸Šé¢çš„å…¬å¼çš„æ„æ€å°±æ˜¯æ¯ä¸ªâ€œå¤´â€ä¼šè®¡ç®—å‡ºä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œç„¶åä¸åŒâ€œå¤´â€ä¹‹é—´çš„ä¼šæ‹¼æ¥èµ·æ¥ python class GATConv(nn.Module): def __init__(self, ...): ... self.attn_l = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.attn_r = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.leaky_relu = nn.LeakyReLU(negative_slope) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" # feat_src/feat_dst: (N, *, num_heads, out_feat) el = (feat_src * self.attn_l).sum(dim=-1).unsqueeze(-1) er = (feat_dst * self.attn_r).sum(dim=-1).unsqueeze(-1) # el/er: (N, *, num_heads, 1) graph.srcdata.update({\"ft\": feat_src, \"el\": el}) graph.dstdata.update({\"er\": er}) graph.apply_edges(fn.u_add_v(\"el\", \"er\", \"e\")) e = self.leaky_relu(graph.edata.pop(\"e\")) # e: (N, *, num_heads, 1) # normalization graph.edata[\"a\"] = self.attn_drop(edge_softmax(graph, e)) # a: (N, *, num_heads, 1) # weighted sum graph.update_all( # ft: (N, *, num_heads, out_feat) # a: (N, *, num_heads, 1) # m: (N, *, num_heads, out_feat) fn.u_mul_e(\"ft\", \"a\", \"m\"), fn.sum(\"m\", \"ft\") ) rst = graph.dstdata[\"ft\"] # rst: (N, *, num_heads, out_feat) ... DGL çš„å®ç°åŸºäºä¸‹é¢è¿™ä¸ªäº‹å®ï¼š $$a^T[h_v||h_u]=a_l^Th_v+a_r^Th_u$$ ä¸ºä»€ä¹ˆä¼šæ›´ä¸ºé«˜æ•ˆå‘¢ï¼Ÿ ä¸éœ€è¦å­˜å‚¨ $[h_v||h_u]$ è¿™ä¸ªä¸­é—´å˜é‡äº†ï¼ˆDGL ä¼šå°†æ¶ˆæ¯å­˜å‚¨ä¸ºè¾¹çš„å±æ€§ï¼‰ åŠ æ³•å¯ä»¥ç”¨ DGL ä¼˜åŒ–è¿‡çš„ fn.u_add_v å‡½æ•° Step 3. èšåˆé‚»å±…æ¶ˆæ¯æœ€åèŠ‚ç‚¹æ›´æ–°çš„æ–¹å¼å°±æ˜¯è®¡ç®—é‚»å±…çš„å‘é‡è¡¨ç¤ºçš„åŠ æƒå’Œï¼ˆåŸºäºå‰é¢ç®—å¥½çš„æ³¨æ„åŠ›ï¼‰ï¼š $$h_v^{l+1}=\\sigma(\\sum_{u\\in \\mathcal{N}(i)}\\alpha_{vu}W^{l}h_u^{l})$$ ğŸ¤”ï¸ ä¸Šé¢å°±å¯¹åº” MPNN æ¡†æ¶ä¸­çš„ $h_v^{t+1}$ çš„è®¡ç®—ï¼Œæ³¨æ„ GAT ç®— $h_t^{l+1}$ çš„æ—¶å€™å¹¶ä¸ä¼šç”¨åˆ°è‡ªå·±ä¸Šä¸€å±‚è¡¨ç¤º $h_t^l$ã€‚åŒæ—¶ GAT çš„æå‡ºæ˜¯ç”¨äºè§£å†³å›¾ä¸Šçš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å›¾è¯»å‡ºçš„æ“ä½œã€‚ åœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…æ˜¯è¦å°† GAT ç”¨äºèŠ‚ç‚¹çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡2ã€‚å‡è®¾æˆ‘ä»¬å †å äº† $L$ å±‚çš„ GAT ä¹‹åï¼Œåœ¨æœ€åä¸€å±‚å¦‚æœè¿˜é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚å› æ­¤ä½œè€…åœ¨æœ€åä¸€å±‚ GAT ä¸­ï¼Œæ˜¯å–å¤šä¸ªå¤´çš„å¹³å‡å€¼ä¹‹åæ‰åº”ç”¨äº†æ¿€æ´»å‡½æ•°ï¼Œè¿™é‡Œçš„æ¿€æ´»å‡½æ•°å¦‚æœé‡‡ç”¨ Softmaxï¼Œå°±å¯ä»¥ç›´æ¥åšèŠ‚ç‚¹åˆ†ç±»äº†2ã€‚å…¬å¼å¦‚ä¸‹æ‰€ç¤º: $$final\\ embedding\\ of\\ h_v= \\sigma\\Big(\\frac{1}{K^L}\\sum_{k=1}^{K^L}\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,L)}W^{(k,L)}h_u^{L}\\Big)$$ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:2:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#step-2-è®¡ç®—æ³¨æ„åŠ›"},{"categories":["GNN"],"content":" ä»€ä¹ˆæ˜¯ GAT ğŸ§ æˆ‘å‘ç°å°†è®ºæ–‡çš„å…¬å¼å’Œå…·ä½“çš„ä»£ç è”ç³»èµ·æ¥æ€»æ˜¯èƒ½å¤Ÿå¸®åŠ©ç†è§£ï¼Œå› æ­¤ä¸‹é¢å…³äº GAT å…¬å¼çš„è®²è§£æˆ‘ä¼šåœ¨ç”¨ MPNN æ¡†æ¶çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶é™„ä¸Šç›¸å…³çš„ä»£ç ï¼ˆç”¨ ... è¡¨ç¤ºå…¶ä»–çœç•¥çš„éƒ¨åˆ†ï¼‰ã€‚ä»£ç æ¥è‡ªäº DGL å®˜æ–¹æä¾›çš„ GAT æ¨¡å—çš„æºç  ğŸ§ GAT å¯ä»¥æ–¹ä¾¿å †å å¤šå±‚ï¼Œä¸‹é¢çš„è®¨è®ºéƒ½æ˜¯ä»æŸä¸€å±‚ $l$çš„æŸä¸ªèŠ‚ç‚¹ $v$ çš„è§’åº¦æ¥è°ˆçš„ Step 1. å¯¹èŠ‚ç‚¹åšçº¿æ€§å˜æ¢$$h_v^{l}=W^lh_v^{l}$$ è®¾æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºçš„é•¿åº¦ä¸º $F$ï¼Œåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå¯¹å›¾ä¸Šæ¯ä¸ªç»“ç‚¹çš„å‘é‡å…ˆåšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå…¶ä¸­ $W\\in\\mathcal{R}^{Fâ€™\\times F}$, å› æ­¤æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡éƒ½æ›´æ–°é•¿åº¦ä¸º $Fâ€™$ã€‚ä¸ºäº†åŒºåˆ†ä¸åŒå±‚çš„å‘é‡ï¼Œç”¨ä¸Šè§’æ ‡ $l$ è¡¨ç¤ºè¿™æ˜¯ç¬¬ $l$ å±‚çš„ã€‚æ³¨æ„åœ¨ç¬¬ $l$ å±‚ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å…±ç”¨åŒä¸€ä¸ªæƒé‡çŸ©é˜µ $W$ ğŸ“’ æ³¨æ„åé¢çš„ $h_v^l$ æˆ–è€… $h_u^l$ éƒ½æ˜¯ç»è¿‡çº¿æ€§å˜æ¢ä¹‹åçš„ python class GATConv(nn.Module): def __init__(self, ...): ... self.fc = nn.Linear( self._in_src_feats, out_feats * num_heads, bias=False ) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" ... src_prefix_shape = dst_prefix_shape = feat.shape[:-1] h_src = h_dst = self.feat_drop(feat) # h_src: (N, *, D_in) feat_src = feat_dst = self.fc(h_src).view( *src_prefix_shape, self._num_heads, self._out_feats ) # feat_src/feat_dst: (N, *, num_heads, out_feat) ... æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­çš„ h_src ä¼šå‡ºæ¥ä¸¤ä¸ªä¸€æ ·çš„ feat_src å’Œ feat_dst æ˜¯å› ä¸º DGL é‡‡ç”¨äº†æ•°å­¦ä¸Šç­‰ä»·ä½†æ˜¯è®¡ç®—æ•ˆç‡ä¼šæ›´é«˜çš„å®ç°ã€‚åé¢ä¼šè§£é‡Š Step 2. è®¡ç®—æ³¨æ„åŠ›$$e_{vu}^l=LeakyReLU\\Big((a^l)^T[h_v^{l}||h_u^{l}]\\Big)$$ $$\\alpha_{vu}^l=Softmax_u(e_{vu}^l)$$ ç¬¬äºŒæ­¥å°±æ˜¯è¦è®¡ç®—ä¸­å¿ƒèŠ‚ç‚¹ $v$ å’Œå®ƒçš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´çš„æ³¨æ„åŠ›äº†ã€‚åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼š $e_{vu}^l$ è¡¨ç¤ºæ³¨æ„åŠ›ç³»æ•°ï¼ˆattention coefficientï¼‰ã€‚è®ºæ–‡ä¸­æåˆ°å®Œå…¨å¯ä»¥é‡‡ç”¨ä¸åŒçš„æ³¨æ„åŠ›è®¡ç®—æ–¹å¼ï¼Œåœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…é€‰æ‹©ç”¨ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œè®¡ç®—æ³¨æ„åŠ›2ã€‚æ³¨æ„è¿™é‡Œçš„ $e_{vu}^l$ è·Ÿ MPNN çš„ $e_{vu}$ æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œåªæ˜¯æ°å¥½è®°å·ä¸€æ ·äº†è€Œå·² $||$ è¡¨ç¤ºæ‹¼æ¥æ“ä½œï¼Œå³æˆ‘ä»¬ä¼šå°†ä¸­å¿ƒèŠ‚ç‚¹å’Œå®ƒå¯¹åº”çš„é‚»å±…ç»“ç‚¹çš„å‘é‡è¡¨ç¤ºæ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º $2Fâ€™$ çš„å‘é‡ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $[h_v^{l}||h_u^{l}]$ï¼Œç„¶åæŠŠå®ƒé€å…¥åˆ°å‰é¢æåˆ°çš„ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $(a^l)^T[h_v^{l}||h_u^{l}]$ï¼Œå…¶ä¸­ $(a^l)^T$ æŒ‡çš„æ˜¯ç¬¬ $l$ å±‚çš„å•å±‚å‰é¦ˆç¥ç»ç½‘ç»œçš„å‚æ•° æ¿€æ´»å‡½æ•°é€‰ç”¨çš„æ˜¯ $LeakyReLU$ æœ€ååœ¨èŠ‚ç‚¹ $v$ çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´ç”¨ Softmax åšå½’ä¸€åŒ– ğŸ¤”ï¸ æ­¥éª¤ä¸€å’Œæ­¥éª¤äºŒå¯¹åº” MPNN æ¡†æ¶çš„ $m_v^{t+1}$ çš„è®¡ç®— å¤šå¤´æ³¨æ„åŠ›æ­£å¦‚ Transformer ä¸­æœ‰å¤šå¤´æ³¨æ„åŠ›ä¸€æ ·ï¼ŒGAT çš„ä½œè€…åŒæ ·åœ¨èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™é‡‡ç”¨äº†å¤šå¤´æ³¨æ„åŠ›çš„æœºåˆ¶ï¼š $$h_v^{l+1}= ||^{K^l} \\sigma(\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,l)}W^{(k,l)}h_u^{l})$$ è®°å·è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œä½†æ˜¯ä»”ç»†æ€ç´¢ä¸€ç•ªè¿˜æ˜¯å¯ä»¥ç†æ¸…æ¥šçš„ï¼Œä¸Šè§’æ ‡ $(k,l)$ çš„æ„æ€æ˜¯ç¬¬ $l$ å±‚çš„ç¬¬ $k$ ä¸ªå¤´ã€‚å…¶ä¸­ $K^l$ ä¸ºç¬¬ $l$ å±‚â€œå¤´â€çš„æ•°é‡ã€‚ä¸Šé¢çš„å…¬å¼çš„æ„æ€å°±æ˜¯æ¯ä¸ªâ€œå¤´â€ä¼šè®¡ç®—å‡ºä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œç„¶åä¸åŒâ€œå¤´â€ä¹‹é—´çš„ä¼šæ‹¼æ¥èµ·æ¥ python class GATConv(nn.Module): def __init__(self, ...): ... self.attn_l = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.attn_r = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.leaky_relu = nn.LeakyReLU(negative_slope) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" # feat_src/feat_dst: (N, *, num_heads, out_feat) el = (feat_src * self.attn_l).sum(dim=-1).unsqueeze(-1) er = (feat_dst * self.attn_r).sum(dim=-1).unsqueeze(-1) # el/er: (N, *, num_heads, 1) graph.srcdata.update({\"ft\": feat_src, \"el\": el}) graph.dstdata.update({\"er\": er}) graph.apply_edges(fn.u_add_v(\"el\", \"er\", \"e\")) e = self.leaky_relu(graph.edata.pop(\"e\")) # e: (N, *, num_heads, 1) # normalization graph.edata[\"a\"] = self.attn_drop(edge_softmax(graph, e)) # a: (N, *, num_heads, 1) # weighted sum graph.update_all( # ft: (N, *, num_heads, out_feat) # a: (N, *, num_heads, 1) # m: (N, *, num_heads, out_feat) fn.u_mul_e(\"ft\", \"a\", \"m\"), fn.sum(\"m\", \"ft\") ) rst = graph.dstdata[\"ft\"] # rst: (N, *, num_heads, out_feat) ... DGL çš„å®ç°åŸºäºä¸‹é¢è¿™ä¸ªäº‹å®ï¼š $$a^T[h_v||h_u]=a_l^Th_v+a_r^Th_u$$ ä¸ºä»€ä¹ˆä¼šæ›´ä¸ºé«˜æ•ˆå‘¢ï¼Ÿ ä¸éœ€è¦å­˜å‚¨ $[h_v||h_u]$ è¿™ä¸ªä¸­é—´å˜é‡äº†ï¼ˆDGL ä¼šå°†æ¶ˆæ¯å­˜å‚¨ä¸ºè¾¹çš„å±æ€§ï¼‰ åŠ æ³•å¯ä»¥ç”¨ DGL ä¼˜åŒ–è¿‡çš„ fn.u_add_v å‡½æ•° Step 3. èšåˆé‚»å±…æ¶ˆæ¯æœ€åèŠ‚ç‚¹æ›´æ–°çš„æ–¹å¼å°±æ˜¯è®¡ç®—é‚»å±…çš„å‘é‡è¡¨ç¤ºçš„åŠ æƒå’Œï¼ˆåŸºäºå‰é¢ç®—å¥½çš„æ³¨æ„åŠ›ï¼‰ï¼š $$h_v^{l+1}=\\sigma(\\sum_{u\\in \\mathcal{N}(i)}\\alpha_{vu}W^{l}h_u^{l})$$ ğŸ¤”ï¸ ä¸Šé¢å°±å¯¹åº” MPNN æ¡†æ¶ä¸­çš„ $h_v^{t+1}$ çš„è®¡ç®—ï¼Œæ³¨æ„ GAT ç®— $h_t^{l+1}$ çš„æ—¶å€™å¹¶ä¸ä¼šç”¨åˆ°è‡ªå·±ä¸Šä¸€å±‚è¡¨ç¤º $h_t^l$ã€‚åŒæ—¶ GAT çš„æå‡ºæ˜¯ç”¨äºè§£å†³å›¾ä¸Šçš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å›¾è¯»å‡ºçš„æ“ä½œã€‚ åœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…æ˜¯è¦å°† GAT ç”¨äºèŠ‚ç‚¹çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡2ã€‚å‡è®¾æˆ‘ä»¬å †å äº† $L$ å±‚çš„ GAT ä¹‹åï¼Œåœ¨æœ€åä¸€å±‚å¦‚æœè¿˜é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚å› æ­¤ä½œè€…åœ¨æœ€åä¸€å±‚ GAT ä¸­ï¼Œæ˜¯å–å¤šä¸ªå¤´çš„å¹³å‡å€¼ä¹‹åæ‰åº”ç”¨äº†æ¿€æ´»å‡½æ•°ï¼Œè¿™é‡Œçš„æ¿€æ´»å‡½æ•°å¦‚æœé‡‡ç”¨ Softmaxï¼Œå°±å¯ä»¥ç›´æ¥åšèŠ‚ç‚¹åˆ†ç±»äº†2ã€‚å…¬å¼å¦‚ä¸‹æ‰€ç¤º: $$final\\ embedding\\ of\\ h_v= \\sigma\\Big(\\frac{1}{K^L}\\sum_{k=1}^{K^L}\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,L)}W^{(k,L)}h_u^{L}\\Big)$$ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:2:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#å¤šå¤´æ³¨æ„åŠ›"},{"categories":["GNN"],"content":" ä»€ä¹ˆæ˜¯ GAT ğŸ§ æˆ‘å‘ç°å°†è®ºæ–‡çš„å…¬å¼å’Œå…·ä½“çš„ä»£ç è”ç³»èµ·æ¥æ€»æ˜¯èƒ½å¤Ÿå¸®åŠ©ç†è§£ï¼Œå› æ­¤ä¸‹é¢å…³äº GAT å…¬å¼çš„è®²è§£æˆ‘ä¼šåœ¨ç”¨ MPNN æ¡†æ¶çš„åŸºç¡€ä¸Šï¼ŒåŒæ—¶é™„ä¸Šç›¸å…³çš„ä»£ç ï¼ˆç”¨ ... è¡¨ç¤ºå…¶ä»–çœç•¥çš„éƒ¨åˆ†ï¼‰ã€‚ä»£ç æ¥è‡ªäº DGL å®˜æ–¹æä¾›çš„ GAT æ¨¡å—çš„æºç  ğŸ§ GAT å¯ä»¥æ–¹ä¾¿å †å å¤šå±‚ï¼Œä¸‹é¢çš„è®¨è®ºéƒ½æ˜¯ä»æŸä¸€å±‚ $l$çš„æŸä¸ªèŠ‚ç‚¹ $v$ çš„è§’åº¦æ¥è°ˆçš„ Step 1. å¯¹èŠ‚ç‚¹åšçº¿æ€§å˜æ¢$$h_v^{l}=W^lh_v^{l}$$ è®¾æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡è¡¨ç¤ºçš„é•¿åº¦ä¸º $F$ï¼Œåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œå¯¹å›¾ä¸Šæ¯ä¸ªç»“ç‚¹çš„å‘é‡å…ˆåšä¸€ä¸ªçº¿æ€§å˜æ¢ï¼Œå…¶ä¸­ $W\\in\\mathcal{R}^{Fâ€™\\times F}$, å› æ­¤æ¯ä¸ªèŠ‚ç‚¹çš„å‘é‡éƒ½æ›´æ–°é•¿åº¦ä¸º $Fâ€™$ã€‚ä¸ºäº†åŒºåˆ†ä¸åŒå±‚çš„å‘é‡ï¼Œç”¨ä¸Šè§’æ ‡ $l$ è¡¨ç¤ºè¿™æ˜¯ç¬¬ $l$ å±‚çš„ã€‚æ³¨æ„åœ¨ç¬¬ $l$ å±‚ä¸­ï¼Œæ‰€æœ‰èŠ‚ç‚¹å…±ç”¨åŒä¸€ä¸ªæƒé‡çŸ©é˜µ $W$ ğŸ“’ æ³¨æ„åé¢çš„ $h_v^l$ æˆ–è€… $h_u^l$ éƒ½æ˜¯ç»è¿‡çº¿æ€§å˜æ¢ä¹‹åçš„ python class GATConv(nn.Module): def __init__(self, ...): ... self.fc = nn.Linear( self._in_src_feats, out_feats * num_heads, bias=False ) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" ... src_prefix_shape = dst_prefix_shape = feat.shape[:-1] h_src = h_dst = self.feat_drop(feat) # h_src: (N, *, D_in) feat_src = feat_dst = self.fc(h_src).view( *src_prefix_shape, self._num_heads, self._out_feats ) # feat_src/feat_dst: (N, *, num_heads, out_feat) ... æ³¨æ„ï¼Œä¸Šé¢ä»£ç ä¸­çš„ h_src ä¼šå‡ºæ¥ä¸¤ä¸ªä¸€æ ·çš„ feat_src å’Œ feat_dst æ˜¯å› ä¸º DGL é‡‡ç”¨äº†æ•°å­¦ä¸Šç­‰ä»·ä½†æ˜¯è®¡ç®—æ•ˆç‡ä¼šæ›´é«˜çš„å®ç°ã€‚åé¢ä¼šè§£é‡Š Step 2. è®¡ç®—æ³¨æ„åŠ›$$e_{vu}^l=LeakyReLU\\Big((a^l)^T[h_v^{l}||h_u^{l}]\\Big)$$ $$\\alpha_{vu}^l=Softmax_u(e_{vu}^l)$$ ç¬¬äºŒæ­¥å°±æ˜¯è¦è®¡ç®—ä¸­å¿ƒèŠ‚ç‚¹ $v$ å’Œå®ƒçš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´çš„æ³¨æ„åŠ›äº†ã€‚åœ¨ä¸Šé¢çš„å…¬å¼ä¸­ï¼š $e_{vu}^l$ è¡¨ç¤ºæ³¨æ„åŠ›ç³»æ•°ï¼ˆattention coefficientï¼‰ã€‚è®ºæ–‡ä¸­æåˆ°å®Œå…¨å¯ä»¥é‡‡ç”¨ä¸åŒçš„æ³¨æ„åŠ›è®¡ç®—æ–¹å¼ï¼Œåœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…é€‰æ‹©ç”¨ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œè®¡ç®—æ³¨æ„åŠ›2ã€‚æ³¨æ„è¿™é‡Œçš„ $e_{vu}^l$ è·Ÿ MPNN çš„ $e_{vu}$ æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼Œåªæ˜¯æ°å¥½è®°å·ä¸€æ ·äº†è€Œå·² $||$ è¡¨ç¤ºæ‹¼æ¥æ“ä½œï¼Œå³æˆ‘ä»¬ä¼šå°†ä¸­å¿ƒèŠ‚ç‚¹å’Œå®ƒå¯¹åº”çš„é‚»å±…ç»“ç‚¹çš„å‘é‡è¡¨ç¤ºæ‹¼æ¥èµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º $2Fâ€™$ çš„å‘é‡ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $[h_v^{l}||h_u^{l}]$ï¼Œç„¶åæŠŠå®ƒé€å…¥åˆ°å‰é¢æåˆ°çš„ä¸€å±‚å‰é¦ˆç¥ç»ç½‘ç»œä¸­ï¼Œå¯¹åº”å…¬å¼ä¸­çš„ $(a^l)^T[h_v^{l}||h_u^{l}]$ï¼Œå…¶ä¸­ $(a^l)^T$ æŒ‡çš„æ˜¯ç¬¬ $l$ å±‚çš„å•å±‚å‰é¦ˆç¥ç»ç½‘ç»œçš„å‚æ•° æ¿€æ´»å‡½æ•°é€‰ç”¨çš„æ˜¯ $LeakyReLU$ æœ€ååœ¨èŠ‚ç‚¹ $v$ çš„æ‰€æœ‰é‚»å±…èŠ‚ç‚¹ä¹‹é—´ç”¨ Softmax åšå½’ä¸€åŒ– ğŸ¤”ï¸ æ­¥éª¤ä¸€å’Œæ­¥éª¤äºŒå¯¹åº” MPNN æ¡†æ¶çš„ $m_v^{t+1}$ çš„è®¡ç®— å¤šå¤´æ³¨æ„åŠ›æ­£å¦‚ Transformer ä¸­æœ‰å¤šå¤´æ³¨æ„åŠ›ä¸€æ ·ï¼ŒGAT çš„ä½œè€…åŒæ ·åœ¨èŠ‚ç‚¹æ›´æ–°çš„æ—¶å€™é‡‡ç”¨äº†å¤šå¤´æ³¨æ„åŠ›çš„æœºåˆ¶ï¼š $$h_v^{l+1}= ||^{K^l} \\sigma(\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,l)}W^{(k,l)}h_u^{l})$$ è®°å·è¶Šæ¥è¶Šå¤æ‚äº†ï¼Œä½†æ˜¯ä»”ç»†æ€ç´¢ä¸€ç•ªè¿˜æ˜¯å¯ä»¥ç†æ¸…æ¥šçš„ï¼Œä¸Šè§’æ ‡ $(k,l)$ çš„æ„æ€æ˜¯ç¬¬ $l$ å±‚çš„ç¬¬ $k$ ä¸ªå¤´ã€‚å…¶ä¸­ $K^l$ ä¸ºç¬¬ $l$ å±‚â€œå¤´â€çš„æ•°é‡ã€‚ä¸Šé¢çš„å…¬å¼çš„æ„æ€å°±æ˜¯æ¯ä¸ªâ€œå¤´â€ä¼šè®¡ç®—å‡ºä¸€ä¸ªå‘é‡è¡¨ç¤ºï¼Œç„¶åä¸åŒâ€œå¤´â€ä¹‹é—´çš„ä¼šæ‹¼æ¥èµ·æ¥ python class GATConv(nn.Module): def __init__(self, ...): ... self.attn_l = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.attn_r = nn.Parameter( th.FloatTensor(size=(1, num_heads, out_feats)) ) self.leaky_relu = nn.LeakyReLU(negative_slope) ... def forward(self, graph, feat, ...): \"\"\" Args ---- feat: (N, *, D_in) where D_in is the size of input feature Returns ------- torch.Tensor (N, *, num_heads, D_out) \"\"\" # feat_src/feat_dst: (N, *, num_heads, out_feat) el = (feat_src * self.attn_l).sum(dim=-1).unsqueeze(-1) er = (feat_dst * self.attn_r).sum(dim=-1).unsqueeze(-1) # el/er: (N, *, num_heads, 1) graph.srcdata.update({\"ft\": feat_src, \"el\": el}) graph.dstdata.update({\"er\": er}) graph.apply_edges(fn.u_add_v(\"el\", \"er\", \"e\")) e = self.leaky_relu(graph.edata.pop(\"e\")) # e: (N, *, num_heads, 1) # normalization graph.edata[\"a\"] = self.attn_drop(edge_softmax(graph, e)) # a: (N, *, num_heads, 1) # weighted sum graph.update_all( # ft: (N, *, num_heads, out_feat) # a: (N, *, num_heads, 1) # m: (N, *, num_heads, out_feat) fn.u_mul_e(\"ft\", \"a\", \"m\"), fn.sum(\"m\", \"ft\") ) rst = graph.dstdata[\"ft\"] # rst: (N, *, num_heads, out_feat) ... DGL çš„å®ç°åŸºäºä¸‹é¢è¿™ä¸ªäº‹å®ï¼š $$a^T[h_v||h_u]=a_l^Th_v+a_r^Th_u$$ ä¸ºä»€ä¹ˆä¼šæ›´ä¸ºé«˜æ•ˆå‘¢ï¼Ÿ ä¸éœ€è¦å­˜å‚¨ $[h_v||h_u]$ è¿™ä¸ªä¸­é—´å˜é‡äº†ï¼ˆDGL ä¼šå°†æ¶ˆæ¯å­˜å‚¨ä¸ºè¾¹çš„å±æ€§ï¼‰ åŠ æ³•å¯ä»¥ç”¨ DGL ä¼˜åŒ–è¿‡çš„ fn.u_add_v å‡½æ•° Step 3. èšåˆé‚»å±…æ¶ˆæ¯æœ€åèŠ‚ç‚¹æ›´æ–°çš„æ–¹å¼å°±æ˜¯è®¡ç®—é‚»å±…çš„å‘é‡è¡¨ç¤ºçš„åŠ æƒå’Œï¼ˆåŸºäºå‰é¢ç®—å¥½çš„æ³¨æ„åŠ›ï¼‰ï¼š $$h_v^{l+1}=\\sigma(\\sum_{u\\in \\mathcal{N}(i)}\\alpha_{vu}W^{l}h_u^{l})$$ ğŸ¤”ï¸ ä¸Šé¢å°±å¯¹åº” MPNN æ¡†æ¶ä¸­çš„ $h_v^{t+1}$ çš„è®¡ç®—ï¼Œæ³¨æ„ GAT ç®— $h_t^{l+1}$ çš„æ—¶å€™å¹¶ä¸ä¼šç”¨åˆ°è‡ªå·±ä¸Šä¸€å±‚è¡¨ç¤º $h_t^l$ã€‚åŒæ—¶ GAT çš„æå‡ºæ˜¯ç”¨äºè§£å†³å›¾ä¸Šçš„èŠ‚ç‚¹åˆ†ç±»é—®é¢˜ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰å›¾è¯»å‡ºçš„æ“ä½œã€‚ åœ¨ GAT çš„è®ºæ–‡ä¸­ï¼Œä½œè€…æ˜¯è¦å°† GAT ç”¨äºèŠ‚ç‚¹çº§åˆ«çš„åˆ†ç±»ä»»åŠ¡2ã€‚å‡è®¾æˆ‘ä»¬å †å äº† $L$ å±‚çš„ GAT ä¹‹åï¼Œåœ¨æœ€åä¸€å±‚å¦‚æœè¿˜é‡‡ç”¨æ‹¼æ¥çš„æ–¹å¼æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚å› æ­¤ä½œè€…åœ¨æœ€åä¸€å±‚ GAT ä¸­ï¼Œæ˜¯å–å¤šä¸ªå¤´çš„å¹³å‡å€¼ä¹‹åæ‰åº”ç”¨äº†æ¿€æ´»å‡½æ•°ï¼Œè¿™é‡Œçš„æ¿€æ´»å‡½æ•°å¦‚æœé‡‡ç”¨ Softmaxï¼Œå°±å¯ä»¥ç›´æ¥åšèŠ‚ç‚¹åˆ†ç±»äº†2ã€‚å…¬å¼å¦‚ä¸‹æ‰€ç¤º: $$final\\ embedding\\ of\\ h_v= \\sigma\\Big(\\frac{1}{K^L}\\sum_{k=1}^{K^L}\\sum_{u\\in\\mathcal{N}(i)}\\alpha_{vu}^{(k,L)}W^{(k,L)}h_u^{L}\\Big)$$ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:2:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#step-3-èšåˆé‚»å±…æ¶ˆæ¯"},{"categories":["GNN"],"content":" å®ç° ğŸ¤”ï¸ å›¾ç¥ç»ç½‘ç»œçš„æµè¡Œæ¡†æ¶ä¹‹ä¸€ DGL çš„è®¾è®¡å°±æ˜¯åŸºäº MPNN æ¡†æ¶ï¼Œä¸è¿‡ä»–ä»¬çš„å…¬å¼ä¼šç¨æœ‰ä¸åŒï¼Œä»–ä»¬è¿˜æœ‰ä¸€ä¸ªèšåˆå‡½æ•° $\\rho$ï¼Œç”¨äºå†³å®šä¸€ä¸ªèŠ‚ç‚¹å¦‚ä½•èšåˆä»é‚»å±…é‚£è¾¹æ”¶åˆ°çš„æ‰€æœ‰ä¿¡æ¯ã€‚æˆ‘è®¤ä¸ºä»–ä»¬çš„å…¬å¼æ›´å…·æœ‰æ³›åŒ–æ€§ï¼Œèƒ½å¤Ÿé€‚ç”¨äºæ›´å¤šç§æƒ…å†µã€‚ä»–ä»¬è¿˜è´´å¿ƒåœ°å†™äº†å…³äºå¦‚ä½•ä½¿ç”¨ DGL çš„ MPNN ç›¸å…³å‡½æ•°çš„æ•™ç¨‹ï¼Œæ¨èä¸€çœ‹ğŸ‘ğŸ‘ğŸ‘ è‡³äº GAT çš„å®ç°ï¼ŒDGL ä¸ä»…æä¾›äº† GAT æ¨¡å—ï¼Œè€Œä¸”è¿˜å†™äº†ä¸€ç¯‡ä¸é”™çš„ç”¨è‡ªå¸¦çš„ message_func å’Œ reduce_func æ‰‹åŠ¨å®ç° GAT çš„æ•™ç¨‹ã€‚ä¸€ä¸ªå®Œæ•´çš„ GAT ä»»åŠ¡è®­ç»ƒè„šæœ¬å¯ä»¥çœ‹è¿™é‡Œ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:3:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#å®ç°"},{"categories":["GNN"],"content":" æ€»ç»“ä»¥ä¸Šå°±æ˜¯å¦‚ä½•ç”¨ MPNN æ¡†æ¶è§£é‡Š GAT çš„æ–¹æ³•ï¼Œå…¶ä¸­åŠ ä¸Šäº† DGL çš„æºç åˆ†æè¿›è¡Œè§£é‡Šï¼Œç”¨æ³¨æ„åŠ›è®¡ç®—èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå¾ˆè‡ªç„¶çš„æ€è·¯ï¼Œå¯ä»¥çœ‹æˆæ˜¯å¯¹ GCN çš„ä¸€ç§æ³›åŒ–ã€‚GAT èƒ½å¤Ÿå¾ˆå¥½å­¦ä¹ åˆ°å›¾çš„å±€éƒ¨ç»“æ„è¡¨ç¤ºï¼Œè€Œä¸”è®¡ç®—æ³¨æ„åŠ›çš„æ–¹å¼å¯ä»¥å¹¶è¡Œï¼Œæ˜¯ååˆ†é«˜æ•ˆçš„ğŸ»ğŸ»ğŸ» ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:4:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#æ€»ç»“"},{"categories":["GNN"],"content":" å‚è€ƒ Gilmer J, Schoenholz S S, Riley P F, et al. Neural message passing for quantum chemistry[C]//International conference on machine learning. PMLR, 2017: 1263-1272. arXivÂ â†©ï¸ VeliÄkoviÄ‡ P, Cucurull G, Casanova A, et al. Graph attention networks[J]. arXiv preprint arXiv:1710.10903, 2017. arXivÂ â†©ï¸Â â†©ï¸Â â†©ï¸ ","date":"2023-05-21","objectID":"/zh-cn/understanding-graph-attention-network-through-mpnn/:5:0","series":null,"tags":["GNN","Deep-Learning","Paper","Internal"],"title":"ç”¨ MPNN æ¡†æ¶è§£è¯» GAT","uri":"/zh-cn/understanding-graph-attention-network-through-mpnn/#å‚è€ƒ"},{"categories":["Exercise"],"content":"SICP ç»ƒä¹  2.27 ç­”æ¡ˆ","date":"2023-05-16","objectID":"/zh-cn/sicp-exercise-2-27/","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  2.27","uri":"/zh-cn/sicp-exercise-2-27/"},{"categories":["Exercise"],"content":" é¢˜ç›® Modify your reverse procedure of exercise 2.18 to produce a deep-reverse procedure that taks a list as argument and returns as its value the list with its elements reversed and with all sublists deep-reversed as well. racket (define x (list (list 1 2) (list 3 4))) ;; x - ((1 2) (3 4)) (deep-reverse x) ;; the output should be ((4 3) (2 1)) ","date":"2023-05-16","objectID":"/zh-cn/sicp-exercise-2-27/:1:0","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  2.27","uri":"/zh-cn/sicp-exercise-2-27/#é¢˜ç›®"},{"categories":["Exercise"],"content":" ç­”æ¡ˆåœ¨å‰é¢çš„ç»ƒä¹  2.18 ä¸­å®ç°çš„ reverse å¿½ç•¥äº†åˆ—è¡¨ä¸­çš„å…ƒç´ å¯èƒ½ä»ç„¶æ˜¯åˆ—è¡¨çš„æƒ…å†µã€‚è¿™é‡Œè¦æ±‚çš„å®ç°çš„ deep-reverse åˆ™è¦æ±‚æˆ‘ä»¬é€’å½’å¼ç¿»è½¬æ•´ä¸ªåˆ—è¡¨ã€‚ æˆ‘è®¤ä¸ºè¿™é¢˜å¾ˆå¥½ä½“ç°äº†å¦‚ä½•è®¾è®¡ä¸€ä¸ªé€’å½’ç¨‹åºçš„æ€æƒ³ï¼ŒåŸºæœ¬ä¸Šå¼„æ˜ç™½ä¸‹é¢å‡ ç‚¹å‡½æ•°å°±ä¸ä¼šå‡ºé”™ é€’å½’çš„ base case æ˜¯ä»€ä¹ˆï¼Ÿå¯¹äºåˆ—è¡¨æ¥è¯´ï¼Œç©ºåˆ—è¡¨å¾ˆè‡ªç„¶å°±æ˜¯ base caseï¼Œæ­¤æ—¶è¿”å› '() å³å¯ æ¥ä¸‹æ¥å¦‚ä½•ç»†åˆ†æƒ…å†µæ¥é€’å½’è°ƒç”¨ï¼Ÿ åœ¨ç»†åˆ†æƒ…å†µä¹‹å‰ï¼Œåº”è¯¥è®°ä½ car å’Œ cdr çš„ç‰¹ç‚¹ï¼Œ(cdr l) æ€»æ˜¯è¿”å›åˆ—è¡¨ï¼Œ(car l) æ€»æ˜¯è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆä½†ä¸ä¿è¯æ˜¯å¦ä¸ºåŸå­é¡¹ï¼Œå³ç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿå¯èƒ½ä¸ºåˆ—è¡¨ï¼‰ deep-reverse æœ‰ä»€ä¹ˆä¸å˜é‡ï¼ˆinvariantsï¼‰ï¼Ÿæ ¹æ®é¢˜ç›®æ‰€è¯´ï¼Œå®ƒçš„å‚æ•°æ€»æ˜¯ä¸ºåˆ—è¡¨ æ ¹æ®å‰é¢ä¸¤ç‚¹ï¼Œæˆ‘ä»¬å·²ç»ä¸éš¾å¾—å‡ºç»†åˆ†æƒ…å†µçš„æ ‡å‡†â€”â€”å³æ£€æŸ¥åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¦ä¸ºåŸå­é¡¹ ä»£ç å¦‚ä¸‹ Racket ;; invariants: the argument of deep-reverse are always a list (define (deep-reverse l) (cond ((null? l) '()) ;; base case (else (let ([remains (deep-reverse (cdr l))]) (if (pair? (car l)) ;; the arguments of append procedure should be lists too (append remains (list (deep-reverse (car l)))) (append remains (list (car l)))))))) é¡ºä¾¿é™„ä¸Šä¸€äº›æµ‹è¯•ç”¨ä¾‹ Racket (deep-reverse '(2 3)) (deep-reverse '((2 3))) (deep-reverse '((2 3) 1)) (deep-reverse '(5 (2 3) 1)) (deep-reverse '((4 2) (2 3) 1)) (deep-reverse '(5 (2 3) (5 2))) ğŸš§ å®Œæ•´ SICP ç»ƒä¹ é¢˜è§£ä»åœ¨æ–½å·¥ä¸­ ","date":"2023-05-16","objectID":"/zh-cn/sicp-exercise-2-27/:2:0","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  2.27","uri":"/zh-cn/sicp-exercise-2-27/#ç­”æ¡ˆ"},{"categories":["Exercise"],"content":"SICP ç»ƒä¹  1.46 ç­”æ¡ˆ","date":"2023-05-10","objectID":"/zh-cn/sicp-exercise-1-46/","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  1.46","uri":"/zh-cn/sicp-exercise-1-46/"},{"categories":["Exercise"],"content":" Question Several of the numerical methods described in this chapter are instances of an extremely general computational strategy known as iterative improvement. Iterative improvement says that, to compute something, we start with an initial guess for the answer, test if the guess is good enough, and otherwise improve the guess and continue the process using the improved guess as the new guess. Write a procedure iterative-improve that takes two procedures as arguments: a method for telling whether a guess is good enough and a method for improving a guess. Iterative-improve should return as its value a procedure that takes a guess as argument and keeps improving the guess until it is good enough. Rewrite the sqrt procedure of section 1.1.7 and the fixed-point procedure of section 1.3.3 in terms of iterative-improve. ","date":"2023-05-10","objectID":"/zh-cn/sicp-exercise-1-46/:1:0","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  1.46","uri":"/zh-cn/sicp-exercise-1-46/#question"},{"categories":["Exercise"],"content":" Answerè®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹é¢˜ç›®è¦è®©æˆ‘ä»¬åšä»€ä¹ˆï¼š å†™ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°åä¸º iterative-improveï¼Œå®ƒåŒ…å«äº† 2 ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°ï¼Œç”¨äºåˆ¤æ–­çŒœæµ‹æ˜¯å¦è¶³å¤Ÿå¥½ ç¬¬äºŒä¸ªå‚æ•°ä»ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºæ”¹è¿›çŒœæµ‹ ç”¨ iterative-improve é‡å†™ fixed-point å’Œ sqrt å¦‚æœä½ ä¸€è·¯åšå®Œäº† SICP ç¬¬ä¸€ç« èŠ‚çš„ç»ƒä¹ ï¼Œé‚£ä¹ˆä½ å¯ä»¥å¾ˆè½»æ¾å†™å‡ºå¦‚ä¸‹çš„ä»£ç : racket ;; test: test if a guess is good enough ;; improve: how to improve a guess (define (iterative-improve test improve) (lambda (guess) (if (test guess) guess ...))) åœ¨å‡½æ•°é‡Œé¢ç”¨ lambda è¿”å›å¦å¤–ä¸€ä¸ªå‡½æ•°å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ä¸€é“é¢˜è¦è¿™ä¹ˆç”¨æœ‰ç‚¹â€œç»•â€ï¼Œä¸»è¦çš„å›°éš¾æ¥è‡ªäºï¼šæˆ‘ä»¬è¦åœ¨ ... çš„éƒ¨åˆ†æ”¾ä»€ä¹ˆï¼Ÿæ”¾ ((iterative-improve good-enough? improve) (improve guess)) æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰è¿™æ ·å†™å¹¶ä¸æ˜¯å¾ˆç›´è§‚ è¿™æ ·çš„åœºæ™¯åœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™å…¶å®ç»å¸¸å‡ºç°ï¼Œè¿™ç§æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨ä¸»å‡½æ•°é‡Œé¢å®šä¹‰ä¸€ä¸ªè¾…åŠ©å‡½æ•°ï¼Œæœ€ååœ¨ä¸»å‡½æ•°é‡Œé¢è¿”å›è¿™ä¸ªè¾…åŠ©å‡½æ•°å³å¯ã€‚ä»£ç å¦‚ä¸‹ï¼š racket (define (iterative-improve test improve) (define (helper guess) (if (test guess) guess (helper (improve guess)))) helper) å†™å®Œäº† iterative-improve ä¹‹åï¼Œè¦é‡å†™ fixed-point å’Œ sqrt å‡½æ•°æ˜¯ä»¶å¾ˆå®¹æ˜“çš„äº‹æƒ…ã€‚æˆ‘ä»¬åªéœ€è¦å®šä¹‰å¥½å¯¹åº”çš„ test å’Œ improve æ˜¯ä»€ä¹ˆç„¶åè°ƒç”¨ iterative-improve racket (define (average x y) (/ (+ x y) 2)) (define (square x) (* x x)) (define (fixed-point f first-guess) ;; it's fine to refer a variable in the enclosing scope (define (close-enough? v) (let ([next (f v)]) (\u003c (abs (- v next)) 0.00001))) ((iterative-improve close-enough? f) first-guess)) (define (sqrt x) ;; it's fine to refer a variable in the enclosing scope (define (good-enough? v) (\u003c (abs (- (square v) x)) 0.001)) (define (improve guess) (average guess (/ x guess))) ((iterative-improve good-enough? improve) 1.0)) ğŸš§ å®Œæ•´ SICP ç»ƒä¹ é¢˜è§£ä»åœ¨æ–½å·¥ä¸­ ","date":"2023-05-10","objectID":"/zh-cn/sicp-exercise-1-46/:2:0","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  1.46","uri":"/zh-cn/sicp-exercise-1-46/#answer"},{"categories":["Exercise"],"content":"SICP ç»ƒä¹  1.34 ç­”æ¡ˆ","date":"2023-05-09","objectID":"/zh-cn/sicp-exercise-1-34/","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  1.34","uri":"/zh-cn/sicp-exercise-1-34/"},{"categories":["Exercise"],"content":" é¢˜ç›® Suppose we define the procedure f. What happens if we (perversely) ask the interpreter to evaluate the combination (f f)? racket (define (square x) (* x x)) (define (f g) (g 2)) Then we have racket (f square) ;; 4 (f (lambda (z) (* z (+ z 1)))) ;; 6 = 2 * 3 ","date":"2023-05-09","objectID":"/zh-cn/sicp-exercise-1-34/:1:0","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  1.34","uri":"/zh-cn/sicp-exercise-1-34/#é¢˜ç›®"},{"categories":["Exercise"],"content":" ç­”æ¡ˆå›å¿†ä¹‹å‰ä¹¦ä¸Šè®²çš„ applicative-order evaluationï¼šæˆ‘ä»¬éœ€è¦å…ˆè®¡ç®—æ‰€æœ‰å‚æ•°çš„å€¼ï¼Œç„¶åå°†è¿™äº›å‚æ•°ä»£å…¥è®¡ç®— ç¬¬ä¸€æ­¥ï¼Œå…ˆè®¡ç®—å‚æ•° fï¼Œè¿‡ç¨‹å¦‚ä¸‹ racket ;; replace g with f ;; (define (f g) ;; (g 2)) (f 2) ç¬¬äºŒæ­¥ï¼šè®¡ç®—å‚æ•° 2ã€‚æ³¨æ„è¿™é‡Œçš„ 2 è¢«çœ‹æˆæ˜¯å‚æ•°è€Œä¸æ˜¯ä¸€ä¸ªæ•°å­— racket ;; replace g with 2 ;; (define (f g) ;; (g 2)) (2 2) æœ€åå°±å¾—åˆ°äº† (2 2) è¿™ä¸ª S è¡¨è¾¾å¼ï¼Œå®ƒè¢«çœ‹æˆæ˜¯ function/procedure applicationã€‚è¿™ä¹Ÿæ˜¯æ±‚ S è¡¨è¾¾å¼çš„å€¼çš„æ–¹å¼ :) ä½†æ˜¯ï¼Œè¿™é‡Œçš„ 2 ä¸æ˜¯ä¸€ä¸ªå‡½æ•°/è¿‡ç¨‹ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆ Racket è¾“å…¥äº†å¦‚ä¸‹ä¿¡æ¯ï¼š text application: not a procedure; expected a procedure that can be applied to arguments given: 2 ğŸš§ å®Œæ•´ SICP ç»ƒä¹ é¢˜è§£ä»åœ¨æ–½å·¥ä¸­ ","date":"2023-05-09","objectID":"/zh-cn/sicp-exercise-1-34/:2:0","series":null,"tags":["SICP"],"title":"SICP ç»ƒä¹  1.34","uri":"/zh-cn/sicp-exercise-1-34/#ç­”æ¡ˆ"},{"categories":["Course"],"content":"CS61A çš„é¡¹ç›®å›› - å®ç°ä¸€ä¸ª Scheme è§£é‡Šå™¨çš„é¢˜è§£","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/"},{"categories":["Course"],"content":" å¼•è¨€æœ€è¿‘æ­£åœ¨è·Ÿç€ã€ŠCrafting interpreterã€‹è¿™æœ¬ä¹¦å†™è§£é‡Šå™¨ï¼ŒåŸæœ¬ä¹¦é‡Œé¢ç”¨ Java å®ç°äº†ä¸€ä¸ª Tree-walker è§£é‡Šå™¨ jloxï¼Œæˆ‘æ­£åœ¨ç”¨ Python é‡å†™ä¸€éï¼Œç§°ä¸º pyloxã€‚çœ‹äº†è¿™æœ¬ä¹¦æ„Ÿè§‰å¯¹è§£é‡Šå™¨çš„ç†è§£è¶Šæ¥è¶Šæ·±åˆ»äº†ï¼Œå¾ˆæ¨èğŸ‘ã€‚æ­¤æ—¶çš„æˆ‘çªç„¶æƒ³èµ·æ¥ä¹‹å‰çœ‹å®Œçš„ CS61A çš„ Scheme è§£é‡Šå™¨è¿˜æœ‰å‡ ä¸ªå°é—®é¢˜æ²¡æœ‰è§£å†³ï¼Œå¯¼è‡´å®ƒä¸€ç›´æ˜¯æœªå®Œæˆçš„çŠ¶æ€ï¼Œäºæ˜¯ä»Šå¤©æˆ‘æ‰“å¼€äº†è¿™ä¸ªé¡¹ç›®ï¼Œæ‰“ç®—ä»å¤´åˆ°å°¾æ‹ä¸€éï¼Œè®²è®²æ€è·¯ã€‚ æ³¨ï¼šScheme è§£é‡Šå™¨è¿™ä¸ªé¡¹ç›®æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘åªå¤åˆ¶äº†é¢˜ç›®æè¿°ä¸­çš„é‡è¦éƒ¨åˆ†ï¼Œå®Œæ•´çš„æè¿°è¿˜æ˜¯è¦å›å»çœ‹é¡¹ç›®ä¸»é¡µã€‚åŒæ—¶ä»£ç åªæ˜¾ç¤ºæ ¸å¿ƒçš„éƒ¨åˆ†ã€‚ ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:1:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#å¼•è¨€"},{"categories":["Course"],"content":" Part 1. The Evaluator","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:2:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#part-1-the-evaluator"},{"categories":["Course"],"content":" Problem 1 Implement the define and lookup methods of the Frame classâ€¦bindings is a dictionary representing the bindings in the frameâ€¦parent is the parent Frame instanceâ€¦The environment for a Frame instance consists of that frame, its parent frame, and all its ancestor frames, including the Global Frame. define å‡½æ•°å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆsymbolï¼‰åˆ° Scheme å€¼ï¼ˆvalueï¼‰çš„æ˜ å°„ï¼Œå‚æ•°éƒ½ç»™ä½ å†™å¥½äº† lookup å‡½æ•°çš„å…·ä½“æ‰§è¡Œè¿‡ç¨‹åœ¨æœ¬æ¥çš„é¢˜ç›®æè¿°ä¸­å·²ç»åˆ—å‡ºæ¥äº†ï¼Œç…§ç€åšå°±è¡Œï¼Œè¿­ä»£å’Œé€’å½’çš„è§£æ³•éƒ½å¯ä»¥ï¼Œæˆ‘æ„Ÿè§‰è¿­ä»£çš„è§£æ³•ä¼šæ¯”è¾ƒç®€å• python ... def define(self, symbol, value): \"\"\"Define Scheme SYMBOL to have VALUE.\"\"\" self.bindings[symbol] = value def lookup(self, symbol): \"\"\"Return the value bound to SYMBOL. Errors if SYMBOL is not found.\"\"\" # Case 1. we check if the symbol is in the current frame if symbol in self.bindings.keys(): return self.bindings[symbol] else: # Case 2. we check the parent of the current frame repreatly pos = self.parent while pos is not None: if symbol in pos.bindings.keys(): return pos.bindings[symbol] pos = pos.parent # Case 3. we can't find the symbol raise SchemeError(\"unknown identifier: {0}\".format(symbol)) ... ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:2:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-1"},{"categories":["Course"],"content":" Problem 2 To be able to call built-in procedures, such as +, you need to complete the BuiltinProcedure case within the scheme_apply function in scheme_eval_apply.py. Built-in procedures are applied by calling a corresponding Python function that implements the procedure. è·Ÿç€é¢˜ç›®çš„è¦æ±‚åšå³å¯ï¼Œæ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚å€¼å¾—ä¸€æçš„æ˜¯è¦å’Œ nil åˆ¤æ–­è€Œä¸æ˜¯å’Œ None åˆ¤æ–­ï¼Œä¸ç„¶ä½ å¯èƒ½åœ¨ç¬¬ä¸‰é¢˜ä¸€ç›´å¾—åˆ° â€œincorrect number of argumentsâ€¦\"ï¼Œæˆ‘å‘ç°æˆ‘ä¹‹å‰æ²¡æœ‰åšå‡ºæ¥å°±æ˜¯è¿™é‡Œæ²¡å†™å¥½ python def scheme_apply(procedure, args, env): ... if isinstance(procedure, BuiltinProcedure): # Convert the Scheme list to a Python list of arguments args_list = [] pos = args while pos is not nil: if pos.first is not nil: args_list.append(pos.first) else: args_list.append(nil) pos = pos.rest # Add the current environment if procedure.expect_env == True if procedure.expect_env: args_list.append(env) # Call procedure.py_func on all arguments try: return procedure.py_func(*args_list) except TypeError as e: raise SchemeError(f\"incorrect number of arguments, {e}\") ... ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:2:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-2"},{"categories":["Course"],"content":" Problem 3 Implement the missing part of scheme_eval, which evaluates a call expressionâ€¦Youâ€™ll have to recursively call scheme_eval in the first two stepsâ€¦The map method of Pair returns a new Scheme list constructed by applying a one-argument function to every item in a Scheme listâ€¦Important: do not mutate the passed-in expr. That would change a program as itâ€™s being evaluated, creating strange and incorrect effects. è¿™ä¸€é“é¢˜ä¹Ÿå¾ˆç›´ç™½ï¼Œå¯èƒ½çš„ä¸€ä¸ªéš¾ç‚¹æ˜¯ï¼Œrest.map çš„å‚æ•°æ˜¯ä¸€ä¸ª â€œone-argument functionâ€ï¼Œä¹Ÿå°±æ˜¯åªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯é¢˜ç›®æä¾›çš„ scheme_eval æœ‰ 2 ä¸ªå‚æ•°ã€‚æ‰€ä»¥éœ€è¦å¯¹å‡½æ•°è¿›è¡Œè½¬åŒ–ï¼Œå½“ç„¶è¿™é‡Œå¯ä»¥å†™ä¸€ä¸ª lambda è¡¨è¾¾å¼åŒ…è£…ä¸€ä¸‹ scheme_evalã€‚æˆ‘é€‰æ‹©ç”¨ functools åŒ…æä¾›çš„ partial å‡½æ•°ï¼Œå®ƒçš„ç”¨é€”å°±æ˜¯ç»‘å®šå‡½æ•°çš„éƒ¨åˆ†å‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ç¬¬ä¸€æ¬¡è§åˆ° partial è¿™ç§ç”¨æ³•è¿˜æ˜¯åœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€é‡Œé¢ï¼Œä¸å°‘å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯åŸç”Ÿå°±æ”¯æŒè¿™ä¸ªåŠŸèƒ½ã€‚ python def scheme_eval(expr, env, _=None): # Optional third argument is ignored ... else: # Evaluate the operator(first argument) operator = scheme_eval(first, env) validate_procedure(operator) # Evaluate all of the operands(other arguments) from functools import partial operands = rest.map(partial(scheme_eval, env=env)) return scheme_apply(operator, operands, env) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:2:3","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-3"},{"categories":["Course"],"content":" Problem 4 The type of the first operand tells us what is being definedâ€¦implement just the first part, which evaluates the second operand to obtain a value and binds the first operand, a symbol, to that value. Then, do_define_form returns the symbol that was bound. è¿™é‡Œåªè¦æ±‚å®ç° define çš„ç¬¬ä¸€ä¸ªåŠŸèƒ½â€”â€”ç»‘å®šå˜é‡ï¼Œå…·ä½“ç»‘å®šçš„æ–¹å¼å…¶å®æˆ‘ä»¬å·²ç»åœ¨ Problem 1 é‡Œé¢å®ç°å¥½äº†ï¼Œå°±æ˜¯ Frame ç±»çš„ define æ–¹æ³•ï¼Œå› æ­¤ç»‘å®šå˜é‡åªè¦è°ƒç”¨ env.define å³å¯ã€‚ æ ¹æ® define ç»‘å®šå˜é‡çš„å†™æ³•: (define a some_val)ï¼Œå¯ä»¥é€šè¿‡ .rest.first æ‹¿åˆ°å¯¹åº”çš„ some_val ç”¨ scheme_eval è¿›è¡Œä¼°å€¼ python def do_define_form(expressions, env): ... if scheme_symbolp(signature): # assigning a name to a value e.g. (define x (+ 1 2)) validate_form( expressions, 2, 2 ) # Checks that expressions is a list of length exactly 2 env.define(signature, scheme_eval(expressions.rest.first, env)) return signature ... ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:2:4","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-4"},{"categories":["Course"],"content":" Problem 5 Implement the do_quote_form function in scheme_forms.py so that it simply returns the unevaluated operand of the (quote ...) expression. validate_form(expressions, 1, 1) ç¡®ä¿è¾“å…¥é•¿åº¦ä¸º 1ï¼Œå³æ£€æŸ¥æ˜¯å¦ä¸º '... å½¢å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥è¿”å›å³å¯ python def do_quote_form(expressions, env): validate_form(expressions, 1, 1) return expressions.first ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:2:5","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-5"},{"categories":["Course"],"content":" Part 2. Procedures","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#part-2-procedures"},{"categories":["Course"],"content":" Problem 6 Change the eval_all function in scheme_eval_apply.py (which is called from do_begin_form in scheme_forms.py) to complete the implementation of the begin special form (spec). A begin expression is evaluated by evaluating all sub-expressions in order. The value of the begin expression is the value of the final sub-expression. å…¶å®è¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼š å…ˆæ£€æŸ¥ expressions æ˜¯å¦ä¸º nilï¼Œæ˜¯çš„è¯è¿”å› None è¡¨ç¤ºæ²¡æœ‰å®šä¹‰ ç»§ç»­æ£€æŸ¥ expressions.rest æ˜¯å¦ä¸º nilï¼Œæ˜¯çš„è¯è¿”å› expressions.first çš„è¯„ä¼°ç»“æœï¼Œå¦åˆ™ç»§ç»­é€’å½’è°ƒç”¨ python def eval_all(expressions, env): if expressions is nil: return None res = scheme_eval(expressions.first, env) if expressions.rest is nil: return res else: return eval_all(expressions.rest, env) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-6"},{"categories":["Course"],"content":" Problem 7 Implement the do_lambda_form function (spec), which creates and returns a LambdaProcedure instance åœ¨ Problem 6 é‡Œé¢å·²ç»è¯´äº† LambdaProcedure çš„ç»“æ„ï¼Œè°ƒç”¨ä¸€ä¸‹å®ƒçš„æ„é€ å‡½æ•°å°±è¡Œ python def do_lambda_form(expressions, env): validate_form(expressions, 2) formals = expressions.first validate_formals(formals) return LambdaProcedure(formals, expressions.rest, env) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-7"},{"categories":["Course"],"content":" Problem 8 This method takes in two arguments: formals, which is a Scheme list of symbols, and vals, which is a Scheme list of values. It should return a new child frame, binding the formal parameters to the values. é¢˜ç›®çš„æ­¥éª¤å·²ç»å¤Ÿè¯¦ç»†äº†ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº† python def make_child_frame(self, formals, vals): if len(formals) != len(vals): raise SchemeError(\"Incorrect number of arguments to function call\") sub_frame = Frame(self) # iterate pos1, pos2 = formals, vals while pos1 is not nil: key, value = pos1.first, pos2.first sub_frame.define(key, value) pos1, pos2 = pos1.rest, pos2.rest return sub_frame ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:3","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-8"},{"categories":["Course"],"content":" Problem 9 You should first create a new Frame instance using the make_child_frame method of the appropriate parent frame, binding formal parameters to argument values. Then, evaluate each of the expressions of the body of the procedure using eval_all within this new frame. è¿™é‡Œåˆšå¥½ç”¨äº† Problem 8 å†™çš„ make_child_frame å‡½æ•° python def scheme_apply(procedure, args, env): ... elif isinstance(procedure, LambdaProcedure): child_frame = procedure.env.make_child_frame(procedure.formals, args) return eval_all(procedure.body, child_frame) ... ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:4","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-9"},{"categories":["Course"],"content":" Problem 10 Modify the do_define_form function in scheme_forms.py so that it correctly handles define (...) ...) expressions å’Œä¹‹å‰çš„ç›¸æ¯”ï¼Œå·®åˆ«ä¸»è¦åœ¨ env.define çš„ç¬¬ 2 ä¸ªå‚æ•°ï¼Œç”¨å‰é¢å†™å¥½çš„ do_lambda_form æˆ–è€…ç›´æ¥è°ƒç”¨ LambdaProcedure ä¹Ÿå¯ä»¥ python def do_define_form(expressions, env): ... elif isinstance(signature, Pair) and scheme_symbolp(signature.first): # defining a named procedure e.g. (define (f x y) (+ x y)) # the signature is (f x y) formals = signature.rest # (x y) validate_formals(formals) # now we need to parse (+ x y) env.define(signature.first, LambdaProcedure(formals, expressions.rest, env)) return signature.first # f ... ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:5","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-10"},{"categories":["Course"],"content":" Problem 11 Implement do_mu_form in scheme_forms.py to evaluate the mu special form. A mu expression evaluates to a MuProcedure. Most of the MuProcedure class (defined in scheme_classes.py) has been provided for you. MuProcedure çš„ç‰¹åˆ«ä¹‹å¤„åœ¨äº dynamic scopingï¼Œå‚æ•°çš„å€¼å–å†³äºè°ƒç”¨çš„æ—¶å€™ç¯å¢ƒé‡Œé¢æœ‰ä»€ä¹ˆã€‚scheme_apply å‡½æ•°çš„å‚æ•° env å°±è¡¨ç¤ºäº†å½“å‰ç¯å¢ƒï¼Œæˆ‘ä»¬åªéœ€è¦æ„é€ ä¸€ä¸ª child frame å¹¶åœ¨é‡Œé¢è¯„ä¼° MuProcedure å³å¯ python def scheme_apply(procedure, args, env): ... elif isinstance(procedure, MuProcedure): child_frame = env.make_child_frame(procedure.formals, args) return eval_all(procedure.body, child_frame) ... def do_mu_form(expressions, env): validate_form(expressions, 2) formals = expressions.first validate_formals(formals) return MuProcedure(formals, expressions.rest) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:3:6","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-11"},{"categories":["Course"],"content":" Part 3. Special Forms","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:4:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#part-3-special-forms"},{"categories":["Course"],"content":" Problem 12 Implement do_and_form and do_or_form so that and and or expressions are evaluated correctly. The logical forms and and or are short-circuiting do_and_form å’Œ do_or_form éƒ½å¯ä»¥ç”¨é€’å½’å†™ï¼š do_and_formï¼šbase case ä¸º nil æ­¤æ—¶è¿”å›ä¸º Trueï¼Œä»å¤´åˆ°å°¾æ£€æŸ¥ï¼Œä¸€æ—¦å‘ç°ä¸ä¸º True çš„å°±ç«‹åˆ»è¿”å› do_or_formï¼šbase case ä¸º nil æ­¤æ—¶è¿”å› Falseï¼Œä»å¤´åˆ°å°¾æ£€æŸ¥ï¼Œä¸€æ—¦å‘ç°ä¸º True çš„å°±ç«‹åˆ»è¿”å› python def do_and_form(expressions, env): # base case: (and) if expressions is nil: return True front = scheme_eval(expressions.first, env) if is_scheme_true(front): if expressions.rest is nil: return front else: return do_and_form(expressions.rest, env) else: return front def do_or_form(expressions, env): # base case: (or) if expressions is nil: return False front = scheme_eval(expressions.first, env) if is_scheme_false(front): if expressions.rest is nil: return front else: return do_or_form(expressions.rest, env) else: return front ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:4:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-12"},{"categories":["Course"],"content":" Problem 13 Fill in the missing parts of do_cond_form so that it correctly implements cond, returning the value of the first result sub-expression corresponding to a true predicate, or the result sub-expression corresponding to else. æŒ‰ç…§é¢˜ç›®çš„æ„æ€æ¥å°±è¡Œ python def do_cond_form(expressions, env): ... if is_scheme_true(test): # no sub-expression if clause.rest is nil: return test return eval_all(clause.rest, env) ... ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:4:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-13"},{"categories":["Course"],"content":" Problem 14 Implement make_let_frame in scheme_forms.py, which returns a child frame of env that binds the symbol in each element of bindings to the value of its corresponding expression. The bindings Scheme list contains pairs that each contain a symbol and a corresponding expression. éå†æ¯ä¸€ä¸ª bindingï¼Œæ”¶é›†å‚æ•°åå’Œå€¼åˆ° names å’Œ values å°±è¡Œ python def make_let_frame(bindings, env): if not scheme_listp(bindings): raise SchemeError(\"bad bindings list in let form\") names = values = nil # bingding: (\u003cname\u003e \u003cexpression\u003e) # bingdings: ( (\u003cname1\u003e \u003cexpression1\u003e) (\u003cname2\u003e \u003cexpression2\u003e) ...) pos = bindings while pos is not nil: front = pos.first # i.e. the first binding validate_form(front, 2, 2) # verify the structure is (\u003cname\u003e \u003cexpression\u003e) names = Pair(front.first, names) values = Pair(eval_all(front.rest, env), values) pos = pos.rest validate_formals(names) return = env.make_child_frame(names, values) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:4:3","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-14"},{"categories":["Course"],"content":" Problem 15 Implement the enumerate procedure, which takes in a list of values and returns a list of two-element lists, where the first element is the index of the value, and the second element is the value itself. é€šè¿‡é€’å½’å°±å¯ä»¥å®ç°ï¼Œåœ¨ä¸‹é¢æˆ‘å®ç°äº†ä¸€ä¸ª helper é€’å½’å‡½æ•°ï¼Œå‚æ•°æ˜¯è¾“å…¥ input å’Œç´¢å¼• indexï¼š base caseï¼šè¾“å…¥ input ä¸ºç©ºï¼Œåˆ™è¿”å› '() å…¶ä»–æƒ…å†µï¼šé€’å½’è°ƒç”¨ï¼Œæ³¨æ„å‚æ•°å˜åŒ–ï¼šinput -\u003e (cdr input) å’Œ index -\u003e (+ index 1) scheme (define (enumerate s) (begin ;; a helper funtion (define (helper input index) (cond ((null? input) '()) ;; base case: return () if it is nil (else (cons (cons index (cons (car input) nil)) (helper (cdr input) (+ index 1)))))) ;; recursive call (helper s 0)) ) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:4:4","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-15"},{"categories":["Course"],"content":" Problem 16 Implement the merge procedure, which takes in a comparator function inorder? and two lists that are sorted, and combines the two lists into a single sorted list. A comparator defines an ordering by comparing two values and returning a true value if and only if the two values are ordered. Here, sorted means sorted according to the comparator ç»å…¸ç®—æ³•ï¼šåˆå¹¶ 2 ä¸ªæœ‰åºåˆ—è¡¨ï¼Œæ¯æ¬¡å–å‡º 2 ä¸ªåˆ—è¡¨çš„å¤´ä¸ªå…ƒç´ ï¼Œå¯¹åº”ä¸‹é¢çš„ (car list1) (car list2)ï¼Œç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œæ ¹æ®ä¸åŒæƒ…å†µè¿›è¡Œé€’å½’è°ƒç”¨ scheme (define (merge inorder? list1 list2) (cond ((null? list1) list2) ;; base case: list1 is empty ((null? list2) list1) ;; base case: list2 is empty ((inorder? (car list1) (car list2)) (cons (car list1) (merge inorder? (cdr list1) list2))) ;; consume list1 (else (cons (car list2) (merge inorder? list1 (cdr list2))))) ;; consume list2 ) ","date":"2023-04-21","objectID":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/:4:5","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®å››ä¹‹ Scheme è§£é‡Šå™¨å®ç° (2021-Fall)","uri":"/zh-cn/proj4-scheme-interpreter-of-cs61a-of-ucb-fa21/#problem-16"},{"categories":["Algorithm"],"content":"ä»‹ç»äº† MIT6.006 é‡Œé¢æåˆ°çš„ SRTBOT æ¡†æ¶ï¼Œç”¨äºè§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/"},{"categories":["Algorithm"],"content":"Changelog: æ›´æ–°ä¾èµ–å›¾ @2023.04.13 ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:0:0","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#"},{"categories":["Algorithm"],"content":" å¼•è¨€åœ¨åšç®—æ³•é¢˜çš„æ—¶å€™ï¼Œè®©æˆ‘å¤´ç–¼çš„ç»å¸¸æ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œå®ƒå±äºé‚£ç§è‡ªå·±ç¢ç£¨åŠå¤©æƒ³ä¸å‡ºæ¥ï¼Œä½†æ˜¯çœ‹äº†ç­”æ¡ˆä¹‹åä¼šæç„¶å¤§æ‚Ÿï¼Œä¸‹æ¬¡å†åšçš„è¯å¾ˆæœ‰å¯èƒ½åˆå¿˜è®°äº†çš„ä¸€ç±»é—®é¢˜ã€‚æˆ‘ä¹Ÿæ›¾ç»çœ‹äº†å¾ˆå¤šäººçš„é¢˜è§£ï¼Œè¯•å›¾æ¶ˆåŒ–ã€å¸æ”¶ã€åº”ç”¨ä»–ä»¬çš„æ€è·¯ï¼Œä½†æˆ‘ä¸€ç›´æ‰¾ä¸åˆ°ä¸€ä¸ªå½’çº³å¾—ç‰¹åˆ«å¥½çš„æ¡†æ¶ï¼Œä¼¼ä¹æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±è§£å†³åŠ¨æ€è§„åˆ’çš„æ€è·¯ï¼Œå°†ä»–ä»¬çš„æ€è·¯åº”ç”¨åœ¨æ²¡æœ‰è§è¿‡çš„åŠ¨æ€è§„åˆ’é—®é¢˜çš„æ—¶å€™æˆ‘æ€»æ˜¯é‡åˆ°å›°éš¾ï¼Œè€Œä»–ä»¬çš„æ–¹æ³•è½®ä¼¼ä¹ä¹Ÿæ— æ³•è®©æˆ‘å¤„ç†æ‰€æœ‰çš„åŠ¨æ€è§„åˆ’é—®é¢˜ã€‚è¿™ç§å¯»å¯»è§…è§…å¯¹åŠ¨æ€è§„åˆ’ä¼¼æ‡‚éæ‡‚çš„çŠ¶æ€ï¼Œç»ˆäºåœ¨æˆ‘çœ‹å®Œ MIT6.006 çš„è¯¾ç¨‹ä¹‹åå‘ç”Ÿäº†æ”¹å˜ï¼Œè¯¾ä¸Šè€å¸ˆæå‡ºäº†è§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜çš„ 6 ä¸ªæ­¥éª¤â€”â€”è¢«ç§°ä¸º SRTBOT æ¡†æ¶ï¼Œæˆ‘å‘ç°å®ƒæ˜¯å¦‚æ­¤åœ°å¥½ç”¨ï¼Œå› æ­¤æˆ‘å†³å®šå†™ä¸‹è¿™ç¯‡åšå®¢æ¥ä¸å¤§å®¶åˆ†äº«ğŸ™Œ ğŸ‘‰ æ€»çš„æ¥è¯´ï¼Œè¿™ç¯‡åšå®¢æ›´é€‚åˆå·²ç»å¯¹åŠ¨æ€è§„åˆ’æœ‰äº†åˆæ­¥äº†è§£ä½†æ˜¯è¿˜æ²¡æœ‰æ‰¾åˆ°ç³»ç»Ÿæ–¹æ³•è®ºäººçš„é˜…è¯» ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:1:0","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#å¼•è¨€"},{"categories":["Algorithm"],"content":" ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜åŠ¨æ€è§„åˆ’é—®é¢˜çš„ä¸¤å¤§ç‰¹å¾ï¼šé‡å å­é—®é¢˜å’Œæœ€ä¼˜å­ç»“æ„1 é‡å å­é—®é¢˜ï¼šè§£å†³ä¸€ä¸ªåŠ¨æ€è§„åˆ’é—®é¢˜å¾€å¾€æ˜¯å°†å®ƒåˆ†è§£ä¸ºè‹¥å¹²ä¸ªé‡å çš„å­é—®é¢˜ æœ€ä¼˜å­ç»“æ„ï¼šå³å¤§é—®é¢˜çš„è§£å¯ä»¥é€šè¿‡ç»„åˆå°é—®é¢˜çš„æœ€ä¼˜è§£è®¡ç®—å‡ºæ¥ å‰é¢çš„å®šä¹‰è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ã€Œé‡å ã€ä»¥åŠã€Œå­é—®é¢˜ã€ï¼Œå¼ºè°ƒé‡å æ˜¯å› ä¸ºåŠ¨æ€è§„åˆ’çš„å‰å®³ä¹‹å¤„å°±åœ¨äºå®ƒä¼šè®°ä½è§£å†³è¿‡çš„å­é—®é¢˜çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆé‡å çš„å­é—®é¢˜è¶Šå¤šï¼ŒåŠ¨æ€è§„åˆ’çš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ ğŸ¤”ï¸ å¦‚æœå­é—®é¢˜å¹¶ä¸é‡å ï¼Œé‚£ä¹ˆå°±åº”è¯¥ç”¨åˆ†æ²»æ³•è§£å†³ ä¸Šé¢æ˜¯ä»å®šä¹‰çš„è§’åº¦æ¥è°ˆåŠ¨æ€è§„åˆ’é—®é¢˜çš„ï¼Œä»ç¼–ç¨‹é¢˜ç›®çš„è§’åº¦æ¥çœ‹ï¼Œä¸‹é¢ä¸¤å¤§ç±»é—®é¢˜ä¸€èˆ¬éƒ½æ˜¯è¦ç”¨åŠ¨æ€è§„åˆ’ç®—æ³•ï¼š æœ€ä¼˜åŒ–é—®é¢˜ï¼šæ±‚æœ€å€¼ + é‡å å­é—®é¢˜ ç»„åˆé—®é¢˜ï¼šæ±‚è§£æ‰€æœ‰å¯èƒ½çš„è§£æ³•çš„æ•°é‡ ğŸ“’ æˆ–è€…ï¼Œæ ¹æ®æˆ‘çš„ä¸ªäººåˆ·é¢˜ç»éªŒæ¥è¯´ï¼šåŠ¨æ€è§„åˆ’é—®é¢˜ä¸€èˆ¬æ˜¯å¯ä»¥æš´åŠ›è§£å†³çš„é€’å½’é—®é¢˜ï¼Œä½†æ˜¯å­˜åœ¨å¤§é‡é‡å å­é—®é¢˜å› æ­¤å¯ä»¥å¯¹å…¶è¿›è¡Œä¼˜åŒ– ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:2:0","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#ä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’é—®é¢˜"},{"categories":["Algorithm"],"content":" SRTBOT æ¡†æ¶SRTBOT æ˜¯ 6 ä¸ªæ­¥éª¤çš„é¦–å­—æ¯ç¼©å†™ï¼Œåˆ†åˆ«æ˜¯2ï¼š Subproblems definition Relate subproblem solutions recursively Topological order to argue relation is acyclic and subproblems form a DAG Base cases Original problem Time analysis ä¸‹é¢æˆ‘æ¥åˆ†åˆ«è®²è®²ä¸Šé¢æ¯ä¸€ä¸ªæ­¥éª¤éœ€è¦åšäº›ä»€ä¹ˆâœˆï¸ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:0","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#srtbot-æ¡†æ¶"},{"categories":["Algorithm"],"content":" å®šä¹‰å­é—®é¢˜ï¼ˆSubproblems definitionï¼‰åŒ…å«ä¸‹é¢å‡ ä¸ªæ­¥éª¤ å®šä¹‰å­é—®é¢˜å¹¶ç”¨æ–‡å­—æè¿°å…¶å«ä¹‰ï¼Œè¿™é‡Œå®šä¹‰çš„å­é—®é¢˜ä¼šåŒ…å«å‚æ•°ã€‚å…·ä½“å®šä¹‰å­é—®é¢˜çš„æŠ€å·§ä¼šåœ¨åé¢æåˆ° å­é—®é¢˜çš„å‚æ•°ä¸€èˆ¬åŒ…å«è¾“å…¥çš„å­é›†ï¼Œä¸åŒçš„åŠ¨æ€è§„åˆ’é—®é¢˜å¯èƒ½æœ‰ä¸åŒçš„è¾“å…¥æ ¼å¼ï¼šäºŒå‰æ ‘ã€å•åºåˆ—ã€æ•°å­—ç­‰ åœ¨è®¾è®¡å­é—®é¢˜çš„æ—¶å€™å¯ä»¥å‚è€ƒä¸‹é¢å‡ ç§ï¼š å¦‚æœè¾“å…¥æ˜¯å•ä¸ªåºåˆ— A å‰ç¼€å½¢å¼ï¼ˆPrefix formï¼‰ï¼šå®šä¹‰ dp[i] è¡¨ç¤ºè¾“å…¥ä¸º A[:i+1] çš„å­é—®é¢˜çš„è§£ï¼Œæ³¨æ„è¿™é‡Œçš„åŒºé—´è¡¨ç¤ºæ˜¯åŸºäº Python çš„ï¼Œå·¦é—­å³å¼€ åç¼€å½¢å¼ï¼ˆSuffix formï¼‰ï¼šå®šä¹‰ dp[i] è¡¨ç¤ºè¾“å…¥ä¸º A[i:] çš„å­é—®é¢˜çš„è§£ å­ä¸²å½¢å¼ï¼ˆContiguous substrings of a sequenceï¼‰ï¼šå®šä¹‰ dp[i][j] è¡¨ç¤ºè¾“å…¥ä¸º A[i:j+1] çš„å­é—®é¢˜çš„è§£ å¦‚æœè¾“å…¥æ˜¯ä¸¤ä¸ªåºåˆ— A å’Œ B ä¸ºä¹‹å‰ 3 ç§å¯èƒ½çš„ç¬›å¡å°”ä¹˜ç§¯ï¼Œä¸€å…±æœ‰ $3\\times 3=9$ ç§ï¼Œè§†å…·ä½“æƒ…å†µè€Œå®š æ¯”å¦‚æœ€é•¿å…¬å…±å­åºåˆ—çš„é—®é¢˜ï¼Œå¯ä»¥ç”¨ dp[i][j] è¡¨ç¤ºè¾“å…¥ä¸º A[:i+1] å’Œ B[:i+1] çš„æœ€é•¿å…¬å…±å­åºåˆ— å¦‚æœè¾“å…¥æ˜¯ä¸€ä¸ªæ•°å­— k å®šä¹‰ dp[k] ä¸ºè¾“å…¥ä¸º k çš„å­é—®é¢˜çš„è§£ å¦‚æœè¾“å…¥æ˜¯ä¸€æ£µäºŒå‰æ ‘ å®šä¹‰ dp[r] ä¸ºè¾“å…¥ä¸ºä»¥ r ä¸ºæ ¹èŠ‚ç‚¹çš„å­æ ‘çš„è¿™ä¸ªå­é—®é¢˜çš„è§£ã€‚åœ¨æ ‘å½¢ DP ä¸­è¦æ³¨æ„ã€Œå­é—®é¢˜ã€å’Œã€Œå­æ ‘ã€è¿™ä¸ªå¯¹åº”çš„å…³ç³» ğŸ“’ è¿›é˜¶ï¼šæŒæ¡äº†ä¸Šé¢çš„ä¸€èˆ¬æ€è·¯ä¹‹åï¼Œå…¶å®å·²ç»èƒ½å¤Ÿè§£å†³å¾ˆå¤šåŠ¨æ€è§„åˆ’é—®é¢˜ï¼Œä½†ä½ æœ‰æ—¶å€™ä¼šå‘ç°ä½ å®šä¹‰çš„å­é—®é¢˜ä¸å¤Ÿç²¾ç¡®ï¼Œå¯¼è‡´éš¾ä»¥æ— æ³•å…³è”å­é—®é¢˜ï¼Œå½“ä½ åœ¨å…³è”å­é—®é¢˜æœ‰å›°éš¾çš„æ—¶å€™æ€»æ˜¯å¯ä»¥å°è¯•ç»™ä½ å®šä¹‰çš„å­é—®é¢˜åŠ ä¸Šçº¦æŸï¼Œæˆ–è€…æ˜¯å¯¹å­é—®é¢˜è¿›è¡Œæ‰©å±•ã€‚åœ¨ MIT 6.006 ä¸­ç§°ä¸º Subproblem Constraints and Expansion å¯¹å­é—®é¢˜è¿›è¡Œæ‰©å±•ä¼šæ›´ä¸ºå¸¸è§ä¸€äº›ï¼Œä¸€èˆ¬æ­¤æ—¶å°±æ˜¯å°†å®šä¹‰çš„ dp[i] å˜æˆ dp[i][j] è¿™æ ·çš„å½¢å¼ï¼ŒåŒæ—¶ä¿®æ”¹ä½ çš„å­é—®é¢˜å®šä¹‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ 198. æ‰“å®¶åŠ«èˆ ä¸­å¯ä»¥è€ƒè™‘é¢å¤–å¼•å…¥ä¸€ä¸ªçŠ¶æ€è®°ä½æ˜¯å¦å·äº†æˆ¿å±‹ i ä¹Ÿç¨å¾®æä¸€ä¸‹å¯¹å­é—®é¢˜çš„å®šä¹‰åŠ ä¸Šé™åˆ¶æ˜¯ä»€ä¹ˆæ„æ€ï¼Œæ¯”å¦‚æˆ‘ä»¬å®šä¹‰ dp[i] æ˜¯è¾“å…¥ä¸º A[:i+1] çš„è§£ï¼Œå‡è®¾æ¯ä¸ª A[i] å­˜åœ¨é€‰ä¸­ä¸ä¸é€‰ä¸­ä¸¤ä¸ªçŠ¶æ€ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘å°† dp[i] å®šä¹‰ä¸º è¾“å…¥ä¸º A[:i+1] è€Œä¸” A[i] ä¸€å®šæ˜¯é€‰ä¸­çŠ¶æ€çš„æ—¶å€™çš„è§£ï¼ˆè¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œå¾…æˆ‘ä¹‹åæ‰¾åˆ°å¯ä»¥è¿™æ ·å¤„ç†çš„é—®é¢˜åè´´ä¸ªé“¾æ¥åœ¨è¿™ï¼‰ ğŸ“’ ä½ ä¼šå‘ç°ï¼Œå®šä¹‰å­é—®é¢˜çš„æ—¶å€™æˆ‘ä»¬æ ¹æœ¬ä¸ä¼šå»æ€è€ƒè¦å¦‚ä½•è®¡ç®—å‡ºæ¥ï¼Œåƒä¸‡ä¸è¦åœ¨å®šä¹‰å­é—®é¢˜çš„æ—¶å€™å°±å¼€å§‹æƒ³è¦æ€ä¹ˆè®¡ç®—å‡ºè¿™ä¸ªå€¼ï¼Œå½“ä½ ä½¿ç”¨ SRTBOT æ¡†æ¶åˆ†æåˆ°æœ€åï¼Œä½ å°±è‡ªç„¶è€Œç„¶çŸ¥é“æ€ä¹ˆè®¡ç®—äº†~ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:1","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#å®šä¹‰å­é—®é¢˜subproblems-definition"},{"categories":["Algorithm"],"content":" é€’å½’å¼å…³è”å­é—®é¢˜ï¼ˆRelate subproblem solutions recursivelyï¼‰è¯•ç€æå‡ºä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœä½ çŸ¥é“è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œä½ å°±èƒ½å¤Ÿå°†è¿™ä¸ªå¤§é—®é¢˜åˆ†è§£ä¸ºæ›´å°çš„å­é—®é¢˜ã€‚å¯èƒ½ç”¨æ•°å­¦å…¬å¼è¡¨è¿°ä¼šæ›´æ˜æ˜¾ä¸€ç‚¹ï¼š $$ dp[i] = f(dp[j_1],dp[j_2], â€¦, dp[j_k])\\ where\\ j_k \u003ci $$ å…¶ä¸­ $f$ æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ“ä½œï¼Œå³ã€Œå¤§é—®é¢˜ã€å’Œã€Œå°é—®é¢˜ã€çš„å…³è”æ–¹å¼ ä¸Šé¢æå‡ºçš„é—®é¢˜çš„ç­”æ¡ˆä¸€èˆ¬å°±æ˜¯â€œå±€éƒ¨æš´åŠ›æšä¸¾â€ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å…³è”ä¸åŒå­é—®é¢˜çš„ä¸»è¦æ‰‹æ®µã€‚æ–¹æ³•æ˜¯ï¼šçœ‹é—®é¢˜æè¿°ï¼Œä»ä¸­å½’çº³å‡ºå…è®¸çš„â€œå†³ç­–â€ï¼Œâ€œå†³ç­–â€ä¼šå¯¼è‡´æˆ‘ä»¬ä»ä¸€ä¸ªå­é—®é¢˜è½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªå­é—®é¢˜ã€‚æ€è€ƒçš„æ—¶å€™æ³¨æ„åŠ›æ”¾åœ¨ nums[i]ã€æ›´å°çš„å­é—®é¢˜ dp[j_k] å’Œå¯è¡Œçš„å†³ç­–è¿™ä¸‰è€…ä¸Š ğŸ‘» å¦‚æœä¸€å¼€å§‹åšåŠ¨æ€è§„åˆ’æƒ³ä¸å‡ºæ¥ä¹Ÿæ²¡å…³ç³»ï¼Œè¿™ä¸œè¥¿ç†Ÿç»ƒäº†ä¹‹åå°±æ¯”è¾ƒå®¹æ˜“æƒ³åˆ°ä¸åŒå­é—®é¢˜å¦‚ä½•é€šè¿‡ä¸åŒçš„å†³ç­–å…³è”èµ·æ¥ ğŸ¤”ï¸ æˆ‘å‘ç°ï¼Œåœ¨æƒ³åŠæ³•é€’å½’å…³è”å­é—®é¢˜çš„æ—¶å€™ï¼Œç”»å‡ºä¾èµ–å›¾æ€»æ˜¯èƒ½ç»™æˆ‘å¾ˆå¤§å¸®åŠ©ï¼ˆç»“ç‚¹ä¸ºå­é—®é¢˜ï¼Œè¾¹ä¸ºâ€œå†³ç­–â€ï¼‰ï¼Œä¾èµ–å›¾ä¸ä»…æ¸…æ™°å±•ç¤ºäº†å­é—®é¢˜ä¹‹é—´çš„å…³è”æ–¹å¼ï¼Œè¿˜å¯ä»¥éªŒè¯æœ‰é‡å å­é—®é¢˜å‡ºç° python dp[i] (apply f to aggregate results) / | \\ (?)/ |(?) \\(?) / | \\ dp[j_1] dp[j_2] ... / \\ / \\ / \\ ... ... ... ... ... ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ 70. çˆ¬æ¥¼æ¢¯ é—®é¢˜ä¸­ï¼Œæ¯æ¬¡åªèƒ½çˆ¬ä¸€ä¸ªå°é˜¶æˆ–è€…ä¸¤ä¸ªå°é˜¶ï¼ˆ$K=2$ï¼‰ï¼Œé‚£ä¹ˆçˆ¬åˆ°ç¬¬ i ä¸ªå°é˜¶ä¸€å®šæ˜¯ä»ç¬¬ i - 1 ä¸ªå°é˜¶å’Œç¬¬ i - 2 ä¸ªå°é˜¶è¿‡æ¥çš„ï¼Œåˆå› ä¸ºæ±‚è§£çš„æ˜¯æ‰€æœ‰å¯èƒ½çš„èµ°æ³•ï¼Œå› æ­¤ dp[i] = dp[i - 1] + dp[i - 2]ï¼Œç”»å‡ºä¾èµ–å›¾å¦‚ä¸‹ python dp[i] (sum) / \\ (climb one step)/ \\(climb two steps) / \\ dp[i - 1] dp[i - 2] / \\ / \\ ... ...... ... ğŸ¤”ï¸ å¯ä»¥é€šè¿‡è¿™ä¸ªä¾‹å­ç†è§£â€œå±€éƒ¨æš´åŠ›æšä¸¾â€ä¸­çš„â€œå±€éƒ¨â€çš„å«ä¹‰ï¼šæˆ‘ä»¬åªè€ƒè™‘åšä¸€æ¬¡å†³ç­–ï¼Œæ¯”å¦‚ä¸Šé¢çˆ¬æ¥¼æ¢¯ï¼Œæ¯æ¬¡çˆ¬ä¸€ä¸ªå°é˜¶æœ€åè¿ç»­çˆ¬ n ä¸ªå°é˜¶ å…³è” dp[i] å’Œ dp[i - n] è¿™ç§æ–¹å¼å°±ä¸æ˜¯å±€éƒ¨ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:2","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#relate-subproblems"},{"categories":["Algorithm"],"content":" æ ¹æ®æ‹“æ‰‘æ’åºç¡®å®šè§£å†³å­é—®é¢˜çš„é¡ºåºï¼ˆTopological order to argue relation is acyclic and subproblems form a DAGï¼‰ä½ å¯èƒ½åœ¨åˆ«çš„åœ°æ–¹çœ‹åˆ°è¿‡åŠ¨æ€è§„åˆ’é—®é¢˜çš„å¦å¤–ä¸€ä¸ªåå­—â€”â€”â€œè¡¨æ ¼æ³•â€ã€‚å› ä¸ºå½“æˆ‘ä»¬é‡‡ç”¨â€œè‡ªåº•å‘ä¸Šâ€çš„è§£æ³•è§£å†³åŠ¨æ€è§„åˆ’é—®é¢˜çš„æ—¶å€™å¯ä»¥çœ‹æˆæ˜¯åœ¨å¡«è¡¨æ ¼ã€‚ä½†åœ¨æˆ‘çœ‹æ¥ï¼Œå°†åŠ¨æ€è§„åˆ’çœ‹æˆä¸€å¼ æœ‰å‘æ— ç¯å›¾ä¼šæ›´æœ‰åŠ©äºå¯¹åŠ¨æ€è§„åˆ’çš„ç†è§£â€”â€”å°†å­é—®é¢˜çœ‹æˆæ˜¯å›¾ä¸Šçš„é¡¶ç‚¹ï¼Œç”¨æœ‰å‘è¾¹è¿æ¥ã€Œå°çš„å­é—®é¢˜ã€-\u003e ã€Œå¤§çš„å­é—®é¢˜ã€ï¼Œè¿™ä¸ªå›¾ä¼šæ„æˆä¸€ä¸ªæœ‰å‘æ— ç¯å›¾ï¼ˆDAGï¼‰ï¼ŒåŠ¨æ€è§„åˆ’ç®—æ³•å…¶å®å°±æ˜¯ DAG çš„æ‹“æ‰‘æ’åºè¿‡ç¨‹ã€‚å³ã€ŒDAG æ‹“æ‰‘æ’åºã€=ã€Œè‡ªåº•å‘ä¸Šæ–¹æ³•ã€=ã€Œè¡¨æ ¼æ³•ã€ã€‚ä¸Šé¢çš„ä¾èµ–å›¾â€œè‡ªåº•å‘ä¸Šâ€å°±æ˜¯åœ¨åšæ‹“æ‰‘æ’åº ğŸ¤”ï¸ ä¸ºä»€ä¹ˆæ˜¯æœ‰å‘æ— ç¯å›¾ï¼Ÿé¦–å…ˆï¼Œæœ‰å‘è¾¹è¡¨ç¤ºäº†å­é—®é¢˜ä¹‹é—´çš„ä¾èµ–å…³ç³»ä¹Ÿè¡¨ç¤ºäº†æˆ‘ä»¬æ±‚è§£å­é—®é¢˜çš„é¡ºåºï¼šè¦è§£å†³ä¸€ä¸ªå­é—®é¢˜ï¼Œéœ€è¦å…ˆæ±‚è§£å‡ºæ›´å°çš„å­é—®é¢˜ï¼›å…¶æ¬¡ï¼Œå®ƒå¿…é¡»æ˜¯æ— ç¯çš„ï¼Œå› ä¸ºåŠ¨æ€è§„åˆ’ä¼šè®°ä½æ±‚è§£è¿‡çš„å­é—®é¢˜ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å¤šæ¬¡æ±‚è§£åŒä¸€ä¸ªå­é—®é¢˜ï¼Œå› æ­¤å®ƒå¿…é¡»æ˜¯æ— ç¯çš„ã€‚ æ„è¯†åˆ°åŠ¨æ€è§„åˆ’çš„å­é—®é¢˜æ±‚è§£é¡ºåºæ˜¯ DAG çš„æ‹“æ‰‘æ’åºæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå¸®æˆ‘ç†è§£äº†æ ‘å½¢ DP é—®é¢˜ï¼šåŠ¨æ€è§„åˆ’è¦å…ˆæ±‚è§£å­é—®é¢˜ â€“ åœ¨æ ‘å½¢ DP ä¸­ï¼Œæ˜¾ç„¶â€œå­æ ‘â€å’Œâ€œå­é—®é¢˜â€çš„æ¦‚å¿µæ˜¯å¯¹åº”çš„ï¼Œå› æ­¤è¦å…ˆè§£å†³å­é—®é¢˜å…¶å®æ„å‘³ç€è®¡ç®— dp[r] çš„æ—¶å€™åº”è¯¥å…ˆè®¡ç®— dp[r.left] å’Œ dp[r.right]ï¼Œè€Œè¿™æ°æ°éµå¾ªäº†äºŒå‰æ ‘çš„ååºéå†é¡ºåºï¼Œå› æ­¤æ ‘å½¢ DP é—®é¢˜å¾€å¾€æ˜¯é€šè¿‡ååºéå†å®ç°çš„ã€‚å¦‚æœæŠŠæ ‘çœ‹æˆå›¾çš„è¯ï¼ˆæ³¨æ„è¾¹ç”±å­©å­ç»“ç‚¹æŒ‡å‘çˆ¶èŠ‚ç‚¹ï¼‰ï¼Œé‚£ä¹ˆæ‹“æ‰‘æ’åºä¹Ÿæ˜¯å’Œååºéå†çš„é¡ºåºå¯¹åº”çš„ ğŸ¤”ï¸ å®é™…å†™ä»£ç çš„æ—¶å€™ï¼Œä½ å¯èƒ½å¯¹å¦‚ä½•ç”¨æ­£ç¡®çš„é¡ºåºæ›´æ–°å­é—®é¢˜æœ‰ç–‘é—®ï¼Œåªè¦è®°ä½æ°¸è¿œéƒ½æ˜¯å…ˆè§£å†³å°é—®é¢˜ï¼Œç„¶åæ‰åˆ°å¤§é—®é¢˜ï¼Œå†çœ‹ä¸€çœ¼å‰é¢å®šä¹‰çš„å…³ç³»å¼ï¼Œä½ å°±çŸ¥é“æ›´æ–°é¡ºåºæ˜¯ä»€ä¹ˆäº† ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:3","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#æ ¹æ®æ‹“æ‰‘æ’åºç¡®å®šè§£å†³å­é—®é¢˜çš„é¡ºåºtopological-order-to-argue-relation-is-acyclic-and-subproblems-form-a-dag"},{"categories":["Algorithm"],"content":" è¾¹ç•Œæƒ…å†µï¼ˆBase casesï¼‰ç±»ä¼¼é€’å½’ç®—æ³•ä¸­çš„ base caseï¼Œè¡¨ç¤ºç‹¬ç«‹çš„æœ€å°å­é—®é¢˜çš„è§£ï¼Œæ˜¯å…³ç³»å¼æ¨å¯¼çš„èµ·ç‚¹ï¼Œè¿™ç§ä¿¡æ¯ä¸€èˆ¬å¯ä»¥é€šè¿‡çœ‹é¢˜ç›®çœ‹å‡ºæ¥ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:4","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#è¾¹ç•Œæƒ…å†µbase-cases"},{"categories":["Algorithm"],"content":" åŸå§‹é—®é¢˜ï¼ˆOriginal problemï¼‰é€šå¸¸æ¥è¯´ï¼ŒåŸé—®é¢˜ä¸€èˆ¬éƒ½å¯¹åº” dp[n] æˆ–è€… dp[0]ï¼Œä½†æ˜¯ä¸è¦æ­»è®°ç¡¬èƒŒï¼Œè¿˜æ˜¯è¦ç»“åˆé¢˜æ„ã€ä½ å®šä¹‰çš„å­é—®é¢˜å½¢å¼ã€‚ä½†ä¸å¿…æ‹…å¿ƒï¼Œå› ä¸ºè¿™ä¸€æ­¥é€šå¸¸ä¸æ˜¯æ±‚è§£åŠ¨æ€è§„åˆ’é—®é¢˜çš„éš¾ç‚¹ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:5","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#åŸå§‹é—®é¢˜original-problem"},{"categories":["Algorithm"],"content":" æ—¶é—´å¤æ‚åº¦åˆ†æï¼ˆTime analysisï¼‰åŠ¨æ€è§„åˆ’ç®—æ³•å°±æ˜¯æ±‚è§£æ‰€æœ‰éœ€è¦æ±‚è§£çš„å­é—®é¢˜ï¼Œç„¶åè®¡ç®—åŸå§‹é—®é¢˜ï¼Œå‡è®¾ä¸€å…±æœ‰ $n$ ä¸ªå­é—®é¢˜è¦æ±‚è§£ï¼Œé‚£ä¹ˆåŠ¨æ€è§„åˆ’çš„æ—¶é—´å¤æ‚åº¦å¯ä»¥ç”¨ä¸‹é¢è¿™ä¸ªå…¬å¼è§£å†³ï¼š $$ n * O(each\\ subproblem) + O(original\\ problem) $$ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:3:6","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#æ—¶é—´å¤æ‚åº¦åˆ†ætime-analysis"},{"categories":["Algorithm"],"content":" åº”ç”¨å…‰æ˜¯è°ˆç†è®ºæ€»æ˜¯ä¸€çŸ¥åŠè§£ï¼Œåªæœ‰çœŸæ­£å¼€å§‹æŠŠ SRTBOT æ¡†æ¶åº”ç”¨äºåŠ¨æ€è§„åˆ’é—®é¢˜æ‰èƒ½å¤Ÿä½“ä¼šå®ƒçš„å¼ºå¤§ä¹‹å¤„ï¼Œä¸‹é¢æ˜¯æˆ‘æ•´ç†çš„éƒ¨åˆ†åŠ¨æ€è§„åˆ’é—®é¢˜çš„é¢˜è§£ï¼Œåœ¨é¢˜è§£é‡Œé¢æˆ‘ä¼šè°ˆåˆ°å¦‚ä½•ç”¨ SRTBOT åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜ã€‚ååºä¼šä¸æ–­æŠŠåšçš„åŠ¨æ€è§„åˆ’çš„é¢˜ç›®æ¬è¿åˆ°è¿™é‡Œæ¥ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç›´æ¥çœ‹ Leetcode è´¦å·æŸ¥çœ‹é¢˜è§£ğŸ‘» ğŸ“’ æ³¨ï¼šæˆ‘çš„è§£æ³•å¹¶ä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„è§£æ³•ï¼Œæ¯”å¦‚æœ‰æ—¶å€™å¯ä»¥ç”¨ã€ŒçŠ¶æ€å‹ç¼©ã€çš„æŠ€å·§å‡å°‘ç©ºé—´å¤æ‚åº¦ç­‰ï¼Œæˆ‘å¯èƒ½å¹¶ä¸ä¼šè¿™ä¹ˆåšï¼Œæˆ‘åªæ˜¯å°† SRTBOT æ¡†æ¶åº”ç”¨äºè¿™äº›åŠ¨æ€è§„åˆ’é—®é¢˜ Problem Solution Note 70. çˆ¬æ¥¼æ¢¯ é¢˜è§£ æ•° 746. ä½¿ç”¨æœ€å°èŠ±è´¹çˆ¬æ¥¼æ¢¯ é¢˜è§£ å•åºåˆ— 198. æ‰“å®¶åŠ«èˆ é¢˜è§£ å•åºåˆ— + æ‰©å±•å­é—®é¢˜ 322. é›¶é’±å…‘æ¢ é¢˜è§£ æ•° + é$O(1)$ å­é—®é¢˜ 300. æœ€é•¿é€’å¢å­åºåˆ— é¢˜è§£ å•åºåˆ— + é™åˆ¶å­é—®é¢˜ 5. æœ€é•¿å›æ–‡å­ä¸² é¢˜è§£ å­ä¸² 91. è§£ç æ–¹æ³• é¢˜è§£ å•åºåˆ— 139. å•è¯æ‹†åˆ† é¢˜è§£ å•åºåˆ— 279. å®Œå…¨å¹³æ–¹æ•° é¢˜è§£ å•æ•°å­— 673. æœ€é•¿é€’å¢å­åºåˆ—çš„ä¸ªæ•° é¢˜è§£ å•åºåˆ— 62. ä¸åŒè·¯å¾„ é¢˜è§£ ç½‘æ ¼ 1143. æœ€é•¿å…¬å…±å­åºåˆ— é¢˜è§£ åŒåºåˆ— + æ‰©å±•å­é—®é¢˜ 309. æœ€ä½³ä¹°å–è‚¡ç¥¨æ—¶æœºå«å†·å†»æœŸ é¢˜è§£ å•åºåˆ— + æ‰©å±•å­é—®é¢˜ 1911. æœ€å¤§å­åºåˆ—äº¤æ›¿å’Œ é¢˜è§£ å•åºåˆ— + æ‰©å±•å­é—®é¢˜ 1220. ç»Ÿè®¡å…ƒéŸ³å­—æ¯åºåˆ—çš„æ•°ç›® é¢˜è§£ æ•° + æ‰©å±•å­é—®é¢˜ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:4:0","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#åº”ç”¨"},{"categories":["Algorithm"],"content":" å‚è€ƒ Dynamic programming - WikiÂ â†©ï¸ Lecture 15 ~ 18 of MIT 6.006Â â†©ï¸ ","date":"2023-04-09","objectID":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/:5:0","series":null,"tags":["Algorithm"],"title":"ç”¨ SRTBOT æ¡†æ¶åˆ†æåŠ¨æ€è§„åˆ’é—®é¢˜","uri":"/zh-cn/solving-dynamic-programming-problems-using-srtbot/#å‚è€ƒ"},{"categories":["ML-DL"],"content":"æ¨å¯¼äº†æ·±åº¦å­¦ä¹ ä¸­çš„åå‘ä¼ æ’­ç®—æ³•çš„å…¬å¼ï¼Œå¹¶è®¨è®ºäº†å¦‚ä½•ç†è§£","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/"},{"categories":["ML-DL"],"content":" æ›´æ–°ï¼šçŸ©é˜µå½¢å¼çš„åå‘ä¼ æ’­å¯ä»¥çœ‹ è¿™é‡Œ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:0:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#"},{"categories":["ML-DL"],"content":" å¼•è¨€åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ¨¡å‹çš„ä¼˜åŒ–æ˜¯é€šè¿‡é‡‡ç”¨æ¢¯åº¦ä¸‹é™æ³•ä¸æ–­æ›´æ–°æƒé‡å’Œåç½®é¡¹ï¼Œè®©æŸå¤±è¶Šæ¥è¶Šå°ã€‚å…¶ä¸­çš„æ ¸å¿ƒå°±æ˜¯åå‘ä¼ æ’­ç®—æ³•ã€‚å›å¿†æ¢¯åº¦ä¸‹é™çš„å…¬å¼ï¼Œç”¨ $\\theta$ è¡¨ç¤ºæ¨¡å‹æ‰€æœ‰å¯å­¦ä¹ çš„å‚æ•°ï¼Œ$J$ è¡¨ç¤ºæŸå¤±å‡½æ•°ï¼Œ$\\alpha$ è¡¨ç¤ºå­¦ä¹ ç‡ï¼Œé‚£ä¹ˆæœ‰ $$ \\theta \\leftarrow \\theta - \\alpha * \\frac{\\partial J}{\\partial \\theta} $$ åå‘ä¼ æ’­è¦æ±‚è§£çš„å°±æ˜¯ä¸Šé¢å¼å­ä¸­ $\\frac{\\partial J}{\\partial \\theta}$ è¿™ä¸€é¡¹ã€‚åªæœ‰æ­£ç¡®é«˜æ•ˆè®¡ç®—å‡ºæ¢¯åº¦ï¼Œæ¨¡å‹æ‰å¯ä»¥æ²¿ç€æ¢¯åº¦çš„è´Ÿæ–¹å‘æ›´æ–°ä¸æ–­ä¼˜åŒ–ã€‚ ğŸ“’ æœ¬æ–‡ä¼šäº¤å‰ä½¿ç”¨ã€Œå‚æ•°ã€å’Œã€Œæƒé‡å’Œåç½®é¡¹ã€è¿™ä¸¤ä¸ªæœ¯è¯­ï¼Œä»–ä»¬æ˜¯åŒä¸€ä¸ªæ„æ€ï¼Œéƒ½è¡¨ç¤ºäº†æ¨¡å‹å¯ä»¥å­¦ä¹ çš„å‚æ•° ğŸ“’ æœ¬æ–‡å‡å®šä½ å¯¹æ•°å­¦ä¸Šçš„æ±‚å¯¼é“¾å¼æ³•åˆ™ç­‰æœ‰æ‰€äº†è§£ğŸ«¡ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:1:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#å¼•è¨€"},{"categories":["ML-DL"],"content":" æ¨¡å‹å‡è®¾æœ¬æ–‡è¦è®²è§£åå‘ä¼ æ’­ï¼Œé‚£ä¹ˆå½“ç„¶è¦å®šä¹‰ä¸€ä¸ªæ¨¡å‹ç”¨äºä¹‹åçš„æ¨å¯¼ï¼Œè€ƒè™‘ä¸€ä¸ªç®€å•ç„¶è€Œå¾ˆç»å…¸çš„ä¸‰å±‚å…¨è¿æ¥å±‚ï¼Œå¦‚ä¸‹æ‰€ç¤º: ğŸ“’ ä¸ºäº†è®°å·æ–¹ä¾¿ï¼Œå¤§å†™å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼Œå°å†™å­—æ¯è¡¨ç¤ºå‘é‡ï¼ˆæ— ä¸‹æ ‡ï¼‰æˆ–è€…æ ‡é‡ï¼ˆæœ‰ä¸‹æ ‡ï¼‰ å¹¶è§„å®šå¦‚ä¸‹è®°å·ï¼š ä¸åŒå±‚çš„ç¥ç»å…ƒä¸ªæ•°ï¼šè¾“å…¥å±‚æœ‰ $n$ ä¸ªç¥ç»å…ƒï¼Œéšè—å±‚æœ‰ $h$ ä¸ªç¥ç»å…ƒï¼Œè¾“å‡ºå±‚æœ‰ $k$ ä¸ªç¥ç»å…ƒ $x^1_j$ è¡¨ç¤ºè¾“å…¥çš„ç¬¬ $j$ ä¸ªç‰¹å¾ã€‚è®°è¾“å…¥å±‚ç¬¬ $1$ å±‚ $y_j$ è¡¨ç¤ºå¯¹åº”è¾“å‡ºå±‚çš„ç¬¬ $j$ ä¸ªè¾“å‡ºçš„çœŸå®å€¼ $w^l_{jk}$ è¡¨ç¤ºç¬¬ $l-1$ å±‚çš„ç¬¬ $k$ ä¸ªç¥ç»å…ƒå’Œç¬¬ $l$ å±‚çš„ç¬¬ $j$ ä¸ªç¥ç»å…ƒè¿™ä¸ªé“¾æ¥å¯¹åº”çš„æƒé‡ï¼Œæ³¨æ„è¿™é‡Œçš„ä¸‹è§’æ ‡æ˜¯ä»åé¢æŒ‡å‘å‰é¢ã€‚æ ¹æ®å‰é¢çš„éšè—å±‚å¤§å°ï¼Œå¯ä»¥ç®—å‡ºæƒé‡çŸ©é˜µçš„å¤§å°ä¸ºï¼š $W^2\\in \\mathcal{R}^{h\\times n}$ $W^3\\in \\mathcal{R}^{k\\times h}$ $b_j^l$ è¡¨ç¤ºç¬¬ $l$ å±‚çš„ç¬¬ $j$ ä¸ªç¥ç»å…ƒçš„åç½®é¡¹ $z_j^l$ è¡¨ç¤ºç¬¬ $l$ å±‚çš„ç¬¬ $j$ ä¸ªç¥ç»å…ƒè®¡ç®—çš„åŠ æƒå’Œ $a_j^l$ è¡¨ç¤ºç¬¬ $l$ å±‚çš„ç¬¬ $j$ ä¸ªç¥ç»å…ƒçš„æ¿€æ´»å‡½æ•°è¾“å‡ºå€¼ æ ¹æ®ä¸Šé¢çš„è®°å·ï¼Œæ¨¡å‹çš„å‰å‘ä¼ æ’­çš„å…¬å¼å¦‚ä¸‹ï¼š $$ z_j^2 = \\sum_kw_{jk}^2x^1_k+b_j^2 $$ $$ a_j^2=\\sigma(z_j^2) $$ $$ z_j^3 = \\sum_kw_{jk}^3a_k^2+b_j^3 $$ $$ a_j^3=\\sigma(z_j^3) $$ æ›´ä¸€èˆ¬çš„ï¼Œå¯ä»¥å¯¹ä¸Šé¢çš„å…¬å¼è¿›è¡Œæ¦‚æ‹¬ã€‚$z_j^l$ å’Œ $a_j^l$ çš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š $$ z_j^l=\\sum_kw_{jk}^la^{l-1}_k+b_j^l $$ $$ a_j^l=\\sigma(z_j^l) $$ ä¸Šé¢è¿™ä¸¤ä¸ªå…¬å¼å¾ˆé‡è¦ï¼Œç‰¹åˆ«è¦å¼„æ¸…æ¥šå¼å­çš„ä¸‹æ ‡å’Œä¸Šæ ‡çš„å…³ç³»ï¼Œä»–ä»¬åœ¨ä¹‹åçš„åå‘ä¼ æ’­çš„å…¬å¼æ¨å¯¼ä¸­ä¼šå¾ˆæœ‰ç”¨ è¿™é‡Œè€ƒè™‘ç”¨å‡å€¼å¹³æ–¹è¯¯å·®å³ MSE ä½œä¸ºæŸå¤±å‡½æ•° $J$ï¼Œ$sigmoid$ å‡½æ•°ä½œä¸ºæ¿€æ´»å‡½æ•°ï¼Œå½“ç„¶è¿™ä¸¤ä¸ªæ¢æˆåˆ«çš„å‡½æ•°çš„è¯æ¨å¯¼è¿‡ç¨‹ä¹Ÿæ˜¯ç±»ä¼¼çš„ $$ J = \\frac{1}{2k}\\sum_{j=1}^k(a_j^L-y_j)^2 $$ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:2:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#æ¨¡å‹å‡è®¾"},{"categories":["ML-DL"],"content":" åå‘ä¼ æ’­çš„ç›´è§‰ç†è§£æˆ‘å‘ç°ï¼Œåœ¨æ·±å…¥äº†è§£ç»†èŠ‚ä¹‹å‰ï¼Œä»é«˜å±‚æ¬¡çš„è§’åº¦ç†è§£ä¸€ä¸ªæ¦‚å¿µæ€»æ˜¯èƒ½å¸¦æ¥å¸®åŠ©ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œæ·±åº¦å­¦ä¹ æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹å°±æ˜¯è¦è®©æ¨¡å‹çš„é¢„æµ‹ $a^L_j$ è¶Šæ¥è¿‘çœŸå®å€¼ $y_j$ è¶Šå¥½ã€‚é‚£ä¹ˆ $a^L_j$ è·Ÿä»€ä¹ˆæœ‰å…³å‘¢ï¼Ÿæ ¹æ®æ ·æœ¬çš„çœŸå®å€¼ $y_j$ï¼Œå¯ä»¥è®¡ç®— $a^L_j$ å’Œ $y_j$ çš„è¯¯å·®ï¼Œè®¡ç®—å‡ºè¯¯å·®ä¹‹åï¼Œæˆ‘ä»¬è‚¯å®šçŸ¥é“è¦å¢å¤§è¿˜æ˜¯å‡å° $a^L_j$ æ‰èƒ½è®©æ¨¡å‹çš„é¢„æµ‹æ›´å¥½ã€‚è€Œæˆ‘ä»¬èƒ½å¤Ÿæ”¹å˜çš„é‡åªæœ‰ï¼šç¬¬ $L - 1$ å±‚å’Œç¬¬ $L$ å±‚ä¹‹é—´çš„æ¯ä¸ªæƒé‡ $w^L_{jk}$ï¼Œåç½®é¡¹ $b_j^L$ï¼Œæˆ–è€…æ˜¯ç¬¬ $L-1$ å±‚çš„æ¿€æ´»å‡½æ•°çš„è¾“å‡ºå€¼ $a^{L-1}_k$ï¼Œä½†æ˜¯ $a_k^{L-1}$ å¹¶æ— æ³•ç›´æ¥æ”¹å˜ï¼Œå®ƒæ˜¯ç”±æ›´å‰é¢çš„æƒé‡å’Œåç½®é¡¹çš„å€¼å†³å®šçš„ã€‚å½“æˆ‘ä»¬ä»åå¾€å‰æ ¹æ®é¢„æµ‹çš„è¯¯å·®ï¼Œè€ƒè™‘è¦å¦‚ä½•ä¿®æ”¹æ¯ä¸€å±‚çš„æƒé‡å’Œåç½®é¡¹çš„æ—¶å€™ï¼Œå°±æ˜¯åœ¨åšåå‘ä¼ æ’­1ã€‚ ä¸Šè¿°è¿‡ç¨‹è§£é‡Šäº† $a_j^L$ æƒ³è¦å¦‚ä½•è°ƒæ•´æ¨¡å‹çš„æƒé‡å’Œåç½®é¡¹ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘è¾“å‡ºå±‚ä¸­é™¤äº†$a_j^L$ ä»¥å¤–çš„ç¥ç»å…ƒçš„â€œæ„è§â€ã€‚ä»–ä»¬å„è‡ªå¯¹å¦‚ä½•æ”¹å˜æ¨¡å‹çš„æƒé‡å’Œåç½®é¡¹çš„â€œæ„è§â€å¹¶ä¸ä¸€å®šç›¸åŒã€‚æœ€åï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘è¾“å‡ºå±‚ä¸­æ‰€æœ‰ç¥ç»å…ƒçš„æ„è§æ¥æ›´æ–°æ¨¡å‹çš„æƒé‡å’Œåå·® ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:3:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#åå‘ä¼ æ’­çš„ç›´è§‰ç†è§£"},{"categories":["ML-DL"],"content":" åå‘ä¼ æ’­çš„å››ä¸ªå…¬å¼åå‘ä¼ æ’­çš„æ ¸å¿ƒå°±æ˜¯ä¸‹é¢å››ä¸ªå…¬å¼ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:4:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#åå‘ä¼ æ’­çš„å››ä¸ªå…¬å¼"},{"categories":["ML-DL"],"content":" å…¬å¼ä¸€$$ \\delta_j^L=\\frac{\\partial J}{\\partial a_j^L}\\sigmaâ€™(z_j^L) $$ å…¶ä¸­ $L$ ä¸ºæ¨¡å‹çš„å±‚æ•°ï¼Œåœ¨æˆ‘ä»¬å‰é¢å®šä¹‰çš„æ¨¡å‹ä¸­ $L=3$ï¼Œ$\\delta_j^L$ è¡¨ç¤ºç¬¬ $L$ å±‚å³è¾“å‡ºå±‚çš„ç¬¬ $j$ ä¸ªç¥ç»å…ƒçš„æ¢¯åº¦ä¿¡æ¯ é¡ºå¸¦ä¸€æï¼Œç”¨çŸ©é˜µå’Œå‘é‡çš„è§’åº¦å¯ä»¥æŠŠä¸Šé¢çš„å…¬å¼æ”¹å†™ä¸º$\\delta^L=\\nabla J\\odot \\sigmaâ€™(z^L)$ã€‚å…¶ä¸­ $\\odot$ è¡¨ç¤ºæŒ‰å…ƒç´ ï¼ˆelement-wiseï¼‰ä¹˜ ğŸ“’ å…¬å¼ä¸€è®¡ç®—çš„æ˜¯è¾“å‡ºå±‚çš„æ¯ä¸ªç¥ç»å…ƒçš„æ¢¯åº¦ æ¨å¯¼è¿‡ç¨‹â¬‡ï¸ $$ \\begin{aligned} \\delta_j^L\u0026=\\frac{\\partial J}{\\partial z_j^L} \\\\\\ \u0026=\\sum_k\\frac{\\partial J}{\\partial a_k^L}\\frac{\\partial a_k^L}{\\partial z_j^L} \\\\\\ \u0026=\\frac{\\partial J}{\\partial a_j^L}\\frac{\\partial a_j^L}{\\partial z_j^L}\\ (only\\ \\frac{\\partial a_j^L}{\\partial z_j^L}\\ne 0) \\\\\\ \u0026=\\frac{\\partial J}{\\partial a_j^L}\\frac{\\partial \\sigma(z_j^L)}{\\partial z_j^L}\\ \\\\\\ \u0026=\\frac{\\partial J}{\\partial a_j^L}\\sigmaâ€™(z_j^L) \\end{aligned} $$ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:4:1","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#å…¬å¼ä¸€"},{"categories":["ML-DL"],"content":" å…¬å¼äºŒ$$ \\delta^l=((w^{l+1})^T\\delta^{l+1})\\odot \\sigmaâ€™(z^l) $$ ğŸ“’ å…¬å¼äºŒè®¡ç®—çš„æ˜¯ä»»æ„å±‚ $l$ çš„æ¢¯åº¦å‘é‡ï¼Œæ³¨æ„è¿™ä¸ªå…¬å¼å¦‚ä½•å°†ç¬¬ $l$ å±‚çš„æ¢¯åº¦å‘é‡å’Œç¬¬ $l+1$ çš„æ¢¯åº¦å‘é‡è”ç³»èµ·æ¥ã€‚å®ƒè®©æˆ‘ä»¬å¯ä»¥ç”¨åé¢çš„å±‚çš„æ¢¯åº¦å‘é‡è®¡ç®—å‰é¢çš„å±‚çš„æ¢¯åº¦å‘é‡ æ¨å¯¼è¿‡ç¨‹â¬‡ï¸ $$ \\begin{aligned} \\delta_j^l\u0026=\\frac{\\partial J}{\\partial z_j^l} \\\\\\ \u0026=\\sum_k\\frac{\\partial J}{\\partial z_k^{l+1}}\\frac{\\partial z_k^{l+1}}{\\partial z_j^l} \\\\\\ \u0026=\\sum_k\\delta_k^{l+1}\\frac{\\partial }{\\partial z_j^l}z_k^{l+1} \\end{aligned} $$ æ³¨æ„å…¶ä¸­ $\\frac{\\partial }{\\partial z_j^l}z_k^{l+1} = \\frac{\\partial }{\\partial z_j^l}\\ \\sum_pw^{l+1}_{kp}\\sigma(z_p^l)+b^{l+1}_k$ åªæœ‰å½“ $p=j$ çš„æ—¶å€™æ‰å¯å¯¼ï¼Œå› æ­¤ä¸Šé¢å…¬å¼çš„è§£æ˜¯ $w^{l+1}_{kj}\\sigmaâ€™(z_j^l)$ å³ï¼Œæˆ‘ä»¬è¯æ˜äº†$\\delta_j^l=\\sum_k\\delta_k^{l+1}\\ w^{l+1}_{kj}\\sigmaâ€™(z_j^l)$ $\\sum_k\\delta_k^{l+1}w^{l+1}_{kj}$ å…¶å®å°±æ˜¯è®¡ç®— 2 ä¸ªå‘é‡çš„å†…ç§¯ï¼Œå› æ­¤å¯ä»¥å°†å…¶æ”¹å†™ä¸ºå‘é‡å½¢å¼ - $\\delta^l=((w^{l+1})^T\\delta^{l+1})\\odot \\sigmaâ€™(z^l)$ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:4:2","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#å…¬å¼äºŒ"},{"categories":["ML-DL"],"content":" å…¬å¼ä¸‰$$ \\frac{\\partial J}{\\partial b^l_j}=\\delta_j^l $$ ğŸ“’ å…¬å¼ä¸‰å¯ä»¥ç”¨æ¥è®¡ç®—æ¨¡å‹ä¸­ä»»æ„ä¸€ä¸ªåç½®é¡¹ï¼ˆBiasï¼‰çš„æ¢¯åº¦ æ¨å¯¼è¿‡ç¨‹â¬‡ï¸ $$ \\begin{aligned} \\frac{\\partial J}{\\partial b^l_j}\u0026= \\frac{\\partial J}{\\partial z^l_j}\\frac{\\partial z^l_j}{\\partial b^l_j} \\\\\\ \u0026= \\delta_j^l \\frac{\\partial}{\\partial b^l_j}\\sum_kw^l_{jk}a^{l-1}_j+b^l_j\\\\\\ \u0026= \\delta_j^l \\end{aligned} $$ æ³¨æ„ä¸Šé¢çš„ç¬¬ä¸€ä¸ªç­‰å·å’Œå…¬å¼ä¸€çš„æ¨å¯¼ç±»ä¼¼ï¼Œæˆ‘ç›´æ¥è·³è¿‡äº†å»æ‰ $\\sum_k$ çš„è¿‡ç¨‹ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:4:3","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#å…¬å¼ä¸‰"},{"categories":["ML-DL"],"content":" å…¬å¼å››$$ \\frac{\\partial J}{\\partial w_{jk}^l}=a_k^{l-1}\\delta_j^l $$ ğŸ“’ å…¬å¼å››å¯ä»¥ç”¨æ¥è®¡ç®—æ¨¡å‹ä¸­ä»»æ„ä¸€ä¸ªæƒé‡ï¼ˆWeightï¼‰çš„æ¢¯åº¦ æ¨å¯¼è¿‡ç¨‹â¬‡ï¸ $$ \\begin{aligned} \\frac{\\partial J}{\\partial w_{jk}^l}\u0026=\\frac{\\partial J}{\\partial z^l_j}\\frac{\\partial z^l_j}{\\partial w_{jk}^l} \\\\\\ \u0026=\\frac{\\partial J}{\\partial z^l_j}\\frac{\\partial }{\\partial w_{jk}^l}\\sum_pw_{jp}^la_p^{l-1}+b_j^l \\\\\\ \u0026=\\delta_j^l\\frac{\\partial }{\\partial w_{jk}^l}\\sum_kw_{jk}^la_k^{l-1}+b_j^l \\\\\\ \u0026=\\delta_j^la_k^{l-1} \\end{aligned} $$ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:4:4","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#å…¬å¼å››"},{"categories":["ML-DL"],"content":" åå‘ä¼ æ’­ç®—æ³•åŸºäºå‰é¢è®¨è®ºçš„å…¬å¼ï¼Œå¯ä»¥çŸ¥é“åå‘ä¼ æ’­ç®—æ³•çš„å·¥ä½œæµç¨‹ å‰å‘ä¼ æ’­ï¼Œè®¡ç®—æ¯ä¸ª $z_j^l$ï¼Œ$a_j^l$ æ ¹æ®å…¬å¼ä¸€è®¡ç®—è¾“å‡ºå±‚çš„æ¢¯åº¦å‘é‡ $\\delta^L$ ä»åå¾€å‰ æ ¹æ®å…¬å¼äºŒè®¡ç®—æ¯ä¸€å±‚çš„æ¢¯åº¦å‘é‡ $\\delta^l$ï¼Œæ³¨æ„æˆ‘ä»¬æ€»æ˜¯å¯ä»¥æ ¹æ® $\\delta^{l+1}$ è®¡ç®—å‡º $\\delta^l$ æ ¹æ®å…¬å¼ä¸‰å¯ä»¥è®¡ç®—å‡ºæ¯ä¸ªåç½®é¡¹ $b^l_j$ çš„æ¢¯åº¦ï¼Œå®ƒç­‰äº $\\delta^l_j$ æ ¹æ®å…¬å¼å››å¯ä»¥è®¡ç®—å‡ºæ¯ä¸ªæƒé‡ $w^l_{jk}$ çš„æ¢¯åº¦ï¼Œå®ƒç­‰äº $\\delta_j^la_k^{l-1}$ ä¸Šé¢è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå›ç­”äº†â€”â€”ä¸ºä»€ä¹ˆåå‘ä¼ æ’­æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•è¿™ä¸ªé—®é¢˜ ğŸ‘ æ ¹æ®å…¬å¼äºŒï¼Œè®¡ç®—ç¬¬ $l$ å±‚çš„æ¢¯åº¦å‘é‡ $\\delta^l$ çš„æ—¶å€™ $\\delta^{l+1}$ å·²ç»ç®—å¥½äº†ï¼Œä¸ç”¨ä»å¤´ä»è¾“å‡ºå±‚å¼€å§‹æ¨å¯¼ ğŸ‘ æ ¹æ®å…¬å¼ä¸‰å’Œå…¬å¼å››ï¼Œç›´æ¥ç®—å‡ºäº†æŸå¤±å‡½æ•°å¯¹å½“å‰å±‚æƒé‡å’Œåç½®é¡¹çš„æ¢¯åº¦ï¼Œè€Œä¸æ˜¯å…¶ä»–ä»€ä¹ˆä¸­é—´çš„æ¢¯åº¦ç»“æœ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:4:5","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#åå‘ä¼ æ’­ç®—æ³•"},{"categories":["ML-DL"],"content":" æ€»ç»“ä¸Šé¢å°±æ˜¯åå‘ä¼ æ’­ç®—æ³•çš„æ•´ä¸ªæµç¨‹ï¼Œå…¬å¼å’Œè®°å·è¿˜æ˜¯é¢‡å¤šçš„ï½ä½†è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œåœ¨å¤ä¹ åå‘ä¼ æ’­ç®—æ³•çš„æ—¶å€™å‘ç°äº†ä¸€äº›å¯èƒ½å¸®åŠ©è¯»è€…ç†è§£åå‘ä¼ æ’­çš„ç‚¹ï¼š åå‘ä¼ æ’­æ˜¯é’ˆå¯¹å•ä¸ªæ ·æœ¬çš„ç®—æ³•ï¼Œæ‰€ä»¥æ¨å¯¼çš„æ—¶å€™è€ƒè™‘ä¸€ä¸ªæ ·æœ¬ä½œä¸ºæ¨¡å‹çš„è¾“å…¥å°±è¡Œäº† æ¨å¯¼å…¬å¼çš„æ—¶å€™ä»æŸä¸ªç¥ç»å…ƒçš„è§’åº¦æ€è€ƒï¼Œç„¶åå½’çº³ä¸ºå‘é‡å½¢å¼ã€‚è€Œä¸æ˜¯ä¸€ä¸Šæ¥å°±ä»å‘é‡å½¢å¼å…¥æ‰‹ï¼Œå½“ç„¶å®åŠ›å¥½çš„å½“æˆ‘æ²¡è¯´ æ”¶å·¥ï¼Œæ„Ÿè°¢é˜…è¯»ğŸ‘‹ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:5:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#æ€»ç»“"},{"categories":["ML-DL"],"content":" å‚è€ƒ What is backpropagation really doing? - 3Blue1BrownÂ â†©ï¸ ","date":"2023-04-04","objectID":"/zh-cn/backpropagation-tutorial/:6:0","series":null,"tags":["Deep-Learning"],"title":"åå‘ä¼ æ’­å…¬å¼æ¨å¯¼å’Œç†è§£","uri":"/zh-cn/backpropagation-tutorial/#å‚è€ƒ"},{"categories":["ML-DL"],"content":"æœºå™¨å­¦ä¹ ä¸­çš„çº¿æ€§å›å½’æ¨¡å‹æŒ‡å—ï¼ŒåŒ…æ‹¬æ¢¯åº¦ä¸‹é™ç®—æ³•æ¨å¯¼ç­‰","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/"},{"categories":["ML-DL"],"content":" å¼•è¨€æœ€è¿‘ï¼Œé‡æ–°åˆ·èµ·äº†å´æ©è¾¾çš„æœºå™¨å­¦ä¹ è¯¾ç¨‹ï¼Œç³»ç»Ÿæ€§å¤ä¹ äº†ä¹‹å‰å­¦è¿‡çš„çŸ¥è¯†ï¼Œå‘ç°åˆæœ‰ä¸å°‘æ”¶è·ï¼Œæ‰“ç®—ä»”ç»†æ•´ç†ä¸€ç•ªğŸ‘ è¦è°ˆè®ºä»€ä¹ˆæ˜¯çº¿æ€§å›å½’é¦–å…ˆè¦å¯¹ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ æœ‰ä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†ï¼Œä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼ŸæŠ½è±¡æ¥è¯´æœºå™¨å­¦ä¹ å°±æ˜¯å­¦ä¹ ä¸€ä¸ªå‡½æ•° $$ f(input) = output $$ å…¶ä¸­ $f$ æŒ‡çš„å°±æ˜¯å…·ä½“çš„æœºå™¨å­¦ä¹ æ¨¡å‹ã€‚æœºå™¨å­¦ä¹ å°±æ˜¯è‡ªåŠ¨æ‹Ÿåˆè¾“å…¥ - è¾“å‡ºä¹‹é—´çš„å…³ç³»çš„ä¸€å¥—æ–¹æ³•è®ºã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå‘ç°ä¸€äº›é—®é¢˜å¾ˆéš¾å®šä¹‰å‡ºä¸€ä¸ªå…·ä½“çš„ç®—æ³•æ¥è§£å†³ï¼Œè¿™æ—¶å°±æ˜¯æœºå™¨å­¦ä¹ å‘å…‰å‘çƒ­çš„åœ°æ–¹äº†ï¼Œæˆ‘ä»¬å¯ä»¥è®©å®ƒä»æ•°æ®ä¸­è‡ªå·±å­¦ä¹ ã€æ€»ç»“ä¸€äº›æ¨¡å¼ï¼Œåšå‡ºç›¸å…³çš„é¢„æµ‹ã€‚è¿™ä¹Ÿæ˜¯å®ƒå’Œä¼ ç»Ÿçš„ç®—æ³•ï¼ˆäºŒåˆ†ã€é€’å½’ç­‰ï¼‰åŒºåˆ«çš„åœ°æ–¹ã€‚ä¸å¾—ä¸æ‰¿è®¤ï¼Œæœºå™¨å­¦ä¹ ä»å®šä¹‰ä¸Šæ¥è¯´å°±å¾ˆè¿·äººï¼Œå®ƒä¼¼ä¹ä¸ºæ‰€æœ‰éš¾ä»¥è§£å†³çš„é—®é¢˜æä¾›äº†ä¸€å¥—å¯è¡Œçš„è§£å†³æ¡†æ¶ã€‚æ°æ°ç°å®ç”Ÿæ´»ä¸­çš„ä¸€äº›é—®é¢˜å°±æ˜¯å¾ˆéš¾ç”¨ä¼ ç»Ÿç®—æ³•è§£å†³çš„ ğŸ“’ ä¸ºæ­¤ï¼Œæˆ‘æ€»è§‰å¾—æ¯ä¸ªç¨‹åºå‘˜éƒ½åº”è¯¥æ‡‚ç‚¹æœºå™¨å­¦ä¹ /æ·±åº¦å­¦ä¹ ï¼Œå®ƒä¹Ÿæ˜¯æˆ‘ä»¬è§£å†³é—®é¢˜çš„ä¸€å¤§å·¥å…·ğŸ’ª çº¿æ€§å›å½’å°±æ˜¯ç»å…¸çš„æœºå™¨å­¦ä¹ å…¥é—¨æ¨¡å‹ä¹‹ä¸€ï¼Œå¯ä»¥è¯´æ˜¯æœºå™¨å­¦ä¹ ç•Œçš„ â€œHello worldâ€ï¼Œç»å…¸çš„æ¯”å¦‚æ³¢å£«é¡¿æˆ¿ä»·é¢„æµ‹é¡¹ç›®ï¼ˆè™½ç„¶è¯´ç°åœ¨å·²ç»æ˜¯çƒ‚å¤§è¡—çš„é¡¹ç›®äº†ï¼‰ å‰é¢çš„å…¬å¼ä¸­ï¼Œ$input$ ä¸ºæœºå™¨å­¦ä¹ ä¸­æ‰€è°“çš„ç‰¹å¾ï¼ˆFeatureï¼‰ï¼Œå¸¸ç”¨è®°å· $x$ è¡¨ç¤ºã€‚è€Œ $output$ å¯ä»¥æ ¹æ®æ˜¯é¢„æµ‹å€¼è¿˜æ˜¯é¢„æµ‹ç±»åˆ«å¯ä»¥å¤§è‡´åˆ’åˆ†ä¸ºå›å½’é—®é¢˜ï¼ˆRegression problemï¼‰å’Œåˆ†ç±»é—®é¢˜ï¼ˆClassification problemï¼‰ä¸¤å¤§ç±» ğŸ“’ å¦‚ä½•ç†è§£ç‰¹å¾ï¼Ÿæ‰€è°“ç‰¹å¾å°±æ˜¯ï¼Œè·Ÿè¦é¢„æµ‹çš„ä¸œè¥¿é«˜åº¦ç›¸å…³çš„ä¸œè¥¿ã€‚è¿˜æ˜¯ç”¨é¢„æµ‹æˆ¿ä»·ä½œä¸ºä¾‹å­ï¼Œæˆ¿ä»·æ˜¾ç„¶è·Ÿå åœ°é¢ç§¯ã€ç»¿åŒ–æ¡ä»¶ç­‰ç›¸å…³ï¼Œè¿™é‡Œçš„å åœ°é¢ç§¯ç­‰å°±æ˜¯ç‰¹å¾ã€‚æœºå™¨å­¦ä¹ ä¸­å¯ä»¥å¯¹ç‰¹å¾åˆ†æï¼Œçœ‹å“ªäº›è·Ÿè¾“å‡ºçš„å…³è”ç¨‹åº¦é«˜ï¼Œæˆ–è€…è¿ç”¨æˆ‘ä»¬çš„é¢†åŸŸçŸ¥è¯†ï¼ˆDomain knowledgeï¼‰ï¼Œè‡ªå·±é€‰æ‹©å¥½çš„ç‰¹å¾ã€‚ä½†æ€»çš„æ¥è¯´ï¼Œæœºå™¨å­¦ä¹ è¿˜æ˜¯è¦æ±‚æˆ‘ä»¬èŠ±è´¹å¤§é‡ç²¾åŠ›åœ¨æå–å¥½çš„ç‰¹å¾ä¸Šï¼Œè¿™ä¹Ÿæ˜¯æœºå™¨å­¦ä¹ è¢«äººè¯Ÿç—…çš„åœ°æ–¹ï¼Œè€Œè¿™ä¸ªç¼ºç‚¹åœ¨æ·±åº¦å­¦ä¹ ä¸­è¢«å¤§å¤§ç¼“è§£ï¼Œå½“ç„¶é‚£æ˜¯åè¯äº† ğŸ“’ æœºå™¨å­¦ä¹ æ— æ³•é­”æ³•èˆ¬åœ°ç†è§£ä½ æä¾›çš„å„ç§æ ¼å¼çš„ $input$ï¼Œæ¯”å¦‚å›¾ç‰‡ã€æ–‡æœ¬ã€è§†é¢‘ç­‰ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œ$input$ å¸¸å¸¸è¢«å¤„ç†ä¸ºæ•°å­—ï¼Œæ‰èƒ½ç”¨å„ç§æœºå™¨å­¦ä¹ æ–¹æ³•å­¦ä¹ ã€‚æœ‰äº›ç‰¹å¾æœ¬èº«å°±æ˜¯æ•°å­—ï¼Œæ¯”å¦‚é¢„æµ‹æˆ¿ä»·ï¼Œæˆ¿å­çš„å åœ°é¢ç§¯è¿™ä¸ªç‰¹å¾æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ•°å­—ã€‚å½“è¾“å…¥ä¸æ˜¯æ•°å­—çš„æ—¶å€™ï¼Œå°±éœ€è¦åˆ«çš„æ‰‹æ®µå°†è¾“å…¥è½¬åŒ–ä¸ºæ•°å­—ï¼Œæ¯”å¦‚ç”¨è¯åµŒå…¥å‘é‡æ¨¡å‹è¡¨ç¤ºæ–‡æœ¬ç­‰ï¼Œè¿™é‡Œä¸å±•å¼€ç»†è®²ã€‚æˆ‘ä»¬æš‚æ—¶å‡è®¾å·²ç»å°†è¾“å…¥å¤„ç†ä¸ºäº†æ•°å­—çš„å½¢å¼ ä»Šå¤©è¦æåˆ°çš„çº¿æ€§å›å½’æ¨¡å‹å°±å±äºç›‘ç£å­¦ä¹ åˆ†ç±»ä¸‹çš„å›å½’æ¨¡å‹ï¼Œå®ƒè¶³å¤Ÿç®€å•ï¼Œä½†æ˜¯åˆå¯ä»¥é˜è¿°å¾ˆå¤šæœºå™¨å­¦ä¹ çš„æ€æƒ³ï¼Œç”¨æ¥å…¥é—¨æ˜¯å†é€‚åˆä¸è¿‡äº†ã€‚è¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ :) ğŸ“’ æœ¬æ–‡å‡å®šä½ å¯¹åŸºæœ¬çš„å¾®ç§¯åˆ†å’Œçº¿æ€§ä»£æ•°æœ‰æ‰€äº†è§£ï¼Œæ¯”å¦‚ä½ éœ€è¦çŸ¥é“è¡Œå‘é‡ä¹˜åˆ—å‘é‡å¦‚ä½•è¿›è¡Œä»¥åŠå¯¹åº”çš„è®°å·è¡¨ç¤ºï¼ŒçŸ©é˜µä¹˜æ³•çš„å®šä¹‰ï¼Œå‡½æ•°å¦‚ä½•æ±‚å¯¼ç­‰ ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:1:0","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#å¼•è¨€"},{"categories":["ML-DL"],"content":" çº¿æ€§å›å½’æ¨¡å‹çº¿æ€§å›å½’çš„è‹±æ–‡æ˜¯ Linear regressionã€‚é¡¾åæ€ä¹‰ï¼Œç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š Linear çš„å«ä¹‰å°±æ˜¯å®ƒæ˜¯çº¿æ€§çš„ã€‚ä»¥äºŒç»´å¹³é¢ä¸ºä¾‹ï¼Œ$y=kx+b$ è¿™ç§å°±æ˜¯çº¿æ€§ï¼Œç”»å‡ºæ¥æ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œ $y=x^2$ è¿™ç§å°±ä¸æ˜¯ï¼Œå› ä¸ºå®ƒç”»å‡ºæ¥ä¸ºæ›²çº¿ Regression æ˜¯å› ä¸ºå®ƒç¬¦åˆæœºå™¨å­¦ä¹ ä¸­å¯¹å›å½’é—®é¢˜çš„å®šä¹‰â€”â€”é¢„æµ‹ä¸€ä¸ªä¸é™åˆ¶èŒƒå›´çš„å€¼ ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:2:0","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#çº¿æ€§å›å½’æ¨¡å‹"},{"categories":["ML-DL"],"content":" åˆ†ç±» ğŸ“’ ä¸ºäº†å½¢å¼çš„ç®€æ´ä¸‹é¢çš„è®°å· $f(x)$ å…¶å®çœç•¥äº†ä¸‹æ ‡ $w,b$ã€‚$f(x)=f_{w,b}(x)$ ğŸ“’ æœ‰æ—¶å€™ä¼šçœ‹åˆ°æœ‰çš„ä¹¦æˆ–è€…åšå®¢ç”¨ $h_\\theta$ è¡¨ç¤ºæ¨¡å‹ï¼Œæˆ‘è®¤ä¸º $f(x)$ æ¯”è¾ƒç®€æ´å°±ç”¨äº†è¿™ä¸ªè®°æ³• å¦‚æœè¦è¿›ä¸€æ­¥å¯¹çº¿æ€§å›å½’æ¨¡å‹è¿›è¡Œç»†åˆ†ï¼Œåˆå¯ä»¥åˆ†æˆå¦‚ä¸‹å‡ ç±» ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:3:0","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#åˆ†ç±»"},{"categories":["ML-DL"],"content":" å•å˜é‡çº¿æ€§å›å½’å¦‚æœæ¨¡å‹çš„è¾“å…¥ç‰¹å¾åªæœ‰ä¸€ä¸ªï¼Œå°±å«åšå•å˜é‡çº¿æ€§å›å½’ï¼ˆUnivariate linear regressionï¼‰ï¼Œæ­¤æ—¶è¾¾åˆ°äº†æœ€ç®€å•çš„å½¢å¼ $$ f(x)=wx+b $$ åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œåˆ†åˆ«ç§° $w$ å’Œ $b$ ä¸ºæƒé‡ï¼ˆWeightï¼‰å’Œåç½®é¡¹ï¼ˆBiasï¼‰ ğŸ“’ æ³¨æ„ï¼š$\\theta$ ä¸ºä¸€ä¸ªå‘é‡ï¼ŒæŒ‰é“ç†åº”è¯¥ç”¨ $\\vec \\theta$ è¡¨ç¤ºï¼Œä½†æ˜¯ä¸‹é¢ä¸ºäº†ç®€æ´ï¼Œæˆ‘éƒ½çœç•¥äº†ç®­å¤´ ğŸ“’ ä¹Ÿå¯ä»¥ç”¨å‘é‡çš„å½¢å¼å†™ï¼Œç”¨ $\\theta=[b, w]$ è¡¨ç¤ºæ¨¡å‹çš„å‚æ•°ï¼Œä»¤ $\\vec x=[1, x]^T$ã€‚é‚£ä¹ˆæ ¹æ®å‘é‡ä¹˜æ³•çš„çŸ¥è¯†æˆ‘ä»¬å¯ä»¥çŸ¥é“ $\\theta^T\\vec x=wx+b$ ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:3:1","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#å•å˜é‡çº¿æ€§å›å½’"},{"categories":["ML-DL"],"content":" å¤šå˜é‡çº¿æ€§å›å½’å¦‚æœæ¨¡å‹æœ‰å¤šä¸ªè¾“å…¥çš„ç‰¹å¾ï¼Œå°±å«åšå¤šå˜é‡çº¿æ€§å›å½’ï¼ˆMultiple linear regresseionï¼‰ $$ f(x)=w_1x_1+w_1x_2+â€¦w_nx_n+b $$ å…¶ä¸­ $x_i$ æ˜¯ä¸åŒçš„ç‰¹å¾ï¼Œä¸€å…±æœ‰ $n$ ä¸ªç‰¹å¾ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦æ¯ä¸ªç‰¹å¾å­¦ä¹ ä¸€ä¸ªæƒé‡ $w_i$ ğŸ“’ åŒç†ï¼Œå¯ä»¥é€‰æ‹©ç”¨å‘é‡çš„å½¢å¼æ¥å†™ï¼Œä»¤ $\\theta=[b, w_1, w_2, â€¦, w_n]$ï¼Œ$\\vec x=[1, x_1, x_2, â€¦, x_n]^T$ï¼Œå‘é‡ä¹˜æ³•ä¹‹åä¹Ÿå¯ä»¥å¾—åˆ°ä¸Šé¢çš„å½¢å¼ã€‚ä½ ä¼šæƒŠè®¶åœ°å‘ç°ï¼Œå•å˜é‡çº¿æ€§å›å½’å’Œå¤šå˜é‡çº¿æ€§å›å½’æœ‰äº†ç»Ÿä¸€çš„å½¢å¼â€”â€”$f(\\vec x)=\\theta^T\\vec x$ã€‚è¿™åœ¨åé¢æ±‚è§£æ¢¯åº¦çš„æ—¶å€™ä¼šå¸¦æ¥å¾ˆå¤§çš„æ–¹ä¾¿ ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:3:2","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#å¤šå˜é‡çº¿æ€§å›å½’"},{"categories":["ML-DL"],"content":" æ¨¡å‹å¦‚ä½•è®­ç»ƒ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:4:0","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#æ¨¡å‹å¦‚ä½•è®­ç»ƒ"},{"categories":["ML-DL"],"content":" æŸå¤±å‡½æ•°å®šä¹‰äº†çº¿æ€§å›å½’æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦è¡¡é‡å®ƒçš„é¢„æµ‹å¥½åï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬å¸Œæœ›é¢„æµ‹çš„å€¼è·Ÿå®é™…ä¸Šçš„å€¼çš„â€œè·ç¦»â€è¶Šæ¥è¿‘è¶Šå¥½ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¼šè§„å®šä¸€ä¸ªæŸå¤±å‡½æ•°ï¼ˆCost functionï¼‰è¡¡é‡â€œè·ç¦»â€ï¼ŒæŸå¤±è‡ªç„¶æ˜¯è¶Šä½è¶Šå¥½ã€‚å½“æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„æŸå¤±é™åˆ°æœ€ä½ä¸å†æ˜æ˜¾å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è®¤ä¸ºæ¨¡å‹æ”¶æ•›äº†ï¼Œæ­¤æ—¶å¾—åˆ°äº†æœ€å¥½çš„æ¨¡å‹ ğŸ“’ åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œé€šå¸¸å°†æ•°æ®åˆ’åˆ†ä¸ºè®­ç»ƒé›†/éªŒè¯é›†/æµ‹è¯•é›†ï¼Œæ¨¡å‹ç”¨è®­ç»ƒé›†ä¸Šçš„æ•°æ®å­¦ä¹ ï¼Œåœ¨éªŒè¯é›†ä¸ŠéªŒè¯ã€è°ƒå‚ï¼Œæœ€ååœ¨æµ‹è¯•é›†ä¸Šè¿›è¡Œæ³›åŒ–æ€§éªŒè¯ï¼ˆæµ‹è¯•é›†åŒ…å«æ²¡æœ‰è§è¿‡çš„æ•°æ®ï¼‰ã€‚åªç”¨è®­ç»ƒé›†/æµ‹è¯•é›†è¿™ç§åˆ’åˆ†æ–¹æ³•ï¼Œç›´æ¥åœ¨æµ‹è¯•é›†ä¸Šè°ƒå‚æ˜¯ä¸æ­£ç¡®çš„åšæ³•ã€‚æµ‹è¯•é›†å½“ä¸”ä»…å½“æœ€åä½ è®­ç»ƒå’Œè°ƒå‚ç»“æŸï¼Œé€‰å‡ºä½ è®¤ä¸ºçš„æœ€å¥½æ¨¡å‹çš„çš„æ—¶å€™ï¼Œåœ¨è®ºæ–‡é‡Œé¢æ˜¯æŠ¥å‘Šç»“æœçš„æ—¶å€™é‡‡ç”¨çš„ çº¿æ€§å›å½’æ¨¡å‹çš„æŸå¤±å‡½æ•°æœ€å¸¸ç”¨çš„æ˜¯å‡å¹³æ–¹è¯¯å·®ï¼Œæˆ‘æ›´ç»å¸¸ç›´æ¥ç”¨è‹±æ–‡çš„ç¼©å†™ MSEï¼ˆMean square errorï¼‰ä»£æŒ‡ã€‚å…¶å…¬å¼å¦‚ä¸‹ï¼š $$ MSE=\\frac{1}{2m}\\sum^m_{i=1}(\\hat y^{(i)} - y^{(i)})^2 $$ å…¶ä¸­ $m$ è¡¨ç¤ºæ ·æœ¬ä¸ªæ•° ä¸Šè§’æ ‡ ${(i)}$ åŠ äº†æ‹¬å·ï¼Œå’ŒæŒ‡æ•°çš„è®°å·è¿›è¡ŒåŒºåˆ†ï¼Œè¡¨ç¤ºç¬¬ $i$ ä¸ªæ ·æœ¬çš„é¢„æµ‹/çœŸå®å€¼ $\\hat y$ è¿™ä¸ªè®°å·è¡¨ç¤ºçº¿æ€§å›å½’æ¨¡å‹çš„é¢„æµ‹ï¼Œ$y$ è¡¨ç¤ºæœ¬æ¥çš„çœŸå®å€¼ ğŸ“’ æˆ‘é‡‡ç”¨äº†ç¬¦åˆæœºå™¨å­¦ä¹ æƒ¯ä¾‹çš„è®°å·ï¼Œæ¨èè®°ä½ï½ ğŸ“’ çº¿æ€§å›å½’æ¨¡å‹ä¸æ˜¯éè¦ç”¨ MSEï¼Œä¹Ÿå¯ä»¥ç”¨ç»å¯¹å€¼è¯¯å·® MAEï¼ŒMAE é€‚ç”¨äºï¼šå½“æ•°æ®é›†ä¸­çš„å¼‚å¸¸å€¼ï¼ˆOutlierï¼‰æ¯”è¾ƒå¤šçš„æ—¶å€™ï¼Œé™ä½å¯¹è¿™ç§æ ·æœ¬çš„æ•æ„Ÿåº¦ ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:4:1","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#æŸå¤±å‡½æ•°"},{"categories":["ML-DL"],"content":" æ¢¯åº¦ä¸‹é™è®­ç»ƒæ³•å‰é¢æåˆ°å½“æ¨¡å‹åœ¨éªŒè¯é›†ä¸Šçš„æŸå¤±é™åˆ°æœ€ä½è€Œä¸”ä¸å†å˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¾—åˆ°æœ€å¥½çš„æ¨¡å‹ã€‚ä½†æ˜¯è¦å¦‚ä½•è®©æ¨¡å‹ä¸æ–­æ”¹è¿›é¢„æµ‹ï¼Œé™ä½æŸå¤±å‘¢ï¼ŸğŸ¤” æ¢¯åº¦ä¸‹é™ï¼ˆGradient descentï¼‰ç®—æ³•æ˜¯ä¸€ç§é€šç”¨çš„åšæ³• ä¸è¦è¢«è¿™ä¸ªåå­—æ‰€è¿·æƒ‘ï¼Œæ¢¯åº¦ä¸‹é™ç®—æ³•å…¶å®æ²¡æœ‰é‚£ä¹ˆç¥ç§˜ã€‚å…ˆæ•´ç†æˆ‘ä»¬ç›®å‰å­¦åˆ°äº†ä»€ä¹ˆï¼š æ¨¡å‹çš„é¢„æµ‹ $\\hat y$ è·Ÿå®ƒå‚æ•°ï¼Œå¦‚æœæ˜¯å•å˜é‡çº¿æ€§å›å½’æ¨¡å‹ï¼Œå°±æ˜¯å’Œ $w$ å’Œ $b$ æœ‰å…³ æŸå¤±å‡½æ•°è·Ÿæ¨¡å‹çš„é¢„æµ‹æœ‰å…³ç³»ï¼Œå› ä¸ºæ•°æ®æœ¬èº«çœŸå®çš„å€¼è¿™ä¸ªæˆ‘ä»¬æ˜¯æ— æ³•æ”¹å˜çš„ æ‰€ä»¥æŸå¤±å‡½æ•°å®é™…ä¸Šæ˜¯ä¸€ä¸ªå…³äºæ¨¡å‹å‚æ•°çš„å‡½æ•°ï¼Œåœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¸¸ç”¨è®°å· $J$ è¡¨ç¤º å…ˆè€ƒè™‘ç®€å•çš„å•å˜é‡çº¿æ€§å›å½’ï¼Œå½“å®ƒé‡‡ç”¨ MSE ä½œä¸ºæŸå¤±å‡½æ•°çš„æ—¶å€™ï¼š $$ J(w, b) = \\frac{1}{2m}\\sum^m_{i=1}(f(x^{(i)})-y^{(i)})^2 = \\frac{1}{2m}\\sum^m_{i=1}(wx^{(i)} + b - y^{(i)})^2 $$ æ ¹æ® $w$ å’Œ $b$ çš„å–å€¼ä¸åŒï¼Œ$J(w,b)$ ä¹Ÿä¸åŒï¼Œå› æ­¤æ”¹è¿›çº¿æ€§å›å½’æ¨¡å‹å…¶å®å°±æ˜¯ä¸€ç›´åœ¨è°ƒæ•´è¿™ä¸¤ä¸ªå‚æ•°è®© $J(w,b)$ çš„å€¼æ›´å°ã€‚ç”¨æ•°å­¦çš„è¯­è¨€æ¥è¯´ï¼Œæ±‚è§£æœ€ä¼˜æ¨¡å‹å…¶å®å°±æ˜¯æ±‚è§£å‡½æ•° $J(w,b)$ çš„æœ€å°ç‚¹ ğŸ“’ å›å¿† $m$ ä¸ºè®­ç»ƒé›†çš„æ ·æœ¬ä¸ªæ•°ã€‚æ›´ä¸ºä¸¥æ ¼æ¥è¯´ï¼Œä¸Šé¢çš„æ¢¯åº¦ä¸‹é™å¼å­æ˜¯æ‰¹æ¢¯åº¦ä¸‹é™ï¼ˆBatch gradient descentï¼‰ï¼Œå³æ¯ä¸ªè®¡ç®—æ¢¯åº¦çš„æ—¶å€™ç”¨çš„æ˜¯æ•´ä¸ªè®­ç»ƒé›†ä¸Šçš„æ ·æœ¬ã€‚å½“æ•°æ®é›†å¾ˆå¤§çš„æ—¶å€™è¿™ä¸ªæ–¹æ³•å°±æ— æ³•å¾ˆå¥½ Scaleï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic gradient descentï¼‰ ğŸ“’ åªè¦å­¦è¿‡å¯¼æ•°ã€æœ€å°å€¼ï¼Œæˆ‘ä»¬ä¸éš¾æ±‚è§£å‡ºä¸Šé¢å…¬å¼çš„æœ€å°å€¼ï¼Œä½†è¿™æ˜¯å› ä¸ºçº¿æ€§å›å½’æ¨¡å‹æ¯”è¾ƒç®€å•ï¼Œå½“æ¨¡å‹æ›´åŠ å¤æ‚çš„æ—¶å€™ï¼Œç”¨æ•°å­¦æ–¹æ³•æ±‚è§£ä¹Ÿä¼šæ›´åŠ å›°éš¾ï¼Œå› æ­¤åœ¨å®è·µä¸­é‡‡ç”¨çš„éƒ½æ˜¯æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼ˆä¸è€ƒè™‘å¼ºåŒ–å­¦ä¹ ï¼Œå› ä¸ºå¼ºåŒ–å­¦ä¹ ä¼˜åŒ–çš„ç›®æ ‡ä¸€èˆ¬ä¸æ˜¯ä¸€ä¸ªå¯å¾®çš„å‡½æ•°ï¼‰ è®©æˆ‘ä»¬æš‚æ—¶ä¸è€ƒè™‘ $b$ åªè€ƒè™‘ $w$ï¼Œé‚£ä¹ˆæ­¤æ—¶ $J$ æ˜¯ä¸€ä¸ªå…³äº $w$ çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥ $w$ ä¸ºæ¨ªè½´ï¼Œ$J(w)$ ä¸ºçºµè½´ç”»å‡ºå¦‚ä¸‹çš„å›¾ï¼š ğŸ“’ æ³¨æ„ï¼Œä¸Šé¢çš„å›¾å¹¶ä¸ä¸¥æ ¼éµå¾ª $J(w)$ çš„å®šä¹‰ï¼Œä¸ºäº†æ–¹ä¾¿æˆ‘è¿™é‡Œç›´æ¥ç”»äº† $y=\\frac{1}{2}x^2$ã€‚ä½†æ˜¯å½¢çŠ¶åº”è¯¥å·®ä¸å¤šï¼Œå¯ä»¥ç”¨æ¥ç†è§£æ¢¯åº¦ä¸‹é™ç®—æ³• ä»å›¾ä¸­ä¸éš¾çœ‹å‡ºï¼Œå½“ $w=0$ çš„æ—¶å€™ $J(w)$ å–åˆ°äº†æœ€å°å€¼ã€‚å‡è®¾æ¨¡å‹å½“å‰çš„å‚æ•° $w=5$ï¼Œè®¡ç®—å¾—åˆ°æŸå¤± $J(5)=12.5$ï¼Œæˆ‘ä»¬è¦å¦‚ä½•æ›´æ–° $w$ è®©æ¨¡å‹æ›´å¥½å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è®© $w$ æ²¿ç€æ¢¯åº¦çš„åæ–¹å‘æ›´æ–°ï¼ˆå›¾ä¸­çº¢è‰²çš„çº¿ä¸ºåœ¨ $w=5$ è¿™ä¸ªç‚¹çš„åˆ‡çº¿ï¼‰ï¼Œä¸éš¾æ±‚å‡ºè¿™ä¸€ç‚¹çš„æ¢¯åº¦ï¼ˆå¯¼æ•°ï¼‰æ˜¯ $5$ï¼Œ$w$ åº”è¯¥å‡å°ï¼Œå› æ­¤åº”è¯¥æ˜¯å‡å»è¿™ä¸ªæ¢¯åº¦ï¼ˆæ‰€ä»¥è¯´æ˜¯åæ–¹å‘ï¼‰ï¼ŒåŒæ—¶å¼•å…¥å­¦ä¹ ç‡ $\\alpha$ æ§åˆ¶æ›´æ–°çš„å¹…åº¦ï¼Œå¾—åˆ°æ›´æ–°å¼å­ $w \\leftarrow w - \\alpha \\cdot 5$ ğŸ“’ æƒ³è±¡ä½ è‡ªå·±ç«™åœ¨ $w=5$ è¿™ä¸ªç‚¹è¦å‰è¿›åˆ° $w=0$ è¿™ä¸ªæœ€å°å€¼åœ¨çš„ç‚¹ï¼Œå¦‚æœå­¦ä¹ ç‡ $\\alpha$ å¤ªå¤§ï¼Œä½ æ–°å¾—åˆ°çš„ $w$ å¯èƒ½ä¼šå°äº $0$ï¼Œä¸€ä¸‹å­è¶Šè¿‡äº† $w=0$ è¿™ä¸ªç‚¹ã€‚è™½ç„¶ä½ å¯ä»¥é€šè¿‡æ¢¯åº¦ä¸‹é™å†æ¬¡å°è¯•æ›´æ–°ï¼Œä½†æ­¤æ—¶å¾€å¾€ä½ ä¼šå‘ç°ä½ çš„æ¨¡å‹çš„æŸå¤±ä¸€ç›´åœ¨å˜åŒ–æ— æ³•æ”¶æ•›ã€‚å­¦ä¹ ç‡å’Œæ¢¯åº¦å…±åŒæ§åˆ¶äº†æ¯æ¬¡å‚æ•°æ›´æ–°çš„å¹…åº¦ ğŸ“’ æˆ‘ä»¬åœ¨åªè€ƒè™‘ $w$ çš„æ—¶å€™å¾—å‡ºäº†è¯¥å¦‚ä½•æ›´æ–°çš„ç»“è®ºâ€”â€”æ²¿ç€æ¢¯åº¦çš„åæ–¹å‘ï¼Œè€ƒè™‘æ›´å¤šçš„å‚æ•°çš„æ—¶å€™è¿™ä¸ªç»“è®ºä»ç„¶é€‚ç”¨ï¼Œä¸è¿‡é‚£å°±è¦æ¶‰åŠåˆ°æ±‚è§£åå¯¼æ•°ä¹ƒè‡³å‘é‡æ±‚å¯¼çš„çŸ¥è¯†ï¼Œè€Œä¸”æ­¤æ—¶çš„ $J$ çš„å¯è§†åŒ–ä¹Ÿæ›´ä¸ºå›°éš¾ï¼Œæ‰€ä»¥è¿™é‡Œä¸ç»†è®²ã€‚åªéœ€è¦è®°ä½æ¨¡å‹çš„æ›´æ–°æ€»æ˜¯æ²¿ç€æ¢¯åº¦çš„åæ–¹å‘å‰è¿›ï¼Œä»ç›´è§‰ä¸Šè¿›è¡ŒæŠŠæ¡ğŸ‘» åœ¨å•å˜é‡çº¿æ€§å›å½’ä¸­ï¼Œæ¢¯åº¦æ›´æ–°çš„å¼å­å¦‚ä¸‹ï¼š $$ w \\leftarrow w - \\alpha \\cdot \\frac{\\partial}{\\partial w}J(w,b) $$ åˆ«å¿˜äº†è¿˜æœ‰ $b$ï¼Œå®ƒä¹Ÿè¦æ›´æ–° $$ b \\leftarrow b - \\alpha \\cdot \\frac{\\partial}{\\partial b}J(w,b) $$ æˆ‘ä»¬æ¥å¯¹å…¶ä¸­çš„æ¢¯åº¦è®¡ç®—è¿›è¡Œæ¨å¯¼ $$ \\begin{aligned} \\frac{\\partial}{\\partial w}J(w,b)\u0026=\\frac{\\partial}{\\partial w}\\frac{1}{2m}\\sum_{i=1}^m(f(x^{(i)})-y^{(i)})^2 \\\\\\ \u0026= \\frac{\\partial}{\\partial w}\\frac{1}{2m}(wx^{(i)}+b-y^{(i)})^2 \\\\\\ \u0026= \\frac{\\partial}{\\partial w}\\frac{1}{m}\\sum_{i=1}^m(f(x^{(i)})-y^{(i)})x^{(i)} \\end{aligned} $$ $$ \\begin{aligned} \\frac{\\partial}{\\partial b}J(w,b)\u0026=\\frac{\\partial}{\\partial w}\\frac{1}{2m}\\sum_{i=1}^m(f(x^{(i)})-y^{(i)})^2 \\\\\\ \u0026= \\frac{\\partial}{\\partial b}\\frac{1}{2m}(wx^{(i)}+b-y^{(i)})^2 \\\\\\ \u0026= \\frac{\\partial}{\\partial b}\\frac{1}{m}\\sum_{i=1}^m(f(x^{(i)})-y^{(i)}) \\end{aligned} $$ å¦‚æœæ˜¯å¤šå˜é‡çº¿æ€§å›å½’ï¼Œæˆ‘ä»¬è¦æ±‚è§£æ¯ä¸ª $\\frac{\\partial }{w_i}J(w_1,w_2, â€¦,b)$ æ˜¾ç„¶å¾ˆä¸æ–¹ä¾¿ï¼Œæ­¤æ—¶ç”¨å‘é‡å½¢å¼æ¨å¯¼æ¢¯åº¦æ˜¯æœ€å¥½çš„ åœ¨å‘é‡çš„å½¢å¼ä¸‹ï¼ŒæŸå¤±å‡½æ•° MSE å†™ä½œï¼š $$ J(\\theta) = \\frac{1}{2m}(X\\theta - \\vec{y})^T(X\\theta - \\vec{y}) $$ å…¶ä¸­ $X$ ä¸ºè¾“å…¥çš„çŸ©é˜µï¼Œå¸¸ç”¨å¤§å†™å­—æ¯è¡¨ç¤ºçŸ©é˜µï¼Œå®ƒçš„æ¯ä¸€è¡Œä¸ºä¸€ä¸ªæ ·æœ¬çš„ç‰¹å¾å€¼ $(x^{(i)})^T$ï¼Œå¤§å°ä¸º $(m, n+1)$ å‰é¢æåˆ°æˆ‘ä»¬æœ‰ $n$ ä¸ªç‰¹å¾ï¼Œè¿™é‡Œä¸º $n+1$ ç»´æ˜¯å› ä¸ºåœ¨ç¬¬ä¸€ä¸ªä½ç½®æ’å…¥äº†ä¸€ä¸ª $1$ï¼Œè¿™æ ·ç›¸ä¹˜çš„æ—¶å€™ $1$ ä¼šå’Œ $b$ åšè®¡ç®— $x^{(i)}$ éœ€è¦è½¬ç½®å› ä¸ºæœ¬æ¥å®ƒæœ¬æ˜¯åˆ—å‘é‡ å¯¹äºå•ä¸ªæ ·æœ¬æ˜¯ $\\theta^T\\vec x$ï¼Œå¯¹äº $m$ ä¸ªæ ·æœ¬çš„è®¡ç®—å°±è¦ç”¨çŸ©é˜µä¹˜æ³• $X\\theta$ $\\theta$ æ­£å¦‚æˆ‘ä»¬å‰é¢è¯´çš„æ˜¯ $[b, w_1, w_2, â€¦, w_n]$ï¼Œé•¿ä¸º $n + 1$ å› æ­¤ $X\\theta$ å°±æ˜¯æ¨¡å‹çš„é¢„æµ‹å€¼ï¼Œæ ¹æ®çŸ©é˜µä¹˜æ³•çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°é•¿ä¸º $m$ çš„å‘é‡ï¼Œè¡¨ç¤ºå¯¹æ¯ä¸ªæ ·æœ¬çš„é¢„æµ‹ $X\\theta - \\vec y$ å°±æ˜¯æ¯ä¸ªé¢„æµ‹çš„è¯¯å·® é¡ºå¸¦ä¸€æï¼Œå‡è®¾ $\\vec a$ ä¸ºåˆ—å‘é‡ï¼Œ$\\vec a^T\\vec a$ å¾—åˆ°çš„æ€»æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œä¸ºæ¯ä¸ªå…ƒç´ çš„å¹³æ–¹å’Œã€‚å¦‚æœè®© $\\vec a=X\\theta -\\vec y$ å°±å¾—åˆ°äº†ä¸Šé¢å³è¾¹çš„éƒ¨åˆ†ï¼Œè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šæ˜¯è¿™ä¸ªå½¢å¼ ğŸ¤”ï¸ æ›´æ–°ï¼šåœ¨ ç»´åº¦åˆ†æ è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘å±•ç¤ºäº†å¦‚ä½•ç”¨ç»´åº¦åˆ†ææŠ€å·§å¿«é€Ÿæ¨å¯¼å‡ºè¿™ä¸ªå…¬å¼çš„è§£ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥çœ‹ä¸‹ ä¸‹é¢æˆ‘ä»¬å¼€å§‹å°è¯•æ¨å¯¼è¿™ä¸ªå…¬å¼çš„æ¢¯åº¦ï¼Œè¿™éœ€è¦ä½ æœ‰ä¸€å®šçš„å‘é‡/çŸ©é˜µæ±‚å¯¼çŸ¥è¯†ï¼Œå¯ä»¥é€‰æ‹©è·³è¿‡ğŸ”®ã€‚ä¸è¿‡æˆ‘å»ºè®®è¿˜æ˜¯çœ‹çœ‹ï¼Œå› ä¸ºæœºå™¨å­¦ä¹ é‡Œé¢è¿˜æŒºå¤šå…¬å¼æ¨å¯¼çš„ $$ \\begin{aligned} \\frac{\\partial}{\\partial \\theta}\\ J(w,b) \u0026= \\frac{\\partial}{\\partial \\theta}\\ \\frac{1}{2m}(X\\theta - \\vec{y})^T(X\\theta - \\vec{y}) \\\\\\ \u0026= \\frac{1}{2m}\\frac{\\partial}{\\partial \\theta}\\ (\\theta^TX^T - \\vec{y}^T)(X\\theta - \\vec{y}) \\\\\\ \u0026= \\frac{1}{2m}\\frac{\\partial}{\\partial \\theta}\\ (\\theta^TX^TX\\theta - \\theta^TX^T\\vec y - \\vec y^TX\\theta + \\vec y^T\\vec y) \\\\\\ \u0026= \\frac{1}{2m}\\frac{\\partial}{\\partial \\theta}\\ (\\theta^TX^TX\\theta - \\theta^T(X^T\\vec y) - (X^T\\vec y)^T\\theta + \\vec y^T\\vec y) \\\\\\ \u0026= \\frac{1}{2m}\\frac{\\partial}{\\partial \\theta}\\ (\\theta^TX^TX\\theta - 2\\theta^T(X^T\\vec y) + \\vec y^T\\vec y) \\\\\\ \u0026= \\frac{1}{2m}(\\frac{\\partial}{\\partial \\theta}\\ (\\theta^TX^TX\\theta) - 2\\frac{\\partial}{\\partial \\theta}(\\theta^TX^T\\vec y))) \\\\\\ \u0026= \\frac{1}{2m}(2X^TX\\theta - 2X^T\\vec y)) \\\\\\ \u0026= \\frac{1}{m}(X^TX\\theta - X^T\\vec y)) \\\\\\ \u0026= \\frac{1}{m}X^T(X\\theta-\\vec y) \\end{aligned} $$ å‡ ä¸ªè§£é‡Šï¼š $X^T$ çš„å¤§å°æ˜¯ $(n+1, m)","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:4:2","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#æ¢¯åº¦ä¸‹é™è®­ç»ƒæ³•"},{"categories":["ML-DL"],"content":" æ€»ç»“çº¿æ€§å›å½’æ¨¡å‹çš„ç†è®ºéƒ¨åˆ†å°±æ˜¯ä»¥ä¸Šçš„å†…å®¹ï¼Œæœ¬æ–‡ä»‹ç»äº†å•å˜é‡çº¿æ€§å›å½’ï¼Œå¤šå˜é‡çº¿æ€§å›å½’ï¼Œå‰è€…å¯ä»¥çœ‹æˆæ˜¯åè€…çš„ä¸€ä¸ªç‰¹ä¾‹ã€‚æœ€åæˆ‘ä»¬å°†å…¶éƒ½ç”¨å‘é‡çš„å½¢å¼ç»Ÿä¸€äº†å†™æ³•ï¼Œå¹¶ç»™å‡ºäº†å‘é‡å½¢å¼ä¸‹é‡‡ç”¨ MSE ä½œä¸ºæŸå¤±å‡½æ•°çš„æ—¶å€™çš„æ¢¯åº¦è®¡ç®—å…¬å¼ æœ¬æ¥è¿˜æƒ³æ”¾ä¸€ä¸‹ä»£ç åœ¨è¿™é‡Œï¼Œç»“æœå†™ç€å†™ç€å‘ç°è¿™ä¸€ç¯‡åšå®¢å·²ç»å¾ˆé•¿äº†ï¼Œçœ‹æ¥åªå¥½å°†çº¿æ€§å›å½’æ¨¡å‹çš„ç®—æ³•æ”¾åœ¨å¦ä¸€ç¯‡äº†ğŸ™Œ ","date":"2023-03-15","objectID":"/zh-cn/linear-regression-model-guide-theory/:5:0","series":null,"tags":["Machine-Learning"],"title":"çº¿æ€§å›å½’æ¨¡å‹æŒ‡å— - ç†è®ºéƒ¨åˆ†","uri":"/zh-cn/linear-regression-model-guide-theory/#æ€»ç»“"},{"categories":["Vim-Neovim"],"content":"ä»é›¶å¼€å§‹é…ç½® Neovim ä¸ºä¸€ä¸ªè½»é‡çº§çš„ IDE","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/"},{"categories":["Vim-Neovim"],"content":" ä¿¡æ¯ æ›´æ–°ï¼š 2024-04-04ï¼Œé‡å†™éƒ¨åˆ†ç« èŠ‚ï¼ŒPackage Manager ä» packer.nvim æ¢æˆäº† lazy.nvim ğŸ¤—ã€‚ å¦‚æœä¹‹å‰è·Ÿç€æœ¬ç¯‡æ•™ç¨‹é‡‡ç”¨ packer.nvim è¿›è¡Œå®‰è£…çš„è¯ï¼Œå¯ä»¥å‚è€ƒæˆ‘è¿ç§»çš„æ—¶å€™çš„ commitï¼Œä¿®æ”¹å®Œä¹‹åè®°å¾—ç”¨ :checkhealth lazy æ£€æŸ¥ä¸‹ï¼Œå› ä¸ºè¿˜éœ€è¦åˆ é™¤ packer.nvim çš„ä¸€äº›æ—§æ–‡ä»¶ è¿›ä¸€æ­¥é˜…è¯»: å¦‚ä½•ä¸ºä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€é…ç½® Neovim ï¼Œä»¥åŠæ”¯æŒç¬¬ä¸‰æ–¹ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œè§ä¸‹ç¯‡æ–‡ç«  ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:0:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#"},{"categories":["Vim-Neovim"],"content":" ç‰ˆæœ¬ä¿¡æ¯æˆ‘ä½¿ç”¨çš„æ˜¯ Macbook pro 2020 Intel ç‰ˆæœ¬ï¼Œç³»ç»Ÿç‰ˆæœ¬ä¸º macOS 14.3.1ã€‚æˆ‘çš„ Nvim ç‰ˆæœ¬ä¿¡æ¯å¦‚ä¸‹ text NVIM v0.9.5 Build type: Release LuaJIT 2.1.1710088188 system vimrc file: \"$VIM/sysinit.vim\" fall-back for $VIM: \"/usr/local/Cellar/neovim/0.9.5/share/nvim\" Run :checkhealth for more info ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:1:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#ç‰ˆæœ¬ä¿¡æ¯"},{"categories":["Vim-Neovim"],"content":" ä¸ºä»€ä¹ˆé€‰æ‹© Neovimåœ¨ä½¿ç”¨ Vim ä¸€å¹´å¤šä¹‹åï¼Œæˆ‘è¶Šå‘è§‰å¾— Vim çš„é…ç½®éº»çƒ¦ï¼Œå¯åŠ¨åŠ è½½é€Ÿåº¦ä¹Ÿä¸å°½äººæ„ã€‚æˆ‘ä¹Ÿå¾ˆä¸å–œæ¬¢ Vimscript çš„å†™æ³•ï¼Œè¿™å¯¼è‡´æˆ‘å†³å®šä½¿ç”¨ Neovim(Nvim)ã€‚æˆ‘å†³å®šé‡æ–°é…ç½® Nvimã€‚ä¸ºä»€ä¹ˆä¼šæƒ³è¦é‡æ–°é…ç½®è€Œä¸æ˜¯è¿ç§»é…ç½®å‘¢ï¼Ÿå› ä¸ºæˆ‘æƒ³é¡ºä¾¿è¶ç€è¿™ä¸ªæœºä¼šï¼Œé‡æ–°å®¡è§†æˆ‘æœ¬æ¥ Vim çš„é…ç½®ï¼Œä»¥åŠå°†æœ¬æ¥ç”¨åˆ°çš„çš„æ’ä»¶æ›¿æ¢ä¸ºç°åœ¨çš„ SOTA(State-of-the-art)ã€‚æˆ‘è‡ªä»çœ‹å®Œ MIT çš„ Missing semester çš„è¯¾é…ç½®äº† ~/.vimrc ä¹‹åå°±å¾ˆé•¿æ—¶é—´éƒ½æ²¡æœ‰å†ç¼–è¾‘ ~/.vimrc æ–‡ä»¶äº† æˆ‘è®¤ä¸ºåœ¨é…ç½® Nvim çš„æ—¶å€™å¼„æ¸…æ¥šæ¯ä¸€ä¸ªé€‰é¡¹çš„æ„æ€æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› æ­¤æˆ‘åœ¨è¿™ç¯‡åšå®¢ä¸­ä¼šå°½é‡è§£é‡Šæ¸…æ¥šæ¯ä¸ªé€‰é¡¹çš„å«ä¹‰ï¼ŒåŒæ—¶å°†è§£é‡Šæ”¾åœ¨æ³¨é‡Šé‡Œé¢ï¼Œå³æˆ‘å°½é‡è®©æˆ‘è‡ªå·±çš„é…ç½®æ–‡ä»¶æ˜¯ self-contained è€Œä¸”å¯è¯»æ€§å¼ºçš„ ğŸ’¡ å½“ç„¶ï¼Œè¿™éš¾å…æœ‰ç–æ¼ã€‚åˆ«å¿˜äº†æˆ‘ä»¬æ°¸è¿œå¯ä»¥åœ¨ Nvim é‡Œé¢è¾“å…¥ :h \u003cname\u003e æ¥çœ‹åˆ°æ›´ä¸ºè¯¦ç»†çš„è§£é‡Š ğŸ’¡ è¯¥ç¯‡åšå®¢å‡å®šä½ å¯¹ Vim æœ‰åŸºæœ¬äº†è§£ ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:2:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#ä¸ºä»€ä¹ˆé€‰æ‹©-neovim"},{"categories":["Vim-Neovim"],"content":" Nvim é…ç½®åŸºç¡€çŸ¥è¯†","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:3:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#nvim-é…ç½®åŸºç¡€çŸ¥è¯†"},{"categories":["Vim-Neovim"],"content":" Lua è¯­è¨€åœ¨é…ç½® Nvim çš„æ—¶å€™ï¼Œæˆ‘ä¼šå°½å¯èƒ½ç”¨ Lua è¯­è¨€å†™é…ç½®ï¼Œå› æ­¤ä½ æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ Lua çš„åŸºæœ¬è¯­æ³•å’Œè¯­ä¹‰ã€‚å¯ä»¥å¿«é€Ÿæµè§ˆä¸€ä¸‹ Learn Lua in Y minutes äº†è§£å¤§æ¦‚ ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:3:1","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#lua-è¯­è¨€"},{"categories":["Vim-Neovim"],"content":" é…ç½®æ–‡ä»¶è·¯å¾„Nvim çš„é…ç½®ç›®å½•åœ¨ ~/.config/nvim ä¸‹ã€‚åœ¨ Linux/Mac ç³»ç»Ÿä¸Šï¼ŒNvim ä¼šé»˜è®¤è¯»å– ~/.config/nvim/init.lua æ–‡ä»¶ï¼Œç†è®ºä¸Šæ¥è¯´å¯ä»¥å°†æ‰€æœ‰é…ç½®çš„ä¸œè¥¿éƒ½æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œä½†è¿™æ ·ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ï¼Œå› æ­¤æˆ‘åˆ’åˆ†ä¸åŒçš„æ–‡ä»¶å’Œç›®å½•æ¥åˆ†ç®¡ä¸åŒçš„é…ç½® é¦–å…ˆçœ‹ä¸‹æŒ‰ç…§æœ¬ç¯‡æ•™ç¨‹é…ç½® Nvim ä¹‹åï¼Œç›®å½•ç»“æ„çœ‹èµ·æ¥ä¼šæ˜¯æ€ä¹ˆæ ·â¬‡ï¸ text nvim â”œâ”€â”€ init.lua â””â”€â”€ lua â”œâ”€â”€ colorscheme.lua â”œâ”€â”€ config â”‚Â â””â”€â”€ nvim-cmp.lua â”œâ”€â”€ keymaps.lua â”œâ”€â”€ lsp.lua â”œâ”€â”€ options.lua â””â”€â”€ plugins.lua è§£é‡Šå¦‚ä¸‹ init.lua ä¸º Nvim é…ç½®çš„ Entry pointï¼Œæˆ‘ä»¬ä¸»è¦ç”¨æ¥å¯¼å…¥å…¶ä»– *.lua æ–‡ä»¶ colorscheme.lua é…ç½®ä¸»é¢˜ keymaps.lua é…ç½®æŒ‰é”®æ˜ å°„ lsp.lua é…ç½® LSP options.lua é…ç½®é€‰é¡¹ plugins.lua é…ç½®æ’ä»¶ config ç”¨äºå­˜æ”¾å„ç§æ’ä»¶è‡ªèº«çš„é…ç½®ï¼Œæ–‡ä»¶åä¸ºæ’ä»¶çš„åå­—ï¼Œè¿™æ ·æ¯”è¾ƒå¥½æ‰¾ã€‚è¿™é‡Œçš„ nvim-cmp.lua å°±æ˜¯ nvim-cmp æ’ä»¶çš„é…ç½®æ–‡ä»¶ lua ç›®å½•ã€‚å½“æˆ‘ä»¬åœ¨ Lua é‡Œé¢è°ƒç”¨ require åŠ è½½æ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨ lua æ–‡ä»¶å¤¹é‡Œé¢è¿›è¡Œæœç´¢ å°†è·¯å¾„åˆ†éš”ç¬¦ä» / æ›¿æ¢ä¸º .ï¼Œç„¶åå»æ‰ .lua åç¼€å°±å¾—åˆ°äº† require çš„å‚æ•°æ ¼å¼ æ¯”å¦‚è¦å¯¼å…¥ä¸Šé¢çš„ nvim-cmp.lua æ–‡ä»¶ï¼Œå¯ä»¥ç”¨ require('config.nvim-cmp') ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:3:2","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#é…ç½®æ–‡ä»¶è·¯å¾„"},{"categories":["Vim-Neovim"],"content":" é€‰é¡¹é…ç½®ä¸»è¦ç”¨åˆ°çš„å°±æ˜¯ vim.gã€vim.optã€vim.cmd ç­‰ï¼Œæˆ‘åˆ¶é€ äº†ä¸€ä¸ªå¿«é€Ÿå‚ç…§å¯¹æ¯”çš„è¡¨æ ¼ In Vim In Nvim Note let g:foo = bar vim.g.foo = bar set foo = bar vim.opt.foo = bar set foo = vim.opt.foo = true some_vimscript vim.cmd(some_vimscript) ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:3:3","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#é€‰é¡¹é…ç½®"},{"categories":["Vim-Neovim"],"content":" æŒ‰é”®é…ç½®åœ¨ Nvim é‡Œé¢è¿›è¡ŒæŒ‰é”®ç»‘å®šçš„è¯­æ³•å¦‚ä¸‹ï¼Œå…·ä½“çš„è§£é‡Šå¯ä»¥çœ‹ :h vim.keymap.set lua vim.keymap.set(\u003cmode\u003e, \u003ckey\u003e, \u003caction\u003e, \u003copts\u003e) ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:3:4","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#æŒ‰é”®é…ç½®"},{"categories":["Vim-Neovim"],"content":" ä»é›¶å¼€å§‹é…ç½® Nvimåœ¨é˜…è¯»äº†å‰é¢ä¸€äº›é…ç½®åŸºç¡€ä¹‹åï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ä»å¤´å¼€å§‹ï¼Œç”±ç®€åˆ°æ˜“ä¸€æ­¥æ­¥é…ç½® Nvim äº† ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#ä»é›¶å¼€å§‹é…ç½®-nvim"},{"categories":["Vim-Neovim"],"content":" å®‰è£… Nvimæˆ‘ç”¨çš„æ˜¯ Macï¼Œç”¨ Homebrew å®‰è£… Nvim éå¸¸å®¹æ˜“ï¼Œåªè¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯1 sh $ brew install neovim åœ¨å®‰è£…å®Œæˆä¹‹åï¼Œå¦‚æœ ~/.config/nvim ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•å¹¶æ–°å»º init.lua æ–‡ä»¶ sh $ mkdir ~/.config/nvim $ mkdir ~/.config/nvim/lua $ touch ~/.config/nvim/init.lua ğŸ’¡ é…ç½®æ–‡ä»¶ç¼–è¾‘ä¿å­˜ä¹‹åï¼Œé‡å¯ Nvim å°±èƒ½çœ‹åˆ°æ•ˆæœï¼Œåé¢é»˜è®¤æ¯æ¬¡å°ç« èŠ‚é…ç½®å®Œæˆåå°±é‡å¯ ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:1","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#å®‰è£…-nvim"},{"categories":["Vim-Neovim"],"content":" é€‰é¡¹é…ç½®é€‰é¡¹é…ç½®åŠŸèƒ½ä¸€è§ˆï¼š é»˜è®¤é‡‡ç”¨ç³»ç»Ÿå‰ªè´´æ¿ï¼ŒåŒæ—¶æ”¯æŒé¼ æ ‡æ“æ§ Nvim Tab å’Œç©ºæ ¼çš„æ¢ç®— UI ç•Œé¢ â€œæ™ºèƒ½â€æœç´¢ æ–°å»º ~/.config/nvim/lua/options.lua æ–‡ä»¶å¹¶åŠ å…¥å¦‚ä¸‹å†…å®¹â¬‡ï¸ lua -- Hint: use `:h \u003coption\u003e` to figure out the meaning if needed vim.opt.clipboard = 'unnamedplus' -- use system clipboard vim.opt.completeopt = { 'menu', 'menuone', 'noselect' } vim.opt.mouse = 'a' -- allow the mouse to be used in Nvim -- Tab vim.opt.tabstop = 4 -- number of visual spaces per TAB vim.opt.softtabstop = 4 -- number of spacesin tab when editing vim.opt.shiftwidth = 4 -- insert 4 spaces on a tab vim.opt.expandtab = true -- tabs are spaces, mainly because of python -- UI config vim.opt.number = true -- show absolute number vim.opt.relativenumber = true -- add numbers to each line on the left side vim.opt.cursorline = true -- highlight cursor line underneath the cursor horizontally vim.opt.splitbelow = true -- open new vertical split bottom vim.opt.splitright = true -- open new horizontal splits right -- vim.opt.termguicolors = true -- enabl 24-bit RGB color in the TUI vim.opt.showmode = false -- we are experienced, wo don't need the \"-- INSERT --\" mode hint -- Searching vim.opt.incsearch = true -- search as characters are entered vim.opt.hlsearch = false -- do not highlight matches vim.opt.ignorecase = true -- ignore case in searches by default vim.opt.smartcase = true -- but make it case sensitive if an uppercase is entered ç„¶åæ‰“å¼€ init.luaï¼Œç”¨ require å¯¼å…¥åˆšæ‰å†™çš„ options.lua æ–‡ä»¶ lua require('options') ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:2","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#é€‰é¡¹é…ç½®-1"},{"categories":["Vim-Neovim"],"content":" æŒ‰é”®é…ç½®æŒ‰é”®åŠŸèƒ½ä¸€è§ˆï¼š ç”¨ \u003cC-h/j/k/l\u003e å¿«é€Ÿåœ¨å¤šçª—å£ä¹‹é—´ç§»åŠ¨å…‰æ ‡ ç”¨ Ctrl + æ–¹å‘é”®è¿›è¡Œçª—å£å¤§å°çš„è°ƒæ•´ é€‰æ‹©æ¨¡å¼ä¸‹å¯ä»¥ä¸€ç›´ç”¨ Tab æˆ–è€… Shift-Tab æ”¹å˜ç¼©è¿› æ–°å»º ~/.config/nvim/lua/keymaps.lua æ–‡ä»¶å¹¶æ”¾å…¥å¦‚ä¸‹å†…å®¹â¬‡ï¸ lua -- define common options local opts = { noremap = true, -- non-recursive silent = true, -- do not show message } ----------------- -- Normal mode -- ----------------- -- Hint: see `:h vim.map.set()` -- Better window navigation vim.keymap.set('n', '\u003cC-h\u003e', '\u003cC-w\u003eh', opts) vim.keymap.set('n', '\u003cC-j\u003e', '\u003cC-w\u003ej', opts) vim.keymap.set('n', '\u003cC-k\u003e', '\u003cC-w\u003ek', opts) vim.keymap.set('n', '\u003cC-l\u003e', '\u003cC-w\u003el', opts) -- Resize with arrows -- delta: 2 lines vim.keymap.set('n', '\u003cC-Up\u003e', ':resize -2\u003cCR\u003e', opts) vim.keymap.set('n', '\u003cC-Down\u003e', ':resize +2\u003cCR\u003e', opts) vim.keymap.set('n', '\u003cC-Left\u003e', ':vertical resize -2\u003cCR\u003e', opts) vim.keymap.set('n', '\u003cC-Right\u003e', ':vertical resize +2\u003cCR\u003e', opts) ----------------- -- Visual mode -- ----------------- -- Hint: start visual mode with the same area as the previous area and the same mode vim.keymap.set('v', '\u003c', '\u003cgv', opts) vim.keymap.set('v', '\u003e', '\u003egv', opts) ç„¶ååœ¨ init.lua æ–‡ä»¶é‡Œé¢å†æ¬¡åŠ ä¸Šä¸€è¡Œå¯¼å…¥è¿™ä¸ªæ–‡ä»¶ lua ... -- çœç•¥å…¶ä»–è¡Œ require('keymaps') è­¦å‘Š ... è¡¨ç¤ºçœç•¥äº†å…¶ä»–éƒ¨åˆ†çš„ä»£ç ï¼ˆä¸ºäº†èŠ‚çœåšå®¢çš„ç¯‡å¹…ï¼‰ ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:3","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#æŒ‰é”®é…ç½®-1"},{"categories":["Vim-Neovim"],"content":" å®‰è£…æ’ä»¶ç®¡ç†å™¨ä¸€ä¸ªå¼ºå¤§çš„ Nvim ç¦»ä¸å¼€æ’ä»¶çš„æ”¯æŒã€‚æˆ‘é€‰ç”¨çš„æ˜¯å½“ä¸‹æœ€ä¸ºæµè¡Œ lazy.nvimã€‚å®ƒæ”¯æŒå¦‚ä¸‹è®¸å¤šç‰¹æ€§ï¼š æ­£ç¡®å¤„ç†ä¸åŒæ’ä»¶ä¹‹é—´çš„ä¾èµ– æ”¯æŒå®šåˆ¶ Lazy loadingï¼Œæ¯”å¦‚åŸºäº Eventã€Filetype ç­‰ â€¦ æ–°å»º ~/.config/nvim/lua/plugins.lua æ–‡ä»¶å¹¶æ”¾å…¥å¦‚ä¸‹å†…å®¹ã€‚ä¸‹é¢çš„æ¨¡æ¿åªå®Œæˆäº† lazy.nvim è‡ªèº«çš„å®‰è£…ï¼Œè¿˜æ²¡æœ‰æŒ‡å®šå…¶ä»–ç¬¬ä¸‰æ–¹æ’ä»¶ lua local lazypath = vim.fn.stdpath(\"data\") .. \"/lazy/lazy.nvim\" if not (vim.uv or vim.loop).fs_stat(lazypath) then vim.fn.system({ \"git\", \"clone\", \"--filter=blob:none\", \"https://github.com/folke/lazy.nvim.git\", \"--branch=stable\", -- latest stable release lazypath, }) end vim.opt.rtp:prepend(lazypath) require(\"lazy\").setup({}) ğŸ’¡ åœ¨ lazy.nvim æŒ‡å®šç¬¬ä¸‰æ–¹æ’ä»¶å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ require(\"lazy\").setup({ ... }) çš„ ... é‡Œé¢å£°æ˜æ’ä»¶ ç„¶ååœ¨ init.lua æ–‡ä»¶é‡Œé¢å†æ¬¡åŠ ä¸Šä¸€è¡Œå¯¼å…¥è¿™ä¸ªæ–‡ä»¶ lua ... -- çœç•¥å…¶ä»–è¡Œ require('plugins') æ­¤æ—¶ä½ é‡å¯ Nvim ä¼šå‘ç°é»‘å±æ²¡æ˜¾ç¤ºï¼Œè¿™æ˜¯å› ä¸º lazy.nvim åœ¨å®‰è£…è‡ªå·±ï¼Œé™å¾…ç‰‡åˆ»å³å¯â˜•ï¸ã€‚ç­‰å¾… Dashboard å‡ºç°ä¹‹åï¼Œå¯ä»¥è¾“å…¥ :Lazy è¯•è¯•ï¼Œå¦‚æœçœ‹åˆ°äº†å¼¹å‡ºäº† lazy.nvim çš„çª—å£ï¼Œé‚£å°±å®‰è£…æˆåŠŸäº†ğŸ‰ æŠ€å·§ Tipï¼šç”¨ :q é€€å‡º lazy.nvim çš„çª—å£ ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:4","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#å®‰è£…æ’ä»¶ç®¡ç†å™¨"},{"categories":["Vim-Neovim"],"content":" ä¸»é¢˜é…ç½® æ³¨æ„ macOS è‡ªå¸¦çš„ Terminal.app åªæ”¯æŒ ANSI 256ï¼Œåœ¨å®‰è£…å®Œ monokai ä¸»é¢˜åï¼Œä½ å¯èƒ½ä¼šå‘ç°æ˜¾ç¤ºæ•´ä¸ªç”»é¢å˜æˆè“è‰²ã€‚ä½¿ç”¨é¢œè‰²æ”¯æŒæ›´ä¸°å¯Œçš„ Terminal å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆæ¯”å¦‚ iTerm2ã€Kittyï¼‰ æˆ‘å–œæ¬¢çš„ä¸»é¢˜æ˜¯ monokai.nvimï¼Œåœ¨ plugins.lua è¿›è¡Œä¿®æ”¹ lua ... -- çœç•¥å…¶ä»–è¡Œ require(\"lazy\").setup({ \"tanvirtin/monokai.nvim\", }) ä¿å­˜æ›´æ”¹å¹¶é‡å¯å°±å¯ä»¥çœ‹åˆ° lazy.nvim åœ¨å¸®æˆ‘ä»¬å®‰è£…æ’ä»¶äº†ï¼Œæ–°å»ºå¹¶ç¼–è¾‘ ~/.config/nvim/lua/colorscheme.lua æ–‡ä»¶ lua -- define your colorscheme here local colorscheme = 'monokai_pro' local is_ok, _ = pcall(vim.cmd, \"colorscheme \" .. colorscheme) if not is_ok then vim.notify('colorscheme ' .. colorscheme .. ' not found!') return end è¿™é‡Œç”¨åˆ°çš„ pcall æ˜¯ Lua é‡Œé¢çš„ protected callï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª bool å˜é‡è¡¨ç¤ºæ˜¯å¦æ‰§è¡ŒæˆåŠŸï¼ˆè·Ÿ Go è¯­è¨€çš„ err åŠŸèƒ½ç±»ä¼¼ï¼‰ã€‚è¿™é‡Œé‡‡ç”¨ pcall è€Œä¸æ˜¯ç›´æ¥åœ¨ init.lua æ–‡ä»¶é‡Œé¢åŠ ä¸Š vim.cmd('colorscheme monokai_pro') æ˜¯ä¸ºäº†é¿å…ä¸»é¢˜æ²¡æœ‰å®‰è£…çš„æƒ…å†µä¸‹æ‰“å¼€ Nvim çœ‹åˆ°ä¸€å¤§å †æŠ¥é”™ä¿¡æ¯2 æœ€ååœ¨ init.lua æ–‡ä»¶é‡Œé¢å¯¼å…¥å°±è¡Œ lua ... -- çœç•¥å…¶ä»–è¡Œ require('colorscheme') ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:5","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#ä¸»é¢˜é…ç½®"},{"categories":["Vim-Neovim"],"content":" è‡ªåŠ¨è¡¥å…¨æŒ‡å—è‡ªå·±æ‰‹åŠ¨é…ç½®è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½çš„è¯ä¼šæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å€ŸåŠ©äºä¸€äº›æ’ä»¶æ¥å¸®å¿™ï¼Œä¸‹é¢æˆ‘è®²è®²æˆ‘æ‘¸ç´¢å‡ºæ¥çš„æœ€ç®€å•é…ç½®æ–¹æ³• é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªè¦ç”¨åˆ°çš„æ’ä»¶æ˜¯ nvim-cmpï¼Œå®ƒå¯ä»¥ç®¡ç†å„ç§è¡¥å…¨å€™é€‰é¡¹æ¥æºï¼Œç„¶åå±•ç¤ºåœ¨è¡¥å…¨èœå•é‡Œé¢ï¼Œè¿˜æ”¯æŒæˆ‘ä»¬å¯¹å¤–è§‚ç­‰è¿›è¡Œå®šåˆ¶åŒ–ã€‚ æˆ‘ä»¬å…ˆæ–°å»º ~/.config/nvim/lua/config/nvim-cmp.lua æ–‡ä»¶é…ç½® nvim-cmp lua local has_words_before = function() unpack = unpack or table.unpack local line, col = unpack(vim.api.nvim_win_get_cursor(0)) return col ~= 0 and vim.api.nvim_buf_get_lines(0, line - 1, line, true)[1]:sub(col, col):match(\"%s\") == nil end local luasnip = require(\"luasnip\") local cmp = require(\"cmp\") cmp.setup({ snippet = { -- REQUIRED - you must specify a snippet engine expand = function(args) require('luasnip').lsp_expand(args.body) -- For `luasnip` users. end, }, mapping = cmp.mapping.preset.insert({ -- Use \u003cC-b/f\u003e to scroll the docs ['\u003cC-b\u003e'] = cmp.mapping.scroll_docs( -4), ['\u003cC-f\u003e'] = cmp.mapping.scroll_docs(4), -- Use \u003cC-k/j\u003e to switch in items ['\u003cC-k\u003e'] = cmp.mapping.select_prev_item(), ['\u003cC-j\u003e'] = cmp.mapping.select_next_item(), -- Use \u003cCR\u003e(Enter) to confirm selection -- Accept currently selected item. Set `select` to `false` to only confirm explicitly selected items. ['\u003cCR\u003e'] = cmp.mapping.confirm({ select = true }), -- A super tab -- sourc: https://github.com/hrsh7th/nvim-cmp/wiki/Example-mappings#luasnip [\"\u003cTab\u003e\"] = cmp.mapping(function(fallback) -- Hint: if the completion menu is visible select next one if cmp.visible() then cmp.select_next_item() elseif has_words_before() then cmp.complete() else fallback() end end, { \"i\", \"s\" }), -- i - insert mode; s - select mode [\"\u003cS-Tab\u003e\"] = cmp.mapping(function(fallback) if cmp.visible() then cmp.select_prev_item() elseif luasnip.jumpable( -1) then luasnip.jump( -1) else fallback() end end, { \"i\", \"s\" }), }), -- Let's configure the item's appearance -- source: https://github.com/hrsh7th/nvim-cmp/wiki/Menu-Appearance formatting = { -- Set order from left to right -- kind: single letter indicating the type of completion -- abbr: abbreviation of \"word\"; when not empty it is used in the menu instead of \"word\" -- menu: extra text for the popup menu, displayed after \"word\" or \"abbr\" fields = { 'abbr', 'menu' }, -- customize the appearance of the completion menu format = function(entry, vim_item) vim_item.menu = ({ nvim_lsp = '[Lsp]', luasnip = '[Luasnip]', buffer = '[File]', path = '[Path]', })[entry.source.name] return vim_item end, }, -- Set source precedence sources = cmp.config.sources({ { name = 'nvim_lsp' }, -- For nvim-lsp { name = 'luasnip' }, -- For luasnip user { name = 'buffer' }, -- For buffer word completion { name = 'path' }, -- For path completion }) }) ç„¶åæˆ‘ä»¬ä¿®æ”¹ plugins.lua æ–‡ä»¶æ·»åŠ ç›¸å…³çš„æ’ä»¶ lua ... -- çœç•¥å…¶ä»–è¡Œ require(\"lazy\").setup({ -- Vscode-like pictograms { \"onsails/lspkind.nvim\", event = { \"VimEnter\" }, }, -- Auto-completion engine { \"hrsh7th/nvim-cmp\", dependencies = { \"lspkind.nvim\", \"hrsh7th/cmp-nvim-lsp\", -- lsp auto-completion \"hrsh7th/cmp-buffer\", -- buffer auto-completion \"hrsh7th/cmp-path\", -- path auto-completion \"hrsh7th/cmp-cmdline\", -- cmdline auto-completion }, config = function() require(\"config.nvim-cmp\") end, }, -- Code snippet engine { \"L3MON4D3/LuaSnip\", version = \"v2.*\", }, ... -- çœç•¥å…¶ä»–è¡Œ }) è§£é‡Šå¦‚ä¸‹ cmp.setup å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª Lua çš„ Tableï¼Œç”¨äºè®¾ç½®å„ä¸ªé€‰é¡¹ï¼ˆä¸‹é¢ä¼šè§£é‡Šï¼‰ã€‚åé¢ä½ ä¼šå‘ç°å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶éƒ½ç”¨ setup ä¼ å…¥ä¸€ä¸ª Lua table çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªæ˜¯ Nvim çš„ Lua æ’ä»¶çš„æƒ¯ä¾‹ LuaSnip æ˜¯ code snippet å¼•æ“ï¼Œå› ä¸ºnvim-cmp è¦æ±‚æˆ‘ä»¬å¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ª code snippet å¼•æ“æ¥æºã€‚ä½ æš‚æ—¶ç”¨ä¸åˆ°å½“å®ƒä¸å­˜åœ¨ä¹Ÿæ²¡æœ‰å…³ç³» lazy.nvim æ”¯æŒç”¨ config = function() ... end æŒ‡å®šå¯¹åº”æ’ä»¶è¢«åŠ è½½ä¹‹åè¦è¿è¡Œçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è®© Lua å¯¼å…¥å‰é¢å†™å¥½çš„ nvim-cmp.lua é…ç½®æ–‡ä»¶ ä¸è¦è¢«ä¸Šé¢çš„è¿™ä¹ˆå¤šæ’ä»¶å“åˆ°ï¼Œnvim-cmp ä¸ºä¸»ï¼Œå…¶ä»– cmp-... çš„æ’ä»¶æ˜¯ç”¨äºåœ¨å€™é€‰é¡¹æ¥æºå’Œ nvim-cmp ä¹‹é—´äº¤äº’ï¼Œlspkind.nvim æ˜¯ç¾åŒ–ç”¨çš„ nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„æŒ‰é”®æ˜ å°„ç”¨çš„æ˜¯ mapping = ... ï¼Œæ¯ä¸ªæŒ‰é”®ç»‘å®šçš„æ ¼å¼æ˜¯ ['\u003ckey-binding\u003e'] = cmp.mapping.xxx,ï¼Œä¸åŒçš„ cmp.mapping.xxx çš„å«ä¹‰å¯ä»¥ç”¨ :h æŸ¥çœ‹ã€‚å¦‚æœä½ æƒ³è¦ç”¨å…¶ä»–çš„æŒ‰é”®ï¼Œåªè¦ä¿®æ”¹ [...] é‡Œé¢çš„æŒ‰é”®å³å¯ æŒ‰ç…§æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œè®¾ç½®äº† \u003cC-k/j\u003e æˆ–è€… \u003cTab\u003e/\u003cShift-Tab\u003e åœ¨å„ç§å€™é€‰é¡¹é‡Œé¢ç§»åŠ¨ \u003cC-b/f\u003e åœ¨å€™é€‰é¡¹çš„æ–‡æ¡£é‡Œé¢ç§»åŠ¨ \u003cCR\u003e ä¹Ÿå°±æ˜¯å›è½¦é”®ç¡®å®šè¡¥å…¨ nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•è¡¥å…¨èœå•çš„å®šåˆ¶åŒ–ç”¨çš„æ˜¯ formatting = ... fields å­—æ®µè§„å®šäº†æ¯ä¸ªå€™é€‰é¡¹è¦æ˜¾ç¤ºä»€ä¹ˆä¸œè¥¿ format = function(...) è®¾ç½®äº†ä¸åŒçš„å€™é€‰é¡¹çš„æ¥æºæ˜¾ç¤ºï¼Œåœ¨ sources = ... é‡Œé¢å£°æ˜æ¥æº ğŸ™ï¸ åˆ°è¿™ä¸ºæ­¢ï¼Œé‡æ–°å¯åŠ¨ Nvim åï¼Œç­‰å¾…æ’ä»¶å®‰è£…å®Œæˆååº”è¯¥å°±èƒ½å¤Ÿç”¨åˆæ­¥çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½äº†ï½ LSPè¦æŠŠ Nvim å˜æˆ IDE å°±åŠ¿å¿…è¦å€ŸåŠ©äº LSP3ï¼Œè‡ªå·±å®‰è£…å’Œé…ç½® LSP æ˜¯æ¯”è¾ƒç¹ççš„ã€‚ä¸åŒçš„ LSP å®‰è£…æ–¹æ³•ä¸åŒï¼Œä¹Ÿä¸æ–¹ä¾¿åç»­ç®¡ç†ã€‚mason.nvim å’Œé…å¥—çš„ mas","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:6","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#è‡ªåŠ¨è¡¥å…¨æŒ‡å—"},{"categories":["Vim-Neovim"],"content":" è‡ªåŠ¨è¡¥å…¨æŒ‡å—è‡ªå·±æ‰‹åŠ¨é…ç½®è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½çš„è¯ä¼šæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å€ŸåŠ©äºä¸€äº›æ’ä»¶æ¥å¸®å¿™ï¼Œä¸‹é¢æˆ‘è®²è®²æˆ‘æ‘¸ç´¢å‡ºæ¥çš„æœ€ç®€å•é…ç½®æ–¹æ³• é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªè¦ç”¨åˆ°çš„æ’ä»¶æ˜¯ nvim-cmpï¼Œå®ƒå¯ä»¥ç®¡ç†å„ç§è¡¥å…¨å€™é€‰é¡¹æ¥æºï¼Œç„¶åå±•ç¤ºåœ¨è¡¥å…¨èœå•é‡Œé¢ï¼Œè¿˜æ”¯æŒæˆ‘ä»¬å¯¹å¤–è§‚ç­‰è¿›è¡Œå®šåˆ¶åŒ–ã€‚ æˆ‘ä»¬å…ˆæ–°å»º ~/.config/nvim/lua/config/nvim-cmp.lua æ–‡ä»¶é…ç½® nvim-cmp lua local has_words_before = function() unpack = unpack or table.unpack local line, col = unpack(vim.api.nvim_win_get_cursor(0)) return col ~= 0 and vim.api.nvim_buf_get_lines(0, line - 1, line, true)[1]:sub(col, col):match(\"%s\") == nil end local luasnip = require(\"luasnip\") local cmp = require(\"cmp\") cmp.setup({ snippet = { -- REQUIRED - you must specify a snippet engine expand = function(args) require('luasnip').lsp_expand(args.body) -- For `luasnip` users. end, }, mapping = cmp.mapping.preset.insert({ -- Use to scroll the docs [''] = cmp.mapping.scroll_docs( -4), [''] = cmp.mapping.scroll_docs(4), -- Use to switch in items [''] = cmp.mapping.select_prev_item(), [''] = cmp.mapping.select_next_item(), -- Use (Enter) to confirm selection -- Accept currently selected item. Set `select` to `false` to only confirm explicitly selected items. [''] = cmp.mapping.confirm({ select = true }), -- A super tab -- sourc: https://github.com/hrsh7th/nvim-cmp/wiki/Example-mappings#luasnip [\"\"] = cmp.mapping(function(fallback) -- Hint: if the completion menu is visible select next one if cmp.visible() then cmp.select_next_item() elseif has_words_before() then cmp.complete() else fallback() end end, { \"i\", \"s\" }), -- i - insert mode; s - select mode [\"\"] = cmp.mapping(function(fallback) if cmp.visible() then cmp.select_prev_item() elseif luasnip.jumpable( -1) then luasnip.jump( -1) else fallback() end end, { \"i\", \"s\" }), }), -- Let's configure the item's appearance -- source: https://github.com/hrsh7th/nvim-cmp/wiki/Menu-Appearance formatting = { -- Set order from left to right -- kind: single letter indicating the type of completion -- abbr: abbreviation of \"word\"; when not empty it is used in the menu instead of \"word\" -- menu: extra text for the popup menu, displayed after \"word\" or \"abbr\" fields = { 'abbr', 'menu' }, -- customize the appearance of the completion menu format = function(entry, vim_item) vim_item.menu = ({ nvim_lsp = '[Lsp]', luasnip = '[Luasnip]', buffer = '[File]', path = '[Path]', })[entry.source.name] return vim_item end, }, -- Set source precedence sources = cmp.config.sources({ { name = 'nvim_lsp' }, -- For nvim-lsp { name = 'luasnip' }, -- For luasnip user { name = 'buffer' }, -- For buffer word completion { name = 'path' }, -- For path completion }) }) ç„¶åæˆ‘ä»¬ä¿®æ”¹ plugins.lua æ–‡ä»¶æ·»åŠ ç›¸å…³çš„æ’ä»¶ lua ... -- çœç•¥å…¶ä»–è¡Œ require(\"lazy\").setup({ -- Vscode-like pictograms { \"onsails/lspkind.nvim\", event = { \"VimEnter\" }, }, -- Auto-completion engine { \"hrsh7th/nvim-cmp\", dependencies = { \"lspkind.nvim\", \"hrsh7th/cmp-nvim-lsp\", -- lsp auto-completion \"hrsh7th/cmp-buffer\", -- buffer auto-completion \"hrsh7th/cmp-path\", -- path auto-completion \"hrsh7th/cmp-cmdline\", -- cmdline auto-completion }, config = function() require(\"config.nvim-cmp\") end, }, -- Code snippet engine { \"L3MON4D3/LuaSnip\", version = \"v2.*\", }, ... -- çœç•¥å…¶ä»–è¡Œ }) è§£é‡Šå¦‚ä¸‹ cmp.setup å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª Lua çš„ Tableï¼Œç”¨äºè®¾ç½®å„ä¸ªé€‰é¡¹ï¼ˆä¸‹é¢ä¼šè§£é‡Šï¼‰ã€‚åé¢ä½ ä¼šå‘ç°å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶éƒ½ç”¨ setup ä¼ å…¥ä¸€ä¸ª Lua table çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªæ˜¯ Nvim çš„ Lua æ’ä»¶çš„æƒ¯ä¾‹ LuaSnip æ˜¯ code snippet å¼•æ“ï¼Œå› ä¸ºnvim-cmp è¦æ±‚æˆ‘ä»¬å¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ª code snippet å¼•æ“æ¥æºã€‚ä½ æš‚æ—¶ç”¨ä¸åˆ°å½“å®ƒä¸å­˜åœ¨ä¹Ÿæ²¡æœ‰å…³ç³» lazy.nvim æ”¯æŒç”¨ config = function() ... end æŒ‡å®šå¯¹åº”æ’ä»¶è¢«åŠ è½½ä¹‹åè¦è¿è¡Œçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è®© Lua å¯¼å…¥å‰é¢å†™å¥½çš„ nvim-cmp.lua é…ç½®æ–‡ä»¶ ä¸è¦è¢«ä¸Šé¢çš„è¿™ä¹ˆå¤šæ’ä»¶å“åˆ°ï¼Œnvim-cmp ä¸ºä¸»ï¼Œå…¶ä»– cmp-... çš„æ’ä»¶æ˜¯ç”¨äºåœ¨å€™é€‰é¡¹æ¥æºå’Œ nvim-cmp ä¹‹é—´äº¤äº’ï¼Œlspkind.nvim æ˜¯ç¾åŒ–ç”¨çš„ nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„æŒ‰é”®æ˜ å°„ç”¨çš„æ˜¯ mapping = ... ï¼Œæ¯ä¸ªæŒ‰é”®ç»‘å®šçš„æ ¼å¼æ˜¯ [''] = cmp.mapping.xxx,ï¼Œä¸åŒçš„ cmp.mapping.xxx çš„å«ä¹‰å¯ä»¥ç”¨ :h æŸ¥çœ‹ã€‚å¦‚æœä½ æƒ³è¦ç”¨å…¶ä»–çš„æŒ‰é”®ï¼Œåªè¦ä¿®æ”¹ [...] é‡Œé¢çš„æŒ‰é”®å³å¯ æŒ‰ç…§æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œè®¾ç½®äº† æˆ–è€… / åœ¨å„ç§å€™é€‰é¡¹é‡Œé¢ç§»åŠ¨ åœ¨å€™é€‰é¡¹çš„æ–‡æ¡£é‡Œé¢ç§»åŠ¨ ä¹Ÿå°±æ˜¯å›è½¦é”®ç¡®å®šè¡¥å…¨ nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•è¡¥å…¨èœå•çš„å®šåˆ¶åŒ–ç”¨çš„æ˜¯ formatting = ... fields å­—æ®µè§„å®šäº†æ¯ä¸ªå€™é€‰é¡¹è¦æ˜¾ç¤ºä»€ä¹ˆä¸œè¥¿ format = function(...) è®¾ç½®äº†ä¸åŒçš„å€™é€‰é¡¹çš„æ¥æºæ˜¾ç¤ºï¼Œåœ¨ sources = ... é‡Œé¢å£°æ˜æ¥æº ğŸ™ï¸ åˆ°è¿™ä¸ºæ­¢ï¼Œé‡æ–°å¯åŠ¨ Nvim åï¼Œç­‰å¾…æ’ä»¶å®‰è£…å®Œæˆååº”è¯¥å°±èƒ½å¤Ÿç”¨åˆæ­¥çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½äº†ï½ LSPè¦æŠŠ Nvim å˜æˆ IDE å°±åŠ¿å¿…è¦å€ŸåŠ©äº LSP3ï¼Œè‡ªå·±å®‰è£…å’Œé…ç½® LSP æ˜¯æ¯”è¾ƒç¹ççš„ã€‚ä¸åŒçš„ LSP å®‰è£…æ–¹æ³•ä¸åŒï¼Œä¹Ÿä¸æ–¹ä¾¿åç»­ç®¡ç†ã€‚mason.nvim å’Œé…å¥—çš„ mas","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:6","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#nvim-cmp-é‡Œé¢çš„æŒ‰é”®æ˜ å°„"},{"categories":["Vim-Neovim"],"content":" è‡ªåŠ¨è¡¥å…¨æŒ‡å—è‡ªå·±æ‰‹åŠ¨é…ç½®è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½çš„è¯ä¼šæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å€ŸåŠ©äºä¸€äº›æ’ä»¶æ¥å¸®å¿™ï¼Œä¸‹é¢æˆ‘è®²è®²æˆ‘æ‘¸ç´¢å‡ºæ¥çš„æœ€ç®€å•é…ç½®æ–¹æ³• é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªè¦ç”¨åˆ°çš„æ’ä»¶æ˜¯ nvim-cmpï¼Œå®ƒå¯ä»¥ç®¡ç†å„ç§è¡¥å…¨å€™é€‰é¡¹æ¥æºï¼Œç„¶åå±•ç¤ºåœ¨è¡¥å…¨èœå•é‡Œé¢ï¼Œè¿˜æ”¯æŒæˆ‘ä»¬å¯¹å¤–è§‚ç­‰è¿›è¡Œå®šåˆ¶åŒ–ã€‚ æˆ‘ä»¬å…ˆæ–°å»º ~/.config/nvim/lua/config/nvim-cmp.lua æ–‡ä»¶é…ç½® nvim-cmp lua local has_words_before = function() unpack = unpack or table.unpack local line, col = unpack(vim.api.nvim_win_get_cursor(0)) return col ~= 0 and vim.api.nvim_buf_get_lines(0, line - 1, line, true)[1]:sub(col, col):match(\"%s\") == nil end local luasnip = require(\"luasnip\") local cmp = require(\"cmp\") cmp.setup({ snippet = { -- REQUIRED - you must specify a snippet engine expand = function(args) require('luasnip').lsp_expand(args.body) -- For `luasnip` users. end, }, mapping = cmp.mapping.preset.insert({ -- Use to scroll the docs [''] = cmp.mapping.scroll_docs( -4), [''] = cmp.mapping.scroll_docs(4), -- Use to switch in items [''] = cmp.mapping.select_prev_item(), [''] = cmp.mapping.select_next_item(), -- Use (Enter) to confirm selection -- Accept currently selected item. Set `select` to `false` to only confirm explicitly selected items. [''] = cmp.mapping.confirm({ select = true }), -- A super tab -- sourc: https://github.com/hrsh7th/nvim-cmp/wiki/Example-mappings#luasnip [\"\"] = cmp.mapping(function(fallback) -- Hint: if the completion menu is visible select next one if cmp.visible() then cmp.select_next_item() elseif has_words_before() then cmp.complete() else fallback() end end, { \"i\", \"s\" }), -- i - insert mode; s - select mode [\"\"] = cmp.mapping(function(fallback) if cmp.visible() then cmp.select_prev_item() elseif luasnip.jumpable( -1) then luasnip.jump( -1) else fallback() end end, { \"i\", \"s\" }), }), -- Let's configure the item's appearance -- source: https://github.com/hrsh7th/nvim-cmp/wiki/Menu-Appearance formatting = { -- Set order from left to right -- kind: single letter indicating the type of completion -- abbr: abbreviation of \"word\"; when not empty it is used in the menu instead of \"word\" -- menu: extra text for the popup menu, displayed after \"word\" or \"abbr\" fields = { 'abbr', 'menu' }, -- customize the appearance of the completion menu format = function(entry, vim_item) vim_item.menu = ({ nvim_lsp = '[Lsp]', luasnip = '[Luasnip]', buffer = '[File]', path = '[Path]', })[entry.source.name] return vim_item end, }, -- Set source precedence sources = cmp.config.sources({ { name = 'nvim_lsp' }, -- For nvim-lsp { name = 'luasnip' }, -- For luasnip user { name = 'buffer' }, -- For buffer word completion { name = 'path' }, -- For path completion }) }) ç„¶åæˆ‘ä»¬ä¿®æ”¹ plugins.lua æ–‡ä»¶æ·»åŠ ç›¸å…³çš„æ’ä»¶ lua ... -- çœç•¥å…¶ä»–è¡Œ require(\"lazy\").setup({ -- Vscode-like pictograms { \"onsails/lspkind.nvim\", event = { \"VimEnter\" }, }, -- Auto-completion engine { \"hrsh7th/nvim-cmp\", dependencies = { \"lspkind.nvim\", \"hrsh7th/cmp-nvim-lsp\", -- lsp auto-completion \"hrsh7th/cmp-buffer\", -- buffer auto-completion \"hrsh7th/cmp-path\", -- path auto-completion \"hrsh7th/cmp-cmdline\", -- cmdline auto-completion }, config = function() require(\"config.nvim-cmp\") end, }, -- Code snippet engine { \"L3MON4D3/LuaSnip\", version = \"v2.*\", }, ... -- çœç•¥å…¶ä»–è¡Œ }) è§£é‡Šå¦‚ä¸‹ cmp.setup å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª Lua çš„ Tableï¼Œç”¨äºè®¾ç½®å„ä¸ªé€‰é¡¹ï¼ˆä¸‹é¢ä¼šè§£é‡Šï¼‰ã€‚åé¢ä½ ä¼šå‘ç°å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶éƒ½ç”¨ setup ä¼ å…¥ä¸€ä¸ª Lua table çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªæ˜¯ Nvim çš„ Lua æ’ä»¶çš„æƒ¯ä¾‹ LuaSnip æ˜¯ code snippet å¼•æ“ï¼Œå› ä¸ºnvim-cmp è¦æ±‚æˆ‘ä»¬å¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ª code snippet å¼•æ“æ¥æºã€‚ä½ æš‚æ—¶ç”¨ä¸åˆ°å½“å®ƒä¸å­˜åœ¨ä¹Ÿæ²¡æœ‰å…³ç³» lazy.nvim æ”¯æŒç”¨ config = function() ... end æŒ‡å®šå¯¹åº”æ’ä»¶è¢«åŠ è½½ä¹‹åè¦è¿è¡Œçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è®© Lua å¯¼å…¥å‰é¢å†™å¥½çš„ nvim-cmp.lua é…ç½®æ–‡ä»¶ ä¸è¦è¢«ä¸Šé¢çš„è¿™ä¹ˆå¤šæ’ä»¶å“åˆ°ï¼Œnvim-cmp ä¸ºä¸»ï¼Œå…¶ä»– cmp-... çš„æ’ä»¶æ˜¯ç”¨äºåœ¨å€™é€‰é¡¹æ¥æºå’Œ nvim-cmp ä¹‹é—´äº¤äº’ï¼Œlspkind.nvim æ˜¯ç¾åŒ–ç”¨çš„ nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„æŒ‰é”®æ˜ å°„ç”¨çš„æ˜¯ mapping = ... ï¼Œæ¯ä¸ªæŒ‰é”®ç»‘å®šçš„æ ¼å¼æ˜¯ [''] = cmp.mapping.xxx,ï¼Œä¸åŒçš„ cmp.mapping.xxx çš„å«ä¹‰å¯ä»¥ç”¨ :h æŸ¥çœ‹ã€‚å¦‚æœä½ æƒ³è¦ç”¨å…¶ä»–çš„æŒ‰é”®ï¼Œåªè¦ä¿®æ”¹ [...] é‡Œé¢çš„æŒ‰é”®å³å¯ æŒ‰ç…§æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œè®¾ç½®äº† æˆ–è€… / åœ¨å„ç§å€™é€‰é¡¹é‡Œé¢ç§»åŠ¨ åœ¨å€™é€‰é¡¹çš„æ–‡æ¡£é‡Œé¢ç§»åŠ¨ ä¹Ÿå°±æ˜¯å›è½¦é”®ç¡®å®šè¡¥å…¨ nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•è¡¥å…¨èœå•çš„å®šåˆ¶åŒ–ç”¨çš„æ˜¯ formatting = ... fields å­—æ®µè§„å®šäº†æ¯ä¸ªå€™é€‰é¡¹è¦æ˜¾ç¤ºä»€ä¹ˆä¸œè¥¿ format = function(...) è®¾ç½®äº†ä¸åŒçš„å€™é€‰é¡¹çš„æ¥æºæ˜¾ç¤ºï¼Œåœ¨ sources = ... é‡Œé¢å£°æ˜æ¥æº ğŸ™ï¸ åˆ°è¿™ä¸ºæ­¢ï¼Œé‡æ–°å¯åŠ¨ Nvim åï¼Œç­‰å¾…æ’ä»¶å®‰è£…å®Œæˆååº”è¯¥å°±èƒ½å¤Ÿç”¨åˆæ­¥çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½äº†ï½ LSPè¦æŠŠ Nvim å˜æˆ IDE å°±åŠ¿å¿…è¦å€ŸåŠ©äº LSP3ï¼Œè‡ªå·±å®‰è£…å’Œé…ç½® LSP æ˜¯æ¯”è¾ƒç¹ççš„ã€‚ä¸åŒçš„ LSP å®‰è£…æ–¹æ³•ä¸åŒï¼Œä¹Ÿä¸æ–¹ä¾¿åç»­ç®¡ç†ã€‚mason.nvim å’Œé…å¥—çš„ mas","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:6","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#nvim-cmp-é‡Œé¢çš„è¡¥å…¨èœå•"},{"categories":["Vim-Neovim"],"content":" è‡ªåŠ¨è¡¥å…¨æŒ‡å—è‡ªå·±æ‰‹åŠ¨é…ç½®è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½çš„è¯ä¼šæ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½æ˜¯å€ŸåŠ©äºä¸€äº›æ’ä»¶æ¥å¸®å¿™ï¼Œä¸‹é¢æˆ‘è®²è®²æˆ‘æ‘¸ç´¢å‡ºæ¥çš„æœ€ç®€å•é…ç½®æ–¹æ³• é¦–å…ˆï¼Œç¬¬ä¸€ä¸ªè¦ç”¨åˆ°çš„æ’ä»¶æ˜¯ nvim-cmpï¼Œå®ƒå¯ä»¥ç®¡ç†å„ç§è¡¥å…¨å€™é€‰é¡¹æ¥æºï¼Œç„¶åå±•ç¤ºåœ¨è¡¥å…¨èœå•é‡Œé¢ï¼Œè¿˜æ”¯æŒæˆ‘ä»¬å¯¹å¤–è§‚ç­‰è¿›è¡Œå®šåˆ¶åŒ–ã€‚ æˆ‘ä»¬å…ˆæ–°å»º ~/.config/nvim/lua/config/nvim-cmp.lua æ–‡ä»¶é…ç½® nvim-cmp lua local has_words_before = function() unpack = unpack or table.unpack local line, col = unpack(vim.api.nvim_win_get_cursor(0)) return col ~= 0 and vim.api.nvim_buf_get_lines(0, line - 1, line, true)[1]:sub(col, col):match(\"%s\") == nil end local luasnip = require(\"luasnip\") local cmp = require(\"cmp\") cmp.setup({ snippet = { -- REQUIRED - you must specify a snippet engine expand = function(args) require('luasnip').lsp_expand(args.body) -- For `luasnip` users. end, }, mapping = cmp.mapping.preset.insert({ -- Use to scroll the docs [''] = cmp.mapping.scroll_docs( -4), [''] = cmp.mapping.scroll_docs(4), -- Use to switch in items [''] = cmp.mapping.select_prev_item(), [''] = cmp.mapping.select_next_item(), -- Use (Enter) to confirm selection -- Accept currently selected item. Set `select` to `false` to only confirm explicitly selected items. [''] = cmp.mapping.confirm({ select = true }), -- A super tab -- sourc: https://github.com/hrsh7th/nvim-cmp/wiki/Example-mappings#luasnip [\"\"] = cmp.mapping(function(fallback) -- Hint: if the completion menu is visible select next one if cmp.visible() then cmp.select_next_item() elseif has_words_before() then cmp.complete() else fallback() end end, { \"i\", \"s\" }), -- i - insert mode; s - select mode [\"\"] = cmp.mapping(function(fallback) if cmp.visible() then cmp.select_prev_item() elseif luasnip.jumpable( -1) then luasnip.jump( -1) else fallback() end end, { \"i\", \"s\" }), }), -- Let's configure the item's appearance -- source: https://github.com/hrsh7th/nvim-cmp/wiki/Menu-Appearance formatting = { -- Set order from left to right -- kind: single letter indicating the type of completion -- abbr: abbreviation of \"word\"; when not empty it is used in the menu instead of \"word\" -- menu: extra text for the popup menu, displayed after \"word\" or \"abbr\" fields = { 'abbr', 'menu' }, -- customize the appearance of the completion menu format = function(entry, vim_item) vim_item.menu = ({ nvim_lsp = '[Lsp]', luasnip = '[Luasnip]', buffer = '[File]', path = '[Path]', })[entry.source.name] return vim_item end, }, -- Set source precedence sources = cmp.config.sources({ { name = 'nvim_lsp' }, -- For nvim-lsp { name = 'luasnip' }, -- For luasnip user { name = 'buffer' }, -- For buffer word completion { name = 'path' }, -- For path completion }) }) ç„¶åæˆ‘ä»¬ä¿®æ”¹ plugins.lua æ–‡ä»¶æ·»åŠ ç›¸å…³çš„æ’ä»¶ lua ... -- çœç•¥å…¶ä»–è¡Œ require(\"lazy\").setup({ -- Vscode-like pictograms { \"onsails/lspkind.nvim\", event = { \"VimEnter\" }, }, -- Auto-completion engine { \"hrsh7th/nvim-cmp\", dependencies = { \"lspkind.nvim\", \"hrsh7th/cmp-nvim-lsp\", -- lsp auto-completion \"hrsh7th/cmp-buffer\", -- buffer auto-completion \"hrsh7th/cmp-path\", -- path auto-completion \"hrsh7th/cmp-cmdline\", -- cmdline auto-completion }, config = function() require(\"config.nvim-cmp\") end, }, -- Code snippet engine { \"L3MON4D3/LuaSnip\", version = \"v2.*\", }, ... -- çœç•¥å…¶ä»–è¡Œ }) è§£é‡Šå¦‚ä¸‹ cmp.setup å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª Lua çš„ Tableï¼Œç”¨äºè®¾ç½®å„ä¸ªé€‰é¡¹ï¼ˆä¸‹é¢ä¼šè§£é‡Šï¼‰ã€‚åé¢ä½ ä¼šå‘ç°å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶éƒ½ç”¨ setup ä¼ å…¥ä¸€ä¸ª Lua table çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œè¿™ä¸ªæ˜¯ Nvim çš„ Lua æ’ä»¶çš„æƒ¯ä¾‹ LuaSnip æ˜¯ code snippet å¼•æ“ï¼Œå› ä¸ºnvim-cmp è¦æ±‚æˆ‘ä»¬å¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ª code snippet å¼•æ“æ¥æºã€‚ä½ æš‚æ—¶ç”¨ä¸åˆ°å½“å®ƒä¸å­˜åœ¨ä¹Ÿæ²¡æœ‰å…³ç³» lazy.nvim æ”¯æŒç”¨ config = function() ... end æŒ‡å®šå¯¹åº”æ’ä»¶è¢«åŠ è½½ä¹‹åè¦è¿è¡Œçš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬æ˜¯è®© Lua å¯¼å…¥å‰é¢å†™å¥½çš„ nvim-cmp.lua é…ç½®æ–‡ä»¶ ä¸è¦è¢«ä¸Šé¢çš„è¿™ä¹ˆå¤šæ’ä»¶å“åˆ°ï¼Œnvim-cmp ä¸ºä¸»ï¼Œå…¶ä»– cmp-... çš„æ’ä»¶æ˜¯ç”¨äºåœ¨å€™é€‰é¡¹æ¥æºå’Œ nvim-cmp ä¹‹é—´äº¤äº’ï¼Œlspkind.nvim æ˜¯ç¾åŒ–ç”¨çš„ nvim-cmp é‡Œé¢çš„æŒ‰é”®æ˜ å°„æŒ‰é”®æ˜ å°„ç”¨çš„æ˜¯ mapping = ... ï¼Œæ¯ä¸ªæŒ‰é”®ç»‘å®šçš„æ ¼å¼æ˜¯ [''] = cmp.mapping.xxx,ï¼Œä¸åŒçš„ cmp.mapping.xxx çš„å«ä¹‰å¯ä»¥ç”¨ :h æŸ¥çœ‹ã€‚å¦‚æœä½ æƒ³è¦ç”¨å…¶ä»–çš„æŒ‰é”®ï¼Œåªè¦ä¿®æ”¹ [...] é‡Œé¢çš„æŒ‰é”®å³å¯ æŒ‰ç…§æˆ‘çš„ä¸ªäººä¹ æƒ¯ï¼Œè®¾ç½®äº† æˆ–è€… / åœ¨å„ç§å€™é€‰é¡¹é‡Œé¢ç§»åŠ¨ åœ¨å€™é€‰é¡¹çš„æ–‡æ¡£é‡Œé¢ç§»åŠ¨ ä¹Ÿå°±æ˜¯å›è½¦é”®ç¡®å®šè¡¥å…¨ nvim-cmp é‡Œé¢çš„è¡¥å…¨èœå•è¡¥å…¨èœå•çš„å®šåˆ¶åŒ–ç”¨çš„æ˜¯ formatting = ... fields å­—æ®µè§„å®šäº†æ¯ä¸ªå€™é€‰é¡¹è¦æ˜¾ç¤ºä»€ä¹ˆä¸œè¥¿ format = function(...) è®¾ç½®äº†ä¸åŒçš„å€™é€‰é¡¹çš„æ¥æºæ˜¾ç¤ºï¼Œåœ¨ sources = ... é‡Œé¢å£°æ˜æ¥æº ğŸ™ï¸ åˆ°è¿™ä¸ºæ­¢ï¼Œé‡æ–°å¯åŠ¨ Nvim åï¼Œç­‰å¾…æ’ä»¶å®‰è£…å®Œæˆååº”è¯¥å°±èƒ½å¤Ÿç”¨åˆæ­¥çš„è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½äº†ï½ LSPè¦æŠŠ Nvim å˜æˆ IDE å°±åŠ¿å¿…è¦å€ŸåŠ©äº LSP3ï¼Œè‡ªå·±å®‰è£…å’Œé…ç½® LSP æ˜¯æ¯”è¾ƒç¹ççš„ã€‚ä¸åŒçš„ LSP å®‰è£…æ–¹æ³•ä¸åŒï¼Œä¹Ÿä¸æ–¹ä¾¿åç»­ç®¡ç†ã€‚mason.nvim å’Œé…å¥—çš„ mas","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:4:6","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#lsp"},{"categories":["Vim-Neovim"],"content":" æ€»ç»“è¿™æ ·é…ç½®ä¸‹æ¥ï¼Œæˆ‘ä»¬æˆåŠŸæŠŠ Nvim å˜æˆäº†ä¸€ä¸ªè½»é‡çº§çš„ IDEï¼Œå®ƒæ”¯æŒä»£ç é«˜äº®ã€ä»£ç è¡¥å…¨ã€è¯­æ³•æ£€æŸ¥ç­‰åŠŸèƒ½ï¼Œè€Œä¸”æ˜¯å®Œå…¨å¼€æºå…è´¹çš„ï¼Œè™½ç„¶è¿˜æœ‰äº›ç®€é™‹ï¼Œä½†å·²ç»æ˜¯å¯ä»¥ç”¨çš„äº† ğŸ¤— æˆ‘å‘ç°è‡ªä»å­¦äº† Vim ä¹‹åï¼Œæˆ‘æ€»åœ¨å…¶ä»–å„ç§ä»£ç ç¼–è¾‘å™¨ã€IDE çœ‹æ˜¯ä¸æ˜¯æ”¯æŒ Vimã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯¹ Vim çš„æ”¯æŒéƒ½ä¸æ˜¯å¾ˆè®©äººæ»¡æ„ï¼Œè¿˜å®¹æ˜“æœ‰å¿«æ·é”®å†²çªç­‰é—®é¢˜ã€‚å› æ­¤æˆ‘é€‰æ‹©å°† Nvim å˜æˆ IDEï¼Œå¹¶å°†é…ç½®æ–‡ä»¶æ‰˜ç®¡åœ¨æˆ‘çš„ Martinlwx/dotfiles ä¸Šã€‚è¿™æ ·åœ¨æ–°çš„æœºå™¨ä¸Šåªè¦å®‰è£…å¥½ Nvim å¹¶å…‹éš†é…ç½®ï¼Œé™å¾…ç‰‡åˆ»ä¹‹åå°±å¯ä»¥åœ¨ä¸åŒçš„æœºå™¨ä¸Šè·å¾—ä¸€æ ·çš„ç¼–ç¨‹ä½“éªŒ æ‰“ç£¨å®šåˆ¶åŒ–å·¥å…·æ˜¯éœ€è¦ä»˜å‡ºä¸€å®šç²¾åŠ›çš„ã€‚ä¸ºäº†ç†è§£æ¯ä¸ªé€‰é¡¹éƒ½åœ¨å¹²å•¥ï¼Œæˆ‘ä¸å¾—ä¸æŸ¥æ‰¾å„ç§èµ„æ–™ã€‚ä½†æˆ‘ä»ç›¸ä¿¡è¿™æ˜¯å€¼å¾—çš„ï¼Œç†è§£ä½ çš„å·¥å…·åˆ©äºä½ åšæ‰©å±•å’Œå®šåˆ¶åŒ–ã€‚æœ¬æ–‡å·²ç»å°½å¯èƒ½é‡‡ç”¨äº†æ¯”è¾ƒç®€å•çš„é…ç½®ï¼Œè¿˜æœ‰å¾ˆå¤šç¾åŒ–ã€ç§äººå®šåˆ¶åŒ–çš„å†…å®¹å¯ä»¥é…ç½®ï¼Œæ›´åˆ«æå…¶ä»–å¾ˆå¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹æ’ä»¶éƒ½è¿˜æ²¡æœ‰æåŠï¼Œè¿™äº›å°±ç•™ç»™è¯»è€…è‡ªå·±å»æ¢ç´¢å‘ç°äº† ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:5:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#æ€»ç»“"},{"categories":["Vim-Neovim"],"content":" å‚è€ƒ Installing-NeovimÂ â†©ï¸ Adding a colorscheme/themeÂ â†©ï¸ Language Server Protocol - WikiÂ â†©ï¸ ","date":"2023-02-08","objectID":"/zh-cn/config-neovim-from-scratch/:6:0","series":null,"tags":["Vim","Neovim"],"title":"ä»é›¶å¼€å§‹é…ç½® Neovim(Nvim)","uri":"/zh-cn/config-neovim-from-scratch/#å‚è€ƒ"},{"categories":["Programming-Languages"],"content":"Python çš„ç±»å‹æç¤ºçš„ç®€å•ä»‹ç»","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€ä¸€å¼€å§‹å¸å¼•æˆ‘å­¦ä¹  Python çš„æ˜¯å®ƒçš„åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼Œä»¥åŠå®ƒçš„é¸­å­ç±»å‹ï¼ˆDuck typingï¼‰ç³»ç»Ÿâ€”â€”æˆ‘ä»¬ä¸å…³å¿ƒå…·ä½“çš„ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæˆ‘ä»¬åªå…³å¿ƒå®ƒçš„è¡Œä¸ºã€‚å¾—ç›Šäº Python çš„åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸éœ€è¦å£°æ˜å…·ä½“ç±»å‹ï¼Œè¿™å¾ˆå¤§ç¨‹åº¦ä¸ŠåŠ å¿«äº†å¼€å‘é€Ÿåº¦ï¼Œè€Œä¸”å»æ‰äº†ä¸å°‘å¿ƒæ™ºè´Ÿæ‹…ï¼Œå†åŠ ä¸Šå¼ºå¤§çš„ç¬¬ä¸‰æ–¹åº“æ”¯æŒï¼ŒPython æˆä¸ºäº†æˆ‘æœ€çˆ±ç”¨çš„ç¼–ç¨‹è¯­è¨€ğŸ˜º è€Œéšç€ PEP 4841 çš„æå‡ºï¼ŒPython å†³å®šå¼•å…¥ç±»å‹æç¤ºï¼ˆType hintï¼‰ï¼Œè¿™ä¼¼ä¹åˆå‘é™æ€ç±»å‹è¯­è¨€çœ‹é½äº†ï¼Ÿä½†å…¶å®éä¹Ÿï¼ŒPython ä»ç„¶æ˜¯ä¸€é—¨åŠ¨æ€ç¼–ç¨‹è¯­è¨€ï¼Œå®ƒçš„ç±»å‹æç¤ºæ˜¯å¯é€‰é¡¹ï¼ŒåŠ ä¸åŠ éƒ½å¯ä»¥ï¼Œä¸ä¼šå¯¹ç¨‹åºè¿è¡Œäº§ç”Ÿå½±å“ã€‚ è¿™æ ·å¬èµ·æ¥ä¼¼ä¹æ²¡æœ‰å¿…è¦ä¸“é—¨å†™è¿™ç¯‡åšå®¢æ¥ä»‹ç» Python çš„ç±»å‹æç¤ºç‰¹æ€§ï¼Œä½†æˆ‘å‘ç°å†™ç±»å‹æç¤ºè¿˜æ˜¯æœ‰ä¸å°‘å¥½å¤„çš„ï¼š å¯ä»¥ä½¿ç”¨ç±»å‹æ£€æŸ¥å·¥å…·å¯¹ä»£ç è¿›è¡Œæ£€æŸ¥ï¼Œæ¯”å¦‚ Mypy IDE çš„ä»£ç è¡¥å…¨ä¼šæ›´åŠ æ™ºèƒ½ï¼Œæ¨èçš„ API æ›´å‡†ç¡®ï¼Œæˆ‘ä»¬ç”¨é”™äº† API ä¹Ÿèƒ½åŠæ—¶å‘ç°ã€‚è¿™å¯èƒ½æ˜¯æˆ‘é€‰æ‹©å†™ç±»å‹æç¤ºçš„æœ€å¤§åŠ¨åŠ› å¯¹æŠ—ä»£ç å¤æ‚æ€§ã€‚ç±»å‹æç¤ºæš´éœ²äº† API çš„ä¸å°‘ä¿¡æ¯ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬åªè¦çœ‹ä¸€ä¸‹è¿™æ ·çš„å‡½æ•°ç­¾åå°±èƒ½çŸ¥é“ä¸ªå¤§æ¦‚ï¼Œè€Œä¸ç”¨ç»å¸¸å»çœ‹æ–‡æ¡£ python ! python --version Python 3.11.0 ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:1:0","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" å‡½æ•°çš„ç±»å‹æç¤ºè¯­æ³•æ—©åœ¨ Python 3.0ï¼Œç±»å‹æç¤ºçš„è¯­æ³•å°±å·²ç»ç¡®å®šäº†ä¸‹æ¥2ï¼š å‡½æ•°å‚æ•°ï¼šname[: type] [ = default_val ]ï¼Œå…¶ä¸­ [] è¡¨ç¤ºè¿™æ˜¯å¯é€‰é¡¹ å‡½æ•°è¿”å›ç±»å‹ï¼šç”¨ -\u003e return_type è¡¨ç¤º æˆ‘ä»¬å¯ä»¥é€šè¿‡å‡½æ•°çš„ __annotations__ å±æ€§è®¿é—®åˆ°å‚æ•°çš„ç±»å‹ä¿¡æ¯ï¼Œè¯¥å±æ€§è¿”å›ä¸€ä¸ªå­—å…¸ï¼Œkey ä¸ºå‚æ•°åï¼Œvalue ä¸ºç±»å‹ã€‚==ä¸æ¨èç›´æ¥è®¿é—®è¯¥å±æ€§ï¼Œè€Œåº”è¯¥é€šè¿‡ inspect æ¨¡å—ï¼ˆ\u003e Python 3.10ï¼‰æˆ–è€… typing æ¨¡å—ï¼ˆPython 3.5 ~ 3.9ï¼‰é‡Œé¢çš„å¯¹åº”æ–¹æ³•æ¥è·å–è¿™ä¸ªä¿¡æ¯==ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š python def maximum(a: float, b: float) -\u003e float: \"\"\" A simple function to return the maximum elements of two floats\"\"\" return max(a, b) # \u003e= Python 3.10, do this import inspect assert inspect.get_annotations(maximum) == maximum.__annotations__ # Python 3.5 ~ 3.9 import typing assert typing.get_type_hints(maximum) == maximum.__annotations__ inspect.get_annotations(maximum) {'a': float, 'b': float, 'return': float} ğŸ“’ å†æ¬¡å¼ºè°ƒï¼Œç±»å‹æç¤ºä¿¡æ¯ä¸ä¼šå¯¹ç¨‹åºçš„è¿è¡Œäº§ç”Ÿä»»ä½•å½±å“ï¼Œè¿™æ„å‘³ç€å³ä½¿æˆ‘ä»¬è¿èƒŒäº†ç±»å‹æç¤ºä¿¡æ¯ï¼Œç¨‹åºä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œã€‚åªæ˜¯é™æ€ä»£ç æ£€æŸ¥å·¥å…·ä¼šå¯¹æ­¤æŠ›å‡ºè­¦å‘Š python # returns the maximum of two strings # , but we declared the arguments should be float! maximum('hello', 'world') 'world' ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:2:0","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å‡½æ•°çš„ç±»å‹æç¤ºè¯­æ³•"},{"categories":["Programming-Languages"],"content":" å˜é‡çš„ç±»å‹æç¤ºè¯­æ³•åœ¨ Python 3.6 ä¹‹å‰ï¼Œå¦‚æœè¦ç»™ä¸€ä¸ªå˜é‡åŠ ä¸Šç±»å‹æç¤ºåªèƒ½ä½¿ç”¨ Type commentsï¼Œä¹Ÿå°±æ˜¯åœ¨æ³¨é‡Šé‡Œé¢ç”¨ # type ... å£°æ˜1ï¼Œä½†åœ¨ PEP 526 ä¸­æå‡ºäº†å˜é‡çš„ç±»å‹æç¤ºè¯­æ³•ï¼Œå’Œå‡½æ•°å‚æ•°çš„è¯­æ³•æ˜¯ç±»ä¼¼çš„3 python a: int # undefined typed value a: int = 0 # typed value with default value a 0 ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ module çš„ __annotations__ å±æ€§è®¿é—®ç±»å‹æç¤ºä¿¡æ¯ python __annotations__ {'a': int} ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:3:0","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å˜é‡çš„ç±»å‹æç¤ºè¯­æ³•"},{"categories":["Programming-Languages"],"content":" å¸¸è§ä½¿ç”¨åœºæ™¯","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:0","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å¸¸è§ä½¿ç”¨åœºæ™¯"},{"categories":["Programming-Languages"],"content":" ç®€å•çš„å†…å»ºç±»å‹è¿™é‡Œè¯´çš„ç®€å•å†…å»ºç±»å‹å°±æ˜¯ï¼šintã€str ç­‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¬¬ä¸‰æ–¹åº“é‡Œé¢å®šä¹‰çš„ç±»å‹ã€‚å‰é¢æåˆ°çš„ maximum å‡½æ•°çš„ 2 ä¸ªå‚æ•°å°±æ˜¯ç”¨ float ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:1","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#ç®€å•çš„å†…å»ºç±»å‹"},{"categories":["Programming-Languages"],"content":" Any ç±»å‹Any è¡¨ç¤ºä»€ä¹ˆç±»å‹éƒ½æœ‰å¯èƒ½ã€‚ä½†å®ƒè·Ÿ object å¹¶ä¸ç›¸åŒ1 åŸºæœ¬ä¸Šæˆ‘ä»¬å¯ä»¥è®¤ä¸ºä¸€ä¸ªä¸åŒ…å«ç±»å‹æç¤ºçš„å‡½æ•°çš„å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹éƒ½æ˜¯ Any python def foo(x): ... # it assumes: def foo(x: Any) -\u003e Any: ... ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:2","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#any-ç±»å‹"},{"categories":["Programming-Languages"],"content":" é›†åˆç±»å‹å’Œæ˜ å°„ç±»å‹æˆ‘ä»¬ç§°é›†åˆé‡Œé¢çš„æ¯ä¸ªä¸œè¥¿ä¸º itemï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ç»™é›†åˆå’Œ item éƒ½åŠ ä¸Šç±»å‹æç¤ºä¿¡æ¯ï¼Ÿ==Python é‡‡ç”¨ [] è®°å·æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼Œ[] é‡Œé¢æŒ‡å®š item çš„ç±»å‹==ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„åˆ—è¡¨è¿™ä¸ªç±»å‹å¯ä»¥å†™ä½œ list[str]ï¼Œéå¸¸æ¸…æ¥šã€‚ æ³¨æ„ï¼šPython 3.9 å‘å¸ƒäº† PEP 585 4ï¼Œå…è®¸æˆ‘ä»¬ç›´æ¥ä½¿ç”¨è‡ªå¸¦çš„ listã€dict ç­‰è€Œæ— éœ€ä½¿ç”¨ typing æ¨¡å—å¯¹åº”çš„ç±»å‹ã€‚ä¸‹é¢æˆ‘åˆ—å‡ºäº†ä¸åŒï¼Œæ›´ä¸ºè¯¦ç»†çš„è¯·æŸ¥é˜…åŸæ–‡ 4ï¼š \u003c Python 3.9 \u003e= Python 3.9 typing.Tuple tuple typing.Dict dict typing.List list typing.Set set typing.Frozenset frozenset typing.Type type typing.AbstractSet collections.abc.Set typing.ContextManager contextlib.AbstractContextManager typing.AsyncContextManager contextlib.AbstractAsyncContextManager typing.Pattern, typing.re.Pattern re.Pattern typing.Match, typing.re.Match re.Match ğŸ“’ typing æ¨¡å—çš„éƒ¨åˆ†ç‰¹æ€§å°†æ¥ä¼šè¢«ç§»é™¤ã€‚æ‰€ä»¥æˆ‘åé¢ä¼šä½¿ç”¨æœ€æ–°çš„è¯­æ³•âœï¸ python string_list: list[str] = ['hello', 'world'] # tuple[type1, type2, ..., typen] with fixed size date: tuple[int, int, int] = (2023, 1, 11) string_count: dict[str, int] = { 'hello': 1, 'world': 2, } python __annotations__ {'a': int, 'string_list': list[str], 'date': tuple[int, int, int], 'string_count': dict[str, int]} ä¸‹é¢çš„ join_str_list å‡½æ•°æ¥å—ä¸€ä¸ªåŒ…å«å­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œç”¨ç©ºæ ¼å°†ä»–ä»¬è¿æ¥èµ·æ¥ï¼Œç„¶åè¿”å›è¿™ä¸ªå­—ç¬¦ä¸² python def join_str_list(string_list: list[str]) -\u003e str: \"\"\" join all string in a list\"\"\" return ' '.join(string_list) print(join_str_list(string_list)) print(inspect.get_annotations(join_str_list)) hello world {'string_list': list[str], 'return': \u003cclass 'str'\u003e} ğŸ“’ åœ¨ Python 3.9+ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ tuple[type1, ...] è¡¨ç¤ºç±»å‹å…¨éƒ½æ˜¯ type1 çš„ä»»æ„é•¿åº¦çš„ tuple python def sum_variable_integers(data: tuple[int, ...]): \"\"\" Sum all integers of a tuple\"\"\" sum_val = 0 for integer in data: sum_val += integer return sum_val print(sum_variable_integers((1, 2, 3))) print(sum_variable_integers((3,))) 6 3 ä¼—æ‰€å‘¨çŸ¥ï¼ŒPython çš„ list å¯ä»¥æ”¾ç½®ä»»ä½•ç±»å‹ï¼Œé‚£ä¹ˆå¦‚ä½•ç”¨ç±»å‹æç¤ºè¯´æ˜è¿™ä¸€ç‚¹å‘¢ï¼Ÿå¯ä»¥ç”¨å‰é¢çš„ Any ç±»å‹ï¼š python list[Any] å…¶å®ç›´æ¥ç”¨ list å°±å¯ä»¥ï¼Œè€Œä¸”æ›´ä¸ºç®€æ´ ğŸ“’ å¦‚æœè¿™ 3 ä¸ªåŸºæœ¬çš„é›†åˆç±»å‹ä¸èƒ½æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œå¯ä»¥æŸ¥é˜… collections.abc çš„æ–‡æ¡£äº†è§£æ›´å¤š ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:3","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#é›†åˆç±»å‹å’Œæ˜ å°„ç±»å‹"},{"categories":["Programming-Languages"],"content":" ç±»å‹åˆ«åï¼ˆType aliasï¼‰æœ‰æ—¶å€™ï¼Œç±»å‹ä¼šå˜å¾—å¾ˆå¤æ‚è€Œä¸”å¾ˆé•¿ï¼Œæˆ‘ä»¬å¹¶ä¸æƒ³è¦åœ¨æ¯ä¸€ä¸ªåœ°æ–¹éƒ½å†™ä¸Šä¸€é•¿ä¸²çš„ç±»å‹æç¤ºã€‚é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿä¸€ä¸ªé€šå¸¸çš„åšæ³•æ˜¯ä¸ºå…¶å–ä¸€ä¸ªæœ‰æ„ä¹‰çš„åˆ«åã€‚å®šä¹‰åˆ«åçš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š python AliasName = Type æ‹¿å‰é¢çš„ date æ—¥æœŸç±»å‹ä½œä¸ºä¾‹å­ã€‚date ç±»å‹è¢«æˆ‘å®šä¹‰ä¸ºä¸€ä¸ª tupleï¼Œæ¯ä¸ªä½ç½®ä¸Šçš„ç±»å‹éƒ½æ˜¯ intã€‚é‚£ä¹ˆï¼Œlist[tuple[int, int, int] è¡¨ç¤ºä¸€ä¸ªæ—¥æœŸçš„åˆ—è¡¨è¿™ä¸ªç±»å‹ã€‚ä¸ºäº†è®©ä»£ç æ›´æœ‰å¯è¯»æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–èµ·ä¸ªåˆ«åå«åš Dateï¼Œçœ‹ä¸‹é¢çš„ä¾‹å­ï¼š python Date = tuple[int, int, int] DateList = list[Date] def print_date_list(l: DateList): \"\"\" Print all dates in the format `year-month-day` in the date list\"\"\" for year, month, day in l: print(f'{year}-{month}-{day}') print_date_list([(2022, 1, 1), (2023, 1, 3)]) print(inspect.get_annotations(print_date_list)) 2022-1-1 2023-1-3 {'l': list[tuple[int, int, int]]} ç±»å‹åˆ«åçš„è¯­æ³•å¾ˆå®¹æ˜“å’Œå®šä¹‰å…¨å±€å˜é‡æ··æ·†ï¼Œæ‰€ä»¥ PEP 613ï¼ˆ\u003e= Python 3.10ï¼‰æå‡ºäº†æ›´åŠ  explicit çš„æ–¹å¼5ï¼š python AliasName: TypeAlias = Type python from typing import TypeAlias Date: TypeAlias = tuple[int, int, int] ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:4","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#ç±»å‹åˆ«åtype-alias"},{"categories":["Programming-Languages"],"content":" å‚æ•°åŒ–çš„æ³›å‹å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­ç»å¸¸ä½¿ç”¨å¤§å†™å­—æ¯æ¯”å¦‚ T ç­‰è¡¨ç¤ºå‚æ•°åŒ–çš„æ³›å‹ï¼Œåœ¨ Python é‡Œé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨ TypeVar å…³é”®å­—ï¼Œå¦‚åŒæ–‡æ¡£æ‰€è¯´ï¼Œä¸€å…±æœ‰ 3 ç§ç”¨æ³•ï¼š python T = TypeVar('T') # Can be anything S = TypeVar('S', bound=str) # Can be any subtype of str A = TypeVar('A', str, bytes)# Must be exactly str or bytes æ€»çš„æ¥è¯´ï¼ŒTypeVar æä¾›äº† 2 ç§æ–¹å¼è®©æˆ‘ä»¬å¯¹æ³›å‹ä½œå‡ºé™åˆ¶ï¼š ç”¨ bound=some_typeï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åªèƒ½ä¼ å…¥ some_type çš„ subtype ç›´æ¥æŒ‡å®šå…è®¸çš„ç±»å‹ ğŸ“’ å…³äº subtype çš„å®šä¹‰å¯ä»¥å‚è€ƒ PEP 4836ï¼Œæ¦‚æ‹¬æ¥è¯´ä¸º 2 ç‚¹ï¼šaï¼‰æ¯ä¸ªç±»å‹éƒ½æ˜¯è‡ªå·±çš„ subtypeã€‚bï¼‰OOP ä¸­ï¼Œå­ç±»æ˜¯çˆ¶ç±»çš„ subtype python from typing import TypeVar GenericString = TypeVar('GenericString', str, bytes) def process(s: GenericString): \"\"\" The GenericString can be either str or bytes\"\"\" ... ğŸ“’ å®é™…ä¸Š Python å·²ç»å¸®ä½ å®šä¹‰å¥½äº†å¯èƒ½æ˜¯ str ä¹Ÿå¯èƒ½æ˜¯ bytes çš„ç±»å‹â€”â€”typing.AnyStr ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:5","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å‚æ•°åŒ–çš„æ³›å‹"},{"categories":["Programming-Languages"],"content":" Optional å’Œ Union ç±»å‹Optional[type1] ç”¨äºè¡¨ç¤ºç±»å‹å¯èƒ½æ˜¯ type1 ä¹Ÿå¯èƒ½æ˜¯ Noneã€‚ Union[type1, type2, ...] è¡¨ç¤ºå…è®¸çš„ç±»å‹å¯èƒ½æ˜¯æˆ‘ä»¬æŒ‡å®šçš„å¤šä¸ªå¯èƒ½ç±»å‹çš„çš„ä»»æ„ä¸€ç§ï¼Œä¹Ÿå°±æ˜¯é€»è¾‘ä¸Šçš„ã€Œæˆ–ã€å…³ç³»**ã€‚å› æ­¤ï¼ŒOptional[type1] å…¶å®å’Œ Union[type1, None] æ˜¯ä¸€ä¸ªæ„æ€ python from typing import Optional, Union def parse(s: Union[str, int]) -\u003e Optional[int]: \"\"\" Parse `s` and get an integer value. The `s` may be a string. Return None if fail \"\"\" if isinstance(s, str): if not s.isdigit(): return None else: return int(s) elif isinstance(s, int): return s assert parse('foo') is None assert parse('123') == 123 assert parse(123) == 123 inspect.get_annotations(parse) {'s': typing.Union[str, int], 'return': typing.Optional[int]} åœ¨ Python 3.10 é‡Œé¢ï¼Œæ–°å¼•å…¥äº† |ï¼Œå¯ä»¥ç”¨æ¥ä»£æ›¿ Union çš„å†™æ³•7ã€‚å…¶ä»–è¯­è¨€ä¸­ä¹Ÿå¯ä»¥è§åˆ°è¿™ç§ç”¨æ³•ï¼šæ¯”å¦‚ Rust çš„ pattern matching ä¹Ÿé‡‡ç”¨äº† | åˆ†éš”å¤šä¸ªå¯èƒ½çš„ patternã€‚é‚£ä¹ˆæˆ‘ä»¬å‰é¢å†™çš„ parse å‡½æ•°å°±å¯ä»¥å†™æˆä¸‹é¢è¿™ç§å½¢å¼ï¼š python def parse(s: str | int) -\u003e int | None: \"\"\" Parse `s` and get an integer value. The `s` may be a string. Return None if fail \"\"\" if isinstance(s, str): if not s.isdigit(): return None else: return int(s) elif isinstance(s, int): return s inspect.get_annotations(parse) {'s': str | int, 'return': int | None} ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:6","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#optional-å’Œ-union-ç±»å‹"},{"categories":["Programming-Languages"],"content":" å¯è°ƒç”¨å¯¹è±¡ï¼ˆCallableï¼‰ä¸‹é¢ç”¨å‡½æ•°ä½œä¸ºä¾‹å­ï¼ŒPython çš„å‡½æ•°æ˜¯ first-class objectï¼Œæ‰€ä»¥å‡½æ•°å¯ä»¥æ˜¯å¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°æˆ–è€…è¿”å›å€¼ã€‚ç±»å‹æç¤ºå¯¹æ­¤çš„æ”¯æŒæ˜¯ï¼š python Callable[[ParamType1, ParamType2], ReturnType] è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª apply å‡½æ•°ï¼Œå…¥å‚ä¸ºå¯è°ƒç”¨å¯¹è±¡å’Œè¦å¤„ç†çš„æ•°æ®ï¼Œå°†è¿™ä¸ªå¯è°ƒç”¨å¯¹è±¡åº”ç”¨åœ¨æ•°æ®ä¸Š python # from typing import Callable # Python \u003c 3.9 from collections.abc import Callable def apply(f: Callable[[str | int], int | None], data: list): \"\"\" Apply callable object on data. The `Callable[[str | int], int | None]` is the type hints of `parse` we aforementioned \"\"\" for d in data: print(f(d)) apply(parse, ['hello', 123]) None 123 ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:7","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å¯è°ƒç”¨å¯¹è±¡callable"},{"categories":["Programming-Languages"],"content":" ç±»åœ¨ Python 3.11 é‡Œé¢8æå‡ºäº† Self ç±»å‹ï¼Œè¡¨ç¤ºå½“å‰ç±»çš„å®ä¾‹ã€‚æœ‰äº† Self ä¹‹ååœ¨å†™ Python çš„ç±»çš„æ—¶å€™å°±å¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªç±»çš„å®šä¹‰é‡Œé¢ä½¿ç”¨ Self ä»£æŒ‡å½“å‰çš„ç±»çš„å®ä¾‹ã€‚å†ä¹Ÿä¸éœ€è¦ç”¨ TypeVar å…ˆå¼•å…¥äº† python from typing import Self class Shape: def set_scale(self, scale: float) -\u003e Self: self.scale = scale return self ğŸ’¡ Rust ä¹Ÿé‡‡ç”¨äº† Self æ¥è¡¨ç¤ºå½“å‰æ­£åœ¨æ“çºµçš„å¯¹è±¡çš„ç±»å‹ï¼Œè¿™ç»å¸¸å¯ä»¥åœ¨ impl block é‡Œé¢çœ‹åˆ° ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:4:8","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#ç±»"},{"categories":["Programming-Languages"],"content":" æ€»ç»“ä»¥ä¸Šå°±æ˜¯æœ¬ç¯‡åšå®¢çš„å…¨éƒ¨å†…å®¹ï¼Œæˆ‘å…¶å®åªè°ˆåˆ°äº†æˆ‘è®¤ä¸ºæ¯”è¾ƒæœ‰ç”¨çš„ä¸€äº›ç±»å‹æç¤ºä½¿ç”¨åœºæ™¯ï¼Œä¸å°‘çš„é«˜çº§ç‰¹æ€§æ¯”å¦‚ Static protocol9 ç­‰æ²¡æœ‰æåˆ°ï¼Œè¿™äº›å†…å®¹ç•™ç»™è¯»è€…è‡ªå·±æ¢ç´¢ã€‚ æˆ‘å¯¹ç±»å‹æç¤ºçš„æ€åº¦ä»ç„¶æ˜¯ï¼šå½“å®ƒå˜å¾—å¤æ‚çš„æ—¶å€™å°±ä¸ç”¨ï¼Œé™¤éè¿™ä¸ªä»£ä»·æ˜¯å€¼å¾—çš„ã€‚ æ ¹æ®æˆ‘çš„å¼€å‘ç»éªŒï¼Œä¸‹é¢é™„ä¸Šå…³äºç±»å‹æç¤ºçš„å‡ ç‚¹å»ºè®®ğŸ¯ï¼š å†³å®šè¦åŠ ä¸Šä»€ä¹ˆç±»å‹æç¤ºçš„æ—¶å€™ï¼Œè€ƒè™‘è¿™ä¸ªç±»å‹èƒ½å¤Ÿåšä»€ä¹ˆã€‚Python 3.8 æå‡ºçš„ static protocols å°±å¾ˆå¥½è§£å†³äº†è¿™ç‚¹9ã€‚æ„Ÿè§‰æœ‰ç‚¹åƒ Rust ä¸­çš„ traits å¯¹äºå‡½æ•°è¿”å›ç±»å‹ï¼ŒåŠ›æ±‚è¿”å›çš„ç±»å‹è¶Šç²¾ç¡®è¶Šå¥½ã€‚è®¾æƒ³ä¸€ä¸ªè¿”å›ç±»å‹ä¸º Union[str, int]ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è‡ªå·±æ‰‹åŠ¨å†è¿›è¡Œä¸€æ¬¡ç±»å‹æ£€æŸ¥ï¼Œå°±æ˜¾å¾—è¿™ä¸ªç±»å‹æç¤ºä¸æ˜¯å¾ˆæœ‰å¿…è¦ é€šè¿‡äº†ä»£ç é™æ€ç±»å‹æ£€æŸ¥ä¹Ÿä¸æ„å‘³ç€ç¨‹åºå°±æ²¡æœ‰ bug äº†ï¼Œè½¯ä»¶æµ‹è¯•æ‰æ˜¯è½¯ä»¶å·¥ç¨‹é¢†åŸŸä¿è¯è½¯ä»¶è´¨é‡çš„æ ‡å‡†åšæ³•ï½ å°†è¿™ä»½ cheatsheet åŠ å…¥ä½ çš„ä¹¦ç­¾ğŸ‘ ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:5:0","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ PEP 484. Type HintsÂ â†©ï¸Â â†©ï¸Â â†©ï¸ PEP 3107. Function AnnotationsÂ â†©ï¸ PEP 526. Syntax for Variable AnnotationsÂ â†©ï¸ PEP 585. Type Hinting Generics In Standard CollectionsÂ â†©ï¸Â â†©ï¸ PEP 613. Explicit Type AliasesÂ â†©ï¸ PEP 483. The Theory of Type HintsÂ â†©ï¸ PEP 604. Allow writing union types as X | YÂ â†©ï¸ PEP 673. Self TypeÂ â†©ï¸ PEP 544. Protocols: Structural subtyping (static duck typing)Â â†©ï¸Â â†©ï¸ ","date":"2023-01-13","objectID":"/zh-cn/type-hints-in-python/:6:0","series":null,"tags":["Python"],"title":"Python çš„ç±»å‹æç¤ºï¼šæ˜¯ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ","uri":"/zh-cn/type-hints-in-python/#å‚è€ƒ"},{"categories":["Programming-Languages"],"content":"Python ä¸­çš„è§£åŒ…æ“ä½œç¬¦çš„ç®€å•ä»‹ç»","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€ä»Šå¤©æˆ‘æƒ³è¦èŠèŠ Python ä¸­ç”¨äºè§£åŒ…ï¼ˆUnpackingï¼‰çš„ä¸¤ä¸ªæ“ä½œç¬¦å·â€”â€”* å’Œ ** ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:1:0","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" åŸºæœ¬ç”¨æ³•* æœ€ä¸ºå¸¸è§çš„ç”¨æ³•æ˜¯ç”¨æ¥è¡¨ç¤ºä¹˜æ³•ã€‚ä½†æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† * ç”¨äºä»»æ„ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼ˆiterable objectï¼‰1ä¸Šï¼Œè¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æå–é‡Œé¢æ‰€æœ‰çš„å€¼ ğŸ“’ Python è‡ªå¸¦çš„å¯è¿­ä»£å¯¹è±¡åŒ…æ‹¬ï¼šlist, tuple, set, å’Œ dict ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:2:0","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/#åŸºæœ¬ç”¨æ³•"},{"categories":["Programming-Languages"],"content":" Starred assignment/expressionéšç€ Python 3.0 çš„å‘å¸ƒï¼ŒPython æ”¯æŒä½¿ç”¨ * æ¥è§£åŒ…ä»»æ„å¯è¿­ä»£å¯¹è±¡2ã€‚è¿™ä¸ªè¢«ç§°ä¹‹ä¸º Starred assignmentï¼Œä¹Ÿå«åš Starred expressionsã€‚æˆ‘ä¹Ÿæœ‰çœ‹åˆ°ç§°ä¹‹ä¸º parallel assignment çš„ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ = å·¦è¾¹å£°æ˜ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡è¡¨ç¤ºæ•è·æ‰€æœ‰å˜é‡ã€‚çœ‹ä¸‹é¢è¿™ä¸ªç›´è§‚çš„ä¾‹å­ï¼š python \u003e\u003e\u003e first, *rest, last = [1, 2, 3, 4, 5] \u003e\u003e\u003e first 1 \u003e\u003e\u003e rest [2, 3, 4] \u003e\u003e\u003e last 5 ğŸ“’ è¯­æ³•å¾ˆç®€å•ï¼šä¸€ä¸ªæ˜Ÿå·åé¢ç´§è·Ÿç€å˜é‡å - *fooã€‚æˆ‘ä»¬å¯ä»¥åœ¨ = å·¦è¾¹ä»»æ„ä½ç½®æ”¾ç½®å®ƒï¼Œä½†æ˜¯åªèƒ½æœ€å¤šä½¿ç”¨ä¸€æ¬¡è¿™æ ·çš„å˜é‡ã€‚ä»¥åŠï¼Œfoo çš„ç±»å‹ä¸º list åœ¨æˆ‘çœ‹æ¥ï¼ŒPython çš„è¿™ä¸ªç‰¹æ€§å¾ˆå¤§ç¨‹åº¦ä¸Šæé«˜äº†ä»£ç çš„å¯è¯»æ€§ ä¸è¿‡å®ƒä¹Ÿæœ‰ä¸€äº›å±€é™ï¼š æˆ‘ä»¬ä¸èƒ½ä»…ä»…åœ¨ = å·¦è¾¹ä½¿ç”¨ä¸€ä¸ª *foo å½“æˆå”¯ä¸€çš„è¢«èµ‹å€¼ç›®æ ‡ã€‚= å·¦ä¾§å¿…é¡»æ˜¯ä¸€ä¸ª list æˆ–è€…æ˜¯ tuple å¦‚æœ = å³è¾¹çš„å€¼çš„æ•°é‡ä¸å¤Ÿç”¨äºè§£åŒ…çš„è¯ï¼Œç¨‹åºå°±ä¼šæŠ¥é”™ ä¸‹é¢çš„ä¾‹å­è¯æ˜äº†è¿™ä¸¤ç‚¹ï¼š python *first = [1, 2, 3] Cell In [1], line 1 *first = [1, 2, 3] ^ SyntaxError: starred assignment target must be in a list or tuple python # just add `,` would be fine # now the LHS is a tuple *first, = [1, 2, 3] first [1, 2, 3] python first, second, *rest = [1] --------------------------------------------------------------------------- ValueError Traceback (most recent call last) Cell In [3], line 1 ----\u003e 1 first, second, *rest = [1] ValueError: not enough values to unpack (expected at least 2, got 1) ğŸ“’ å¸¸è§çš„ä¸€ä¸ªåšæ³•æ˜¯å°† * å’Œ _ ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼ˆä¹Ÿå°±æ˜¯ *_ï¼‰ï¼Œè¡¨ç¤ºæˆ‘ä»¬ä¸å…³å¿ƒå®ƒæ•è·çš„å˜é‡ python first, *_ = [1, 2, 3] first ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:2:1","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/#starred-assignmentexpression"},{"categories":["Programming-Languages"],"content":" æ›´è¿›ä¸€æ­¥ä» Python 3.5 å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ›´å¤šçš„æƒ…å†µä¸‹ä½¿ç”¨ * å’Œ **3 æƒ…å†µ1âƒ£ï¸ï¼šåœ¨å‡½æ•°è°ƒç”¨é‡Œé¢ï¼Œæˆ‘ä»¬æƒ³è¦ä½¿ç”¨å‡ æ¬¡å°±å¯ä»¥ä½¿ç”¨å‡ æ¬¡ python foo, bar = {'a': 1, 'b': 2}, {'c': 3, 'd': 4} dict(**foo, **bar) # dict is a function ğŸ“’dict ä¸­çš„ keys çš„ä¼˜å…ˆçº§æ˜¯å³è¾¹å¤§äºå·¦è¾¹ã€‚æ¢å¥è¯è¯´ï¼Œåé¢å‡ºç°çš„ key çš„å€¼æ€»æ˜¯ä¼šè¦†ç›–å‰é¢å‡ºç°çš„ã€‚çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ python {**{'a': 1, 'b': 2}, **{'a': 3}} {'a': 3, 'b': 2} ğŸ“’å½“æˆ‘ä»¬åœ¨å‡½æ•°è°ƒç”¨é‡Œé¢ä½¿ç”¨ ** çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦ç¡®ä¿æ²¡æœ‰é‡å¤çš„ key python dict(**{'a': 1, 'b': 2}, **{'a': 3}) --------------------------------------------------------------------------- TypeError Traceback (most recent call last) Cell In [5], line 1 ----\u003e 1 dict(**{'a': 1, 'b': 2}, **{'a': 3}) TypeError: dict() got multiple values for keyword argument 'a' æƒ…å†µ2âƒ£ï¸ï¼šæˆ‘ä»¬å¯ä»¥åœ¨ tuple/list/set/dict å­—é¢å€¼ä¸­ä½¿ç”¨ã€‚ä½†æ˜¯ä¸èƒ½åœ¨ list/set/dict comprehensions é‡Œé¢ä½¿ç”¨ğŸ˜º python # an example drawn from PEP 448 \u003e\u003e\u003e *range(4), 4 (0, 1, 2, 3, 4) \u003e\u003e\u003e [*range(4), 4] [0, 1, 2, 3, 4] \u003e\u003e\u003e {*range(4), 4} {0, 1, 2, 3, 4} \u003e\u003e\u003e {'x': 1, **{'y': 2}} {'x': 1, 'y': 2} {'x': 1, 'y': 2} python matrix = [ [1, 2, 3] [4, 5, 6] ] [*sublist for sublist in matrix] Cell In [7], line 5 [*sublist for sublist in matrix] ^ SyntaxError: iterable unpacking cannot be used in comprehension ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:2:2","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/#æ›´è¿›ä¸€æ­¥"},{"categories":["Programming-Languages"],"content":" æ€»ç»“Python çš„è§£åŒ…æ“ä½œç¬¦è®©ç¼–ç¨‹è½»æ¾å¾ˆå¤šã€‚å®ƒæä¾›äº†ä¸€ç§ç›´è§‚çš„è§£æ„å¯è¿­ä»£å¯¹è±¡çš„æ‰‹æ®µã€‚åœ¨è¿™ä¸ªæ“ä½œç¬¦çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…ä¸€äº›æ„šè ¢çš„ç´¢å¼•é”™è¯¯ğŸ™… ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:3:0","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ Python iteratorsÂ â†©ï¸ PEP 3132. Extended Iterable UnpackingÂ â†©ï¸ PEP 448. Additional Unpacking GeneralizationsÂ â†©ï¸ ","date":"2022-12-05","objectID":"/zh-cn/unpacking-in-python/:4:0","series":null,"tags":["Python"],"title":"Python 3.5 çš„è§£åŒ…æ“ä½œç¬¦","uri":"/zh-cn/unpacking-in-python/#å‚è€ƒ"},{"categories":["Programming-Languages"],"content":"Python3.6 å¼•å…¥çš„ f-strings çš„ç®€å•ä»‹ç»","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/"},{"categories":["Programming-Languages"],"content":" ä¿¡æ¯ æ›´æ–°ï¼š 2024-04-19ï¼Œé‡å†™å…¨æ–‡ï¼Œæ ¹æ®ä½¿ç”¨åœºæ™¯åˆ†ç±»ï¼Œæ–¹ä¾¿ä½œä¸º cheatsheet ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:0:0","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#"},{"categories":["Programming-Languages"],"content":" å¼•è¨€å­—ç¬¦ä¸²æ ¼å¼åŒ–ç»å¯¹å¯ä»¥ç®—å¾—ä¸Šæ—¥å¸¸ç”Ÿæ´»ä¸­æœ€ä¸ºå¸¸ç”¨çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è¾“å‡ºå„ç§å­—ç¬¦ä¸²è¿˜éœ€è¦ç²¾ç¡®æ§åˆ¶å…¶æ ¼å¼ åœ¨ä¸€äº›è¿‡æ—¶çš„ Python æ•™ç¨‹ä¸Šï¼Œè¿˜å¯ä»¥çœ‹åˆ°ä½¿ç”¨ % æ¥æ ¼å¼åŒ–å­—ç¬¦ä¸²ã€‚ä½†å…¶å®åœ¨ Python3.6 ä¹‹åï¼Œf-strings å·²ç»æˆäº†æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æœ€ä¼˜è§£ï¼Œä¼˜ç‚¹åŒ…æ‹¬ï¼š å¯ä»¥åœ¨å­—ç¬¦ä¸²å­—é¢å€¼ï¼ˆString literalï¼‰é‡Œé¢å†…åµŒè¡¨è¾¾å¼ å¯è¯»æ€§éå¸¸å¼º ä¸‹é¢çš„ç®€å•å¯¹æ¯”å°±å¯ä»¥çœ‹å‡º f-strings åœ¨å¯è¯»æ€§ä¸Šçš„ä¼˜åŠ¿ï¼š python name = \"Martin\" f\"My name is {name}\" 'My name is Martin' python name = \"Martin\" \"My name is %s\" % name 'My name is Martin' åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬åˆ†åˆ«ç”¨ä¸¤ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼å®ç°äº†åŒæ ·åŠŸèƒ½ çœ‹ä¸€çœ¼ f-strings å°±çŸ¥é“è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯è¦è¾“å‡ºåå­—ï¼ˆå½“ç„¶è¿™è¦æ±‚ä½ ç”¨çš„æ˜¯æœ‰æ„ä¹‰çš„å˜é‡ï¼Œæ¯”å¦‚è¿™é‡Œç”¨çš„æ˜¯ nameï¼‰ã€‚è€Œå¦‚æœç”¨æ—§çš„ % å­—ç¬¦ä¸²æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œåˆ™ç¨å¾®æ˜¾å¾—ä¸é‚£ä¹ˆè‡ªç„¶ï¼Œæˆ‘ä»¬é¦–å…ˆä¼šçœ‹åˆ° %s å ä½ç¬¦ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å‘å³çœ‹æ‰çŸ¥é“è¿™é‡Œä¼šæ”¾ç½®ä»€ä¹ˆå˜é‡ è¿™é‡Œçš„ä¾‹å­ä¸é•¿æ‰€ä»¥æ²¡å•¥å·®åˆ«ï¼Œä½†æ˜¯å¦‚æœç”¨ % æ ¼å¼åŒ–çš„å­—ç¬¦ä¸²å¾ˆé•¿çš„è¯ï¼Œçœ‹ä»£ç å°±ä¼šæœ‰å‰²è£‚æ„Ÿï¼Œä½ çš„çœ¼ç›éœ€è¦æ¥å›å·¦å³ç§»åŠ¨ã€‚è€Œä¸”è¿™ä¸ä»…ä»…æ˜¯é˜…è¯»ä»£ç ä¸Šä¸å¤§è‡ªç„¶ï¼Œå¦‚æœæ˜¯è‡ªå·±å†™å¾ˆé•¿çš„å­—ç¬¦ä¸²ï¼Œè¿˜å¾—æ ¸å¯¹ä¸€éå ä½ç¬¦å’Œå˜é‡çš„é¡ºåºæ˜¯å¦ä¸€è‡´ï¼Œè¿™æ— ç–‘æ˜¯ä¸€ä¸ªè´Ÿæ‹… ğŸ˜« æ³¨æ„ f-strings å¯¹ Python ç‰ˆæœ¬çš„æœ€ä½è¦æ±‚æ˜¯ 3.6 ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:1:0","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" è¯­æ³•è§„åˆ™f-strings çš„è¯­æ³•è§„åˆ™å¾ˆç®€å•ï¼Œç®€å•æ¥è¯´ï¼Œå®ƒåªæ˜¯åœ¨æ™®é€šå­—ç¬¦ä¸²ï¼ˆ\"...\" or '...') çš„å‰é¢åŠ ä¸Šäº† f å‰ç¼€ï¼Œè¿™æ ·ä½ å°±å¾—åˆ°äº†ä¸€ä¸ª f-strings python f\"...\" # or f'...' åœ¨ f-strings é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾ç½®å½¢å¦‚ {expression} çš„æ–‡æœ¬ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼šPython ä¼šå¸®æˆ‘ä»¬å¯¹è¿™ä¸ªè¡¨è¾¾å¼æ±‚å€¼ï¼Œå¹¶è¿›è¡Œæ ¼å¼åŒ–çš„è¾“å‡º å½“ç„¶ï¼Œåªæ˜¯æ±‚å€¼è¿˜ä¸å¤Ÿï¼Œæœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦è¿›è¡Œå„ç§æ§åˆ¶ æµ®ç‚¹æ•°çš„ç²¾åº¦ æ˜¯å¦è¦æ˜¾ç¤ºæ­£è´Ÿæ•°çš„ + æˆ–è€…æ˜¯ - â€¦ è€Œè¿™äº›åˆ™æ˜¯é€šè¿‡ format_specifier è¿›è¡Œæ§åˆ¶ï¼Œå®ƒåŒ…å«äº†å¤šä¸ªå¯é€‰çš„é…ç½®é¡¹ã€‚ä»è¯­æ³•ä¸Šçœ‹ï¼Œformat_specifier æ¥åœ¨ expression åé¢ï¼Œä¸¤è€…ä¹‹é—´ç”¨ : éš”å¼€ï¼Œæ‰€ä»¥ç¡®åˆ‡æ¥è¯´ï¼Œf-strings çš„è¯­æ³•è§„åˆ™æ˜¯ä¸‹é¢è¿™æ ·çš„ python f\"...{expression:format_specifier}...\" ä¸‹é¢æˆ‘ä»¬æ¥æŒ‰ç…§åŠŸèƒ½è¿›è¡Œåˆ†ç±»ï¼Œçœ‹çœ‹ç”¨ f-strings æˆ‘ä»¬éƒ½å¯ä»¥åšäº›ä»€ä¹ˆ ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:2:0","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#è¯­æ³•è§„åˆ™"},{"categories":["Programming-Languages"],"content":" å„ç§ä½¿ç”¨åœºæ™¯","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:0","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#å„ç§ä½¿ç”¨åœºæ™¯"},{"categories":["Programming-Languages"],"content":" åŸºæœ¬ä½¿ç”¨æˆ‘ä»¬å…ˆè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µï¼šä¸åŒ…å«ä»»ä½• format_specifierã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ python left, right = 3, 5 f\"{left} + {right} = {left + right}\" '3 + 5 = 8' æŠ€å·§ ç”¨ {} æ¥å……å½“å ä½ç¬¦å°±å¾ˆè‡ªç„¶å¼•ç”³å‡ºä¸€ä¸ªé—®é¢˜â€”â€”å¦‚æœè¦åœ¨å­—ç¬¦ä¸²é‡Œé¢è¾“å‡º {} è¿™ä¸¤ä¸ªå­—ç¬¦æ€ä¹ˆåŠï¼Ÿç­”æ¡ˆä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦ç”¨ {{}} å³å¯ python f\"{{}}\" '{}' å€¼å¾—ä¸€æçš„è¿˜æœ‰ï¼Œexpression é‡Œé¢ä¸å…è®¸å‡ºç° : å’Œ ! å’Œ \\ å®é™…ä¸Š expression é‡Œé¢ä¹Ÿå¾ˆå°‘ä¼šåŒ…å«è¿™å‡ ä¸ªå­—ç¬¦ã€‚\\ çš„ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ç”¨æ¥è½¬ä¹‰ ' æˆ–è€… \"ï¼Œä½†å…¶å®åªè¦æˆ‘ä»¬å†…å¤–ç”¨çš„æ˜¯ä¸åŒçš„å¼•å·æ ¼å¼å³å¯ è‡³äº :ï¼Œåœ¨ PEP4981 é‡Œé¢ä¸¾ä¾‹å¯èƒ½åº”ç”¨åœºæ™¯æ˜¯ lambda è¡¨è¾¾å¼ï¼Œæ­¤æ—¶æˆ‘ä»¬åªéœ€ç”¨ä¸€å¯¹æ‹¬å·å°† lambda è¡¨è¾¾å¼æ‹¬èµ·æ¥å³å¯ï¼š python # Note that we need to add () around the lambda expression f\"{(lambda x: x + 1)(3)}\" '4' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:1","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#åŸºæœ¬ä½¿ç”¨"},{"categories":["Programming-Languages"],"content":" ä¸åŒè¡¨ç¤ºPython å¯¹è±¡ä¸€èˆ¬ä¼šæœ‰ 2 ç§å­—ç¬¦ä¸²çš„è¡¨ç¤ºï¼Œåˆ†åˆ«å¯¹åº” __str__ å’Œ __repr__ æ–¹æ³•ï¼Œå…¶ä¸­å‰è€…ä¸€èˆ¬æ˜¯é¢å‘å®¢æˆ·çš„ï¼Œå¯è¯»æ€§è¾ƒå¥½ï¼›åè€…ä¸€èˆ¬æ˜¯é¢å‘å¼€å‘è€…çš„ï¼Œä¾¿äºè°ƒè¯•ç¨‹åºã€‚f-strings å¯¹æ­¤æä¾›äº†æ”¯æŒï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¦ç”¨å“ªä¸€ç§ python {foo:!s} # it's equal to call str(foo) first {foo:!r} # similarily, call repr(foo) first {foo:!a} # similarilyï¼Œcall ascii(foo) first ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:2","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#ä¸åŒè¡¨ç¤º"},{"categories":["Programming-Languages"],"content":" è¡¥é½ä¸å¯¹é½è¡¥é½å’Œå¯¹é½æ¶‰åŠåˆ°ä¸‹é¢å‡ ä¸ªé—®é¢˜ è¦ç”¨ä»€ä¹ˆå­—ç¬¦è¡¥é½ï¼Ÿä¸‹é¢ç”¨ fill è¡¨ç¤º è¦è¡¥é½åˆ°å¤šé•¿ï¼Ÿä¸‹é¢ç”¨ width è¡¨ç¤º è¦å¦‚ä½•å¯¹é½ï¼Ÿä¸‹é¢ç”¨ align è¡¨ç¤º å› æ­¤ï¼Œè¡¥é½å’Œå¯¹é½çš„è¯­æ³•è§„åˆ™æ˜¯ [[fill]align][width] æ³¨æ„ åœ¨è¯­æ³•è§„åˆ™é‡Œé¢ï¼Œ[] è¡¨ç¤ºè¿™æ˜¯å¯é€‰çš„éƒ¨åˆ† å…¶ä¸­ align æ”¯æŒä¸‹é¢è¿™å‡ ç§å¯¹é½æ–¹å¼ï¼š python \u003c # left-aligned \u003e # right-aligned ^ # centered = # only valid for numeric types, pad between sign and digits ä¸¾ä¾‹å¦‚ä¸‹ python f\"{-1:*^9}\" # set `fill` to *, and set width to 9 '***-1****' python f\"{-1:*\u003e9}\" # set `fill` to *, and set width to 9 '*******-1' python f\"{-1:*\u003c9}\" # set `fill` to *, and set width to 9 '-1*******' python f\"{-1:*=9}\" # set `fill` to *, and set width to 9 '-*******1' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:3","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#è¡¥é½ä¸å¯¹é½"},{"categories":["Programming-Languages"],"content":" ç¬¦å·ä½çš„æ˜¾ç¤ºæ”¯æŒä¸‹é¢è¿™å‡ ç§ python + # both positive and negative - # only negative (default) space # a leading spaces for positive and minus sign for negative python f\"{1:+}\" '+1' python f\"{-1:+}\" '-1' python assert f\"{1}\" == f\"{1:-}\" # because it's the default behavior ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:4","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#ç¬¦å·ä½çš„æ˜¾ç¤º"},{"categories":["Programming-Languages"],"content":" æµ®ç‚¹æ•°ç²¾åº¦æµ®ç‚¹æ•°è¦ä¿ç•™ n ä½å°æ•°æˆ‘ä»¬å°±ç”¨ .nfï¼Œè·Ÿ C/C++ çš„ printf æœ‰ç‚¹åƒï¼Œæ¯”å¦‚ python x = 1.23456 f\"{x:.1f}\" '1.2' python x = 1.23456 f\"{x:.3f}\" '1.235' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:5","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#æµ®ç‚¹æ•°ç²¾åº¦"},{"categories":["Programming-Languages"],"content":" -0.0 çš„é—®é¢˜ä» Python3.11 èµ·ï¼Œå¢åŠ äº†å¯é€‰çš„ z ç”¨æ¥å¤„ç† -0.ã€‚å› ä¸ºè°ƒæŸ¥æ˜¾ç¤º2ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¸æƒ³å¾—åˆ° -0.0 è¿™æ ·çš„è¾“å‡º python x = -0.0001 f\"{x:.1f}\" # set the precision to 1, so it will round to -0.0 '-0.0' python x = -0.0001 f\"{x:z.1f}\" # with z, we will get 0.0 rather than -0.0 '0.0' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:6","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#-00-çš„é—®é¢˜"},{"categories":["Programming-Languages"],"content":" ä¸åŒè¿›åˆ¶çš„è¡¨ç¤ºPython æä¾›äº†å‡ ä¸ªæ–¹ä¾¿çš„å‡½æ•°ï¼Œæ¯”å¦‚ binï¼Œoct ç­‰æ¥è·å¾—ä¸åŒè¿›åˆ¶çš„è¡¨ç¤ºï¼Œæ ¹æ® f-strings çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å†™å‡º {bin(a)} æ¥è·å¾— a çš„äºŒè¿›åˆ¶çš„è¡¨ç¤ºï¼ˆå…¶ä»–è¿›åˆ¶çš„è¡¨ç¤ºåŒç†ï¼‰ã€‚ä½† f-strings å…¶å®å·²ç»å¸®ä½ è€ƒè™‘åˆ°è¿™ç‚¹äº†ï¼Œå®ƒé»˜è®¤æ”¯æŒå¦‚ä¸‹çš„è¿›åˆ¶è¡¨ç¤º python b # base 2 o # base 8 d # base 10 x # base 16, low-case letters X # base 16, upper-case letters æŠ€å·§ å¯ä»¥åŠ ä¸Š #ï¼Œå°±ä¼šæ·»åŠ å¯¹åº”è¿›åˆ¶è¡¨ç¤ºçš„å‰ç¼€ï¼Œæ¯”å¦‚ 0b ç­‰ python f\"{15:b}\" # represent 15 in base 2 '1111' python f\"{15:#b}\" # represent 15 in base 2, use # to add prefix 0b '0b1111' python f\"{15:#X}\" # represent 15 in base 16, use # to add prefix 0X '0XF' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:7","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#ä¸åŒè¿›åˆ¶çš„è¡¨ç¤º"},{"categories":["Programming-Languages"],"content":" åƒåˆ†ä½åˆ†éš”ç¬¦åœ¨é‡‘èæˆ–è€…ç»æµå­¦é‡Œé¢ï¼Œç»å¸¸ä¼šç”¨ , ä½œä¸ºåƒåˆ†ä½åˆ†éš”ç¬¦ï¼Œf-strings å¯¹æ­¤æä¾›äº†æ”¯æŒï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®š _ ä½œä¸ºåƒåˆ†ä½çš„åˆ†éš”ç¬¦34: python f\"{123456789:,}\" '123,456,789' python f\"{1234.56789:,}\" '1,234.56789' python f\"{123456789:_}\" '123_456_789' python f\"{1234.56789:_}\" '1_234.56789' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:8","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#åƒåˆ†ä½åˆ†éš”ç¬¦"},{"categories":["Programming-Languages"],"content":" Trickä» Python3.8 èµ·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ {expression=} çš„å½¢å¼ï¼Œå®ƒä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬æ¢æˆ expression={expression}5ï¼Œè¿™æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ åœ¨è°ƒè¯• Python ç¨‹åºçš„æ—¶å€™ï¼Œæˆ‘ç»å¸¸ä¼šå†™å‡ºå¦‚ä¸‹çš„ f-strings è¾“å‡ºæˆ‘å…³å¿ƒçš„å˜é‡çš„å€¼ï¼Œä½†æœ‰ç‚¹éº»çƒ¦çš„æ˜¯ï¼Œæˆ‘ä¸å¾—ä¸å†™ä¸¤æ¬¡å˜é‡çš„åå­— python f\"left={left}, right={right}\" 'left=3, right=5' å¯ä»¥çœ‹åˆ°ï¼Œé‡Œé¢å­˜åœ¨ä¸€äº›å†—ä½™ï¼Œå› æ­¤ï¼Œä¸€ä¸ªæ›´å¥½çš„æ–¹å¼æ˜¯ python f\"{left=}, {right=}\" 'left=3, right=5' ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:3:9","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#trick"},{"categories":["Programming-Languages"],"content":" æ€»ç»“åœ¨æˆ‘åˆšå¼€å§‹å­¦ä¹  Python çš„æ—¶å€™ï¼Œå½“æ—¶çš„æ•™ç¨‹éƒ½æ˜¯åœ¨ç”¨ % æ¥æ ¼å¼åŒ–è¾“å‡ºï¼Œåæ¥çš„æ¨èæ˜¯ str.format æ–¹æ³•ã€‚è€Œåˆ°äº† f-string éšç€ Python3.6 å‘å¸ƒä¹‹åï¼Œä¼¼ä¹ç»Ÿä¸€äº†å­—ç¬¦ä¸²è¾“å‡ºçš„ Best practiceï¼Œå¤§å®¶éƒ½åœ¨ç”¨è¿™ä¸ªã€‚è¿™ä¹Ÿæ˜¯ç¬¦åˆ Python è®¾è®¡å“²å­¦çš„â€”â€”åº”è¯¥åªæœ‰ä¸€ç§æ˜¾è€Œæ˜“è§çš„æ–¹å¼åšåˆ°ä¸€ä»¶äº‹ğŸš€ ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:4:0","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ PEP 498. Literal String InterpolationÂ â†©ï¸ PEP 682. Format Specifier for Signed ZeroÂ â†©ï¸ PEP 378. Format Specifier for Thousands SeparatorÂ â†©ï¸ PEP 515. Underscores in Numeric LiteralsÂ â†©ï¸ https://docs.python.org/3/whatsnew/3.8.html#f-strings-support-for-self-documenting-expressions-and-debuggingÂ â†©ï¸ ","date":"2022-11-16","objectID":"/zh-cn/f-strings-in-python/:5:0","series":null,"tags":["Python"],"title":"Python3.6 çš„ f-strings","uri":"/zh-cn/f-strings-in-python/#å‚è€ƒ"},{"categories":["Programming-Languages"],"content":"æµ·è±¡è¡¨è¾¾å¼çš„ç®€å•ä»‹ç»","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€ä»Šå¤©è¦è¯´çš„æ˜¯åœ¨ Python3.8 ä¸­å¼•å…¥çš„æ–°ç‰¹æ€§ï¼šæµ·è±¡è¿ç®—ç¬¦ï¼ˆWalrus operatorï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¤‡å—äº‰è®®çš„ç‰¹æ€§ï¼Œä½†å®ƒæœ€åè¿˜æ˜¯é€šè¿‡å¹¶å‘å¸ƒäº†ğŸ¤” åœ¨ Python ä¸­ï¼Œèµ‹å€¼è¯­å¥ï¼ˆ=ï¼‰å¹¶ä¸æ˜¯ expression è€Œæ˜¯ statementã€‚æµ·è±¡è¡¨è¾¾å¼åˆ™æ˜¯ expressionã€‚å…³äº statement å’Œ expression çš„åŒºåˆ«å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šexpression æ€»æ˜¯ä¼šè¿”å›å€¼ï¼Œè€Œ statement ä¸è¿”å›å€¼ã€‚ ä¸¤è€…çš„åŒºåˆ«å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç ï¼š python # `=` is a statement, so it will print no value x = 5 python # `:=` is an expression, so it will evaluate to a value # not recommended :) (x := 5) 5 ğŸ“’ è¿™é‡Œæµ·è±¡è¡¨è¾¾å¼éœ€è¦åŠ ä¸Š () æ˜¯ä¸ºäº†é¿å…é€ æˆæ··æ·†ã€‚æ¯•ç«Ÿåœ¨ Pythonè®¾è®¡å“²å­¦-Zen é‡Œé¢æåˆ°äº†ä¸€æ¡ï¼šâ€œThere should be oneâ€“ and preferably only one â€“obvious way to do it.\"ã€‚å¦‚æœä¸åŠ  () å°±èƒ½ä½¿ç”¨çš„è¯ï¼Œå¼€å‘è€…å°±ä¼šé™·å…¥åˆ°è¯¥ç”¨å“ªä¸€ä¸ªçš„å›°æƒ‘ä¹‹ä¸­ğŸ¤•ï¸ åœ¨ C/C++ ä¸­ï¼Œ= æ˜¯ expressionã€‚å¦‚æœä½ æœ‰ç›¸å…³çš„ç¼–ç¨‹èƒŒæ™¯çš„è¯ï¼Œä½ å¯èƒ½å¯¹ä¸‹é¢çš„ä»£ç ä¸é™Œç”Ÿ c // = will store the value in the LHS(left-hand-side) variable. // , and it has the value of the LHS // so we store the result of `foo` function call to `a` // , then we check if `a` \u003e 0 while ( (a = foo(...)) \u003e 0 ) { ... } ä½†æ˜¯åœ¨ Python 3.8 ä¹‹å‰æ˜¯æ— æ³•åšåˆ°ç±»ä¼¼çš„äº‹æƒ…çš„ï¼Œå› ä¸º = åœ¨ Python é‡Œé¢æ˜¯ä¸€ä¸ª statementï¼Œå¹¶ä¸ä¼šè¿”å›å€¼ã€‚è¿™å°±æ˜¯æµ·è±¡è¡¨è¾¾å¼å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ ğŸ¤© ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:1:0","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" è¯­æ³•è§„åˆ™ æµ·è±¡è¡¨è¾¾å¼çš„è¯­æ³•å¾ˆç®€å•ï¼šNAME := EXPRESSIONã€‚:= å·¦è¾¹æ”¾å˜é‡åï¼Œå³è¾¹åˆ™æ˜¯è¡¨è¾¾å¼ã€‚è¡¨è¾¾å¼çš„å€¼ä¼šè¢«ç»‘å®šåˆ° NAME ä¸Šã€‚ è¿™é‡Œçš„ NAME ä¸èƒ½æ˜¯å±æ€§æˆ–è€…ç´¢å¼• python # a dummy example. we bind `1 + 2 + 3` to `res` for future usage if (res := 1 + 2 + 3) \u003e 5: print(f\"res is {res}\") res is 6 python class foo: val: int = 0 some_foo = foo() (some_foo.val := 1) Input In [4] (some_foo.val := 1) ^ SyntaxError: cannot use assignment expressions with attribute python x = [1, 2, 3] (x[1] := 3) Input In [5] (x[1] := 3) ^ SyntaxError: cannot use assignment expressions with subscript å…³äº NAME çš„ä½œç”¨åŸŸ æµ·è±¡è¡¨è¾¾å¼ä¸ä¼šå¼•å…¥æ–°çš„ä½œç”¨åŸŸ ğŸ¤© NAME å¯ä»¥åœ¨å½“å‰çš„ä½œç”¨åŸŸä½¿ç”¨ï¼ŒåŒæ—¶æœ‰ä¸ªä¾‹å¤–ï¼šå¦‚æœæ˜¯åœ¨ list/dict/set comprehension é‡Œé¢ä½¿ç”¨ã€‚åˆ™æ˜¯æ˜¯åœ¨ enclosing scope é‡Œé¢. å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š python s = [1, 2, 3] # the list comprehension forms a new scope. # its enclosing scope is the global scope double_s = [item * 2 for item in s] # `item` is not in the global scope :) print(item) --------------------------------------------------------------------------- NameError Traceback (most recent call last) Input In [6], in \u003ccell line: 7\u003e() 4 double_s = [item * 2 for item in s] 6 # `item` is not in the global scope :) ----\u003e 7 print(item) NameError: name 'item' is not defined python s = [1, 2, 3] # the list comprehension forms a new scope. # its enclosing scope is the global scope double_s = [last := item * 2 for item in s] # so we can use `last` variable here print(last) ä¼˜å…ˆçº§è§„åˆ™ï¼šé™¤äº†æ¯” , é«˜ï¼Œæ¯”å…¶ä»–çš„éƒ½ä½ python x = 1, 2 x (1, 2) python (x := 1, 2) x 1 ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:2:0","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/#è¯­æ³•è§„åˆ™"},{"categories":["Programming-Languages"],"content":" é€‚ç”¨åœºæ™¯ ğŸ“’ ç»“åˆå‚è€ƒäº†1çš„å†…å®¹å’Œå¹³å¸¸çš„ç¼–ç¨‹ç»éªŒã€‚æ„Ÿè§‰æµ·è±¡è¡¨è¾¾å¼æœ€æ–¹ä¾¿çš„è¿˜æ˜¯ï¼šå¤„ç†è¿”å›å€¼å¯èƒ½ä¸º None çš„å‡½æ•° å¯¹äºè¿”å›å€¼å¯èƒ½ä¸º None çš„å‡½æ•°ï¼Œä»¥å‰ç»å¸¸æ˜¯å…ˆç”¨ = èµ‹å€¼è¯­å¥ä¿å­˜å‡½æ•°çš„è¿”å›ç»“æœã€‚ä¸ä¸º None çš„æ—¶å€™è¦ä½¿ç”¨è¿”å›å€¼æ¥è¿›è¡Œä¸‹ä¸€æ­¥å¤„ç†ã€‚æ­¤æ—¶ä»£ç çœ‹èµ·æ¥å¤§æ¦‚æ˜¯è¿™æ ·ï¼š python some_thing = foo(....) if some_thing: ... else: ... ä¸‹é¢ç”¨ re åº“ä¸¾ä¾‹å­ python import re # define a regex pattern to extract digits in a string DIGIT_PATTERN = r'\\d+' text = 'There are 10 dogs' # re.search will return None if no match was found. match = re.search(DIGIT_PATTERN, text) if match: # group(0) will return the entire match print(f\"Find match: {match.group(0)}\") else: print(\"Not match was found\") Find match: 10 ä¸ºäº†èƒ½åœ¨åé¢ä½¿ç”¨ match.group() çš„æ—¶å€™ Python è§£é‡Šå™¨ä¸ä¼šè¿”å› AttributeError: 'NoneType' object has no attribute 'group' é”™è¯¯ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ç”¨ä¸€ä¸ªä¸­é—´å˜é‡ match æš‚æ—¶ä¿å­˜ re.search çš„è¿”å›å€¼å¯¹å…¶è¿›è¡Œæ£€æŸ¥ï¼Œæ˜¾å¾—ä¼¼ä¹æœ‰ç‚¹å†—ä½™ã€‚æˆ‘ä»¬æ— æ³•ç›´æ¥å°†ä»–ä»¬è¿èµ·æ¥ï¼šre.search(DIGIT_PATTERN, text).group(0) ğŸ“’ æ’ç‚¹é¢˜å¤–è¯ï¼šåœ¨ Rust é‡Œé¢ï¼Œå¯èƒ½è¿”å› None çš„è¿”å›ç±»å‹æ˜¯ Option\u003cT\u003eã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ? æ¥å¤„ç†è¿™ç§æƒ…å†µï¼Œå®ƒä¼šå°è¯•æå–é‡Œé¢çš„å€¼ï¼Œå¦‚æœå¤±è´¥äº†å°±ä¼šå°½æ—©ç»ˆæ­¢æŠ¥é”™ã€‚æ‰€ä»¥åœ¨ Rust é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ï¼ˆå‡è®¾ Rust ä¹Ÿæœ‰ç±»ä¼¼çš„ APIï¼‰ï¼šre.search(DIGIT_PATTERN, text)?.group(0) ğŸº å¦å¤–ä¸€ç‚¹æ˜¯ï¼šå¯è¯»æ€§ç¨å¼±ï¼Œå½“ç„¶è¿™æ˜¯ä¸ªäººçš„ä¸»è§‚æ„Ÿå—ã€‚æœ‰ä¸€ç‚¹ä¸èˆ’æœæ˜¯ï¼šåªæœ‰å¯èƒ½åœ¨ match is not None çš„æ—¶å€™æˆ‘ä»¬æ‰ä¼šä½¿ç”¨ match å˜é‡ï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨ else åˆ†æ”¯é‡Œé¢ä½¿ç”¨ã€‚ä½†æ˜¯å¦‚æœå¾ˆå¿«åœ°ä»ä¸Šå¾€ä¸‹çœ‹ä»£ç çš„è¯ï¼Œå•ç‹¬å¦èµ·ä¸€è¡Œçš„ match = ... å°±åƒæ˜¯åé¢éƒ½å¯ä»¥ä½¿ç”¨ä¸€æ ·ğŸ¤£ æ­¤æ—¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç”¨ := æ¥ç»‘å®šå…¶è¿”å›å€¼ python if match := re.search(DIGIT_PATTERN, text): # group(0) will return the entire match print(f\"Find match: {match.group(0)}\") else: print(\"Not match was found\") Find match: 10 1 é‡Œé¢æåˆ°æ”¯æŒ := çš„ä¸€ä¸ªç†ç”±æ˜¯ï¼šè°ƒæŸ¥æ˜¾ç¤ºï¼Œå¼€å‘è€…å¾€å¾€å–œæ¬¢å†™æ¯”è¾ƒå°‘è¡Œçš„ä»£ç è€Œä¸æ˜¯è®©ä»£ç æ›´çŸ­ã€‚è¿™é‡Œæˆ‘ä»¬å°±å°‘å†™äº†ä¸€è¡Œä»£ç ã€‚åŒæ—¶çœ‹ä¸€çœ¼å°±çŸ¥é“ match çš„ä½œç”¨åŸŸğŸ‘ ç±»ä¼¼çš„ï¼Œåœ¨ while å¾ªç¯ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥å€Ÿç”¨è¿™ä¸ªç‰¹æ€§ python val = foo(...) while val: # do something while val is not None val = foo(...) ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:3:0","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/#é€‚ç”¨åœºæ™¯"},{"categories":["Programming-Languages"],"content":" ğŸ†š =å‡ ä¸ªå€¼å¾—ä¸€æçš„ä¸åŒï¼š = æ˜¯ statementï¼Œ:= æ˜¯ expressionã€‚è¿™ä¹Ÿå†³å®šäº†ä»–ä»¬çš„é€‚ç”¨åœºæ™¯æ˜¯ä¸åŒçš„ åªæœ‰ = æ”¯æŒfoo = bar = 1 è¿™ç§è¿ç»­ä½¿ç”¨çš„æƒ…å†µï¼›è€Œä¸” = å·¦è¾¹å¯ä»¥æ˜¯ foo.bar è¿™ç§å±æ€§ï¼Œæˆ–è€…æ˜¯ foo[1] è¿™ç§ç´¢å¼•çš„å½¢å¼ï¼Œä½†æ˜¯ := å·¦è¾¹åªèƒ½æ˜¯ä¸€ä¸ªç®€å•çš„å˜é‡å = æ”¯æŒ += è¿™ç§ augmented çš„å½¢å¼ï¼Œä½†æ˜¯ := ä¸è¡Œ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:4:0","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/#-"},{"categories":["Programming-Languages"],"content":" æ€»ç»“åœ¨æˆ‘çœ‹æ¥ï¼Œæµ·è±¡è¡¨è¾¾å¼åœ¨æˆ‘å‰é¢æåˆ°çš„å¼•ç”¨åœºæ™¯ä¸­æ˜¯æŒºæœ‰ç”¨çš„ï¼ˆæ¨èä½¿ç”¨ğŸ‘ï¼‰ï¼Œå¯è¯»æ€§æé«˜ä¸å°‘ğŸš€ã€‚ä½†æ˜¯1ä¸­çš„æŸäº›ä¾‹å­æˆ‘è§‰å¾—å¯èƒ½æ˜¯è´Ÿä¼˜åŒ–äº†ğŸ‘€ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:5:0","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ PEP 572. Assignment ExpressionsÂ â†©ï¸Â â†©ï¸Â â†©ï¸ ","date":"2022-10-29","objectID":"/zh-cn/walrus-operator-in-python/:6:0","series":null,"tags":["Python"],"title":"æµ·è±¡è¡¨è¾¾å¼ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.8ï¼‰","uri":"/zh-cn/walrus-operator-in-python/#å‚è€ƒ"},{"categories":["Programming-Languages"],"content":"Python 3.10 çš„ pattern matching çš„ç®€å•ä»‹ç»","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/"},{"categories":["Programming-Languages"],"content":" å¼•è¨€ä»Šå¤©æˆ‘æƒ³è¦è°ˆä¸€ä¸‹ Python 3.10 æå‡ºçš„æ–°ç‰¹æ€§1â€”â€”æ¨¡å¼åŒ¹é…ğŸ‰ å­¦ä¹ è¿‡ C è¯­è¨€çš„äººæƒ³å¿…å¯¹ä¸‹é¢çš„ switch è¯­å¥ä¸é™Œç”Ÿï¼Œ c switch (expression) { case constant_1: // statements break; case constant_2: // statements break; // Fall through // the value of the expression can be either constant_3 or constant_4 :) case constant_3: case constant_4: // statements default: // default statements } æ¦‚æ‹¬ä¸€ä¸‹ï¼ŒC è¯­è¨€çš„ switch è¯­å¥çš„å‡ ç‚¹è§„åˆ™ï¼š expression å¿…é¡»æ˜¯ int æˆ–è€… char ç±»å‹ï¼›constant å¿…é¡»æ˜¯ int æˆ– char å¸¸é‡ switch è¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹ï¼š è®¡ç®—å‡º expression çš„å€¼ï¼Œæ‹¿ç€è¿™ä¸ªå€¼ä»ä¸Šåˆ°ä¸‹æ£€æŸ¥æ˜¯å¦å’ŒæŸä¸€æ¡ case è¯­å¥çš„ constant ç›¸ç­‰ï¼Œå¦‚æœä¸€æ ·å°±ä¼šæ‰§è¡Œé‡Œé¢çš„ statements å’Œåé¢çš„ case è¯­å¥çš„ statementsï¼Œé™¤éé‡åˆ°äº† breakã€‚è¿™ä¸ªç‰¹æ€§å«åš Fall throughï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œå°†å¤šä¸ª case è¯­å¥å †å åœ¨ä¸€èµ·ï¼Œè¡¨ç¤ºé€»è¾‘ä¸Šçš„ã€Œæˆ–ã€çš„å…³ç³» å­˜åœ¨ default è¡¨ç¤ºé»˜è®¤æƒ…å†µï¼Œç”¨äºå…œåº•ï¼Œå½“å‰é¢çš„ case è¯­å¥éƒ½åŒ¹é…å¤±è´¥çš„æ—¶å€™æ‰§è¡Œ Python åˆ™å¹¶æ²¡æœ‰æä¾› switch è¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ if...elif..elif..else è¾¾åˆ°åŒæ ·çš„æ•ˆæœï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œå‡è®¾æˆ‘ä»¬è¦æ ¹æ® list çš„é•¿åº¦æ‰§è¡Œä¸åŒçš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š python some_list = [1, 2, 3, 4, 5] if len(some_list) == 1: # do something when the length is 1 ... # or more pythonic way: elif len(some_list) in [3, 5]: elif len(some_list) == 3 or len(some_list) == 5: # do something when the length is 3 or 5 ... else: ... ä¸Šé¢è¿™ä¸€è¿ä¸²çš„ if...elif..elif..else å…¶å®å¯è¯»æ€§ç¨å¾®å·®äº›ï¼Œå¦å¤–å®ƒè¿˜è¿åäº† DRY(Donâ€™t repeat yourself) åŸåˆ™ï¼Œæˆ‘ä»¬å¤šæ¬¡å†™ä¸‹ len(some_list) å½“ç„¶æˆ‘ä»¬å¯ä»¥é€‰æ‹©å…ˆç”¨ä¸€ä¸ªå˜é‡ length è®°ä½ some_list çš„é•¿åº¦ï¼Œè¿™æ ·å°±å¯ä»¥è®©æˆ‘ä»¬å°‘æ‰“ä¸€äº›ä»£ç ï¼Œä½†è‹¥æƒ…å†µæ›´å¤æ‚å†™ï¼Œè¿™ä¸ªæŠ€å·§ä¹Ÿä¸é€‚ç”¨äº† è§£å†³ä¸Šé¢çš„ä¸€ä¸ªæ›´ä¼˜é›…çš„æ–¹å¼å°±æ˜¯æœ¬æ–‡è¦è®²åˆ°çš„ï¼šPattern matching â¬‡ï¸ python match len(some_list): case 1: # do something when the length is 1 ... case 3 | 5: # do something when the length is 3 or 5 ... case _: # equal to the `default:` ... ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:1:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#å¼•è¨€"},{"categories":["Programming-Languages"],"content":" åŸºæœ¬çš„è¯­æ³•ä¸‹é¢æˆ‘ç»™å‡º Pattern matching çš„åŸºæœ¬è¯­æ³• python match subject: case \u003cpattern_1\u003e: \u003caction_1\u003e case \u003cpattern_2\u003e: \u003caction_2\u003e case \u003cpattern_3\u003e: \u003caction_3\u003e # [Optional] wildcard to cover all situations case _: \u003caction_wildcard\u003e ä»è¯­æ³•ä¸Šçœ‹ï¼Œå’Œå‰é¢ C è¯­è¨€çš„ switch è¯­å¥å·®ä¸å¤šã€‚åŒºåˆ«åœ¨äºï¼š è™½ç„¶éƒ½æ˜¯ä»ä¸Šåˆ°ä¸‹è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯ Python çš„ pattern matching ä¸å­˜åœ¨ Fall through æƒ…å†µï¼Œåªä¼šæ‰§è¡ŒåŒ¹é…çš„ case è¯­å¥é‡Œé¢çš„ä»£ç ã€‚æ‰§è¡Œå®Œå°±é€€å‡ºã€‚æ‰€ä»¥ä¹Ÿä¸ç”¨åœ¨æ¯ä¸ª case çš„ä»£ç å—é‡Œæœ€ååŠ ä¸€ä¸ª break æ²¡æœ‰ default å…³é”®å­—ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç”¨ case _ æ¥æ•è·æ‰€æœ‰çš„æƒ…å†µï¼Œè¿™å…¶å®ç”¨åˆ°äº†åé¢ä¼šè®²åˆ°çš„ Wildcard pattern è¿™é‡Œçš„ subject å’Œ pattern æ¯” C è¯­è¨€çš„å¼ºå¤§å¤šäº†ï¼Œä¸ä»…ä»…æ˜¯æ•´å‹å’Œå­—ç¬¦ç±»å‹ï¼Œpattern å½¼æ­¤ä¹‹é—´è¿˜å¯ä»¥ç»„åˆåµŒå¥—ã€‚åé¢ä¼šå¯¹å…¶è¿›è¡Œè¯¦ç»†è¯´æ˜ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:2:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#åŸºæœ¬çš„è¯­æ³•"},{"categories":["Programming-Languages"],"content":" Patternsåœ¨ pattern matching é‡Œé¢ï¼ŒPattern ä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªä½œç”¨ï¼š å¯¹ subject çš„ç»“æ„è¿›è¡Œçº¦æŸï¼ˆstructure constraitï¼‰ å¯ä»¥ä½¿ç”¨å˜é‡ç»‘å®š subject çš„æŸäº›éƒ¨åˆ†ï¼ˆbind variablesï¼‰ï¼Œç”¨äºåç»­çš„å¤„ç†ï¼Œè§ Capture pattern ä¸‹é¢æˆ‘ä»¬å¯¹ä¸åŒçš„ patterns è¿›è¡Œæ¢è®¨ :) ä¸ºäº†é¿å…é€ æˆå›°æƒ‘ï¼Œæœ‰å¿…è¦æå‰è¿›è¡Œä¸€ä¸‹è¯´æ˜ï¼šåœ¨ pattern matching åŒ¹é…åºåˆ—æ—¶å€™ï¼Œ() å’Œ [] éƒ½æ˜¯å¯é€‰çš„ã€‚æ¯”å¦‚ï¼Œcase foo, bar å’Œ case (foo, bar) å’Œ case [foo, bar] éƒ½æ˜¯ç­‰ä»·çš„ã€‚è¿™ç‚¹å’Œæˆ‘ä»¬ç»™åºåˆ—åš unpacking çš„æ—¶å€™ä¸€è‡´ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#patterns"},{"categories":["Programming-Languages"],"content":" Capture patternCapture pattern çš„æ„æ€æ˜¯è¯´æˆ‘ä»¬åœ¨æ£€æŸ¥ pattern æ˜¯å¦åŒ¹é…çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨å˜é‡åç»‘å®šåˆ°å®ƒçš„ä»»æ„ä¸€ä¸ªéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŒ¹é…æˆåŠŸä¹‹åä½¿ç”¨è¿™äº›å˜é‡ python some_list = [\"foo\", \"bar\"] match some_list: # we want to match a seq which has length = 2 # , we also use `first` and `second` to capture \\ # the 1st and 2nd elements here. case [first, second]: # we can access first, second now print(f'the 1st element: {first}, 2nd element: {second}') the 1st element: foo, 2nd element: bar ç»å¸¸è·Ÿåºåˆ—æ‰“äº¤é“çš„äººæƒ³å¿…å¯¹ä¸‹é¢çš„ä»£ç ä¸ä¼šé™Œç”Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ *\u003cname\u003e æ¥ unpacking python *before, last = [1, 2, 3, 4] assert last == 4, \"Error\" first, *middle, last = [1, 2, 3, 4] assert first == 1 and last == 4, \"Error\" first, *rest = [1, 2, 3, 4] assert first == 1, \"Error\" ç±»ä¼¼çš„ï¼Œåœ¨ pattern matching é‡Œé¢ä¹Ÿå¯ä»¥è¿™æ ·ï¼Œç”¨ä¸€ä¸ªå˜é‡æ•è·å¤šä¸ªå€¼ python some_list = [\"foo\", \"bar\", \"another_foo\", \"another_bar\"] match some_list: # we want to match a seq # , we also use `*rest` to capture the remaining elements case [first, *rest]: print(f'the 1st element: {first}, 2nd element: {rest}') the 1st element: foo, 2nd element: ['bar', 'another_foo', 'another_bar'] ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:1","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#capture-pattern"},{"categories":["Programming-Languages"],"content":" Literal patternLiteral pattern æŒ‡çš„æ˜¯æˆ‘ä»¬å¯ä»¥æŒ‡å®šå­—é¢å€¼æ¥å¯¹ Pattern è¿›è¡Œçº¦æŸã€‚è¿™é‡Œçš„å­—é¢å€¼å¯ä»¥æ˜¯ number literal, string literals, True, False è¿˜æœ‰ None ğŸ“’ å¯¹äº number literals å’Œ string literals è¿™ä¸¤è€… Python ä¼šä½¿ç”¨ == è¿›è¡Œæ¯”è¾ƒï¼Œè€Œå¯¹äº True/False/None è¿™ä¸‰ä¸ªåˆ™æ˜¯ä½¿ç”¨ is æ¥è¿›è¡Œåˆ¤æ–­ã€‚æ³¨æ„è¿™ä¸ªç»†èŠ‚ python some_list = [\"foo\", \"bar\"] match some_list: # we want to match a seq which has length = 2 # , the 1st element should be equal to \"foo\" # , and we use `second` to capture the 2nd element case [\"foo\", second]: print(f'the 2nd element: {second}') the 2nd element: bar python some_list = [True] match some_list: case [1]: print(f'Matched, 1 == True') Matched, 1 == True ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:2","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#literal-pattern"},{"categories":["Programming-Languages"],"content":" Wildcard patternè¿™ä¸ªå…¶å®åœ¨ Python é‡Œé¢æŒºå¸¸è§ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨ _ è¡¨ç¤ºæˆ‘ä»¬ä¸å…³å¿ƒæŸä¸ªå˜é‡æ˜¯å¤šå°‘ã€‚åœ¨ pattern matching é‡Œé¢ï¼Œ_ ä¼šå’Œä»»ä½•çš„ä¸œè¥¿åŒ¹é…ï¼Œä½†æ˜¯ä¸ä¼šç»‘å®šä»»ä½•å˜é‡ python some_list = [\"foo\", \"bar\"] match some_list: # we want to match a seq which has length = 2 # , the 1st element should be equal to \"foo\" # , and we use `_` to ignore the 2nd value case [\"foo\", _]: print(f'the 2nd value: {_}') # you should see empty output because we aren't binding value here the 2nd value: å¦å¤–ä¸€ä¸ªå¸¸è§çš„ç”¨æ³•å°±æ˜¯ä¹‹å‰å‡ºç°è¿‡çš„ case _ï¼Œå› ä¸º _ä¼šåŒ¹é…ä»»ä½•æƒ…å†µï¼Œæ‰€ä»¥å¸¸å¸¸æŠŠ case _ æ”¾åœ¨æœ€åè¡¨ç¤ºé»˜è®¤æƒ…å†µ python some_list = [\"foo\", \"bar\"] match some_list: # this case branch will not be matched case [\"bar\", _]: print('Match successfully') case _: print('Default case') Default case ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:3","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#wildcard-pattern"},{"categories":["Programming-Languages"],"content":" Or patternå°±åƒ if æ¡ä»¶è¯­å¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ or è¡¨ç¤ºå¤šç§å¯èƒ½çš„åŒ¹é…æƒ…å†µï¼Œåœ¨ pattern matching é‡Œé¢æˆ‘ä»¬ä¹Ÿæœ‰ç±»ä¼¼çš„è¯­æ³•ã€‚è·Ÿå…¶ä»–å¤§å¤šæ•°è¯­è¨€ä¸€æ ·ï¼ŒPython é€‰æ‹©ä½¿ç”¨ | æ¥è¡¨è¾¾ã€Œæˆ–ã€çš„é€»è¾‘å…³ç³»ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿å£°æ˜å¤‡é€‰é¡¹ python some_list1 = [\"foo\"] some_list2 = [\"bar\"] match some_list1: # we want to match a seq which has length = 1 # , the 1st element can be \"foo\" or \"bar\" case [\"foo\" | \"bar\"]: print('[First match] Match foo or bar') match some_list2: case [\"foo\" | \"bar\"]: print('[Second match] Match foo or bar') [First match] Match foo or bar [Second match] Match foo or bar ä¸Šé¢çš„ Or pattern çš„ç¼ºç‚¹æ˜¯ï¼šæˆ‘ä»¬æ— æ³•çŸ¥é“æˆ‘ä»¬å…·ä½“åŒ¹é…åˆ°äº†ä»€ä¹ˆå“ªä¸€ä¸ª ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:4","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#or-pattern"},{"categories":["Programming-Languages"],"content":" As patternåœ¨ä¸Šä¸€ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½åŒ¹é…åˆ°å¤šä¸ªé€‰é¡¹ï¼Œé‚£ä¹ˆå¦‚ä½•çŸ¥é“æˆ‘ä»¬å…·ä½“åŒ¹é…åˆ°å“ªä¸€ä¸ªé€‰é¡¹å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬å¯èƒ½éœ€è¦æ ¹æ®å…·ä½“åŒ¹é…åˆ°çš„ä¸œè¥¿æ¥å†³å®šè¦å¦‚ä½•å¤„ç†ã€‚åœ¨ pattern matching é‡Œé¢ï¼Œå¯ä»¥ä½¿ç”¨ as æ¥ç»‘å®šå˜é‡ python some_list = [\"foo\"] match some_list: # we want to match a seq which has length = 1 # , the 1st element can be \"foo\" or \"bar\" # we bind matched string literal with `matched_element` case (\"foo\" | \"bar\") as matched_element: print(f'Match {matched_element}') ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:5","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#as-pattern"},{"categories":["Programming-Languages"],"content":" Class patternPython æ˜¯ä¸€ä¸ªåŠ¨æ€ç±»å‹è¯­è¨€ï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿä¼šæœ‰éœ€è¦æ ¹æ®ç±»å‹æ¥å†³å®šæ˜¯å¦è¦åŒ¹é…çš„æ—¶å€™ã€‚æˆ‘ä»¬å½“ç„¶å¯ä»¥é€‰æ‹©è‡ªå·±åœ¨åé¢ä½¿ç”¨ isinstance() æ¥åˆ¤æ–­ï¼Œä½†è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•ã€‚ä¸‹é¢æˆ‘å°†ä»ä»åŸºæœ¬çš„ä¾‹å­å‡ºå‘å¸¦å¤§å®¶çœ‹çœ‹å¦‚ä½•åŠ ä¸Šç±»å‹çº¦æŸ python some_list = [\"foo\", 1, 3.14] match some_list: # match without type constraints case [s, v1, v2]: if isinstance(s, str) and isinstance(v1, int) and isinstance(v2, float): print(f'Match {s} - {v1} - {v2}') Match foo - 1 - 3.14 ç¬¬ä¸€ä¸ªå†™æ³•ï¼šè€ƒè™‘ç”¨ Capture patternï¼Œç±»å‹çº¦æŸæ”¾ä»£ç å—é‡Œ python some_list = [\"foo\", 1, 3.14] match some_list: # match with type constraints case [str() as s, int() as v1, float() as v2]: print(f'Match {s} - {v1} - {v2}') Match foo - 1 - 3.14 æ­¤æ—¶æˆ‘ä»¬åœ¨ pattern é‡ŒåŠ ä¸Šç±»å‹çº¦æŸï¼Œè¿™é‡Œå†™æ³•ä¸Šç±»ä¼¼ Literal patternï¼Œæˆ‘ä»¬åœ¨å¯¹åº”ä½ç½®å£°æ˜æˆ‘ä»¬æƒ³è¦åŒ¹é…çš„ç±»å‹ï¼ŒåŒæ—¶ä¸ºäº†åé¢èƒ½è¾“å‡ºï¼Œæˆ‘ä»¬è¿˜éœ€è¦ as å…³é”®å­—å°†å…¶ç»‘å®šåˆ°å˜é‡ä¸Šã€‚ä½†ä¸Šé¢çš„å†™æ³•è¿‡äºå†—é•¿ï¼Œå¥½åœ¨ Python ä¸ºæˆ‘ä»¬æä¾›äº†è¯­æ³•ç³–ğŸ¬ python some_list = [\"foo\", 1, 3.14] match some_list: # match with type constraints case [str(s), int(v1), float(v2)]: print(f'Match {s} - {v1} - {v2}') Match foo - 1 - 3.14 ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:6","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#class-pattern"},{"categories":["Programming-Languages"],"content":" Mapping patternå‰é¢éƒ½æ˜¯å¯¹äºä¸€ä¸ªåºåˆ—çš„åŒ¹é…ï¼Œè¿™é‡Œåˆ™æ˜¯å¯¹ dict çš„åŒ¹é…ã€‚ç›¸ä¿¡åœ¨çœ‹å®Œå‰é¢çš„å„ç§ pattern çš„ä¾‹å­ä¹‹åï¼Œç†è§£ dict çš„åŒ¹é…ä¹Ÿæ²¡æœ‰ä»€ä¹ˆéš¾åº¦ã€‚ä½†æœ‰ä¸‹é¢å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼š dict çš„åŒ¹é…æ˜¯é€šè¿‡é™åˆ¶ Key-Value çš„ç»“æ„ã€‚å…¶ä¸­ Key å¿…é¡»æ˜¯å­—é¢å€¼æˆ–è€…æšä¸¾ç±»å‹çš„å€¼ï¼ˆå‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼‰ï¼ŒValue åˆ™æ²¡æœ‰è¿™ä¸ªé™åˆ¶ ä½¿ç”¨ **\u003cname\u003e æ¥æ•è·æˆ‘ä»¬æ²¡æœ‰å†™åœ¨ pattern é‡Œé¢çš„ Key-Value pairã€‚å¦åˆ™é»˜è®¤æ˜¯å¿½ç•¥æ‰çš„ ä½†æ˜¯ **_ æ˜¯ä¸è¡Œçš„ï¼Œå› ä¸ºæœ¬æ¥å°±å¿½ç•¥æ‰ï¼Œè€Œ **_ ä¸­çš„ _ è¡¨ç¤ºä¸ç»‘å®šä»»ä½•åŒ¹é…çš„ä¸œè¥¿ï¼Œçº¯ç²¹æ˜¯å¤šæ­¤ä¸€ä¸¾ python some_dict = { 'first_name': 'foo', 'second_name': 'bar' } match some_dict: case {'first_name': first_name}: print(f'[First match] The first_name: {first_name}') match some_dict: case {'first_name': first_name, **rest}: print(f'[Second match] The rest: {rest}') [First match] The first_name: foo [Second match] The rest: {'second_name': 'bar'} ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:7","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#mapping-pattern"},{"categories":["Programming-Languages"],"content":" Value patternä½¿ç”¨ã€Œæœ‰åå­—çš„å˜é‡ã€ä½œä¸ºå‚æ•°å€¼æˆ–æ¾„æ¸…ç‰¹å®šå€¼çš„å«ä¹‰æ˜¯å¾ˆå¥½çš„ç¼–ç¨‹é£æ ¼ï¼Œè¿™æ˜¯ Literal pattern æ¬ ç¼ºçš„ã€‚æ¯”å¦‚ case (HttpStatus.OK, body) æ˜¯æ¯” case (200, body) å¥½çš„ åœ¨ Python é‡Œé¢è¦å®ç° Value pattern çš„æŒ‘æˆ˜æ˜¯è¦å’Œå‰é¢çš„ Capture pattern åŒºåˆ†å¼€ï¼Œè¦è®© Python å¯ä»¥åŒºåˆ†æˆ‘ä»¬æ˜¯è¦åŠ ä¸€ä¸ªã€Œæœ‰åå­—çš„å¸¸é‡ã€è¿™ä¸ªçº¦æŸè¿˜æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨ Capture pattern ç»‘å®šå˜é‡ã€‚å…³äºè¿™ç‚¹çš„è®¨è®ºå¯ä»¥å‚è§2 æœ€å Python æä¾›çš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸€ä¸ªå—é™çš„ Value patternï¼Œå®ƒä»…æ”¯æŒ foo.bar è¿™ç§å½¢å¼çš„ Value patternã€‚æ¯”è¾ƒå¸¸è§çš„å°±æ˜¯ç”¨äºæšä¸¾ç±»å‹ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ python from enum import Enum class HttpStatusCode(Enum): CONTINUE = 100 OK = 200 some_list = [HttpStatusCode[\"OK\"]] match some_list: case [HttpStatusCode.OK as status_code]: print(f\"Receive {status_code}\") Receive HttpStatusCode.OK ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:3:8","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#value-pattern"},{"categories":["Programming-Languages"],"content":" å°† Pattern matching ç”¨åœ¨ä¸€ä¸ªç±»ä¸Šå¦‚æœåªèƒ½å°† pattern matching ç”¨åœ¨å†…å»ºçš„ç±»å‹ä¸Šï¼Œä¼¼ä¹ç”¨å¤„æ²¡æœ‰é‚£ä¹ˆå¤§ã€‚ä½†å…¶å® Python è¿˜å…è®¸æˆ‘ä»¬å¯¹è‡ªå·±è‡ªå®šä¹‰çš„ç±»çš„å¯¹è±¡ä½¿ç”¨ pattern matchingã€‚ è€ƒè™‘åˆ°åº”ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å¯¹ä¸€ä¸ªå¯¹è±¡åš pattern matching çš„æ—¶å€™å¸¸å¸¸æ˜¯æƒ³è¦æ£€æŸ¥è¿™ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæŸä¸ªç±»ï¼Œæˆ‘ä»¬è¿˜å¯èƒ½å…³å¿ƒå®ƒçš„æŸäº›å­—æ®µï¼Œæƒ³è¦æå–å¯¹åº”çš„å­—æ®µçš„å€¼ã€‚ä½†æ˜¯åœ¨ Python é‡Œï¼Œè¿™ä¸ªå®ç°èµ·æ¥æœ‰å›°éš¾2ï¼Œä¸»è¦æ˜¯ç±»çš„å­—æ®µéå¸¸å¤šï¼Œå¤§éƒ¨åˆ†æ˜¯ __repr__ è¿™ç§ magic methodsï¼Œè€Œä¸”è¿™äº›å­—æ®µæ˜¯æ— åºçš„ã€‚å› ä¸ºæ˜¯æ— åºçš„ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥åœ¨ pattern é‡Œé¢æŒ‰ä½ç½®ç»‘å®šå˜é‡ï¼Œçœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š python class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" def __init__(x: int, y: int): self.x = x self.y = y some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x, y): print(f\"The x: {x}\") print(f\"The y: {y}\") --------------------------------------------------------------------------- TypeError Traceback (most recent call last) Input In [17], in \u003ccell line: 7\u003e() 4 self.x = x 5 self.y = y ----\u003e 7 some_point = Point(1, 2) 9 match some_point: 10 # the intuitive way, we want to match a Point type 11 # , and we want to bind the `x` and `y` and their two fields respectively 12 case Point(x, y): 13 print(f\"The x: {x}\") 14 print(f\"The y: {y}\") TypeError: Point.__init__() takes 2 positional arguments but 3 were given Python æä¾›äº†ä¸¤ç§è§£å†³åŠæ³•ï¼Œä»è¯­æ³•ä¸Šçœ‹ï¼Œè·Ÿæˆ‘ä»¬åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™éå¸¸åƒï¼šæˆ‘ä»¬å¯ä»¥é€‰æ‹©æŒ‰ç…§ä½ç½®ä¼ é€’å‚æ•°ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ç”¨ foo=bar è¿™ç§å½¢å¼ å…ˆè¯´ç®€å•çš„è¿™ç§ï¼šç”¨ foo=bar çš„å½¢å¼å¯¹å­—æ®µè¿›è¡Œçº¦æŸï¼Œå¹¶ä¸”ç»‘å®šå˜é‡åˆ°å­—æ®µä¸Šã€‚ foo=bar çš„æ„æ€æ˜¯æˆ‘ä»¬è¦æ±‚è¿™ä¸ªç±»æœ‰ foo å­—æ®µï¼ŒåŒæ—¶æˆ‘ä»¬æƒ³è¦å°† bar ç»‘å®šåˆ°å®ä¾‹ä¸Šçš„ foo å­—æ®µä¸Š python class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" def __init__(self, x: int, y: int): self.x = x self.y = y some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x=x, y=y): print(f\"The x: {x}\") print(f\"The y: {y}\") The x: 1 The y: 2 å¦å¤–ä¸€ç§è§£å†³åŠæ³•æ˜¯ï¼šä¿®æ”¹ç±»çš„ __match_args__ å±æ€§ï¼Œè¯¥å±æ€§è§„å®šäº†å­—æ®µçš„é¡ºåº python class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" # we tell python that the order is first \"x\" and then \"y\" __match_args__ = (\"x\", \"y\") def __init__(self, x: int, y: int): self.x = x self.y = y some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x, y): print(f\"The x: {x}\") print(f\"The y: {y}\") The x: 1 The y: 2 å¦‚æœä½ å¯¹ @dataclass å¾ˆç†Ÿæ‚‰çš„è¯3ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å¤§å¤§ç®€åŒ–ï¼Œçœ‹ä¸‹é¢ python from dataclasses import dataclass @dataclass(match_args=True) class Point: \"\"\" A simple class represents a Point in a 2D\"\"\" x: int y: int print(f\"The order is {Point.__match_args__}\") some_point = Point(1, 2) match some_point: # the intuitive way, we want to match a Point type # , and we want to bind the `x` and `y` and their two fields respectively case Point(x, y): print(f\"The x: {x}\") print(f\"The y: {y}\") The order is ('x', 'y') The x: 1 The y: 2 ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:4:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#å°†-pattern-matching-ç”¨åœ¨ä¸€ä¸ªç±»ä¸Š"},{"categories":["Programming-Languages"],"content":" Guardæœ‰æ—¶å€™æˆ‘ä»¬ä¸ä»…å…³å¿ƒæ¨¡å¼æ˜¯å¦åŒ¹é…ï¼Œæˆ‘ä»¬è¿˜è¦åŠ ä¸ŠæŸäº›é™åˆ¶ã€‚ è¯•è€ƒè™‘è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œä½ è¦åŒ¹é…æœ‰ä¸¤ä¸ª int å€¼çš„åºåˆ—ï¼Œä½†æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ è¦æ¯”ç¬¬äºŒä¸ªå¤§ï¼Œé‚£è¦æ€ä¹ˆå†™å‘¢ï¼Ÿç»“åˆå‰é¢çš„ Class patternï¼Œæˆ‘ä»¬ä¸éš¾å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š python some_list = [3, 4] match some_list: case [int(first), int(second)]: if first \u003e second: ... else: print(\"Expect first \u003e second. Match failed\") Expect first \u003e second. Match failed ä¸Šé¢çš„å†™æ³•å›ºç„¶å¯ä»¥ï¼Œæˆ‘ä»¬åœ¨ä»£ç å—é‡Œé¢è‡ªå·±ç”¨ if è¯­å¥å†æ£€æŸ¥ä¸€éå°±è¡Œã€‚ä½†å°±åƒç±»å‹çº¦æŸä¸€æ ·ï¼ŒPython å·²ç»è€ƒè™‘åˆ°äº†è¿™ä¸ªéœ€æ±‚ï¼Œå› æ­¤å®ƒæä¾›äº† Guard ğŸ’‚â€â™€ï¸ æœºåˆ¶ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æŠŠ if è¯­å¥è¿™ä¸ªåˆ¤æ–­æŒªåˆ° pattern çš„åé¢ã€‚è¿™æ ·å¯è¯»æ€§ä¼šå¼ºå¾ˆå¤šã€‚éµå¾ªçš„è¯­æ³•è§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š python match subject: case \u003cpattern\u003e if \u003cexpression\u003e: ... åœ¨ \u003cpattern\u003e åé¢è·Ÿä¸Šä¸€ä¸ª if è¯­å¥ï¼Œç”¨æ¥åœ¨ \u003cpattern\u003e åŒ¹é…ä¹‹åå¯¹å…¶è¿›è¡Œé™åˆ¶ æ³¨æ„ Python åœ¨è¿™é‡Œ Evaluate çš„é¡ºåº å…ˆçœ‹ \u003cpattern\u003e æ˜¯å¦åŒ¹é… åŒ¹é…çš„è¯ï¼Œå¦‚æœæœ‰ç»‘å®šå˜é‡å°±ç»‘å®šå¯¹åº”çš„å˜é‡ æ­¤æ—¶å†çœ‹ if \u003cexpression\u003e è¯­å¥æ˜¯å¦è¿”å› Trueã€‚è¿™é‡Œçš„ \u003cexpression\u003e å¯ä»¥ç”¨ä¸Šä¸€æ­¥ç»‘å®šçš„å˜é‡ã€‚ å½“ä¸”ä»…å½“ \u003cpattern\u003e åŒ¹é… + if è¯­å¥è¿”å› True çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œç›¸åº”çš„ä»£ç å—ã€‚å¦åˆ™æ£€æŸ¥ä¸é€šè¿‡ï¼Œç»§ç»­å°è¯•åŒ¹é…ä¸‹ä¸€ä¸ª \u003cpattern\u003e python some_list = [3, 4] match some_list: case [int(first), int(second)] if first \u003e second: print(\"Match successfully!\") ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:5:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#guard"},{"categories":["Programming-Languages"],"content":" æ€»ç»“ç›¸æ¯”äºä½¿ç”¨ if...elif...elif...elseï¼Œæˆ‘ä¼šæ›´å–œæ¬¢ pattern matching å¤šä¸€äº›ï¼Œå‡ºäºä¸‹é¢å‡ ç‚¹åŸå› ï¼š æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨åŒ¹é…çš„æ—¶å€™ç»‘å®šå€¼ç”¨äºåç»­å¤„ç† ä¸ªäººè§‰å¾—å¯è¯»æ€§æ¯”è¾ƒå¼ºï¼Œä»£ç çœ‹èµ·æ¥æ²¡æœ‰é‚£ä¹ˆä¹± pattern matching çš„å„ç§ patterns å…¶å®æ˜¯å¯ä»¥åµŒå¥—ç»„åˆçš„ï¼Œè¿™ä¹Ÿæ˜¯ pattern matching çœŸæ­£å¼ºå¤§çš„åœ°æ–¹ ä¸Šé¢å°±æ˜¯ Python 3.10 å¼•å…¥çš„ pattern matching çš„ç®€çŸ­ä»‹ç»ğŸš€ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:6:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#æ€»ç»“"},{"categories":["Programming-Languages"],"content":" å‚è€ƒ Whatâ€™s new in Python 3.10Â â†©ï¸ PEP 635 â€“ Structural Pattern Matching: Motivation and RationaleÂ â†©ï¸Â â†©ï¸ dataclasses - documentationÂ â†©ï¸ ","date":"2022-10-16","objectID":"/zh-cn/pattern-matching-in-python/:7:0","series":null,"tags":["Python"],"title":"æ¨¡å¼åŒ¹é…ç®€æ˜æ•™ç¨‹ï¼ˆPython 3.10ï¼‰","uri":"/zh-cn/pattern-matching-in-python/#å‚è€ƒ"},{"categories":["System-Programming"],"content":" å¼•è¨€å¦‚æœä½ ä¸€ç›´éƒ½æ˜¯æ˜¯ç”¨åŠ¨æ€è¯­è¨€ï¼Œæ¯”å¦‚ Pythonã€Javascript è¿™ç§ï¼Œä½ å¾ˆå¯èƒ½å¹¶ä¸ä¼šæ³¨æ„åˆ°æ ˆå’Œå †çš„åŒºåˆ«ã€‚å› ä¸ºè¿™äº›è¯­è¨€æœ‰åƒåœ¾æ”¶é›†å™¨ï¼ˆGarbage collectorï¼ŒGCï¼‰å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨å¸®ä½ åšå¥½å†…å­˜ç®¡ç†ï¼Œä½ åªè¦é›†ä¸­æ³¨æ„åŠ›ç¼–ç¨‹å³å¯ã€‚åæ¶ˆæ¯æ˜¯ GC å¹¶ä¸æ˜¯æ²¡æœ‰æˆæœ¬çš„äº‹æƒ…ï¼Œå®é™…ä¸Šè®¾è®¡å†å¥½çš„ GC ç®—æ³•ï¼Œä¹Ÿä¼šé™ä½ä»£ç çš„æ€§èƒ½ã€‚å¦‚æœä½ æ¥è§¦ç¼–ç¨‹çš„æ—¶é—´è¶³å¤Ÿä¹…ï¼Œé‚£ä¹ˆæƒ³å¿…ä½ å¯èƒ½ä¼šå¬åˆ°è¿‡ä»€ä¹ˆâ€œé€’å½’å±‚æ•°å¤ªæ·±æ ˆçˆ†ç‚¸äº†â€è¿™ç§è¯ï¼Œæ­¤æ—¶ä½ å¯èƒ½ä¼šç‚¹å¼€æœç´¢å¼•æ“ç¨å¾®äº†è§£ä¸€ä¸‹æ ˆå’Œå †çš„åŒºåˆ«ï¼Œæœ‰å¯èƒ½ä½ å°±åˆšå¥½ç‚¹è¿›äº†è¿™ä¸€ç¯‡æ–‡ç«  :) ğŸ“’ è™½ç„¶ GC ä¼šé™ä½ä»£ç æ€§èƒ½ï¼Œä½†æ˜¯å…å»äº†å¼€å‘äººå‘˜æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œå¯ä»¥å¤§å¤§åŠ é€Ÿè½¯ä»¶å¼€å‘çš„é€Ÿåº¦ï¼Œè¿™æ˜¯ç‰ºç‰²æ€§èƒ½æ¢å–å¼€å‘é€Ÿåº¦ã€‚ä½†åˆ°äº†è½¯ä»¶åæœŸå‡ºç°æ€§èƒ½ç“¶é¢ˆçš„æ—¶å€™ï¼Œå°±ä¸å¾—ä¸ç ”ç©¶å¦‚ä½•é‡æ„ç”šè‡³é‡å†™å…³é”®éƒ¨åˆ†çš„ä»£ç æé«˜æ€§èƒ½äº†ã€‚ è¿™é‡Œçš„æ ˆå’Œå †å¹¶ä¸æ˜¯æ•°æ®ç»“æ„é‡Œé¢çš„å †å’Œæ ˆï¼Œè€Œæ˜¯æŒ‡å†…å­˜ç®¡ç†çš„ä¸¤ç§æœºåˆ¶ã€‚äº†è§£æ ˆå’Œå †çš„ç»†èŠ‚å·®å¼‚æœ‰åŠ©äºæˆ‘ä»¬ç†è§£ä¸€äº›æ¯”è¾ƒæ¥è¿‘åº•å±‚çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™é‡Œè¯´çš„ç¼–ç¨‹è¯­è¨€æ¯”å¦‚ Rustã€C å’Œ C++ ç­‰ã€‚åœ¨ Rust ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„æ¦‚å¿µå°±æ˜¯æ‰€æœ‰æƒçš„é—®é¢˜ï¼ŒRust çš„å¾ˆå¤šè®¾è®¡éƒ½æ˜¯å›´ç»•å®ƒå±•å¼€ï¼ŒæŒæ¡äº†æ‰€æœ‰æƒå°±èƒ½åœ¨å­¦ä¹  Rust çš„æ—¶å€™å¦‚é±¼å¾—æ°´ğŸ˜„ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:1:0","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#å¼•è¨€"},{"categories":["System-Programming"],"content":" ç¨‹åºåœ¨å†…å­˜ä¸Šçš„å¸ƒå±€æˆ‘ä»¬çŸ¥é“ï¼Œè¦è¿è¡Œä¸€ä¸ªç¨‹åºå¿…é¡»å°†ç¨‹åºåŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¹Ÿæ˜¯éœ€è¦è¯»å–åˆ°å†…å­˜ä¸Šçš„ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¿™ä¸€åˆ‡åœ¨å†…å­˜ä¸Šæ˜¯å¦‚ä½•åˆ†å¸ƒçš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä¼šç»™å‡ºä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç¤ºæ„å›¾1ï¼šå¦‚ä¸‹æ‰€ç¤ºï¼š åœ¨ä¸Šå›¾ä¸­ï¼Œä¸åŒéƒ¨åˆ†å­˜æ”¾çš„ä¸œè¥¿åˆ†åˆ«æ˜¯ï¼š textï¼šå­˜æ”¾ä»£ç  dataï¼šå­˜æ”¾åˆå§‹åŒ–è¿‡çš„é™æ€å˜é‡ï¼ˆInitialized static variablesï¼‰ï¼Œæ¯”å¦‚å…¨å±€å˜é‡ã€é™æ€å˜é‡ bssï¼šå­˜æ”¾æœªç»åˆå§‹åŒ–çš„é™æ€å˜é‡ï¼ˆUninitialized static dataï¼‰ï¼Œæ¯”å¦‚ C è¯­è¨€çš„ static int i heap stack å…³äºæ ˆå’Œå †ä¼šåœ¨åé¢è¿›è¡Œå•ç‹¬è¯´æ˜ ğŸ“’ è¿™é‡Œè¦è®°ä½çš„å°±æ˜¯ï¼šæ ˆå’Œå †æ˜¯åœ¨å‘å½¼æ­¤é è¿‘çš„ï¼Œæ ˆæ˜¯ä»é«˜åœ°å€ -\u003e ä½åœ°å€å¢é•¿ï¼Œè€Œå †æ˜¯ä½åœ°å€ -\u003e é«˜åœ°å€å¢é•¿ã€‚è¿™æ ·ä½ åœ¨çœ‹æ±‡ç¼–ä»£ç çš„æ—¶å€™çœ‹åˆ°å…¥æ ˆæ—¶ sp æŒ‡é’ˆæ˜¯åšå‡æ³•ä½ å°±èƒ½ç†è§£äº†ã€‚ ğŸ“’ è™½ç„¶çœ‹èµ·æ¥ï¼Œéšç€æˆ‘ä»¬ç”³è¯·å†…å­˜è¶Šæ¥è¶Šå¤šï¼Œæ ˆå’Œå †å¯èƒ½ä¼šå†²çªï¼ˆå› ä¸ºä»–ä»¬åœ¨å½¼æ­¤é è¿‘ï¼‰ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºï¼š1ï¼‰è¿™ä¸ªå¸ƒå±€æ˜¯å‘ç”Ÿåœ¨è™šæ‹Ÿå†…å­˜ä¸Šçš„ï¼Œç°åœ¨çš„å¤„ç†å™¨ä¸€èˆ¬æ˜¯ 64 ä½çš„ï¼Œå®¹é‡éå¸¸å¤§ã€‚2ï¼‰åœ¨å®ƒä»¬å†²çªä¹‹å‰ï¼Œå¾ˆæœ‰å¯èƒ½ä½ çš„ç‰©ç†å†…å­˜æ—©å°±è€—å°½äº†ï¼Œè¿˜æ˜¯å…ˆæ‹…å¿ƒè¿™ä¸ª ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:2:0","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#ç¨‹åºåœ¨å†…å­˜ä¸Šçš„å¸ƒå±€"},{"categories":["System-Programming"],"content":" æ ˆ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:0","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#æ ˆ"},{"categories":["System-Programming"],"content":" æœ¯è¯­ Stack pointer(SP)ï¼šå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé‡Œé¢å­˜æ”¾æ ˆé¡¶çš„åœ°å€ Stack frameï¼šå½“å‘ç”Ÿå‡½æ•°è°ƒç”¨çš„æ—¶å€™å°±ä¼šåˆ›å»º Stack frameã€‚å¯ä»¥ç†è§£ä¸ºå®ƒåŒ…å«äº†å‡½æ•°è°ƒç”¨çš„ç›¸å…³æ•°æ®ã€‚æ¯”å¦‚å‡½æ•°çš„å‚æ•°ã€å‡½æ•°çš„è¿”å›åœ°å€ã€å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼ˆé™¤äº†åˆ†é…åœ¨å †ä¸Šçš„ï¼‰ç­‰ã€‚ä¸€è¿ä¸²çš„ Stack frame å°±æ„æˆäº†è°ƒç”¨æ ˆï¼ˆCall stackï¼‰ å…¥æ ˆï¼šåœ¨æ ˆä¸Šç”³è¯·ç©ºé—´ å‡ºæ ˆï¼šåœ¨æ ˆä¸Šé‡Šæ”¾ç©ºé—´ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:1","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#æœ¯è¯­"},{"categories":["System-Programming"],"content":" æ ˆä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„æ ˆæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å…ˆè¿›åå‡ºï¼ˆLast in first out, LIFOï¼‰ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨æ ˆä¸Šç”³è¯·ç©ºé—´å’Œé‡Šæ”¾ç©ºé—´çš„æ—¶å€™çš„éµå¾ªçš„æ¨¡å¼ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå«åšæ ˆçš„åŸå› ã€‚åœ¨å†…å­˜ä¸Šç”³è¯·ç©ºé—´å…¶å®å¹¶ä¸ç¥ç§˜ï¼Œå°±æ˜¯è¦æ ‡è®°å“ªäº›èŒƒå›´çš„åœ°å€æ˜¯è¿™ä¸ªç¨‹åºè¦ç”¨çš„ã€‚å¯¹æ ˆæ¥è¯´ï¼Œåªè¦ä¿®æ”¹ stack pointer çš„å€¼å³å¯ï¼Œè‡ªç„¶çš„ï¼Œä»æ ˆåº•ï¼ˆä¸‹å›¾ä¸­çš„ Aï¼‰åˆ°æ ˆé¡¶ï¼ˆsp æŒ‡å‘çš„ä½ç½®ï¼‰å°±æ˜¯æˆ‘ä»¬æ ˆä¸Šç”³è¯·äº†çš„ç©ºé—´ ä¸‹é¢çš„å›¾1å°±å±•ç°äº†è¿™ä¸ªç®€å•çš„é€»è¾‘ï¼š è¿™é‡Œä»è¦å†æ¬¡å¼ºè°ƒï¼Œæ ˆæ˜¯ä»é«˜åœ°å€ -\u003e ä½åœ°å€å¢é•¿ï¼Œæ‰€ä»¥ä¸Šå›¾ä»å·¦åˆ°å³æ˜¯é«˜åœ°å€ -\u003e ä½åœ°å€ï¼Œæ‰€ä»¥åœ¨æ ˆä¸Šç”³è¯·ç©ºé—´ï¼ˆå…¥æ ˆï¼‰çš„æ—¶å€™å®é™…ä¸Š sp æ˜¯åšå‡æ³•. å‡½æ•°è°ƒç”¨ä¹Ÿæ˜¯ç”¨æ ˆå®Œæˆçš„ï¼Œç®€å•æ¥è¯´ï¼š è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼šä¿®æ”¹ sp æŒ‡é’ˆ -\u003e æ„é€ è¢«è°ƒç”¨çš„å‡½æ•°çš„ stack frameï¼Œå…¶ä¸­åŒ…æ‹¬å‡½æ•°å‚æ•°å’Œå…¶ä»–ä¸€äº›å¿…è¦çš„æ•°æ®ï¼Œå°†å…¶å…¥æ ˆ -\u003e è¿›å…¥ Callee å‡½æ•°é€€å‡ºçš„æ—¶å€™ï¼šä¸Šé¢çš„è¿‡ç¨‹åè¿‡æ¥å°±è¡Œ å¯¹è¿™ä¸ªè¿‡ç¨‹çš„è¯¦ç»†è§£é‡Šå¯ä»¥å‚è€ƒ 2 ğŸ“’ åœ¨æ ˆä¸Šç”³è¯·å†…å­˜ç©ºé—´çš„æ—¶å€™éœ€è¦æ‹…å¿ƒçš„é—®é¢˜æ˜¯ï¼šä¸è¦ç”³è¯·å¤ªå¤šå¯¼è‡´æ ˆçˆ†äº†ï¼ˆä¹Ÿå°±æ˜¯å¤§åé¼é¼çš„ Stack Overflowï¼‰ã€‚è¿™ä¸€ç‚¹åœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„ã€‚ä½ å¯ä»¥é€‰æ‹©æ”¹æˆè¿­ä»£çš„ç®—æ³•ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¢åŠ æ ˆçš„å¤§å°é™åˆ¶ã€‚æ¯”å¦‚åœ¨ Python é‡Œé¢å¯ä»¥ç”¨ sys.getrecursionlimit() æ¥ä¿®æ”¹æ ˆçš„å¤§å°é™åˆ¶ã€‚æœ‰çš„ç¼–ç¨‹è¯­è¨€è¿˜ä¼šå¯¹å°¾é€’å½’è¿›è¡Œä¼˜åŒ–ï¼Œæ­¤æ—¶ä¹Ÿå¯ä»¥é€‰æ‹©å°†æ™®é€šçš„é€’å½’å‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’çš„å½¢å¼ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:2","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#æ ˆä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„"},{"categories":["System-Programming"],"content":" ä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’å‡½æ•°çœ‹æ ˆçš„å˜åŒ–CS è¯¾ç¨‹ä¸­è®²è§£é€’å½’çš„æ—¶å€™ä¸€èˆ¬éƒ½ä¼šè®²åˆ°æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œç°åœ¨æˆ‘ä»¬ç”¨ F(n) è¡¨ç¤ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ n ä¸ªå€¼ï¼Œé‚£ä¹ˆæœ‰ï¼š F(0) = 0 F(1) = 1 F(n) = F(n - 1) + F(n - 2) ä»¥ F(4) ä¸ºä¾‹ï¼Œé€’å½’è®¡ç®—çš„æ–¹å¼å¦‚ä¸‹ï¼š text F(4) = F(3) + F(2) = F(2) + F(1) + F(1) + F(0) = F(1) + F(0) + F(1) + F(1) + F(0) = 3 * F(1) + 2 * F(0) å¦‚æœæˆ‘ä»¬å¿½ç•¥ä¸€äº›ç»†èŠ‚ï¼Œæ„Ÿå—å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­æ ˆçš„å˜åŒ–æƒ…å†µï¼Œé‚£ä¹ˆå¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š æ³¨ï¼š ä¸‹é¢çš„ F(n) è¡¨ç¤ºæ¯ä¸ªå‡½æ•°è‡ªå·±çš„ stack frame python stack: F(4) stack: F(4) | F(3) # F(4): enter F(3) stack: F(4) | F(3) | F(2) # F(3): enter F(2) stack: F(4) | F(3) | F(2) | F(1) # F(2): enter F(1), F(1) is the base case, ready to exit function call stack: F(4) | F(3) | F(2) # Function return, return to the body of F(2) stack: F(4) | F(3) | F(2) | F(0) # F(2): enter F(0), F(0) is the base case, ready to exit function call stack: F(4) | F(3) | F(2) # Function return, return to the body of F(2) stack: F(4) | F(3) | F(1) # F(3): enter F(1), F(1) is the base case, ready to exit function call stack: F(4) | F(3) # Function return, return to the body of F(3) stack: F(4) # Function return, return to the body of F(4) stack: F(4) | F(2) # F(4): enter F(2) stack: F(4) | F(2) | F(1) # F(2): enter F(1), F(1) is the base case, ready to exit function call stack: F(4) | F(2) # Function return, return to the body of F(2) stack: F(4) | F(2) | F(0) # F(2): enter F(0), F(0) is the base case, ready to exit function call stack: F(4) | F(2) # Function return, return to the body of F(2) stack: F(4) # Function return, return to the body of F(4) ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:3","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#ä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’å‡½æ•°çœ‹æ ˆçš„å˜åŒ–"},{"categories":["System-Programming"],"content":" æ ˆä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®æ ˆä¸Šçš„å†…å­˜ç©ºé—´ç®¡ç†æ˜¯é€šè¿‡ä¿®æ”¹ sp æŒ‡é’ˆçš„å€¼å®ç°çš„ï¼Œå¾ˆå®¹æ˜“çŸ¥é“ä¸‹é¢å‡ ç‚¹ï¼š æ ˆä¸Šçš„å†…å­˜ç”³è¯·å’Œé‡Šæ”¾éƒ½ååˆ†é«˜æ•ˆï¼Œä¸º O(1)ï¼Œåªè¦ä¿®æ”¹ sp çš„å€¼å³å¯ æ ˆçš„è¿™ç§ LIFO çš„é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œç¼–è¯‘å™¨å…¶å®å°±èƒ½å¸®æˆ‘ä»¬å¤„ç†å¥½ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬ä¸éœ€è¦å¹²é¢„è¿™ä¸ªè¿‡ç¨‹ ä¿®æ”¹ sp æŒ‡é’ˆå†³å®šè¦ç”³è¯·å¤šå¤§çš„ç©ºé—´ï¼Œæ„å‘³ç€æˆ‘ä»¬å¿…é¡»çŸ¥é“è¦ç”³è¯·çš„æ•°æ®æœ‰å¤šå¤§ï¼ˆç¼–è¯‘æ—¶è¦èƒ½ç¡®å®šï¼‰ï¼Œæ‰€ä»¥æ ˆé€‚åˆå­˜æ”¾çš„æ•°æ®æ˜¯å›ºå®šå·²çŸ¥å¤§å°çš„ã€‚è€Œå¤§å°ä¸å›ºå®šçš„æ•°æ®æ˜¯ç”¨å †æ¥è§£å†³çš„ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:3:4","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#æ ˆä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®"},{"categories":["System-Programming"],"content":" å †æ ˆçš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼šæ— æ³•å¤„ç†å¤§å°å¯å˜çš„æ•°æ®ï¼Œæˆ‘ä»¬æ— æ³•çŸ¥é“æ­¤æ—¶ sp çš„å€¼è¦ä¿®æ”¹ä¸ºå¤šå°‘ã€‚ å¦‚ä½•åœ¨å¤§å°å¯å˜çš„æ•°æ®å’Œæ ˆä¹‹é—´æ­å»ºèµ·æ¡¥æ¢å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°æŒ‡é’ˆäº†ã€‚è™½ç„¶å®é™…å­˜å‚¨çš„æ•°æ®å¤§å°æœªçŸ¥ï¼Œä½†æ˜¯æŒ‡é’ˆçš„å¤§å°æ˜¯å›ºå®šå·²çŸ¥çš„ï¼ˆåªè¦ä¿è¯å¯»å€èŒƒå›´èƒ½è¦†ç›–åˆ°æ•´ä¸ªå†…å­˜å°±è¡Œï¼Œä¸€èˆ¬è·Ÿæœºå™¨å­—é•¿ç›¸ç­‰ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ ˆä¸Šå­˜å‚¨ä¸€ä¸ªå›ºå®šå¤§å°çš„æŒ‡é’ˆï¼Œè®©è¿™ä¸ªå®ƒæŒ‡å‘å †ä¸Šå­˜å‚¨çš„çœŸæ­£æ•°æ®ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:4:0","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#å †"},{"categories":["System-Programming"],"content":" å †ä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œåœ¨å †ä¸Šç”³è¯·å†…å­˜å…¶å®å°±æ˜¯åœ¨å †ä¸Šæ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºé—´ï¼Œå¹¶è¿”å›è¿™ä¸ªä½ç½®çš„æŒ‡é’ˆï¼Œè€ŒåæŒ‡é’ˆå…¥æ ˆã€‚ åé¢æˆ‘ä»¬æƒ³è¦è®¿é—®è¿™ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå°±å¯¹æŒ‡é’ˆè§£å¼•ç”¨å³å¯ã€‚C è¯­è¨€æˆ–è€… Rust é‡Œé¢çš„ * æ“ä½œç¬¦å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªçš„ã€‚ä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œï¼Œä»¥å‰éš¾æ‡‚çš„æŒ‡é’ˆæ˜¯ä¸æ˜¯ç¨å¾®èƒ½ç†è§£ä¸€ç‚¹äº† :) ä¸åŒäºæ ˆé‡Œé¢ç®€å•ä¿®æ”¹ sp æŒ‡é’ˆå³å¯ï¼Œå †ä¸Šçš„å†…å­˜ç®¡ç†å¤æ‚å¾—å¤šã€‚åŒ…æ‹¬ä¸‹é¢å‡ ç‚¹ï¼š å †ä¸Šå¯ä»¥åˆ†é…çš„å†…å­˜çš„ä½ç½®æ˜¯ä»»æ„çš„ã€å¤§å°ä¹Ÿæ˜¯ä»»æ„çš„ï¼ˆä¸è¶…è¿‡ç‰©ç†å†…å­˜å¤§å°å³å¯ï¼‰ï¼Œè€Œæ ˆåªè¦éµå¾ªå…ˆè¿›åå‡ºå°±è¡Œã€‚ä¸ºäº†ç®¡ç†å †ä¸Šå·²åˆ†é…å’Œå¾…åˆ†é…å †ç©ºé—´ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ç›¸åº”çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œè¿™å°±ç»™å †ä¸Šçš„å†…å­˜ç®¡ç†å¸¦æ¥å¾ˆå¤§çš„å›°éš¾ åœ¨å †ä¸Šç”³è¯·ç©ºé—´çš„æ•ˆç‡ä¹Ÿæ¯”è¾ƒä½ã€‚æœ€åŸºæœ¬çš„ï¼Œæˆ‘ä»¬èµ·ç è¦æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§å°çš„ç©ºé—´ï¼Œè¿™ä¸ªæ‰¾çš„è¿‡ç¨‹è‚¯å®šæ˜¯æ¯”ç›´æ¥ä¿®æ”¹ sp çš„å€¼è€—æ—¶çš„ã€‚ è¿˜è¦å¤„ç†å¥½ã€Œç¢ç‰‡åŒ–ã€çš„é—®é¢˜ã€‚å› ä¸ºå †ä¸Šç”³è¯·ç©ºé—´æ˜¯è¿™è¾¹åˆ†é…ä¸€å—é‚£è¾¹åˆ†é…ä¸€å—ï¼Œåœ¨é‡å¤çš„ç”³è¯·ç©ºé—´å’Œé‡Šæ”¾ç©ºé—´çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨å†…å­˜é‡Œé¢ç•™ä¸‹å¾ˆå¤šç¢ç‰‡ã€‚æç«¯çš„æƒ…å†µæ˜¯ï¼šç¢ç‰‡åŠ èµ·æ¥çš„å¯åˆ†é…å¤§å°æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬æ•£è½åœ¨å†…å­˜å„ä¸ªåœ°æ–¹æ— æ³•åˆ©ç”¨ä»è€Œå¯¼è‡´äº†å†…å­˜ä¸è¶³ ğŸ“’ å †ä¸Šå¯ä»¥åˆ†é…çš„å†…å­˜æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯éœ€è¦æ›´è‰¯å¥½çš„ç®¡ç†æœºåˆ¶æ¥å¤„ç†è¿™ç§æ¯”è¾ƒå¤æ‚çš„æƒ…å†µã€‚å¯¹å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¹Ÿé€ æˆäº†ä¸€å®šçš„è´Ÿæ‹…ï¼Œæˆ‘ä»¬æ— æ³•ä¾èµ–ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†ï¼Œè€Œæ˜¯è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜ï¼Œæ¯”å¦‚åœ¨ C è¯­è¨€ä¸­ä½ è¿›è¡Œäº† malloc() å‡½æ•°ç”³è¯·ç©ºé—´ä¹‹åè¦æ˜¯å¿˜è®°ç”¨ free() é‡Šæ”¾ï¼Œé‚£ä¹ˆä½ çš„ç¨‹åºå°±ä¼šå­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚æ›´åˆ«è°ˆè¿˜æœ‰å…¶ä»–çš„è¯¸å¦‚æ‚¬å‚æŒ‡é’ˆç­‰é—®é¢˜ã€‚ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:4:1","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#å †ä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„"},{"categories":["System-Programming"],"content":" å †ä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®å¯¹å †ä¸Šå†…å­˜ç©ºé—´çš„åˆ†é…æœ‰ä¸€å®šäº†è§£ä¹‹åï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºä¸‹é¢çš„å‡ ä¸ªç»“è®ºï¼š å †ä¸Šå­˜æ”¾çš„æ˜¯å®¹é‡å¯å˜çš„æ•°æ®ã€‚æ›´çµæ´»çš„åŒæ—¶ï¼Œä»£ä»·æ˜¯ç‰ºç‰²äº†ä¸€ç‚¹æ€§èƒ½ æœ‰æ—¶å€™ä¹Ÿå¯ä»¥æ˜¯å›ºå®šå¤§å°çš„æ•°æ®ï¼Œä½†æ˜¯ä½ ä¸æƒ³æ”¾åœ¨æ ˆä¸Šã€‚ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æƒ…å†µï¼Ÿæ¯”å¦‚ï¼Œåœ¨ Rust é‡Œé¢ï¼Œæ ˆä¸Šçš„æ•°æ®æ˜¯é»˜è®¤ç”Ÿæˆæ‹·è´ï¼Œæœ‰æ—¶å€™å‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä½ å¯èƒ½æƒ³è¦æŠŠå¾ˆå¤§çš„æ•°æ®æ”¾åœ¨å †ä¸Šï¼Œé¿å…å¤šæ¬¡æ‹·è´å¸¦æ¥çš„å¼€é”€ã€‚ä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œä½ ä»¬æœ‰æ²¡æœ‰æƒ³åˆ°æˆ‘ä»¬å¸¸å¸¸è¯´å‡½æ•°å‚æ•°ä¼ é€’å¼•ç”¨æ¯”ä¼ é€’å€¼æ•ˆç‡æ›´é«˜è¿™ä¸ªä¼˜åŒ–å‘¢ï¼Ÿ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:4:2","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#å †ä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®"},{"categories":["System-Programming"],"content":" æ€»ç»“ æ ˆå’Œå †éƒ½æ˜¯å†…å­˜ç®¡ç†é‡Œé¢çš„æ¦‚å¿µï¼Œä»–ä»¬è·Ÿæ•°æ®ç»“æ„é‡Œçš„æ ˆå’Œå †çš„æ¦‚å¿µä¸ä¸€æ ·ã€‚æ ˆä¹‹æ‰€ä»¥å«åšæ ˆæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è¿›è¡Œå†…å­˜ç”³è¯·å’Œåˆ†é…çš„æ—¶å€™éƒ½éµå¾ª LIFO æ¨¡å¼ï¼Œè€Œå †è¿™ä¸ªåå­—åˆ™æ˜¯ä½“ç°äº†å †ä¸Šé¢çš„æ•°æ®æ¯«æ— ç»„ç»‡ã€‚ é€šå¸¸æ¥è¯´ï¼Œåœ¨æ ˆä¸Šç”³è¯·å’Œé‡Šæ”¾å†…å­˜ç©ºé—´æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ã€‚ä¸ºæ­¤ï¼ŒRust é‡Œé¢é»˜è®¤éƒ½æ˜¯åœ¨æ ˆä¸Šæ“ä½œ æ ˆä¸Šä¸€èˆ¬æ”¾ã€Œå›ºå®šå¤§å°ã€çš„æ•°æ®ï¼Œå †ä¸Šä¸€èˆ¬æ”¾ã€Œå¤§å°å¯å˜ã€çš„æ•°æ®ã€‚ä½†æ˜¯æœ‰æ—¶å€™å‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä¹Ÿä¼šåœ¨å †ä¸Šå­˜æ”¾å›ºå®šå¤§å°çš„æ•°æ® åœ¨ CS è¿™é—¨å­¦ç§‘é‡Œé¢ï¼Œç»å¸¸å¯ä»¥çœ‹åˆ°åˆ†å±‚çš„è®¾è®¡ï¼Œæ¯”å¦‚è®¡ç®—æœºç½‘ç»œçš„ OSI æ¨¡å‹ã€‚åŒ…æ‹¬ç¼–ç¨‹è¯­è¨€æœ¬èº«ä¹Ÿå¯ä»¥åˆ†ä¸ºé«˜çº§è¯­è¨€å’Œä½çº§è¯­è¨€ã€‚6.172 æ€§èƒ½å·¥ç¨‹çš„è€å¸ˆè¯´çš„ä¸€å¥è¯åˆ†äº«ç»™ä½ ä»¬â€”â€” â€œå¾ˆå¤šæ—¶å€™ä½ è¦å­¦å¥½è¿™ä¸€å±‚çš„ä¸œè¥¿æ˜¯å¿…é¡»äº†è§£ä¸‹é¢ä¸€å±‚çš„ä¸œè¥¿ï¼Œä½ ä¸ä¸€å®šè¦ä¼šç”¨ä¸‹ä¸€å±‚çš„ä¸œè¥¿ï¼Œä½†æ˜¯çŸ¥é“ä¸‹ä¸€å±‚çš„ç»†èŠ‚ä¼šå¸®åŠ©ä½ å­¦è¿™ä¸€å±‚â€ã€‚è‡³å°‘å¯¹æˆ‘æ¥è¯´ï¼ŒçŸ¥é“äº†æ ˆå’Œå †çš„åŒºåˆ«ä¹‹åï¼Œä¸‹é¢çš„å‡ ä¸ªé—®é¢˜åœ¨æˆ‘çœ‹æ¥æœ‰äº†å¾ˆåˆç†çš„è§£é‡Šï¼š C/C++ è¯­è¨€çš„æŒ‡é’ˆæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿä»–ä»¬ä¸ºä»€ä¹ˆå­˜åœ¨ï¼Ÿ ä¸ºä»€ä¹ˆå°¾é€’å½’ä¼˜åŒ–ä¼šå­˜åœ¨ï¼Ÿä¸ºä»€ä¹ˆåœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™éƒ½è¦è€ƒè™‘é€’å½’å±‚æ•°å¤ªæ·±çš„é—®é¢˜ï¼Ÿ ä¸ºä»€ä¹ˆ Rust é»˜è®¤æ•°æ®æ”¾åœ¨æ ˆä¸Šï¼Ÿ ä¸ºä»€ä¹ˆä»¥å‰ä¼šçœ‹åˆ° C/C++ ä¼ é€’å‡½æ•°å‚æ•°çš„æ—¶å€™è¦ç”¨å¼•ç”¨è¿™ç§è¯´æ³•ï¼Œè¯´è¿™æ ·ä¼šæ¯”è¾ƒå¿«ï¼Ÿ ğŸ“’ åœ¨ CS é‡Œé¢ï¼Œæˆ‘è®¤ä¸ºæœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯å°è£…ã€‚é€å±‚å°è£…ï¼Œå¯¹ä¸Šä¸€å±‚éšè—ç»†èŠ‚çš„è¿™ç§è®¾è®¡å®åœ¨å¾ˆä¸é”™ã€‚ é€‰æ‹©å¸¦æœ‰ GC å¥½ä¸Šæ‰‹ä½†æ•ˆç‡è¾ƒä½çš„è¯­è¨€è¿˜æ˜¯é€‰æ‹©è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜è®©ä»£ç æ•ˆç‡æ›´é«˜å‘¢ï¼Ÿè¿™ç‚¹å…¶å®å–å†³äºä½ æ‰‹å¤´çš„å·¥ä½œã€‚å¦‚æœè¦å¼€å‘é€Ÿåº¦å½“ç„¶æ˜¯å‰è€…äº†ï¼Œå¦‚æœæ³¨é‡æ€§èƒ½é‚£å°±æ˜¯åè€…ã€‚å½“ç„¶ï¼Œå¤¹åœ¨ä¸­é—´çš„æ˜¯æ²¡æœ‰ GC + åŸºæœ¬ä¸ç”¨è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜ + æ•ˆç‡é«˜çš„ Rust è¯­è¨€ğŸš€ï¼Œè¦ä¸å­¦ç‚¹ RustğŸ˜‰ âš ï¸ æœ¬æ–‡åœ¨ç»„ç»‡çš„æ—¶å€™å¯ä»¥å¿½ç•¥äº†ä¸€äº›ç»†èŠ‚ï¼Œæˆ‘åªè®²äº†æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„å‡ ç‚¹ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œå€¼å¾—ä¸€çœ‹çš„ææ–™å‚è€ƒä¸‹é¢çš„èµ„æ–™å¼•ç”¨ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:5:0","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#æ€»ç»“"},{"categories":["System-Programming"],"content":" å‚è€ƒ 6.172. Performance engineering of software systems - Lecture 11 \u0026\u0026 Lecture 12Â â†©ï¸Â â†©ï¸ Stack frameÂ â†©ï¸ ","date":"2022-09-19","objectID":"/zh-cn/what-is-the-heap-and-stack/:6:0","series":null,"tags":["System-programming"],"title":"ä»€ä¹ˆæ˜¯å †å’Œæ ˆ","uri":"/zh-cn/what-is-the-heap-and-stack/#å‚è€ƒ"},{"categories":["Vim-Neovim"],"content":"How to use vim's macro system","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/"},{"categories":["Vim-Neovim"],"content":" å¼•è¨€åœ¨æˆ‘å­¦ä¹  Vim çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å…·æœ‰å¯å‘æ„ä¹‰çš„ä¸€å¥è¯æ˜¯ï¼š Vim å…¶å®æ˜¯ä¸€é—¨â€œç¼–ç¨‹è¯­è¨€â€ å¾ˆæ—©ä¹‹å‰æˆ‘å°±æ¥è§¦è¿‡ Vimï¼Œä½†æ˜¯å½“æ—¶ Vim çš„æŒ‰é”®ç»„åˆå¯¹æˆ‘æ¥è¯´å¾ˆéš¾è®°ï¼Œå†åŠ ä¸Š Vim çš„ç•Œé¢å®åœ¨å¤ªè¿‡äºå¤å¤ï¼Œäºæ˜¯æˆ‘å°±è½¬å‘äº†æ¯”è¾ƒç°ä»£çš„æ–‡æœ¬ç¼–è¾‘å™¨ã€‚ä½†å½“æˆ‘å­¦å®Œ Missing semester è¿™é—¨è¯¾ç¨‹çš„æ—¶å€™ï¼Œæˆ‘å¯¹ Vim çš„çœ‹æ³•æœ‰äº†æ”¹è§‚ï¼šå®ƒè¿œè¿œä¸æ­¢æ˜¯ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå„ç§ Vim çš„å‘½ä»¤çš„æ’åˆ—ç»„åˆæ›´åƒæ˜¯åœ¨å†™ä»£ç ï¼ŒèƒŒåéƒ½æ˜¯æœ‰é€»è¾‘çš„ï¼ è¿™ä¼¼ä¹å’Œè¿™ç¯‡åšå®¢è¦è®¨è®ºçš„ä¸»é¢˜æ²¡æœ‰å…³ç³»ã€‚ä½†å…¶å®ä¸æ˜¯è¿™æ ·çš„ï¼Œè®¤è¯†åˆ° Vim æ˜¯ä¸€é—¨ç¼–ç¨‹è¯­è¨€æ˜¯ä¸€ä»¶é‡è¦çš„äº‹æƒ…ã€‚ç¨‹åºå‘˜ç»å¸¸é€šè¿‡ç¼–ç¨‹æ¥é¿å…é‡å¤æ“ä½œï¼Œä¸åŒäººå¯¹ç¼–ç¨‹è¯­è¨€çš„åå¥½å„ä¸ç›¸åŒã€‚å¦‚æœæŠŠ Vim çœ‹æˆä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥ä¹Ÿå¯ä»¥åšåˆ°ç±»ä¼¼çš„äº‹æƒ…ï¼Œä»Šå¤©è¦ç ”ç©¶çš„å°±æ˜¯â€”â€”å¦‚ä½•ä½¿ç”¨ Vim æ¥é¿å…é‡å¤æ“ä½œã€‚ ä¸‹é¢å‡å®šä½ å¯¹ Vim æœ‰ä¸€å®šçš„äº†è§£ : ) ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:1:0","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#å¼•è¨€"},{"categories":["Vim-Neovim"],"content":" ä»€ä¹ˆæ˜¯ Vim é‡Œé¢çš„å®åœ¨ Vim é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ . é‡å¤ä¸Šä¸€æ¬¡çš„â€œæ›´æ”¹â€ã€‚ä½†å¦‚æœæˆ‘ä»¬æƒ³è¦é‡å¤ä¸€ç³»åˆ—åœ°æ›´æ”¹å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šç”¨ Vim çš„å®å°±å¯ä»¥ã€‚é€šè¿‡ä½¿ç”¨å®ï¼Œæˆ‘ä»¬å¯ä»¥å½•åˆ¶ä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¹¶æŠŠä»–ä»¬å­˜æ”¾åœ¨æŒ‡å®šçš„å¯„å­˜å™¨é‡Œé¢ï¼Œåç»­å°±å¯ä»¥é‡å¤æ‰§è¡Œã€‚å¦‚æœä½ æ£€æŸ¥å¯„å­˜å™¨é‡Œé¢çš„å†…å®¹çš„è¯ï¼Œä½ ä¼šå‘ç°ï¼šå®ä¸è¿‡å°±æ˜¯ä¸€è¿ä¸²çš„å­—ç¬¦åºåˆ—ã€‚ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:2:0","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#ä»€ä¹ˆæ˜¯-vim-é‡Œé¢çš„å®"},{"categories":["Vim-Neovim"],"content":" åŸºæœ¬æŒ‡å—","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:0","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#åŸºæœ¬æŒ‡å—"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆå½•åˆ¶ä¸€ä¸ªå®æ­¥éª¤ï¼š åœ¨ normal æ¨¡å¼ä¸‹ï¼ŒæŒ‰ q\u003cregister\u003e. è¿™é‡Œçš„æ„æ€æ˜¯ï¼šå…ˆæŒ‰ q ç„¶åé€‰æ‹©ä¸€ä¸ªå¯„å­˜å™¨ register æ¥å­˜æ”¾å¾…ä¼šå½•åˆ¶çš„å® å¯ä»¥é€‰ç”¨çš„å¯„å­˜å™¨ regitser åŒ…æ‹¬: 0-9ï¼Œa-z å’Œ \" å¼€å§‹å½•åˆ¶å®ï¼Œå¦‚æœä¸Šä¸€æ­¥æ²¡æœ‰é—®é¢˜çš„è¯ï¼Œæ­¤æ—¶ä½ åº”è¯¥ä¼šçœ‹åˆ°å·¦ä¸‹è§’æ˜¾ç¤º recording @\u003cregister\u003eã€‚ä»æ­¤åˆ»èµ·ï¼Œä½ æ‰€æœ‰çš„æ“ä½œéƒ½ä¼šè¢«è®°å½•ä¸‹æ¥ å†æ¬¡æŒ‰ä¸‹ q é€€å‡ºå½•åˆ¶ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:1","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#æ€ä¹ˆå½•åˆ¶ä¸€ä¸ªå®"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆæŸ¥çœ‹å®çš„å†…å®¹å‰é¢æåˆ°ï¼ŒVim ä¼šæŠŠæˆ‘ä»¬å½•åˆ¶çš„å®å­˜æ”¾åœ¨æŒ‡å®šçš„å¯„å­˜å™¨é‡Œé¢ã€‚æŸ¥çœ‹å®çš„å†…å®¹å¾ˆç®€å•ï¼Œç”¨ä¸€ä¸ªç®€å•çš„ :reg å‘½ä»¤å°±è¡Œï¼š sh :reg \u003cregister\u003e é‡Œé¢ä½ ä¼šçœ‹åˆ°ä¸€äº›å¥‡æ€ªçš„å­—ç¬¦ï¼Œæ¯”å¦‚ï¼š ^[ æ˜¯ \u003cESC\u003e é”® \u003c80\u003ekb æ˜¯ BAKESPACE é”® ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:2","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#æ€ä¹ˆæŸ¥çœ‹å®çš„å†…å®¹"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆæ‰§è¡Œå® åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡Œå® @\u003cregister\u003e: æ‰§è¡Œå­˜æ”¾åœ¨ \u003cregister\u003e è¿™ä¸ªå¯„å­˜å™¨é‡Œé¢çš„å® @@ï¼šæ‰§è¡Œæˆ‘ä»¬ä¸Šä¸€æ¬¡è°ƒç”¨çš„å® å¦‚æœæƒ³è¦å¤šæ¬¡æ‰§è¡Œçš„è¯ï¼Œåœ¨å‘½ä»¤çš„å‰é¢å…ˆè¾“å…¥ [COUNT] è¡¨ç¤ºè¦æ‰§è¡Œå¤šå°‘æ¬¡ã€‚ e.g. 100@@ çš„æ„æ€æ˜¯ï¼šæ‰§è¡Œä¸Šä¸€æ¬¡è°ƒç”¨çš„å® 100 æ¬¡ è‡ªå·±è®¡ç®— [COUNT] çš„å€¼åº”è¯¥æ˜¯å¤šå¤§å¤ªæ¯ç‡¥äº†ï¼Œå¥½åœ¨å½“æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå¾ˆå¤§çš„å€¼çš„æ—¶å€™ï¼Œè¶…è¿‡çš„éƒ¨åˆ†ä¼šè¢« Vim å¿½ç•¥ :) åœ¨å¤šä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡ŒåŒä¸€ä¸ªå®å½“ç„¶ï¼Œå¦‚æœåªèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢é‡å¤æ‰§è¡Œå®çš„è¯ï¼Œèƒ½è§£å†³çš„é—®é¢˜è¿˜æ¯”è¾ƒå±€é™ã€‚ä¸€ä¸ªå¾ˆç»å…¸çš„åœºæ™¯æ˜¯æˆ‘ä»¬æƒ³è¦å¯¹ä¸€å †æ–‡ä»¶æ‰§è¡Œä¸€æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬æ€»ä¸å¯èƒ½ä¸€ä¸ªä¸ªåœ°å¤„ç†æ–‡ä»¶ã€‚è¿™ç»å¯¹è¿åäº† DRYï¼ˆDonâ€™t Repeat Yourselfï¼‰åŸåˆ™ Vim å…è®¸æˆ‘ä»¬åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ç„¶åä¸€ä¸ªä¸ªç¼–è¾‘ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜æ”¯æŒæˆ‘ä»¬åœ¨æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ä¸Šæ‰§è¡ŒæŒ‡å®šçš„å®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦ç¼–è¾‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ txt æ–‡ä»¶ï¼Œåªè¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ vim *.txt å°±å¯ä»¥æ‰“å¼€æ‰€æœ‰æ–‡ä»¶ï¼ˆæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª bufferï¼Œæ•´ä½“å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª buffer åˆ—è¡¨ï¼‰ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æˆ‘ä»¬å¯ä»¥ä¸€ä¸ªä¸ªæ–‡ä»¶åœ°ç¼–è¾‘ï¼Œç¼–è¾‘å®Œæ¯•ä¹‹åæŒ‰ :wn ä¿å­˜å½“å‰æ–‡ä»¶çš„æ›´æ”¹å¹¶è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚ä½†æˆ‘ä»¬ä¹Ÿèƒ½ä¸€æ¬¡æ€§å¯¹è¿™ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œçš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ›´æ”¹ï¼š å…ˆç”¨ç¬¬ä¸€ä¸ªæ–‡ä»¶å½•åˆ¶å®ï¼Œå½•åˆ¶å®Œæˆä¹‹åï¼Œåœ¨ normal æ¨¡å¼ä¸‹è¾“å…¥ :edit! æ’¤é”€å¯¹ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„æ›´æ”¹ï¼ˆä¸ç„¶åç»­æ‰¹å¤„ç†æ–‡ä»¶çš„æ—¶å€™ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¼šè¢«ä¿®æ”¹ä¸¤æ¬¡ï¼‰ åœ¨ normal æ¨¡å¼ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ :bufdo execute \"normal @\u003cregister\u003e\" | update. å…³äº bufdo çš„è¯´æ˜å¯ä»¥åœ¨ Vim é‡Œé¢è¾“å…¥ :h bufdo æŸ¥çœ‹ã€‚å¯ä»¥ç†è§£ä¸ºå¯¹æ‰€æœ‰çš„ buffer æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œ è¿™é‡Œçš„ normal @\u003cregister\u003e çš„æ„æ€å°±æ˜¯åœ¨ normal æ¨¡å¼ä¸‹æ‰§è¡Œ @\u003cregister\u003e é‡Œé¢çš„å® æ›´å¤šçš„ç»†èŠ‚å¯ä»¥çœ‹ è¿™é‡Œ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:3","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#æ€ä¹ˆæ‰§è¡Œå®"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆæ‰§è¡Œå® åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡Œå® @: æ‰§è¡Œå­˜æ”¾åœ¨ è¿™ä¸ªå¯„å­˜å™¨é‡Œé¢çš„å® @@ï¼šæ‰§è¡Œæˆ‘ä»¬ä¸Šä¸€æ¬¡è°ƒç”¨çš„å® å¦‚æœæƒ³è¦å¤šæ¬¡æ‰§è¡Œçš„è¯ï¼Œåœ¨å‘½ä»¤çš„å‰é¢å…ˆè¾“å…¥ [COUNT] è¡¨ç¤ºè¦æ‰§è¡Œå¤šå°‘æ¬¡ã€‚ e.g. 100@@ çš„æ„æ€æ˜¯ï¼šæ‰§è¡Œä¸Šä¸€æ¬¡è°ƒç”¨çš„å® 100 æ¬¡ è‡ªå·±è®¡ç®— [COUNT] çš„å€¼åº”è¯¥æ˜¯å¤šå¤§å¤ªæ¯ç‡¥äº†ï¼Œå¥½åœ¨å½“æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå¾ˆå¤§çš„å€¼çš„æ—¶å€™ï¼Œè¶…è¿‡çš„éƒ¨åˆ†ä¼šè¢« Vim å¿½ç•¥ :) åœ¨å¤šä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡ŒåŒä¸€ä¸ªå®å½“ç„¶ï¼Œå¦‚æœåªèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢é‡å¤æ‰§è¡Œå®çš„è¯ï¼Œèƒ½è§£å†³çš„é—®é¢˜è¿˜æ¯”è¾ƒå±€é™ã€‚ä¸€ä¸ªå¾ˆç»å…¸çš„åœºæ™¯æ˜¯æˆ‘ä»¬æƒ³è¦å¯¹ä¸€å †æ–‡ä»¶æ‰§è¡Œä¸€æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬æ€»ä¸å¯èƒ½ä¸€ä¸ªä¸ªåœ°å¤„ç†æ–‡ä»¶ã€‚è¿™ç»å¯¹è¿åäº† DRYï¼ˆDonâ€™t Repeat Yourselfï¼‰åŸåˆ™ Vim å…è®¸æˆ‘ä»¬åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ç„¶åä¸€ä¸ªä¸ªç¼–è¾‘ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜æ”¯æŒæˆ‘ä»¬åœ¨æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ä¸Šæ‰§è¡ŒæŒ‡å®šçš„å®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦ç¼–è¾‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ txt æ–‡ä»¶ï¼Œåªè¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ vim *.txt å°±å¯ä»¥æ‰“å¼€æ‰€æœ‰æ–‡ä»¶ï¼ˆæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª bufferï¼Œæ•´ä½“å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª buffer åˆ—è¡¨ï¼‰ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æˆ‘ä»¬å¯ä»¥ä¸€ä¸ªä¸ªæ–‡ä»¶åœ°ç¼–è¾‘ï¼Œç¼–è¾‘å®Œæ¯•ä¹‹åæŒ‰ :wn ä¿å­˜å½“å‰æ–‡ä»¶çš„æ›´æ”¹å¹¶è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚ä½†æˆ‘ä»¬ä¹Ÿèƒ½ä¸€æ¬¡æ€§å¯¹è¿™ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œçš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ›´æ”¹ï¼š å…ˆç”¨ç¬¬ä¸€ä¸ªæ–‡ä»¶å½•åˆ¶å®ï¼Œå½•åˆ¶å®Œæˆä¹‹åï¼Œåœ¨ normal æ¨¡å¼ä¸‹è¾“å…¥ :edit! æ’¤é”€å¯¹ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„æ›´æ”¹ï¼ˆä¸ç„¶åç»­æ‰¹å¤„ç†æ–‡ä»¶çš„æ—¶å€™ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¼šè¢«ä¿®æ”¹ä¸¤æ¬¡ï¼‰ åœ¨ normal æ¨¡å¼ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ :bufdo execute \"normal @\" | update. å…³äº bufdo çš„è¯´æ˜å¯ä»¥åœ¨ Vim é‡Œé¢è¾“å…¥ :h bufdo æŸ¥çœ‹ã€‚å¯ä»¥ç†è§£ä¸ºå¯¹æ‰€æœ‰çš„ buffer æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œ è¿™é‡Œçš„ normal @ çš„æ„æ€å°±æ˜¯åœ¨ normal æ¨¡å¼ä¸‹æ‰§è¡Œ @ é‡Œé¢çš„å® æ›´å¤šçš„ç»†èŠ‚å¯ä»¥çœ‹ è¿™é‡Œ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:3","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡Œå®"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆæ‰§è¡Œå® åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡Œå® @: æ‰§è¡Œå­˜æ”¾åœ¨ è¿™ä¸ªå¯„å­˜å™¨é‡Œé¢çš„å® @@ï¼šæ‰§è¡Œæˆ‘ä»¬ä¸Šä¸€æ¬¡è°ƒç”¨çš„å® å¦‚æœæƒ³è¦å¤šæ¬¡æ‰§è¡Œçš„è¯ï¼Œåœ¨å‘½ä»¤çš„å‰é¢å…ˆè¾“å…¥ [COUNT] è¡¨ç¤ºè¦æ‰§è¡Œå¤šå°‘æ¬¡ã€‚ e.g. 100@@ çš„æ„æ€æ˜¯ï¼šæ‰§è¡Œä¸Šä¸€æ¬¡è°ƒç”¨çš„å® 100 æ¬¡ è‡ªå·±è®¡ç®— [COUNT] çš„å€¼åº”è¯¥æ˜¯å¤šå¤§å¤ªæ¯ç‡¥äº†ï¼Œå¥½åœ¨å½“æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªå¾ˆå¤§çš„å€¼çš„æ—¶å€™ï¼Œè¶…è¿‡çš„éƒ¨åˆ†ä¼šè¢« Vim å¿½ç•¥ :) åœ¨å¤šä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡ŒåŒä¸€ä¸ªå®å½“ç„¶ï¼Œå¦‚æœåªèƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œé¢é‡å¤æ‰§è¡Œå®çš„è¯ï¼Œèƒ½è§£å†³çš„é—®é¢˜è¿˜æ¯”è¾ƒå±€é™ã€‚ä¸€ä¸ªå¾ˆç»å…¸çš„åœºæ™¯æ˜¯æˆ‘ä»¬æƒ³è¦å¯¹ä¸€å †æ–‡ä»¶æ‰§è¡Œä¸€æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬æ€»ä¸å¯èƒ½ä¸€ä¸ªä¸ªåœ°å¤„ç†æ–‡ä»¶ã€‚è¿™ç»å¯¹è¿åäº† DRYï¼ˆDonâ€™t Repeat Yourselfï¼‰åŸåˆ™ Vim å…è®¸æˆ‘ä»¬åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶ç„¶åä¸€ä¸ªä¸ªç¼–è¾‘ã€‚ä¸ä»…å¦‚æ­¤ï¼Œå®ƒè¿˜æ”¯æŒæˆ‘ä»¬åœ¨æ‰€æœ‰æ‰“å¼€çš„æ–‡ä»¶ä¸Šæ‰§è¡ŒæŒ‡å®šçš„å®ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦ç¼–è¾‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ txt æ–‡ä»¶ï¼Œåªè¦åœ¨å‘½ä»¤è¡Œè¾“å…¥ vim *.txt å°±å¯ä»¥æ‰“å¼€æ‰€æœ‰æ–‡ä»¶ï¼ˆæ¯ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ª bufferï¼Œæ•´ä½“å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª buffer åˆ—è¡¨ï¼‰ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸‹æˆ‘ä»¬å¯ä»¥ä¸€ä¸ªä¸ªæ–‡ä»¶åœ°ç¼–è¾‘ï¼Œç¼–è¾‘å®Œæ¯•ä¹‹åæŒ‰ :wn ä¿å­˜å½“å‰æ–‡ä»¶çš„æ›´æ”¹å¹¶è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–‡ä»¶ã€‚ä½†æˆ‘ä»¬ä¹Ÿèƒ½ä¸€æ¬¡æ€§å¯¹è¿™ä¸ªæ–‡ä»¶åˆ—è¡¨é‡Œçš„æ‰€æœ‰æ–‡ä»¶è¿›è¡Œæ›´æ”¹ï¼š å…ˆç”¨ç¬¬ä¸€ä¸ªæ–‡ä»¶å½•åˆ¶å®ï¼Œå½•åˆ¶å®Œæˆä¹‹åï¼Œåœ¨ normal æ¨¡å¼ä¸‹è¾“å…¥ :edit! æ’¤é”€å¯¹ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„æ›´æ”¹ï¼ˆä¸ç„¶åç»­æ‰¹å¤„ç†æ–‡ä»¶çš„æ—¶å€™ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¼šè¢«ä¿®æ”¹ä¸¤æ¬¡ï¼‰ åœ¨ normal æ¨¡å¼ä¸‹ï¼Œè¾“å…¥å‘½ä»¤ :bufdo execute \"normal @\" | update. å…³äº bufdo çš„è¯´æ˜å¯ä»¥åœ¨ Vim é‡Œé¢è¾“å…¥ :h bufdo æŸ¥çœ‹ã€‚å¯ä»¥ç†è§£ä¸ºå¯¹æ‰€æœ‰çš„ buffer æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œ è¿™é‡Œçš„ normal @ çš„æ„æ€å°±æ˜¯åœ¨ normal æ¨¡å¼ä¸‹æ‰§è¡Œ @ é‡Œé¢çš„å® æ›´å¤šçš„ç»†èŠ‚å¯ä»¥çœ‹ è¿™é‡Œ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:3","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#åœ¨å¤šä¸ªæ–‡ä»¶é‡Œé¢æ‰§è¡ŒåŒä¸€ä¸ªå®"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆä¿®æ”¹å·²ç»å½•åˆ¶å¥½çš„å® ç®€å•æƒ…å†µè®¾æƒ³ä½ åœ¨å½•åˆ¶ä¸€ä¸ªå¾ˆé•¿çš„å®ï¼Œçªç„¶å½•åˆ°ä¸€åŠä¸å°å¿ƒæŒ‰ä¸‹äº† q é”®ç»“æŸäº†å½•åˆ¶ã€‚é‡æ–°å½•åˆ¶è‚¯å®šå¾ˆç¹çï¼ŒVim å…è®¸æˆ‘ä»¬ç›´æ¥åœ¨æŸä¸ªå½•åˆ¶å¥½äº†çš„å®åé¢ç»§ç»­è¿½åŠ æ“ä½œã€‚åŠæ³•å°±æ˜¯ç”¨ q\u003cREGISTER\u003eï¼Œè¿™é‡Œçš„ \u003cREGISTER\u003e è¡¨ç¤º A-Z ä¸­çš„ä¸€ä¸ªå­—æ¯ã€‚æ¯”å¦‚ä¹‹å‰å½•åˆ¶åˆ°ä¸€åŠçš„å®åœ¨ aï¼Œé‚£ä¹ˆè¿½åŠ çš„æ—¶å€™å°±è¦ç”¨ A å¤æ‚æƒ…å†µå¦‚æœè¦ç¼–è¾‘çš„ä½ç½®æ˜¯åœ¨å®çš„ä¸­é—´å‘¢ï¼Ÿä»å¤´å¼€å§‹å½•åˆ¶å®è‚¯å®šä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚å‰é¢æåˆ°è¿‡ï¼Œå®çš„æœ¬è´¨ä¸Šåªæ˜¯å­˜å‚¨åœ¨å¯„å­˜å™¨é‡Œé¢çš„å­—ç¬¦åºåˆ—ã€‚æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹å¯„å­˜å™¨é‡Œçš„å†…å®¹å°±è¡Œï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š åœ¨ normal æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ G è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„æœ€åä¸€è¡Œï¼ˆå…¶å®åˆ«çš„è¡Œä¹Ÿå¯ä»¥ï¼Œåªæ˜¯è·³è½¬åˆ°æœ€åä¸€è¡Œæˆ‘ä»¬ç¼–è¾‘å®çš„æ—¶å€™æ¯”è¾ƒä¸ä¼šå—åˆ°å¹²æ‰°ï¼‰ï¼Œç„¶åè¾“å…¥ :put \u003cregister\u003e å‘½ä»¤ï¼Œå¯¹åº”å¯„å­˜å™¨é‡Œé¢çš„å†…å®¹å°±ä¼šè¢«ç²˜è´´åœ¨ä¸‹ä¸€è¡Œ æ¥ä¸‹æ¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªå†…å®¹å°±è¡Œ ç¼–è¾‘å®Œæˆä¹‹åï¼ˆç¡®ä¿å…‰æ ‡è¿˜åœ¨è¿™ä¸€è¡Œï¼‰ï¼ŒæŒ‰ä¸‹ :d \u003cregister\u003e å°±å¯ä»¥æŠŠå½“å‰è¡Œçš„å†…å®¹å­˜å›åŸæ¥çš„å¯„å­˜å™¨ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘å½•åˆ¶äº†ä¸€ä¸ªå®æ”¾åœ¨å¯„å­˜å™¨ y é‡Œé¢ï¼ŒåŠŸèƒ½æ˜¯ï¼šåœ¨å½“å‰è¡Œçš„æœ«å°¾è¿½åŠ  worldï¼Œç°åœ¨æˆ‘æƒ³è¦ä¿®æ”¹è¿™ä¸ªå®ï¼Œæ”¹æˆè¿½åŠ  hello world ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:4","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#æ€ä¹ˆä¿®æ”¹å·²ç»å½•åˆ¶å¥½çš„å®"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆä¿®æ”¹å·²ç»å½•åˆ¶å¥½çš„å® ç®€å•æƒ…å†µè®¾æƒ³ä½ åœ¨å½•åˆ¶ä¸€ä¸ªå¾ˆé•¿çš„å®ï¼Œçªç„¶å½•åˆ°ä¸€åŠä¸å°å¿ƒæŒ‰ä¸‹äº† q é”®ç»“æŸäº†å½•åˆ¶ã€‚é‡æ–°å½•åˆ¶è‚¯å®šå¾ˆç¹çï¼ŒVim å…è®¸æˆ‘ä»¬ç›´æ¥åœ¨æŸä¸ªå½•åˆ¶å¥½äº†çš„å®åé¢ç»§ç»­è¿½åŠ æ“ä½œã€‚åŠæ³•å°±æ˜¯ç”¨ qï¼Œè¿™é‡Œçš„ è¡¨ç¤º A-Z ä¸­çš„ä¸€ä¸ªå­—æ¯ã€‚æ¯”å¦‚ä¹‹å‰å½•åˆ¶åˆ°ä¸€åŠçš„å®åœ¨ aï¼Œé‚£ä¹ˆè¿½åŠ çš„æ—¶å€™å°±è¦ç”¨ A å¤æ‚æƒ…å†µå¦‚æœè¦ç¼–è¾‘çš„ä½ç½®æ˜¯åœ¨å®çš„ä¸­é—´å‘¢ï¼Ÿä»å¤´å¼€å§‹å½•åˆ¶å®è‚¯å®šä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚å‰é¢æåˆ°è¿‡ï¼Œå®çš„æœ¬è´¨ä¸Šåªæ˜¯å­˜å‚¨åœ¨å¯„å­˜å™¨é‡Œé¢çš„å­—ç¬¦åºåˆ—ã€‚æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹å¯„å­˜å™¨é‡Œçš„å†…å®¹å°±è¡Œï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š åœ¨ normal æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ G è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„æœ€åä¸€è¡Œï¼ˆå…¶å®åˆ«çš„è¡Œä¹Ÿå¯ä»¥ï¼Œåªæ˜¯è·³è½¬åˆ°æœ€åä¸€è¡Œæˆ‘ä»¬ç¼–è¾‘å®çš„æ—¶å€™æ¯”è¾ƒä¸ä¼šå—åˆ°å¹²æ‰°ï¼‰ï¼Œç„¶åè¾“å…¥ :put å‘½ä»¤ï¼Œå¯¹åº”å¯„å­˜å™¨é‡Œé¢çš„å†…å®¹å°±ä¼šè¢«ç²˜è´´åœ¨ä¸‹ä¸€è¡Œ æ¥ä¸‹æ¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªå†…å®¹å°±è¡Œ ç¼–è¾‘å®Œæˆä¹‹åï¼ˆç¡®ä¿å…‰æ ‡è¿˜åœ¨è¿™ä¸€è¡Œï¼‰ï¼ŒæŒ‰ä¸‹ :d å°±å¯ä»¥æŠŠå½“å‰è¡Œçš„å†…å®¹å­˜å›åŸæ¥çš„å¯„å­˜å™¨ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘å½•åˆ¶äº†ä¸€ä¸ªå®æ”¾åœ¨å¯„å­˜å™¨ y é‡Œé¢ï¼ŒåŠŸèƒ½æ˜¯ï¼šåœ¨å½“å‰è¡Œçš„æœ«å°¾è¿½åŠ  worldï¼Œç°åœ¨æˆ‘æƒ³è¦ä¿®æ”¹è¿™ä¸ªå®ï¼Œæ”¹æˆè¿½åŠ  hello world ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:4","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#ç®€å•æƒ…å†µ"},{"categories":["Vim-Neovim"],"content":" æ€ä¹ˆä¿®æ”¹å·²ç»å½•åˆ¶å¥½çš„å® ç®€å•æƒ…å†µè®¾æƒ³ä½ åœ¨å½•åˆ¶ä¸€ä¸ªå¾ˆé•¿çš„å®ï¼Œçªç„¶å½•åˆ°ä¸€åŠä¸å°å¿ƒæŒ‰ä¸‹äº† q é”®ç»“æŸäº†å½•åˆ¶ã€‚é‡æ–°å½•åˆ¶è‚¯å®šå¾ˆç¹çï¼ŒVim å…è®¸æˆ‘ä»¬ç›´æ¥åœ¨æŸä¸ªå½•åˆ¶å¥½äº†çš„å®åé¢ç»§ç»­è¿½åŠ æ“ä½œã€‚åŠæ³•å°±æ˜¯ç”¨ qï¼Œè¿™é‡Œçš„ è¡¨ç¤º A-Z ä¸­çš„ä¸€ä¸ªå­—æ¯ã€‚æ¯”å¦‚ä¹‹å‰å½•åˆ¶åˆ°ä¸€åŠçš„å®åœ¨ aï¼Œé‚£ä¹ˆè¿½åŠ çš„æ—¶å€™å°±è¦ç”¨ A å¤æ‚æƒ…å†µå¦‚æœè¦ç¼–è¾‘çš„ä½ç½®æ˜¯åœ¨å®çš„ä¸­é—´å‘¢ï¼Ÿä»å¤´å¼€å§‹å½•åˆ¶å®è‚¯å®šä¸æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚å‰é¢æåˆ°è¿‡ï¼Œå®çš„æœ¬è´¨ä¸Šåªæ˜¯å­˜å‚¨åœ¨å¯„å­˜å™¨é‡Œé¢çš„å­—ç¬¦åºåˆ—ã€‚æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹å¯„å­˜å™¨é‡Œçš„å†…å®¹å°±è¡Œï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š åœ¨ normal æ¨¡å¼ä¸‹ï¼ŒæŒ‰ä¸‹ G è·³è½¬åˆ°å½“å‰æ–‡ä»¶çš„æœ€åä¸€è¡Œï¼ˆå…¶å®åˆ«çš„è¡Œä¹Ÿå¯ä»¥ï¼Œåªæ˜¯è·³è½¬åˆ°æœ€åä¸€è¡Œæˆ‘ä»¬ç¼–è¾‘å®çš„æ—¶å€™æ¯”è¾ƒä¸ä¼šå—åˆ°å¹²æ‰°ï¼‰ï¼Œç„¶åè¾“å…¥ :put å‘½ä»¤ï¼Œå¯¹åº”å¯„å­˜å™¨é‡Œé¢çš„å†…å®¹å°±ä¼šè¢«ç²˜è´´åœ¨ä¸‹ä¸€è¡Œ æ¥ä¸‹æ¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªå†…å®¹å°±è¡Œ ç¼–è¾‘å®Œæˆä¹‹åï¼ˆç¡®ä¿å…‰æ ‡è¿˜åœ¨è¿™ä¸€è¡Œï¼‰ï¼ŒæŒ‰ä¸‹ :d å°±å¯ä»¥æŠŠå½“å‰è¡Œçš„å†…å®¹å­˜å›åŸæ¥çš„å¯„å­˜å™¨ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæˆ‘å½•åˆ¶äº†ä¸€ä¸ªå®æ”¾åœ¨å¯„å­˜å™¨ y é‡Œé¢ï¼ŒåŠŸèƒ½æ˜¯ï¼šåœ¨å½“å‰è¡Œçš„æœ«å°¾è¿½åŠ  worldï¼Œç°åœ¨æˆ‘æƒ³è¦ä¿®æ”¹è¿™ä¸ªå®ï¼Œæ”¹æˆè¿½åŠ  hello world ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:3:4","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#å¤æ‚æƒ…å†µ"},{"categories":["Vim-Neovim"],"content":" æ€»ç»“è¿™åªæ˜¯å¯¹ Vim çš„å®çš„ä¸€ä¸ªç®€å•ä»‹ç»ï¼Œå®ƒåªæ˜¯ Vim å¼ºå¤§åŠŸèƒ½çš„å†°å±±ä¸€è§’ï¼Œå½“ä½ æŒæ¡æ›´å¤š Vim çš„å…¶ä»–æ“ä½œçš„æ—¶å€™ï¼ˆæ¯”å¦‚æœç´¢ä¸æ›¿æ¢ï¼Œå¿«é€Ÿå®šä½åˆ°æŸä¸ªä½ç½®ï¼‰ï¼ŒæŠŠä»–ä»¬ç»“åˆèµ·æ¥ Vim å°†ä¼šå˜å¾—å¾ˆå¼ºå¤§ã€‚å¦‚æœè¿™ç¯‡åšå®¢å¯ä»¥è®©ä½ å¯¹ Vim äº§ç”Ÿå…´è¶£é‚£å°±å†å¥½ä¸è¿‡ã€‚å¸Œæœ›æœ¬ç¯‡åšå®¢å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜‰ ","date":"2022-07-02","objectID":"/zh-cn/vim-macro-101/:4:0","series":null,"tags":["Vim","Neovim"],"title":"Vim Macro 101","uri":"/zh-cn/vim-macro-101/#æ€»ç»“"},{"categories":["Compiler"],"content":"use the semantic actions to generate the symbol tables in ANTLR4","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/"},{"categories":["Compiler"],"content":" ä»€ä¹ˆæ˜¯ semantic actionså½“ Parser å¤„ç†è¾“å…¥çš„ä»£ç çš„æ—¶å€™ä¸ä»…è¦åˆ¤æ–­æ˜¯å¦è¯­æ³•å’Œå¥æ³•éƒ½æ­£ç¡®ï¼Œè¿˜å¯ä»¥æ‰§è¡Œä¸€äº›æœ‰ç”¨çš„æ“ä½œï¼Œè¿™äº›æ“ä½œå°±å«åš Semantic actionsã€‚å…¶å®ä¹Ÿå°±æ˜¯ä¸€æ®µä»£ç ï¼Œä¸€èˆ¬åµŒå…¥åœ¨åœ¨è¯­æ³•æ–‡ä»¶çš„è§„åˆ™é‡Œé¢ã€‚é‚£ä¹ˆå½“ parser åº”ç”¨è¿™ä¸ªè§„åˆ™çš„æ—¶å€™å°±ä¼šæ‰§è¡Œä½ è®¾ç½®çš„è¿™æ®µä»£ç ã€‚æ¢ä¸ªè§’åº¦ç†è§£ï¼Œsemantic actions å…¶å®å°±æ˜¯â€œè§¦å‘å™¨â€ï¼Œè§¦å‘æ¡ä»¶å°±æ˜¯ parser åº”ç”¨äº†å¯¹åº”çš„è§„åˆ™ã€‚ ä»Šå¤©è¿™ç¯‡æ–‡ç« è¦æ¢è®¨çš„å°±æ˜¯ä¸€ä¸ªå…³äº semantic actions çš„åº”ç”¨â€”â€”å®ç°ä¸€ä¸ªç®€å•çš„ symbol tableï¼Œç”¨åˆ°çš„å·¥å…·æ˜¯ ANTLR4ã€‚ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:1:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#ä»€ä¹ˆæ˜¯-semantic-actions"},{"categories":["Compiler"],"content":" ä»€ä¹ˆæ˜¯ symbol tableç¼–è¯‘å™¨åœ¨å¤„ç†æˆ‘ä»¬çš„ä»£ç çš„æ—¶å€™ä¼šåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ª symbol tableï¼Œç”¨æ¥å­˜å‚¨ç¨‹åºé‡Œé¢æ‰€æœ‰å…³äºå˜é‡çš„ä¿¡æ¯ï¼šå˜é‡åã€æ•°æ®ç±»å‹ã€å˜é‡æ‰€å±çš„ä½œç”¨åŸŸç­‰ã€‚symbol table å¯ä»¥æ˜¯ä¸‹é¢è¿™ç§å½¢å¼ï¼š Symbol name Type Scope bar function, double extern x double function parameter foo function, double global count int function parameter sum double block local i int for-loop statement ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:2:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#ä»€ä¹ˆæ˜¯-symbol-table"},{"categories":["Compiler"],"content":" å¦‚ä½•åœ¨ ANTLR çš„è¯­æ³•æ–‡ä»¶é‡Œé¢æ³¨å…¥åŠ¨ä½œANTLR4 æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ parse generatorï¼Œæˆ‘ä»¬åªè¦ç¼–å†™å¥½è¯­æ³•æ–‡ä»¶ï¼Œå°±èƒ½è®©å®ƒå¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ Parserï¼Œç”Ÿæˆçš„ Parser å¯ä»¥æ”¯æŒå¤šç§ç›®æ ‡è¯­è¨€ï¼Œæ¯”å¦‚æˆ‘è‡ªå·±ç”¨çš„æ˜¯ Pythonï¼Œé‚£ä¹ˆæœ€åç”Ÿæˆçš„ Parser å°±æ˜¯ Python æ–‡ä»¶ã€‚ ANTLR4 ä¹Ÿæä¾›äº†æ–¹æ³•è®©æˆ‘ä»¬å¯ä»¥åœ¨è¯­æ³•æ–‡ä»¶é‡Œé¢æ’å…¥åŠ¨ä½œï¼Œè¿™äº›åŠ¨ä½œæœ€åéƒ½ä¼šè¢« ANTLR4 æ³¨å…¥åˆ°ç”Ÿæˆçš„ Parser æ–‡ä»¶é‡Œé¢ã€‚å› æ­¤ï¼ŒåŠ¨ä½œç”¨ä»€ä¹ˆè¯­è¨€å†™å–å†³äºä½ è¾“å‡º Parser çš„ç›®æ ‡è¯­è¨€æ˜¯ä»€ä¹ˆ âš ï¸è¿™é‡Œå‡å®šä½ å¯¹å¦‚ä½•ç¼–å†™ ANTLR4 çš„è¯­æ³•æ–‡ä»¶ï¼ˆ*.g4ï¼‰æœ‰åŸºæœ¬äº†è§£ï¼Œä¸ä¼šè¿›è¡Œèµ˜è¿°ï¼Œæœ¬æ–‡åªé›†ä¸­ä»‹ç»å¦‚ä½•åœ¨è¯­æ³•æ–‡ä»¶é‡Œé¢æ’å…¥åŠ¨ä½œ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#å¦‚ä½•åœ¨-antlr-çš„è¯­æ³•æ–‡ä»¶é‡Œé¢æ³¨å…¥åŠ¨ä½œ"},{"categories":["Compiler"],"content":" åŠ¨ä½œæ³¨å…¥çš„ä½ç½®å’Œæ–¹æ³•ä¸‹é¢æ˜¯ç®€åŒ–çš„ç”Ÿæˆçš„ Parser æ–‡ä»¶çš„ä»£ç æ¨¡æ¿ã€‚æ€»ä½“ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬èƒ½æ³¨å…¥çš„ä½ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š python \u003cheader\u003e class xxxParser(Parser): ... \u003cmember\u003e def rule(self): ... \u003caction\u003e ä¸‹é¢æˆ‘å¯¹æ¯ä¸ªä½ç½®çš„ä¸åŒè¯­æ³•è¿›è¡Œè¯´æ˜ï¼š \u003cheader\u003eANTLR4 æœ¬æ¥å°±æ˜¯ç”¨ Java å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨çš„ç›®æ ‡è¯­è¨€ä¹Ÿæ˜¯ Java çš„è¯ï¼Œè¿™ä¸ªä¼šæ¯”è¾ƒç”¨å¾—åˆ°ã€‚ä¸€èˆ¬å°±æ˜¯ç”¨æ¥æ”¾ import è¯­å¥çš„ã€‚å¦‚æœæ˜¯ python çš„è¯å“ªé‡Œéƒ½èƒ½ import å°±æ¯”è¾ƒæ²¡å·®ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼ˆæ”¾åœ¨ *.g4 æ–‡ä»¶é‡Œé¢ï¼Œä¸‹åŒï¼‰ antlr @header{ everything here will go to \u003cheader\u003e } \u003cmember\u003eè¿™ä¸ªæ”¾çš„å°±æ˜¯ç±»çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯å­—æ®µä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ã€‚ANTLR4 æ”¯æŒå¾€ Lexer å’Œ Parser åˆ†åˆ«æˆ–è€…åŒæ—¶æ³¨å…¥ä»£ç ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼š antlr @members { everything here will go to \u003cmember\u003e in xxxLexer \u0026\u0026 xxxParser } @Lexer::members { everything here will go to \u003cmember\u003e in xxxLexer } @Parser::members { everything here will go to \u003cmember\u003e in xxxParser } âš ï¸åœ¨æˆ‘ä½¿ç”¨çš„ antlr4-python3-runtime ä¸­ï¼ˆ4.10ï¼‰ï¼Œè¿˜æ— æ³•åœ¨æ’å…¥ç±»çš„å­—æ®µè¿›è¡Œæ³¨é‡Š \u003caction\u003eåœ¨ ANTLR4 ä¸­ï¼ŒåŠ¨ä½œæ˜¯ç”¨èŠ±æ‹¬å· {\u003cspecific-language-here\u003e} æ‹¬èµ·æ¥çš„ä»£ç ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œçœ‹ä½ æœ€åè¾“å‡ºçš„ Parser æƒ³è¦æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œä½ å°±ç”¨ä»€ä¹ˆè¯­è¨€å†™åŠ¨ä½œã€‚ åŠ¨ä½œä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€æ¡è§„åˆ™çš„æŸä¸ª symbol ä¹‹åï¼Œæ„æ€æ˜¯è¯´åœ¨ parser åº”ç”¨è¿™æ¡è§„åˆ™çš„æ—¶å€™æ‰§è¡Œåˆ°è¿™é‡Œå°±æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚è¿™é‡Œçš„ symbol å¯ä»¥æ˜¯ terminal ä¹Ÿå¯ä»¥æ˜¯ nonterminalã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ $symbol.attr çš„æ–¹å¼è®¿é—®åˆ°å¯¹åº”çš„å±æ€§ï¼Œæœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š python $terminal.text # origin text $terminal.type # an integer stands for type $terminal.attributes $terminal.line # the line number $terminal.pos # the position of the first char in the lineï¼Œ0-based $terminal.index $terminal.channel # the channel of this terminal, won't discuss in this post $terminal.int # return an interger if this terminal is an integer $nonterminal.text # origin text $nonterminal.start # 1st Token $nonterminal.stop # last Token $nonterminal.ctx # return context object ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:1","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#åŠ¨ä½œæ³¨å…¥çš„ä½ç½®å’Œæ–¹æ³•"},{"categories":["Compiler"],"content":" åŠ¨ä½œæ³¨å…¥çš„ä½ç½®å’Œæ–¹æ³•ä¸‹é¢æ˜¯ç®€åŒ–çš„ç”Ÿæˆçš„ Parser æ–‡ä»¶çš„ä»£ç æ¨¡æ¿ã€‚æ€»ä½“ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬èƒ½æ³¨å…¥çš„ä½ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š python class xxxParser(Parser): ... def rule(self): ... ä¸‹é¢æˆ‘å¯¹æ¯ä¸ªä½ç½®çš„ä¸åŒè¯­æ³•è¿›è¡Œè¯´æ˜ï¼š ANTLR4 æœ¬æ¥å°±æ˜¯ç”¨ Java å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨çš„ç›®æ ‡è¯­è¨€ä¹Ÿæ˜¯ Java çš„è¯ï¼Œè¿™ä¸ªä¼šæ¯”è¾ƒç”¨å¾—åˆ°ã€‚ä¸€èˆ¬å°±æ˜¯ç”¨æ¥æ”¾ import è¯­å¥çš„ã€‚å¦‚æœæ˜¯ python çš„è¯å“ªé‡Œéƒ½èƒ½ import å°±æ¯”è¾ƒæ²¡å·®ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼ˆæ”¾åœ¨ *.g4 æ–‡ä»¶é‡Œé¢ï¼Œä¸‹åŒï¼‰ antlr @header{ everything here will go to } è¿™ä¸ªæ”¾çš„å°±æ˜¯ç±»çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯å­—æ®µä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ã€‚ANTLR4 æ”¯æŒå¾€ Lexer å’Œ Parser åˆ†åˆ«æˆ–è€…åŒæ—¶æ³¨å…¥ä»£ç ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼š antlr @members { everything here will go to in xxxLexer \u0026\u0026 xxxParser } @Lexer::members { everything here will go to in xxxLexer } @Parser::members { everything here will go to in xxxParser } âš ï¸åœ¨æˆ‘ä½¿ç”¨çš„ antlr4-python3-runtime ä¸­ï¼ˆ4.10ï¼‰ï¼Œè¿˜æ— æ³•åœ¨æ’å…¥ç±»çš„å­—æ®µè¿›è¡Œæ³¨é‡Š åœ¨ ANTLR4 ä¸­ï¼ŒåŠ¨ä½œæ˜¯ç”¨èŠ±æ‹¬å· {} æ‹¬èµ·æ¥çš„ä»£ç ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œçœ‹ä½ æœ€åè¾“å‡ºçš„ Parser æƒ³è¦æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œä½ å°±ç”¨ä»€ä¹ˆè¯­è¨€å†™åŠ¨ä½œã€‚ åŠ¨ä½œä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€æ¡è§„åˆ™çš„æŸä¸ª symbol ä¹‹åï¼Œæ„æ€æ˜¯è¯´åœ¨ parser åº”ç”¨è¿™æ¡è§„åˆ™çš„æ—¶å€™æ‰§è¡Œåˆ°è¿™é‡Œå°±æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚è¿™é‡Œçš„ symbol å¯ä»¥æ˜¯ terminal ä¹Ÿå¯ä»¥æ˜¯ nonterminalã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ $symbol.attr çš„æ–¹å¼è®¿é—®åˆ°å¯¹åº”çš„å±æ€§ï¼Œæœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š python $terminal.text # origin text $terminal.type # an integer stands for type $terminal.attributes $terminal.line # the line number $terminal.pos # the position of the first char in the lineï¼Œ0-based $terminal.index $terminal.channel # the channel of this terminal, won't discuss in this post $terminal.int # return an interger if this terminal is an integer $nonterminal.text # origin text $nonterminal.start # 1st Token $nonterminal.stop # last Token $nonterminal.ctx # return context object ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:1","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#header"},{"categories":["Compiler"],"content":" åŠ¨ä½œæ³¨å…¥çš„ä½ç½®å’Œæ–¹æ³•ä¸‹é¢æ˜¯ç®€åŒ–çš„ç”Ÿæˆçš„ Parser æ–‡ä»¶çš„ä»£ç æ¨¡æ¿ã€‚æ€»ä½“ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬èƒ½æ³¨å…¥çš„ä½ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š python class xxxParser(Parser): ... def rule(self): ... ä¸‹é¢æˆ‘å¯¹æ¯ä¸ªä½ç½®çš„ä¸åŒè¯­æ³•è¿›è¡Œè¯´æ˜ï¼š ANTLR4 æœ¬æ¥å°±æ˜¯ç”¨ Java å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨çš„ç›®æ ‡è¯­è¨€ä¹Ÿæ˜¯ Java çš„è¯ï¼Œè¿™ä¸ªä¼šæ¯”è¾ƒç”¨å¾—åˆ°ã€‚ä¸€èˆ¬å°±æ˜¯ç”¨æ¥æ”¾ import è¯­å¥çš„ã€‚å¦‚æœæ˜¯ python çš„è¯å“ªé‡Œéƒ½èƒ½ import å°±æ¯”è¾ƒæ²¡å·®ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼ˆæ”¾åœ¨ *.g4 æ–‡ä»¶é‡Œé¢ï¼Œä¸‹åŒï¼‰ antlr @header{ everything here will go to } è¿™ä¸ªæ”¾çš„å°±æ˜¯ç±»çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯å­—æ®µä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ã€‚ANTLR4 æ”¯æŒå¾€ Lexer å’Œ Parser åˆ†åˆ«æˆ–è€…åŒæ—¶æ³¨å…¥ä»£ç ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼š antlr @members { everything here will go to in xxxLexer \u0026\u0026 xxxParser } @Lexer::members { everything here will go to in xxxLexer } @Parser::members { everything here will go to in xxxParser } âš ï¸åœ¨æˆ‘ä½¿ç”¨çš„ antlr4-python3-runtime ä¸­ï¼ˆ4.10ï¼‰ï¼Œè¿˜æ— æ³•åœ¨æ’å…¥ç±»çš„å­—æ®µè¿›è¡Œæ³¨é‡Š åœ¨ ANTLR4 ä¸­ï¼ŒåŠ¨ä½œæ˜¯ç”¨èŠ±æ‹¬å· {} æ‹¬èµ·æ¥çš„ä»£ç ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œçœ‹ä½ æœ€åè¾“å‡ºçš„ Parser æƒ³è¦æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œä½ å°±ç”¨ä»€ä¹ˆè¯­è¨€å†™åŠ¨ä½œã€‚ åŠ¨ä½œä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€æ¡è§„åˆ™çš„æŸä¸ª symbol ä¹‹åï¼Œæ„æ€æ˜¯è¯´åœ¨ parser åº”ç”¨è¿™æ¡è§„åˆ™çš„æ—¶å€™æ‰§è¡Œåˆ°è¿™é‡Œå°±æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚è¿™é‡Œçš„ symbol å¯ä»¥æ˜¯ terminal ä¹Ÿå¯ä»¥æ˜¯ nonterminalã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ $symbol.attr çš„æ–¹å¼è®¿é—®åˆ°å¯¹åº”çš„å±æ€§ï¼Œæœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š python $terminal.text # origin text $terminal.type # an integer stands for type $terminal.attributes $terminal.line # the line number $terminal.pos # the position of the first char in the lineï¼Œ0-based $terminal.index $terminal.channel # the channel of this terminal, won't discuss in this post $terminal.int # return an interger if this terminal is an integer $nonterminal.text # origin text $nonterminal.start # 1st Token $nonterminal.stop # last Token $nonterminal.ctx # return context object ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:1","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#member"},{"categories":["Compiler"],"content":" åŠ¨ä½œæ³¨å…¥çš„ä½ç½®å’Œæ–¹æ³•ä¸‹é¢æ˜¯ç®€åŒ–çš„ç”Ÿæˆçš„ Parser æ–‡ä»¶çš„ä»£ç æ¨¡æ¿ã€‚æ€»ä½“ä¸Šæ¥çœ‹ï¼Œæˆ‘ä»¬èƒ½æ³¨å…¥çš„ä½ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š python class xxxParser(Parser): ... def rule(self): ... ä¸‹é¢æˆ‘å¯¹æ¯ä¸ªä½ç½®çš„ä¸åŒè¯­æ³•è¿›è¡Œè¯´æ˜ï¼š ANTLR4 æœ¬æ¥å°±æ˜¯ç”¨ Java å†™çš„ï¼Œæ‰€ä»¥å¦‚æœä½ ç”¨çš„ç›®æ ‡è¯­è¨€ä¹Ÿæ˜¯ Java çš„è¯ï¼Œè¿™ä¸ªä¼šæ¯”è¾ƒç”¨å¾—åˆ°ã€‚ä¸€èˆ¬å°±æ˜¯ç”¨æ¥æ”¾ import è¯­å¥çš„ã€‚å¦‚æœæ˜¯ python çš„è¯å“ªé‡Œéƒ½èƒ½ import å°±æ¯”è¾ƒæ²¡å·®ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼ˆæ”¾åœ¨ *.g4 æ–‡ä»¶é‡Œé¢ï¼Œä¸‹åŒï¼‰ antlr @header{ everything here will go to } è¿™ä¸ªæ”¾çš„å°±æ˜¯ç±»çš„æˆå‘˜ï¼Œå¯ä»¥æ˜¯å­—æ®µä¹Ÿå¯ä»¥æ˜¯æ–¹æ³•ã€‚ANTLR4 æ”¯æŒå¾€ Lexer å’Œ Parser åˆ†åˆ«æˆ–è€…åŒæ—¶æ³¨å…¥ä»£ç ã€‚è¦å¾€è¿™ä¸ªä½ç½®æ³¨å…¥ä»£ç çš„æ ¼å¼å¦‚ä¸‹ï¼š antlr @members { everything here will go to in xxxLexer \u0026\u0026 xxxParser } @Lexer::members { everything here will go to in xxxLexer } @Parser::members { everything here will go to in xxxParser } âš ï¸åœ¨æˆ‘ä½¿ç”¨çš„ antlr4-python3-runtime ä¸­ï¼ˆ4.10ï¼‰ï¼Œè¿˜æ— æ³•åœ¨æ’å…¥ç±»çš„å­—æ®µè¿›è¡Œæ³¨é‡Š åœ¨ ANTLR4 ä¸­ï¼ŒåŠ¨ä½œæ˜¯ç”¨èŠ±æ‹¬å· {} æ‹¬èµ·æ¥çš„ä»£ç ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œçœ‹ä½ æœ€åè¾“å‡ºçš„ Parser æƒ³è¦æ˜¯ä»€ä¹ˆè¯­è¨€ï¼Œä½ å°±ç”¨ä»€ä¹ˆè¯­è¨€å†™åŠ¨ä½œã€‚ åŠ¨ä½œä¸€èˆ¬ä¼šæ”¾åœ¨ä¸€æ¡è§„åˆ™çš„æŸä¸ª symbol ä¹‹åï¼Œæ„æ€æ˜¯è¯´åœ¨ parser åº”ç”¨è¿™æ¡è§„åˆ™çš„æ—¶å€™æ‰§è¡Œåˆ°è¿™é‡Œå°±æ‰§è¡Œç›¸åº”çš„åŠ¨ä½œã€‚è¿™é‡Œçš„ symbol å¯ä»¥æ˜¯ terminal ä¹Ÿå¯ä»¥æ˜¯ nonterminalã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ $symbol.attr çš„æ–¹å¼è®¿é—®åˆ°å¯¹åº”çš„å±æ€§ï¼Œæœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š python $terminal.text # origin text $terminal.type # an integer stands for type $terminal.attributes $terminal.line # the line number $terminal.pos # the position of the first char in the lineï¼Œ0-based $terminal.index $terminal.channel # the channel of this terminal, won't discuss in this post $terminal.int # return an interger if this terminal is an integer $nonterminal.text # origin text $nonterminal.start # 1st Token $nonterminal.stop # last Token $nonterminal.ctx # return context object ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:3:1","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#action"},{"categories":["Compiler"],"content":" ä¸¾ä¸ªä¾‹å­ âš ï¸ä¸‹é¢éƒ½åªä¼šç»™å‡ºéƒ¨åˆ†ä»£ç ï¼Œå®Œæ•´çš„ä»£ç åœ¨æˆ‘çš„ Github é¡¹ç›® âš ï¸å› ä¸ºè¿™ä¸ªé¡¹ç›®è¦æ±‚æŠŠ warning è¾“å‡ºåœ¨å…¶ä»–è¾“å‡ºå‰é¢ï¼Œæ‰€ä»¥æˆ‘ç”¨ warning_list å’Œ output_list æ¥å­˜å‚¨ï¼Œæœ€åå†ä¸€èµ·è¾“å‡º ä¸‹é¢ä»¥æ™®æ¸¡å¤§å­¦ 2015 å¹´çš„å¼€è®¾çš„ç¼–è¯‘å™¨è¯¾ç¨‹çš„é¡¹ç›®ä½œä¸šä¸ºä¾‹ï¼Œæ•´ä¸ªé¡¹ç›®è¦å®ç°ä¸€ä¸ª Micro è¯­è¨€çš„ç¼–è¯‘å™¨ï¼Œå…³äº Micro è¯­è¨€çš„è¯­æ³•ï¼Œå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ã€‚ä¸‹é¢æˆ‘ä¼šå¯¹æ­¥éª¤ä¸‰çš„ä½œä¸šè¦æ±‚è¿›è¡Œä¸€ä¸ªç®€å•çš„ä»‹ç»ã€‚ åœ¨è¿™ä¸ªä½œä¸šä¸­æˆ‘ä»¬è¦æ„å»ºä¸€ä¸ª symbol tableï¼Œå¹¶åœ¨ç›¸åº”çš„æ—¶åˆ»è¾“å‡ºç›¸å…³çš„ä¿¡æ¯ï¼š æ¯å½“æˆ‘ä»¬è¿›å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸä¹‹å‰ï¼ˆå¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»£ç å—ï¼‰ï¼Œè¦è¿›è¡Œç›¸å…³çš„è¾“å‡º å¦‚æœé‡åˆ°å˜é‡å£°æ˜ï¼Œå°±è¾“å‡ºå˜é‡åå’Œå˜é‡ç±»å‹ï¼Œæœ‰å€¼çš„è¯ä¹Ÿè¦è¾“å‡ºã€‚ å¦‚æœå£°æ˜çš„å˜é‡åœ¨å¤–éƒ¨ä½œç”¨åŸŸå·²ç»å£°æ˜è¿‡çš„è¯è¦è¾“å‡ºï¼šSHADOW WARNING \u003cvar_name\u003eï¼Œé€‚ç”¨äºæœ‰åµŒå¥—çš„ä½œç”¨åŸŸå‡ºç°çš„æƒ…å†µ å¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸå·²ç»æœ‰åŒåçš„å˜é‡ï¼Œå°±è¦è¾“å‡ºï¼šDECLARATION ERROR \u003cvar_name\u003eã€‚å¦‚æœå‡ºç°äº†è¿™ç§æƒ…å†µï¼Œé‚£ä¹ˆæœ€åç¨‹åºåªè¾“å‡ºè¿™ä¸ªä¿¡æ¯ text Symbol table \u003cscope_name\u003e name \u003cvar_name\u003e type \u003ctype_name\u003e name \u003cvar_name\u003e type \u003ctype_name\u003e value \u003cstring_value\u003e ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#ä¸¾ä¸ªä¾‹å­"},{"categories":["Compiler"],"content":" æ•°æ®ç»“æ„çš„é€‰å–åŠå¯¹åº”çš„æ–¹æ³•ğŸ¤”å…ˆè¦è§£å†³çš„é—®é¢˜æ˜¯ï¼Œè¦ç”¨ä»€ä¹ˆæ•°æ®ç»“æ„è¡¨ç¤º symbol tableï¼Ÿä¸€ä¸ª symbol table åº”è¯¥è¦æ»¡è¶³ä¸‹é¢çš„ç‰¹ç‚¹ï¼š è¦èƒ½å¤Ÿæ”¯æŒé«˜æ•ˆç‡åœ°æŸ¥è¯¢ è¦èƒ½å¤Ÿæ”¯æŒé«˜æ•ˆç‡åœ°æ’å…¥ï¼Œå› ä¸ºç¨‹åºä¸­å¯èƒ½åŒ…å«å¤§é‡çš„å˜é‡å£°æ˜ è¦èƒ½å¤Ÿè®°å½•å˜é‡çš„ä½œç”¨åŸŸ ä¸éš¾æƒ³å‡ºï¼Œæ”¯æŒé«˜æ•ˆç‡æŸ¥è¯¢å’Œæ’å…¥çš„æ•°æ®ç»“æ„å°±æ˜¯ã€Œå“ˆå¸Œè¡¨ã€ã€‚ä¸ºäº†ç»´æŠ¤å˜é‡çš„ä½œç”¨åŸŸï¼Œå¯ä»¥æŠŠåŒä¸ªä½œç”¨åŸŸä¸‹çš„å˜é‡æ”¾åœ¨åŒä¸ªå“ˆå¸Œè¡¨é‡Œé¢ï¼Œç”¨ä¸€ä¸ªåˆ—è¡¨æ¥è®°ä½æ‰€æœ‰çš„å˜é‡ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯ [{scope1}, {scope2},...] è¿™æ ·ã€‚åŒæ—¶ç»´æŠ¤ä¸€ä¸ª self.current_scope æ¥è®°ä½å½“å‰å¤„äºå“ªä¸€ä¸ªå˜é‡ä½œç”¨åŸŸé‡Œé¢ã€‚æ¯å½“æœ‰ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸå‡ºç°çš„æ—¶å€™ï¼Œä¿å­˜å½“å‰çš„ä½œç”¨åŸŸï¼Œå¾€åˆ—è¡¨é‡Œæ’å…¥ä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸï¼Œå†æ›´æ–° self.current_scopeã€‚ ğŸ“’ è¿™é‡Œçš„ list å…¶å®å°±æ˜¯ç”¨æ¥æ¨¡æ‹Ÿæ ˆ ğŸ¤”æˆ‘ä»¬è¦å®ç°ä»€ä¹ˆæ ·çš„æ–¹æ³•ï¼Ÿèµ·ç è¦æœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š lookup(identifier, value)ï¼šæ’å…¥å˜é‡åˆ°å½“å‰çš„ symbol table é‡Œé¢ã€‚æ ¹æ®è¿™ä¸ªé¡¹ç›®ä½œä¸šçš„è¦æ±‚ï¼Œè¿˜åº”è¯¥æŸ¥è¯¢æ˜¯å¦å˜é‡å·²ç»è¢«å£°æ˜è¿‡ enter_new_scope()ï¼šä¿å­˜å½“å‰çš„ symbol tableï¼Œè¿›å…¥ä¸‹ä¸€ä¸ªå˜é‡ä½œç”¨åŸŸå¹¶åˆå§‹åŒ–ä¸ºç©º exit_scope()ï¼šæ¸…ç©ºå½“å‰çš„ symbol tableï¼Œæ‰¾åˆ°ä¸Šä¸€ä¸ª symbol table æ‰€ä»¥å¯¹åº” @parser:members é‡Œé¢çš„ä»£ç å¦‚ä¸‹ python @parser::members { def init(self): self.current_scope = None self.block_count = 0 self.warning_list = [] # just for printing self.output_list = [] # just for printing self.declaration_error = '' def enter_new_scope(self): if not hasattr(self, '_scopes'): setattr(self, '_scopes', []) # save the current_scope import copy if len(self._scopes) \u003e 0: self._scopes.append(copy.deepcopy(self.current_scope)) self._scopes.append({}) self.current_scope = self._scopes[-1] def exit_scope(self): del self._scopes[-1] if len(self._scopes) \u003e 0: self.current_scope = self._scopes[-1] def lookup(self, identifier, value): # check all scopes found = False for scope in self._scopes[:-1][::-1]: #print(f\"the scope: {scope}\") if identifier in scope: found = True if found: self.warning_list.append(f\"SHADOW WARNING {identifier}\") # only record the 1st declaration error if identifier in self.current_scope and self.declaration_error == '': self.declaration_error = f\"DECLARATION ERROR {identifier}\" self.current_scope[identifier] = value } ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:1","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#æ•°æ®ç»“æ„çš„é€‰å–åŠå¯¹åº”çš„æ–¹æ³•"},{"categories":["Compiler"],"content":" æ³¨å…¥åŠ¨ä½œåˆ°å˜é‡å£°æ˜ä¸­ğŸ§æ¥ä¸‹æ¥å°±æ˜¯è¦åœ¨å¯¹åº”çš„è¯­æ³•è§„åˆ™é‡Œé¢æ³¨å…¥åŠ¨ä½œã€‚æˆ‘ä»¬æƒ³è¦åœ¨å®šä¹‰å˜é‡çš„æ—¶å€™è¾“å‡ºç›¸å…³çš„ä¿¡æ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆè¦è§‚å¯Ÿåœ¨ Micro è¯­è¨€ä¸­å˜é‡å£°æ˜çš„è§„åˆ™æ˜¯æ€ä¹ˆæ ·çš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š antlr ... var_decl : var_type id_list ';' ; var_type : 'FLOAT' | 'INT' ; any_type : var_type | 'VOID' ; id_list : id id_tail ; id_tail : ',' id id_tail | ; ... å¯ä»¥çœ‹åˆ°ï¼Œå£°æ˜å˜é‡å¯¹åº”çš„æ˜¯ var_decl è§„åˆ™ï¼Œä¸€æ¬¡å¯ä»¥å£°æ˜ä¸€è‡³å¤šä¸ªå˜é‡ï¼Œæ¯ä¸€ä¸ªå˜é‡ä¹‹é—´ç”¨ , éš”å¼€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™æ¡è§„åˆ™çš„æœ«å°¾æœ€åæ³¨å…¥å¦‚ä¸‹çš„åŠ¨ä½œä»£ç ã€‚ âš ï¸è¦æ³¨æ„å¦‚æœä½ ä¹Ÿæ˜¯ä½¿ç”¨ python çš„è¯ï¼Œè¿™é‡Œæ‰€ä»¥ç¼©è¿›ä¼šæœ‰ç‚¹æ€ªï¼Œå› ä¸ºæ¯ä¸€è¡Œéƒ½è¦ä»æœ€å·¦è¾¹å¼€å§‹ï¼Œä½†æœ€åç”Ÿæˆçš„ä»£ç æ˜¯æ²¡æœ‰é—®é¢˜çš„ antlr ... var_decl : var_type id_list ';' { # NOTE: the indentation is correct, ANLTR4 will handle this for us :) # for all variable declarations, we should output the name \u0026\u0026 type # in the same variable declaration, it means all of the variables have the same type for variable in $id_list.text.split(','): self.lookup(variable, None) self.output_list.append(f\"name {variable} type {$var_type.text}\") } ; ... æˆ‘ä»¬ç”¨ $id_list.text æ¥è·å–æœ¬æ¥çš„å˜é‡å£°æ˜å¯¹åº”çš„æ–‡æœ¬ï¼Œç”¨ $var_type.text æ¥è·å–å¯¹åº”çš„å˜é‡ç±»å‹ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:2","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#æ³¨å…¥åŠ¨ä½œåˆ°å˜é‡å£°æ˜ä¸­"},{"categories":["Compiler"],"content":" å…³äºå˜é‡ä½œç”¨åŸŸçš„å¤„ç†ä¸‹é¢ä»¥ program è§„åˆ™ä¸ºä¾‹ï¼ˆå‡½æ•°å’Œä»£ç å—çš„ç±»ä¼¼ï¼‰ï¼Œprogarm è§„åˆ™æ˜¯ Micro è¯­æ³•çš„èµ·å§‹è§„åˆ™ï¼Œè§„å®šäº† Micro ç¨‹åºåº”è¯¥è¦æœ‰çš„å¤§æ¡†æ¶ï¼Œè§„åˆ™å¦‚ä¸‹æ‰€ç¤ºï¼š antlr program : 'PROGRAM' id 'BEGIN' pgm_body 'END' ; æˆ‘ä»¬å¤„ç†å®Œ PROGRAM è¿™ä¸ª token ä¹‹åå°±å¯ä»¥åˆå§‹åŒ–ç¬¬ä¸€ä¸ªä½œç”¨åŸŸï¼ˆå…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œæœ€åè¦å¤„ç†å®Œç¨‹åºå†é€€å‡ºè¿™ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾ˆå¿«æƒ³åˆ°åº”è¯¥æŠŠåŠ¨ä½œæ³¨å…¥åœ¨å“ªé‡Œ antlr program : 'PROGRAM' id 'BEGIN' pgm_body 'END' ; ^ ^ | 2 æœ€åæ’å…¥ç›¸å…³çš„åŠ¨ä½œ antlr program : 'PROGRAM' { self.init() self.output_list.append(\"Symbol table GLOBAL\") self.enter_new_scope() } id 'BEGIN' pgm_body 'END' { self.exit_scope() # output everything after we parsing this program if self.declaration_error != '': print(self.declaration_error) else: if len(self.warning_list) \u003e 0: print('\\n'.join(self.warning_list)) print('\\n'.join(self.output_list)) } ; ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:4:3","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#å…³äºå˜é‡ä½œç”¨åŸŸçš„å¤„ç†"},{"categories":["Compiler"],"content":" æ‰©å±•é˜…è¯»å‰é¢åªæ¶‰åŠåˆ°ç®€å•çš„åŠ¨ä½œæ³¨å…¥ï¼ŒANTLR4 å…¶å®æ”¯æŒçš„åŠŸèƒ½è¿˜æ›´å¤šï¼š æ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®© nonterminal è¿”å›å€¼ åœ¨åŒä¸€æ¡è§„åˆ™å¦‚æœå‡ºç°å¤šä¸ªåŒåçš„ nonterminal çš„è¯å¯ä»¥èµ·åå­— ä¸‹é¢æ˜¯æ¥è‡ªä¹¦ä¸­çš„ä¸€ä¸ªä¾‹å­ï¼Œå°±å¾ˆå¥½åœ°å±•ç¤ºäº†ä¸Šé¢ä¸¤ä¸ªç”¨æ³• antlr e returns [int v] : a=e op=('*'|'/') b=e {$v = self.eval($a.v, $op, $b.v)} | a=e op=('+'|'-') b=e {$v = self.eval($a.v, $op, $b.v)} | INT {$v = $INT.int} | ID ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:5:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#æ‰©å±•é˜…è¯»"},{"categories":["Compiler"],"content":" æ€»ç»“ä»è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥å­¦ä¹ åˆ°è¦å¦‚ä½•åœ¨ ANTLR4 é‡Œé¢ä½¿ç”¨åŠ¨ä½œï¼Œç”Ÿæˆ symbol table åªæ˜¯å…¶ä¸­ä¸€ä¸ªè¿ç”¨ã€‚åœ¨ä»£ç é‡Œé¢æ³¨å…¥åŠ¨ä½œæ˜¯å¾ˆç¬¦åˆç›´è§‰çš„åšæ³•ï¼Œå¯ä»¥å¿«é€Ÿå®ç°è‡ªå·±æƒ³è¦çš„åŠŸèƒ½ã€‚ä¸è¿‡ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®ƒæ˜¯ language-dependent çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸€æ—¦æ¢äº† ANTLR è¾“å‡ºçš„ç›®æ ‡è¯­è¨€ï¼Œä½ æ³¨å…¥çš„åŠ¨ä½œå…¨éƒ¨è¦æ”¹æˆæ–°çš„ç›®æ ‡è¯­è¨€ã€‚å¦å¤–å°±æ˜¯ä¼šè®©æœ¬æ¥å¹²å‡€çš„è¯­æ³•æ–‡ä»¶ä¸€å›¢ç³Ÿã€‚ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:6:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#æ€»ç»“"},{"categories":["Compiler"],"content":" å‚è€ƒ Symbol table - wiki ã€ŠANTLR4 æƒå¨æŒ‡å—ã€‹ ","date":"2022-05-28","objectID":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/:7:0","series":null,"tags":["Compiler","Course"],"title":"How to use the semantic actions to generate the symbol tables in ANTLR4","uri":"/zh-cn/how-to-use-antlr4-to-make-semantic-actions/#å‚è€ƒ"},{"categories":["Algorithm"],"content":"ä»‹ç»äº†æ‘©å°”æŠ•ç¥¨æ³•","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/","series":null,"tags":["Algorithm"],"title":"æ‘©å°”æŠ•ç¥¨æ³•","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/"},{"categories":["Algorithm"],"content":" å¼•è¨€ ä»Šå¤©åˆåšåˆ°äº† Leetcode 169. å¤šæ•°å…ƒç´  è¿™ä¸€é“é¢˜. æˆ‘ä¾ç¨€è®°å¾—æœ€ä¼˜çš„è§£æ³•å«åšä»€ä¹ˆæ‘©å°”æŠ•ç¥¨æ³•. ä½†æ˜¯æˆ‘å¯¹å®ƒçš„å°è±¡ç«Ÿç„¶åªæœ‰è¿™ä¸ªåå­—æœ¬èº«äº† Orz. å¯¹äºè¿™ä¸ªç®—æ³•æœ¬èº«å€’æ˜¯å¿˜å¾—ä¸€å¹²äºŒå‡€. äºæ˜¯æˆ‘æ‰“ç®—ç³»ç»Ÿæ€§åœ°å­¦ä¹ ä¸€ä¸‹è¿™ä¸ªç®—æ³•çš„åŸç†, å¹¶å°†å®ƒæ€»ç»“å‡ºæ¥å†™æˆè¿™ç¯‡åšå®¢. ä¸çŸ¥é“åœ¨å“ªé‡Œçœ‹åˆ°çš„ä¸€å¥è¯ : å½“ä½ å¼€å§‹æ•™åˆ«äººçš„æ—¶å€™, ä½ å°±çœŸçš„æŒæ¡å®ƒäº† æ‰€ä»¥, æˆ‘ä»Šå¤©åœ¨è¿™é‡Œæ‰“ç®—è·Ÿå¤§å®¶åˆ†äº«è¿™ä¸ªç®—æ³•, å¹¶è¯•å›¾ä»¥æµ…æ˜¾çš„è¯­è¨€è®©ä½ ä¹Ÿå­¦ä¼šè¿™ä¸ªæ–¹æ³•, é‚£ä¹ˆè®©æˆ‘ä»¬å¼€å§‹å§ :) ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:1:0","series":null,"tags":["Algorithm"],"title":"æ‘©å°”æŠ•ç¥¨æ³•","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/#å¼•è¨€"},{"categories":["Algorithm"],"content":" å…ˆä»ç®€å•çš„æ–¹æ³•å¼€å§‹èŠèµ·å¦‚æœä»æ¥æ²¡æœ‰å¬è¯´è¿‡æ‘©å°”æŠ•ç¥¨æ³•, æˆ‘ä»¬ä¼šå¦‚ä½•å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜, èµ·ç è¦æœ‰ä¸‹é¢çš„æ€è·¯: ç”¨ç©ºé—´æ¢æ—¶é—´, ä¹Ÿå°±æ˜¯ç”¨ä¸€ä¸ªå“ˆå¸Œè¡¨æŠŠæ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°è®°ä¸‹æ¥, ç„¶åæˆ‘ä»¬å†æ£€æŸ¥ä¸€éæˆ‘ä»¬çš„å“ˆå¸Œè¡¨å¹¶æ‰¾åˆ°å…¶ä¸­å‡ºç°æ¬¡æ•°å¤§äº $\\lfloor n/2\\rfloor$ çš„å°±å¯ä»¥.è¿™æ ·æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æ˜¯ $O(n)$ å°è¯•å¯¹æ•°ç»„è¿›è¡Œæ’åº, å› ä¸ºæˆ‘ä»¬è¦æ‰¾çš„å…ƒç´ è¶…è¿‡äº†æ•°ç»„ä¸€åŠçš„é•¿åº¦, è¿™æ„å‘³ç€å®ƒä¸€å®šä¼šå‡ºç°åœ¨æ•°ç»„çš„ä¸­é—´ä½ç½®. è¿™ä¸ªä¹Ÿä¸éš¾æƒ³åˆ°, ä½†æ˜¯ç”¨æ’åºçš„è¯è™½ç„¶ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$, ä½†æ˜¯æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯å¤§äº $O(n)$ çš„, *æ¯”å¦‚å¦‚æœä½ é‡‡ç”¨çš„æ˜¯å¿«é€Ÿæ’åºçš„è¯, æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $O(nlogn)$ é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åšåˆ°æ—¶é—´å¤æ‚åº¦æ˜¯ $O(n)$, ç©ºé—´å¤æ‚åº¦æ˜¯ $O(1)$ å‘¢? ä¹Ÿå°±æ˜¯ç»“åˆäº†ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•çš„ä¼˜ç‚¹. æœ‰çš„, ç­”æ¡ˆå°±æ˜¯æ‘©å°”æŠ•ç¥¨æ³• ! ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:2:0","series":null,"tags":["Algorithm"],"title":"æ‘©å°”æŠ•ç¥¨æ³•","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/#å…ˆä»ç®€å•çš„æ–¹æ³•å¼€å§‹èŠèµ·"},{"categories":["Algorithm"],"content":" æ‘©å°”æŠ•ç¥¨æ³• é—®é¢˜æè¿°: å‡è®¾æˆ‘ä»¬çš„æ•°ç»„æœ‰ $n$ ä¸ªå…ƒç´ , æˆ‘ä»¬è¦æ‰¾åˆ°å…¶ä¸­å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´  ç®—æ³•æµç¨‹: ä»è¿™ $n$ ä¸ªå…ƒç´ ä¸­é€‰ä¸€ä¸ªä½œä¸º candidateï¼Œè®°å½•å®ƒçš„ç¥¨æ•°ä¸º votes = 1. æ­¤æ—¶æˆ‘ä»¬çš„æ•°ç»„ä¸­è¿˜æœ‰ $n-1$ ä¸ªå…ƒç´ , æˆ‘ä»¬æ¯æ¬¡éƒ½å–å‡ºä¸€ä¸ªå…ƒç´ (è®°ä¸º current), å¹¶é‡å¤æ‰§è¡Œä»¥ä¸‹çš„æ­¥éª¤(ä¸€å…± n-1 æ¬¡) å°†å®ƒå’Œæˆ‘ä»¬å½“å‰çš„ candidate åšæ¯”è¾ƒ, å¦‚æœå®ƒä»¬çš„å€¼ä¸€æ ·, é‚£ä¹ˆ votes++, ä¹Ÿå°±æ˜¯æŠ•èµåŒç¥¨ å¦‚æœå®ƒä»¬çš„å€¼ä¸ä¸€æ ·, votes--, ä¹Ÿå°±æ˜¯æŠ•åå¯¹ç¥¨. å¦‚æœæ­¤æ—¶ votes = 0 çš„è¯, é‚£ä¹ˆ candidate \u003c- current, ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è®© current æˆä¸ºäº†æ–°çš„ candidate, å¹¶è®° votes = 1 æœ€å candidate çš„å€¼å°±å¯èƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ , æ­¤æ—¶æˆ‘ä»¬å¾—å†éå†ä¸€éæ•°ç»„è¿›è¡Œè®¡æ•°çœ‹å®ƒåˆ°åº•æ˜¯ä¸æ˜¯ åœ¨çœ‹å®Œä¸Šé¢çš„ç®—æ³•æµç¨‹ä¹‹å, ä½ å¯èƒ½è·Ÿæˆ‘ä¸€æ ·æ„Ÿåˆ°å¾ˆå›°æƒ‘. ä¸ºä»€ä¹ˆè¿™æ ·æœ€åæˆ‘ä»¬å°±èƒ½æ‰¾åˆ°å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ . å…¶å®åªè¦æƒ³æ˜ç™½ä¸€ä¸ªåŸç†å°±å¾ˆç®€å• ğŸ’¡ å‡ºç°æ¬¡æ•°è¶…è¿‡ $\\lfloor n/2\\rfloor$ æ¬¡çš„å…ƒç´ å¦‚æœå­˜åœ¨, æ­¤æ—¶æ•°ç»„ä¸­çš„å…¶ä»–å…ƒç´ ä¸€å®šæ˜¯å‡ºç°æ¬¡æ•°å°äº $\\lfloor n/2\\rfloor$ çš„ è¿™å¥è¯æœ‰ä»€ä¹ˆç”¨å‘¢ ? å› ä¸ºæ‘©å°”æŠ•ç¥¨æ³•çš„åšæ³•å…¶å®å°±æ˜¯æŠ•ç¥¨ å¯ä»¥æ˜¯æŠ•èµåŒç¥¨, æ­¤æ—¶ç›¸å½“äºæˆ‘ä»¬åœ¨ç»Ÿè®¡è¿™ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•° å¯ä»¥æ˜¯æŠ•åå¯¹ç¥¨. ç›¸å½“äºæˆ‘ä»¬æ’¤é”€äº†ä¸€ä¸ªåŒæ„ç¥¨, å°±æ˜¯æŠµæ¶ˆæŠµæ¶ˆæŠµæ¶ˆ!!! ä½†æ˜¯å› ä¸ºå‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ åŠ èµ·æ¥çš„ç¥¨æ•°(èµåŒç¥¨) \u003e å‰©ä¸‹æ‰€æœ‰ä¸æ˜¯çš„(åå¯¹ç¥¨)è¿™ä»¶äº‹æ˜¯ä¸€å®šæˆç«‹çš„, æ‰€ä»¥æ— è®ºæ€æ ·æœ€åèµ¢çš„æ°¸è¿œæ˜¯å‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠçš„å…ƒç´ . äºæ˜¯æˆ‘ä»¬å°±æ‰¾åˆ°äº† :) å¦‚æœè¿˜æ˜¯ä¸æ‡‚å¯ä»¥çœ‹çœ‹ä¸‹é¢çš„è¿™ä¸ª GIF å›¾ç†è§£ä¸€ä¸‹~ ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:3:0","series":null,"tags":["Algorithm"],"title":"æ‘©å°”æŠ•ç¥¨æ³•","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/#æ‘©å°”æŠ•ç¥¨æ³•"},{"categories":["Algorithm"],"content":" ä»£ç  java class Solution { public int majorityElement(int[] nums) { if (nums.length \u003c 2) { return nums[0]; } int candidates = nums[0]; int votes = 1; // step 1. start to vote for (int i = 0; i \u003c nums.length; i++) { if (nums[i] != candidates) { votes -= 1; if (votes == 0) { candidates = nums[i]; votes = 1; } } else { votes += 1; } } // step2. check int occurs = 0; for (var val: nums) { if (candidates == val) { occurs += 1; } } if (occurs \u003e= nums.length / 2) { return candidates; } else { return -1; } } } ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:4:0","series":null,"tags":["Algorithm"],"title":"æ‘©å°”æŠ•ç¥¨æ³•","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/#ä»£ç "},{"categories":["Algorithm"],"content":" FAQ Q: ä¸ºä»€ä¹ˆè¿˜éœ€è¦ç¬¬äºŒè½®æ£€æŸ¥å‘¢? èƒ½ä¸èƒ½ç›´æ¥çœ‹ votes å‘¢? A: ä¸èƒ½, é¦–å…ˆè¿™ä¸ªã€Œå‡ºç°æ¬¡æ•°è¶…è¿‡ä¸€åŠã€çš„å…ƒç´ ä¸ä¸€å®šå­˜åœ¨. æ¯”å¦‚ [1,2,3]. å¦å¤–å°±ç®—å®ƒå­˜åœ¨, éå†å®Œæ•°ç»„ä¹‹å, æ­¤æ—¶ votes ä¹Ÿä¸ä¸€å®šæ˜¯å®ƒçš„çœŸå®ç¥¨æ•°. æ¯”å¦‚ [1, 2, 2, 2, 3] æœ€å 3 ä¼šæŠ•åå¯¹ç¥¨å¯¼è‡´ votes - 1 ","date":"2022-03-24","objectID":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/:5:0","series":null,"tags":["Algorithm"],"title":"æ‘©å°”æŠ•ç¥¨æ³•","uri":"/zh-cn/boyer-moore-majority-voting-algorithm-explained/#faq"},{"categories":["Course"],"content":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" Intro å‰ä¸¤ä¸ªé¡¹ç›®è¿˜ç®—ç®€å•, æ¯”è¾ƒä¸å¤æ‚. ä½†æ˜¯ä»Šå¤©è¿™ä¸ªç¬¬ä¸‰ä¸ªé¡¹ç›®éš¾åº¦ç¡®å®æ˜¯ä¸Šå‡äº†(çœ‹æ¸¸æˆè§„åˆ™å°±çŸ¥é“è¿™ä¸ªæœ‰å¤šå¤æ‚äº†). æ„Ÿè§‰åƒæ˜¯æ¤ç‰©å¤§æˆ˜åƒµå°¸ æ‰€ä»¥æˆ‘æ‰“ç®—ä¸ºä»–å†™ä¸€ç¯‡åšå®¢æ¥æ•´ç†ä¸€ä¸‹å†™ä»£ç æ—¶å€™çš„æ€è·¯. è¯ä¸å¤šè¯´, è®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜å§ ! ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#intro"},{"categories":["Course"],"content":" Phase 1: Basic gameplay ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#phase-1-basic-gameplay"},{"categories":["Course"],"content":" Problem 1 (1 pt) Part A: Currently, there is no cost for placing any type of Ant, and so there is no challenge to the game. The base class Ant has a food_cost of zero. Override this class attribute for HarvesterAnt and ThrowerAnt according to the â€œFood Costâ€ column in the table below. Part B: Now that placing an Ant costs food, we need to be able to gather more food! To fix this issue, implement the HarvesterAnt class. A HarvesterAnt is a type of Ant that adds one food to the gamestate.food total as its action. æ ¹æ®é¢˜ç›®çš„è¦æ±‚è®¾ç½® HarversterAnt å’Œ ThrowerAnt çš„å±æ€§, åŒæ—¶å®ç° HarvesterAnt çš„ action æ–¹æ³•, è®©å®ƒå¯ä»¥åœ¨æ¯æ¬¡è¡ŒåŠ¨çš„æ—¶å€™ç»™ food + 1 python class HarvesterAnt(Ant): \"\"\"HarvesterAnt produces 1 additional food per turn for the colony.\"\"\" name = 'Harvester' implemented = True food_cost = 2 def action(self, gamestate): \"\"\"Produce 1 additional food for the colony. gamestate -- The GameState, used to access game state information. \"\"\" gamestate.food += 1 class ThrowerAnt(Ant): \"\"\"ThrowerAnt throws a leaf each turn at the nearest Bee in its range.\"\"\" name = 'Thrower' implemented = True damage = 1 food_cost = 3 ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-1-1-pt"},{"categories":["Course"],"content":" Problem 2 (1 pt) In this problem, youâ€™ll complete Place.__init__ by adding code that tracks entrances. Right now, a Place keeps track only of its exit. We would like a Place to keep track of its entrance as well. A Place needs to track only one entrance. Tracking entrances will be useful when an Ant needs to see what Bees are in front of it in the tunnel. However, simply passing an entrance to a Place constructor will be problematic; we would need to have both the exit and the entrance before creating a Place! (Itâ€™s a chicken or the egg problem.) To get around this problem, we will keep track of entrances in the following way instead. Place.__init__ should use this logic: A newly created Place always starts with its entrance as None. If the Place has an exit, then the exitâ€™s entrance is set to that Place. å…¶å®è¿™ä¸ªèµ›é“æœ‰ç‚¹åƒæ•°æ®ç»“æ„ä¸­çš„åŒå‘é“¾è¡¨çš„ç»“æ„, å¾€å·¦è¾¹ç”¨ .exit, å¾€å³è¾¹ç”¨ .entrance æ–¹æ³•. è¦æ±‚å·²ç»åœ¨ä¸Šé¢ç»™å‡º, æ²¡ä»€ä¹ˆéš¾åº¦ python class Place: \"\"\"A Place holds insects and has an exit to another Place.\"\"\" is_hive = False def __init__(self, name, exit=None): \"\"\"Create a Place with the given NAME and EXIT. name -- A string; the name of this Place. exit -- The Place reached by exiting this Place (may be None). \"\"\" self.name = name self.exit = exit self.bees = [] # A list of Bees self.ant = None # An Ant self.entrance = None # A Place # Phase 1: Add an entrance to the exit if exit is not None: self.exit.entrance = self ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-2-1-pt"},{"categories":["Course"],"content":" Problem 3 (1 pt) In order for a ThrowerAnt to throw a leaf, it must know which bee to hit. The provided implementation of the nearest_bee method in the ThrowerAnt class only allows them to hit bees in the same Place. Your job is to fix it so that a ThrowerAnt will throw_at the nearest bee in front of it that is not still in the Hive. This includes bees that are in the same Place as a ThrowerAnt Hint: All Places have an is_hive attribute which is True when that place is the Hive. Change nearest_bee so that it returns a random Bee from the nearest place that contains bees. Your implementation should follow this logic: Start from the current Place of the ThrowerAnt. For each place, return a random bee if there is any, and if not, inspect the place in front of it (stored as the current placeâ€™s entrance). If there is no bee to attack, return None. ç°åœ¨æˆ‘ä»¬è¦ç»™ ThrowerAnt åŠ ä¸ŠåŠŸèƒ½, è¿™æ ·æ‰èƒ½è®©å®ƒæ”»å‡»è·ç¦»å®ƒæœ€è¿‘çš„èœœèœ‚ğŸ. æ³¨æ„å¦‚æœèœœèœ‚å’Œä»–åœ¨åŒä¸€ä¸ªæ ¼å­é‡Œ, ä¹Ÿæ˜¯å¯ä»¥æ”»å‡»çš„. æˆ‘ä»¬çš„å·¥ä½œè¦æ±‚æ˜¯éå†æ¯ä¸ªæ ¼å­(å°±è·Ÿä½ éå†é“¾è¡¨ä¸€æ ·)æ‰¾åˆ°ç¬¬ä¸€ä¸ªæœ‰èœœèœ‚çš„æ ¼å­, éšæœºè¿”å›ä¸€ä¸ªèœœèœ‚ python def nearest_bee(self): \"\"\"Return the nearest Bee in a Place that is not the HIVE, connected to the ThrowerAnt's Place by following entrances. This method returns None if there is no such Bee (or none in range). \"\"\" pos = self.place while pos.entrance is not None: if not pos.is_hive: if len(pos.bees) \u003e 0: return random_bee(pos.bees) pos = pos.entrance return None ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:2:3","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-3-1-pt"},{"categories":["Course"],"content":" Phase 2: Ants! ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#phase-2-ants"},{"categories":["Course"],"content":" Problem 4 (2 pt) A ThrowerAnt is a powerful threat to the bees, but it has a high food cost. In this problem, youâ€™ll implement two subclasses of ThrowerAnt that are less costly but have constraints on the distance they can throw: The LongThrower can only throw_at a Bee that is found after following at least 5 entrance transitions. It cannot hit Bees that are in the same Place as it or the first 4 Places in front of it. If there are two Bees, one too close to the LongThrower and the other within its range, the LongThrower should only throw at the farther Bee, which is within its range, instead of trying to hit the closer Bee. The ShortThrower can only throw_at a Bee that is found after following at most 3 entrance transitions. It cannot throw at any bees further than 3 Places in front of it. Neither of these specialized throwers can throw_at a Bee that is exactly 4 Places away. ç°åœ¨æˆ‘ä»¬è¦å®ç°ä¸¤ä¸ªç±», LongThrower å’Œ ShortThrower. ä¸¤ä¸ªéƒ½æ˜¯ ThrowererAnt çš„å­ç±», å…¶å®ä»ä»–ä»¬çš„åå­—å¯ä»¥çœ‹å‡ºæ¥ä»–ä»¬çš„åŒºåˆ«åœ¨äºæ”»å‡»èŒƒå›´çš„ä¸åŒ. æ€è·¯: æˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºæ”»å‡»èŒƒå›´è¿™ä¸ªæ¦‚å¿µå‘¢ ? å…¶å®å¾ˆç®€å•, åœ¨ problem 3 ä¸­æˆ‘ä»¬æ‰¾åˆ°æœ€è¿‘çš„èœœèœ‚çš„æ—¶å€™å°±æ˜¯ä¸€ä¸ªæ ¼å­ä¸€ä¸ªæ ¼å­å‰è¿›çš„, æˆ‘ä»¬å¯ä»¥åŒæ—¶è®¡ç®—æ­¥æ•°, é‚£ä¹ˆæˆ‘ä»¬å°±è¿™é“è¿™ä¸ªè·ç¦», å†é…åˆ min_range å’Œ max_range è¿™ä¸¤ä¸ªå‚æ•°(ç±»å˜é‡, è¡¨ç¤ºè¿™ä¸ªç±»å¯¹åº”çš„èš‚èšçš„æ”»å‡»èŒƒå›´, åªæœ‰è½åœ¨è¿™ä¸ªåŒºé—´çš„æ‰è¡Œ) åŒæ—¶è¦æ³¨æ„æˆ‘ä»¬ä¸èƒ½å½±å“ problem 3 ä¸­çš„ç»“æœ, è¿™ä¹Ÿå®¹æ˜“æƒ³åˆ°, æˆ‘ä»¬è®© min_range=-1, max_range=float('inf'), è¿™æ ·å°±ç›¸å½“äºæ²¡æœ‰é™åˆ¶äº† ~! è€Œä¸”å› ä¸ºé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„ä¼˜åŠ¿, æˆ‘ä»¬çœå»äº†ä¸å°‘ä»£ç é‡. python # In problem 3 class ThrowerAnt(Ant): \"\"\"ThrowerAnt throws a leaf each turn at the nearest Bee in its range.\"\"\" name = 'Thrower' implemented = True damage = 1 food_cost = 3 min_range = -1 max_range = float('inf') def nearest_bee(self): \"\"\"Return the nearest Bee in a Place that is not the HIVE, connected to the ThrowerAnt's Place by following entrances. This method returns None if there is no such Bee (or none in range). \"\"\" steps_cnt = 0 pos = self.place while pos.entrance is not None: if steps_cnt \u003e self.max_range: return None if not pos.is_hive: if len(pos.bees) \u003e 0 and steps_cnt \u003e= self.min_range: return random_bee(pos.bees) pos = pos.entrance steps_cnt += 1 return None class ShortThrower(ThrowerAnt): \"\"\"A ThrowerAnt that only throws leaves at Bees at most 3 places away.\"\"\" name = 'Short' food_cost = 2 # OVERRIDE CLASS ATTRIBUTES HERE implemented = True # Change to True to view in the GUI max_range = 3 class LongThrower(ThrowerAnt): \"\"\"A ThrowerAnt that only throws leaves at Bees at least 5 places away.\"\"\" name = 'Long' food_cost = 2 # OVERRIDE CLASS ATTRIBUTES HERE implemented = True # Change to True to view in the GUI min_range = 5 ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-4-2-pt"},{"categories":["Course"],"content":" Problem 5 (3 pt) Implement the FireAnt, which does damage when it receives damage. Specifically, if it is damaged by amount health units, it does a damage of amount to all bees in its place (this is called reflected damage). If it dies, it does an additional amount of damage, as specified by its damage attribute, which has a default value of 3 as defined in the FireAnt class. To implement this, override FireAntâ€™s reduce_health method. Your overriden method should call the reduce_health method inherited from the superclass (Ant) to reduce the current FireAnt instanceâ€™s health. Calling the inherited reduce_health method on a FireAnt instance reduces the insectâ€™s health by the given amount and removes the insect from its place if its health reaches zero or lower. è¿™ä¸ª FireAnt æœ‰ç‚¹æ„æ€çš„, å½“ä»–æ”¶åˆ°ä¼¤å®³çš„æ—¶å€™ä¼šåå¼¹è‡ªå·±å—åˆ°çš„ä¼¤å®³åˆ°å½“å‰æ ¼å­æ‰€æœ‰çš„èœœèœ‚ä¸Š, åŒæ—¶å¦‚æœå®ƒå› æ­¤æ­»äº†è¿˜èƒ½å¯¹è¿™äº›èœœèœ‚å†ä¸€æ¬¡é€ æˆä¼¤å®³(è¿™ä¸€æ¬¡å–å†³äºè‡ªå·±çš„æ”»å‡»åŠ›) è¿™ä¸ªæ¯”è¾ƒ tricky çš„åœ°æ–¹æ˜¯ï¼šå½“å‰æ ¼å­çš„æ‰€æœ‰èœœèœ‚æ˜¯ä¸€ä¸ª list, ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯èƒ½è¦åœ¨è¿­ä»£è®¿é—® list çš„æ—¶å€™ä¿®æ”¹è¿™ä¸ª list, ==è¿™ä¸ªæˆ‘ä»¬éå†å®ƒçš„æ‹·è´å³å¯== æœ€åä»£ç å¦‚ä¸‹: python class FireAnt(Ant): \"\"\"FireAnt cooks any Bee in its Place when it expires.\"\"\" name = 'Fire' damage = 3 food_cost = 5 implemented = True # Change to True to view in the GUI def __init__(self, health=3): \"\"\"Create an Ant with a HEALTH quantity.\"\"\" super().__init__(health) def reduce_health(self, amount): \"\"\"Reduce health by AMOUNT, and remove the FireAnt from its place if it has no health remaining. Make sure to reduce the health of each bee in the current place, and apply the additional damage if the fire ant dies. \"\"\" # FireAnt attack bees for bee in self.place.bees[:]: bee.reduce_health(amount) # FireAnt will be dead if self.health \u003c= amount: for bee in self.place.bees[:]: bee.reduce_health(self.damage) super().reduce_health(amount) else: super().reduce_health(amount) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:3:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-5-3-pt"},{"categories":["Course"],"content":" Phase 3: More Ants! ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#phase-3-more-ants"},{"categories":["Course"],"content":" Problem 6 (1 pt) We are going to add some protection to our glorious home base by implementing the WallAnt, an ant that does nothing each turn. A WallAnt is useful because it has a large health value. Unlike with previous ants, we have not provided you with a class header. Implement the WallAnt class from scratch. Give it a class attribute name with the value 'Wall' (so that the graphics work) and a class attributeimplemented with the value True (so that you can use it in a game). ä»é›¶å®ç°ä¸€ä¸ª WallAnt, è¿™ç§èš‚èšç”Ÿå‘½å€¼é«˜, å…¶ä»–å€’æ˜¯æ²¡ä»€ä¹ˆ python class WallAnt(Ant): \"\"\"WallAnt has a large health value\"\"\" name = 'Wall' damage = 0 food_cost = 4 implemented = True def __init__(self, health=4): super().__init__(health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-6-1-pt"},{"categories":["Course"],"content":" Problem 7 (3 pt) Implement the HungryAnt, which will select a random Bee from its place and eat it whole. After eating a Bee, a HungryAnt must spend 3 turns chewing before eating again. If there is no bee available to eat, HungryAnt will do nothing. Give HungryAnt a chew_duration class attribute that stores the number of turns that it will take a HungryAnt to chew (set to 3). Also, give each HungryAnt an instance attribute chew_countdown that counts the number of turns it has left to chew (initialized to 0, since it hasnâ€™t eaten anything at the beginning. You can also think of chew_countdown as the number of turns until a HungryAnt can eat another Bee). Implement the action method of the HungryAnt: First, check if it is chewing; if so, decrement its chew_countdown. Otherwise, eat a random Bee in its place by reducing the Beeâ€™s health to 0. Make sure to set the chew_countdownwhen a Bee is eaten! ä»é›¶å®ç°ä¸€ä¸ª HungryAnt, å¯ä»¥éšæœºåä¸‹ä¸€æ•´åªèœœèœ‚!!!!ä½†æ˜¯å®ƒè¦èŠ±è´¹ chew_duration æ¥å’€åš¼æ‰èƒ½è¿›è¡Œä¸‹ä¸€æ¬¡æ”»å‡». è¿™ä¸ªä¸å°±æ˜¯æ¤ç‰©å¤§æˆ˜åƒµå°¸é‡Œé¢çš„é£ŸäººèŠ±å˜›!!! æˆ‘ä»¬åªè¦åˆ¤æ–­å½“å‰å®ƒæ˜¯å¦å¤„äºå’€åš¼çŠ¶æ€å³å¯. è¿™é‡Œé¢˜ç›®æ˜¯æœ‰æŒ–å‘çš„, æµ‹è¯•æ ·ä¾‹é‡Œé¢å¯èƒ½åœ¨è¿è¡Œçš„æ—¶å€™ä¼šä¿®æ”¹ chew_duration çš„å€¼, æ³¨æ„åˆ«è¢«å‘äº†! python class HungryAnt(Ant): \"\"\"HungryAnt will select a random bee from its place and eat it whole\"\"\" name = 'Hungry' damage = 0 food_cost = 4 implemented = True chew_duration = 3 def __init__(self, health=1): super().__init__(health) self.chew_countdown = 0 def action(self, gamestate): # it is chewing if self.chew_countdown != 0: self.chew_countdown -= 1 # it is not chewing else: if len(self.place.bees) \u003e 0: # WARNING: the test cases may change the chew_duration variable in runtime self.chew_countdown = self.chew_duration bee = random_bee(self.place.bees) bee.reduce_health(bee.health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-7-3-pt"},{"categories":["Course"],"content":" Problem 8 (3 pt) A BodyguardAnt differs from a normal ant because it is a ContainerAnt; it can contain another ant and protect it, all in one Place. When a Bee stings the ant in a Place where one ant contains another, only the container is damaged. The ant inside the container can still perform its original action. If the container perishes, the contained ant still remains in the place (and can then be damaged). Each ContainerAnt has an instance attribute ant_contained that stores the ant it contains. This ant, ant_contained, initially starts off as None to indicate that there is no ant being stored yet. Implement the store_ant method so that it sets the ContainerAntâ€™s ant_contained instance attribute to the passed in antargument. Also implement the ContainerAntâ€™s action method to perform its ant_containedâ€™s action if it is currently containing an ant. è¿™é‡Œè¦å®ç°çš„èš‚èšä¹Ÿå¾ˆæœ‰æ„æ€, å®ƒå¯ä»¥æŠŠå…¶ä»–èš‚èšä¿æŠ¤èµ·æ¥. ç”šè‡³å¯ä»¥å’Œè¢«ä¿æŠ¤çš„èš‚èšä¸€èµ·å‘†åœ¨åŒä¸€ä¸ªæ ¼å­é‡Œé¢. è¿™é‡Œæ³¨æ„å‡ ä¸ªç»†èŠ‚: BodyguardAnt ä¸èƒ½ä¿æŠ¤ BodyguardAnt !(ğŸˆ²ï¸æ­¢å¥—å¨ƒ) å½“ BodyguardAnt å’Œè¢«ä¿æŠ¤çš„èš‚èšåœ¨åŒä¸€ä¸ªæ ¼å­çš„æ—¶å€™, è¦è®© place.ant å§‹ç»ˆæŒ‡å‘ BodyguardAnt è¿™é‡Œå…¶å®è¿˜æ¶‰åŠåˆ°æŒºå¤šè¦æ”¹çš„åœ°æ–¹çš„(å¯èƒ½ä¼šæ¼æ”¾æŸäº›ä»£ç , å®Œæ•´çš„å»ºè®®çœ‹æˆ‘çš„ä»“åº“) python class Ant(Insect): \"\"\"An Ant occupies a place and does work for the colony.\"\"\" implemented = False # Only implemented Ant classes should be instantiated food_cost = 0 is_container = False ... def add_to(self, place): if place.ant is None: place.ant = self else: assert ( (place.ant is None) or self.can_contain(place.ant) or place.ant.can_contain(self) ), 'Two ants in {0}'.format(place) if place.ant.is_container and place.ant.can_contain(self): place.ant.store_ant(self) elif self.is_container and self.can_contain(place.ant): self.store_ant(place.ant) # the place.ant should refer to the container ant place.ant = self Insect.add_to(self, place) class ContainerAnt(Ant): \"\"\" ContainerAnt can share a space with other ants by containing them. \"\"\" is_container = True def __init__(self, *args, **kwargs): super().__init__(*args, **kwargs) self.ant_contained = None def can_contain(self, other): # we can't have two BodyguardAnt in the same place if self.ant_contained is None and not other.is_container: return True def store_ant(self, ant): self.ant_contained = ant def remove_ant(self, ant): if self.ant_contained is not ant: assert False, \"{} does not contain {}\".format(self, ant) self.ant_contained = None def remove_from(self, place): # Special handling for container ants (this is optional) if place.ant is self: # Container was removed. Contained ant should remain in the game place.ant = place.ant.ant_contained Insect.remove_from(self, place) else: # default to normal behavior Ant.remove_from(self, place) def action(self, gamestate): if self.ant_contained is not None: return self.ant_contained.action(gamestate) class BodyguardAnt(ContainerAnt): \"\"\"BodyguardAnt provides protection to other Ants.\"\"\" name = 'Bodyguard' food_cost = 4 implemented = True # Change to True to view in the GUI def __init__(self, health=2): super().__init__(health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:3","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-8-3-pt"},{"categories":["Course"],"content":" Problem 9 (1 pt) The BodyguardAnt provides great defense, but they say the best defense is a good offense. The TankAnt is a container that protects an ant in its place and also deals 1 damage to all bees in its place each turn. We have not provided you with a class header. Implement the TankAnt class from scratch. Give it a class attribute name with the value 'Tank' (so that the graphics work) and a class attribute implemented with the value True (so that you can use it in a game). You should not need to modify any code outside of the TankAnt class. If you find yourself needing to make changes elsewhere, look for a way to write your code for the previous question such that it applies not just to BodyguardAnt and TankAnt objects, but to container ants in general. æ ¹æ®é¢˜ç›®çš„æè¿°å¯ä»¥çŸ¥é“ TankAnt æ˜¯ä¸€ç§ç‰¹æ®Šçš„ ContainerAnt, æˆ‘ä»¬è¦ä»é›¶å®ç°å®ƒçš„åŠŸèƒ½, å®ƒçš„æ”»å‡»æ–¹å¼æ¯”è¾ƒç‰¹æ®Š, æ˜¯è‡ªå·±ä¿æŠ¤çš„èš‚èšçš„æ”»å‡»æ–¹å¼ + å¯¹å½“å‰æ ¼å­çš„èœœèœ‚é€ æˆè‡ªå·±æ”»å‡»åŠ›çš„ä¼¤å®³ python class TankAnt(ContainerAnt): name = 'Tank' damage = 1 food_cost = 6 implemented = True def __init__(self, health=2): super().__init__(health) def action(self, gamestate): if self.ant_contained is not None: self.ant_contained.action(gamestate) # 1 damage for all the bees for bee in self.place.bees[:]: bee.reduce_health(self.damage) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:4:4","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-9-1-pt"},{"categories":["Course"],"content":" Phase 4: Water and Might ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#phase-4-water-and-might"},{"categories":["Course"],"content":" Problem 10 (1 pt) Letâ€™s add water to the colony! Currently there are only two types of places, the Hive and a basic Place. To make things more interesting, weâ€™re going to create a new type of Place called Water. Only an insect that is waterproof can be placed in Water. In order to determine whether an Insect is waterproof, add a new class attribute to the Insect class named is_waterproof that is set to False. Since bees can fly, set their is_waterproof attribute to True, overriding the inherited value. Now, implement the add_insect method for Water. First, add the insect to the place regardless of whether it is waterproof. Then, if the insect is not waterproof, reduce the insectâ€™s health to 0. Do not repeat code from elsewhere in the program. Instead, use methods that have already been defined. ä¸ºäº†è®©åœ°å½¢æ›´æœ‰è¶£, æˆ‘ä»¬è¦å¢åŠ ä¸€ç§åœ°å½¢ - Water, åªæœ‰èƒ½åœ¨æ°´é‡Œçš„æ´»åŠ¨çš„ç”Ÿç‰©æ‰èƒ½è¢«æ”¾åœ¨è¿™ç§åœ°å½¢ä¸­(èœœèœ‚ä¼šé£å½“ç„¶éƒ½å¯ä»¥, èš‚èšç›®å‰è¿˜æ²¡æœ‰) è®°å¾—è¿˜è¦ä¿®æ”¹å¾ˆå¤šç±», å¢åŠ ç±»å±æ€§ is_waterproof, ä¸‹é¢æˆ‘å°±æ”¾ Water ç±»çš„ä»£ç  python class Water(Place): \"\"\"Water is a place that can only hold waterproof insects.\"\"\" def add_insect(self, insect): \"\"\"Add an Insect to this place. If the insect is not waterproof, reduce its health to 0.\"\"\" super().add_insect(insect) if not insect.is_waterproof: insect.reduce_health(insect.health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-10-1-pt"},{"categories":["Course"],"content":" Problem 11 (1 pt) Currently there are no ants that can be placed on Water. Implement the ScubaThrower, which is a subclass of ThrowerAnt that is more costly and waterproof, but otherwise identical to its base class. A ScubaThrower should not lose its health when placed in Water. We have not provided you with a class header. Implement the ScubaThrower class from scratch. Give it a class attribute name with the value 'Scuba' (so that the graphics work) and remember to set the class attributeimplemented with the value True (so that you can use it in a game). ä»é›¶å®ç°ä¸€ä¸ª ScubaThrower, å¬åå­—å¯ä»¥çœ‹å‡ºæ¥åº”è¯¥æ˜¯ä¸€ç§ç‰¹æ®Šçš„ ThrowerAnt. ç‰¹æ®Šåœ¨: èƒ½æ”¾åœ¨ Water é‡Œ python class ScubaThrower(ThrowerAnt): name = 'Scuba' food_cost = 6 is_waterproof = True implemented = True def __init__(self, health=1): super().__init__(health) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-11-1-pt"},{"categories":["Course"],"content":" Problem 12 (3 pt) Finally, implement the QueenAnt. The queen is a waterproof ScubaThrower that inspires her fellow ants through her bravery. In addition to the standard ScubaThrower action, the QueenAnt doubles the damage of all the ants behind her each time she performs an action. Once an antâ€™s damage has been doubled, it is not doubled again for subsequent turns. However, with great power comes great responsibility. The QueenAnt is governed by three special rules: If the queen ever has its health reduced to 0, the ants lose. You will need to override Ant.reduce_health in QueenAnt and call ants_lose() in that case in order to signal to the simulator that the game is over. (The ants also still lose if any bee reaches the end of a tunnel.) There can be only one queen. A second queen cannot be constructed. To check if an Ant can be constructed, we use the Ant.construct() class method to either construct an Ant if possible, or return None if not. You will need to override Ant.construct as a class method of QueenAnt in order to add this check. To keep track of whether a queen has already been created, you can use an instance variable added to the current GameState. The queen cannot be removed. Attempts to remove the queen should have no effect (but should not cause an error). You will need to override Ant.remove_from in QueenAnt to enforce this condition. ç»ˆäºæ¥åˆ°äº†æœ€åä¸€é¢˜(é™¤äº†é¢å¤–çš„é¢˜ç›®ä»¥å¤–), æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªå¥³ç‹èšğŸœ. å®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§: å¯ä»¥åœ¨æ°´ä¸­è¡Œèµ° æ€è·¯: é¢˜ç›®ä¹Ÿè¯´äº†å®ƒæ˜¯ä¸€ç§ ScrubaThrower, æ ¹æ®è¿™ä¸ªæè¿°å…¶å®å°±æŠ½è±¡æ¦‚æ‹¬å‡ºäº†å®ƒæ˜¯ ScrubaThrower çš„å­ç±». å®ƒåœ¨è¡ŒåŠ¨åä¼šæŠŠåœ¨å®ƒåé¢çš„èš‚èšä»¬çš„æ”»å‡»åŠ›éƒ½ç¿»å€, ä½†æ˜¯ä¸å¯ä»¥å¤šæ¬¡ç¿»å€ æ€è·¯: å¦‚ä½•è¡¨ç¤º â€œåœ¨åé¢â€ è¿™ä¸ªå…³ç³» ? æ ¹æ®å‰é¢çš„é¢˜ç›®æˆ‘ä»¬å¯ä»¥çŸ¥é“. å³è¾¹ä¸ºæ­£æ–¹å‘, æ‰€ä»¥ â€œåœ¨åé¢â€ å®é™…ä¸Šå°±æ˜¯åœ¨å·¦è¾¹, æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¿é—® Place çš„ .exit æ–¹æ³•ä¸æ–­è·å–åˆ°å®ƒå·¦è¾¹(åé¢çš„)çš„ æ€è·¯: å¦‚ä½•è¡¨ç¤ºä¸èƒ½å¤šæ¬¡ç¿»å€ ? å¾ˆå®¹æ˜“æƒ³åˆ°, æˆ‘ä»¬éœ€è¦é€šè¿‡è®¾ç½®ä¸€ä¸ªæ ‡è®°æ¥è¡¨ç¤ºå½“å‰çš„èš‚èšæ˜¯å¦å·²ç»æ”»å‡»åŠ›ç¿»å€è¿‡, æ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨ Ant ç±»é‡ŒåŠ ä¸€ä¸ªå®ä¾‹å˜é‡å³å¯ æ€è·¯: è¿™é‡Œè¿˜è¦æ³¨æ„å¦‚ä½•å¤„ç† GuardAnt, å› ä¸ºå®é™…ä¸Šå®ƒå®ˆæŠ¤çš„èš‚èšæ˜¯å¯èƒ½è¢«æ›¿æ¢ä¸ºæ–°çš„èš‚èš, æ­¤æ—¶æˆ‘ä»¬å°±è¦è®©è¿™ä¸ªæ–°çš„è¢«å®ˆæŠ¤çš„èš‚èšçš„æ”»å‡»åŠ›ç¿»å€. ==æ³¨æ„ç»†ç»†ä½“ä¼šè¿™é‡Œä»£ç æ˜¯æ€ä¹ˆå†™çš„== åªèƒ½æœ‰ä¸€ä¸ªå¥³ç‹èšğŸœ æ€è·¯: å¦‚ä½•åšåˆ°å³ä½¿æˆ‘ä»¬å¤šæ¬¡è°ƒç”¨å¥³ç‹èšğŸœçš„æ„é€ å‡½æ•°ä¹Ÿä¸ä¼šæœ‰å¤šçš„å¥³ç‹èšğŸœ ? è¿™ä¸ªä¾èµ–äºä¸€ä¸ªæ¸¸æˆå˜é‡å«åš gamestate, æˆ‘ä»¬ä»ç„¶æ˜¯é€šè¿‡åŠ æ ‡è®°çš„æ–¹å¼, åªä¸è¿‡è¿™æ¬¡æˆ‘ä»¬æ˜¯åœ¨ GameState è¿™ä¸ªç±»é‡ŒåŠ ä¸€ä¸ª has_queen è¡¨ç¤ºå½“å‰æ˜¯å¦å·²ç»æœ‰å¥³ç‹èšğŸœ å¥³ç‹èšğŸœä¸èƒ½è¢«ç§»é™¤ æ€è·¯: è¿™ä¸ªç®€å•, æˆ‘ä»¬ä»€ä¹ˆéƒ½ä¸åšå°±è¡Œäº† æœ€åä»£ç å¤§æ¦‚å¦‚ä¸‹(ç»“åˆä¸Šé¢çš„è§£é‡Šç»†ç»†ä½“ä¼š~~) python class QueenAnt(ScubaThrower): \"\"\"The Queen of the colony. The game is over if a bee enters her place.\"\"\" name = 'Queen' food_cost = 7 implemented = True # Change to True to view in the GUI @classmethod def construct(cls, gamestate): \"\"\" Returns a new instance of the Ant class if it is possible to construct, or returns None otherwise. Remember to call the construct() method of the superclass! \"\"\" if cls.food_cost \u003e gamestate.food: print('Not enough food remains to place ' + cls.__name__) return # I add a class variable to indict if we have created a QueenAnt() if not gamestate.has_queen: gamestate.has_queen = True return super().construct(gamestate) else: return None def action(self, gamestate): \"\"\"A queen ant throws a leaf, but also doubles the damage of ants in her tunnel. \"\"\" super().action(gamestate) pos = self.place.exit while pos: if pos.ant is not None: if not pos.ant.is_doubled: pos.ant.is_doubled = True pos.ant.buff() if pos.ant.is_container and pos.ant.ant_contained is not None: # the pos.ant.ant_contained may change if not pos.ant.ant_contained.is_doubled: pos.ant.ant_contained.buff() pos.ant.ant_contained.is_doubled = True pos = pos.exit def reduce_health(self, amount): \"\"\"Reduce health by AMOUNT, and if the QueenAnt has no health remaining, signal the end of the game. \"\"\" if self.health \u003c= amount: ants_lose() def remove_from(self, place): return None ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:3","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#problem-12-3-pt"},{"categories":["Course"],"content":" Extra Credit (2 pt) Implement two final thrower ants that do zero damage, but instead apply a temporary â€œstatusâ€ on the actionmethod of a Bee instance that they throw_at. This â€œstatusâ€ lasts for a certain number of turns, after which it ceases to take effect. We will be implementing two new ants that inherit from ThrowerAnt. SlowThrower throws sticky syrup at a bee, slowing it for 3 turns. When a bee is slowed, it can only move on turns when gamestate.time is even, and can do nothing otherwise. If a bee is hit by syrup while it is already slowed, it is slowed for an additional 3 turns. ScaryThrower intimidates a nearby bee, causing it to back away instead of advancing. (If the bee is already right next to the Hive and cannot go back further, it should not move. To check if a bee is next to the Hive, you might find the is_hive instance attribute of Places useful). Bees remain scared until they have tried to back away twice. Bees cannot try to back away if they are slowed and gamestate.time is odd. Once a bee has been scared once, it canâ€™t be scared ever again. å®ç°ä¸¤ç§ç‰¹æ®Šçš„èš‚èšç±», æœ¬èº«æ²¡æœ‰ä¼¤å®³, ä½†æ˜¯èƒ½ç»™èœœèœ‚åŠ ä¸Š debuff. SlowThrower å¯ä»¥è®©èœœèœ‚å‡é€Ÿ, è®©ä»–ä»¬åªèƒ½åœ¨å½“å‰æ—¶é—´ä¸ºå¶æ•°çš„æ—¶å€™å‰è¿›å¦åˆ™ä»€ä¹ˆäº‹æƒ…ä¹Ÿå¹²ä¸äº†. è¿™ä¸ªæ•ˆæœå¯ä»¥ç»´æŒä¸‰ä¸ªå›åˆ, ä½†æ˜¯è¿™ä¸ª debuff å¯ä»¥æ— é™å åŠ  ScaryThrower ä¼šè®©èœœèœ‚åé€€, æ³¨æ„å¦‚æœä¸èƒ½å†åé€€çš„è¯, å°±è¦ä¿æŒä¸åŠ¨. è¯¥æ•ˆæœç»´æŒä¸¤å›åˆ. ä½†æ˜¯å¦‚æœè¢«å‡é€Ÿå°±ä¼šç»§ç»­ä¿æŒä¸åŠ¨, è¿™ä¸ª debuff åªèƒ½ä¸Šä¸€æ¬¡ è¿™ä¸€é¢˜, çœŸçš„, éš¾åº¦å®Œå…¨æ˜¯ä¸Šæ¥äº†. æˆ‘è°ƒäº†æŒºä¹…çš„ bug æ‰æˆåŠŸ. ä¸‹é¢æˆ‘æ¥è®²ä¸€ä¸‹è®¾è®¡æ€è·¯: SlowThrower è®¾ç½® is_slow å˜é‡è¡¨ç¤ºå½“å‰çš„èœœèœ‚æ˜¯å¦è¢«å‡é€Ÿ, åŒæ—¶è®¾ç½® slow_turns æ¥è®°ä½å‰©ä½™å‡ å›åˆå¯ä»¥è§£é™¤è¿™ä¸ªçŠ¶æ€ æ¯ä¸ªå›åˆ, å¦‚æœå½“å‰çš„èœœèœ‚è¢«å‡é€Ÿäº†, å®ƒåªèƒ½çœ‹å½“å‰çš„æ¸¸æˆæ—¶é—´æ˜¯å¦ä¸ºå¶æ•°, å¦‚æœæ˜¯çš„è¯å°±å¯ä»¥å‰è¿›, å¦åˆ™åœ¨åŸåœ°ä¸åŠ¨, **ä½†ä¸è®ºä½ åŠ¨ä¸åŠ¨, slow_turns -= 1 æ°¸è¿œéƒ½æˆç«‹ ScaryThrower ç±»ä¼¼ is_slow å’Œ slow_turns è®¾ç½®äº† is_scared å’Œ scared_turns æˆ‘ä»¬æš‚æ—¶å…ˆä¸è€ƒè™‘å½“å‰èœœèœ‚æ˜¯å¦è¢«å‡é€Ÿäº†(è¿™æ ·æ€è€ƒé—®é¢˜ä¼šæ¯”è¾ƒç®€å•). æ˜¾ç„¶, æˆ‘ä»¬æ¯å›åˆè¦åšçš„äº‹æƒ…æ˜¯è®© scared_turns -= 1, ç„¶åæ˜¯å¦ä¸º scared å…¶å®å†³å®šç€èœœèœ‚çš„å‰è¿›æ–¹å‘. æœ‰äº†è¿™ä¸ªåŸºç¡€ä¹‹åæˆ‘ä»¬å†æ¥æ€è€ƒè¢«å‡é€Ÿå¸¦æƒ…å†µä¸‹åˆè¯¥å¦‚ä½•, æ˜¾ç„¶æˆ‘ä»¬å‰é¢è¿™æ ·æ˜¯æœ‰é—®é¢˜çš„, é¢˜ç›®è¯´äº†å¦‚æœè¢«å‡é€Ÿä¼šåŸåœ°ä¿æŒä¸åŠ¨, ä½†æ˜¯æˆ‘ä»¬å´è®© scared_turns -= 1, æ‰€ä»¥æˆ‘ä»¬éœ€è¦å¤šåŠ ä¸€ä¸ªåˆ¤æ–­, ä¹Ÿå°±æ˜¯è¢«å‡é€Ÿ + è¢« scared çš„æƒ…å†µä¸‹å¦‚æœæˆ‘ä»¬æ²¡æœ‰æˆåŠŸç§»åŠ¨, é‚£ä¹ˆæˆ‘ä»¬éœ€è¦æ’¤é”€æˆ‘ä»¬å¯¹ scared_turns çš„æ›´æ”¹ çŸ¥é“äº†ä¸Šé¢çš„è®¾è®¡æ€è·¯, ç†è§£ä¸‹é¢çš„ä»£ç å°±ä¸éš¾äº†(è¿™é‡Œåˆ å»äº†æ— å…³çš„ä»£ç ): python class Bee(Insect): \"\"\"A Bee moves from place to place, following exits and stinging ants.\"\"\" name = 'Bee' damage = 1 is_waterproof = True # 2 flags is_slow = False is_scared = False # turns remained slow_turns = 0 scared_turns = 0 # we can't scare a bee twice has_been_scared = False def action(self, gamestate): \"\"\"A Bee's action stings the Ant that blocks its exit if it is blocked, or moves to the exit of its current place otherwise. gamestate -- The GameState, used to access game state information. \"\"\" if self.is_scared: destination = self.place.entrance self.scared_turns -= 1 else: destination = self.place.exit if self.is_slow: self.slow_turns -= 1 if self.slow_turns == 0: self.is_slow = False if gamestate.time % 2 == 0 and self.health \u003e 0 and destination is not None: self.move_to(destination) else: # is_slow + is_scared, we need to cancel `self.scared_turns -= 1` \\ # if we didn't move self.scared_turns += 1 else: if self.blocked(): self.sting(self.place.ant) elif self.health \u003e 0 and destination is not None: self.move_to(destination) # we can't put this in side `if self.is_scared`, why? # because only when we run if self.is_slow we can know # should we cancel it or not if self.scared_turns == 0: self.is_scared = False # Extra credit: Special handling for bee direction def slow(self, length): \"\"\"Slow the bee for a further LENGTH turns.\"\"\" self.is_slow = True self.slow_turns += length def scare(self, length): \"\"\" If this Bee has not been scared before, cause it to attempt to go backwards LENGTH times. \"\"\" # a bee can't be scared twice if self.has_been_scared: return else: self.is_scared = True self.scared_turns += length self.has_been_scared = True ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:5:4","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#extra-credit-2-pt"},{"categories":["Course"],"content":" Optional Problems ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:6:0","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#optional-problems"},{"categories":["Course"],"content":" Optional Problem 1 Implement the NinjaAnt, which damages all Bees that pass by, but can never be stung. A NinjaAnt does not block the path of a Bee that flies by. To implement this behavior, first modify the Ant class to include a new class attribute blocks_path that is set to True, then override the value of blocks_path to Falsein the NinjaAnt class. Second, modify the Beeâ€™s method blocked to return False if either there is no Ant in the Beeâ€™s place or if there is an Ant, but its blocks_path attribute is False. Now Bees will just fly past NinjaAnts. Finally, we want to make the NinjaAnt damage all Bees that fly past. Implement the action method in NinjaAntto reduce the health of all Bees in the same place as the NinjaAnt by its damage attribute. Similar to the FireAnt, you must iterate over a potentially changing list of bees. å¿è€…èšğŸ¥·ğŸœå“ˆå“ˆå“ˆå“ˆ, æ³¨æ„å‡ ä¸ªç»†èŠ‚: æ— æ³•è¢«èœœèœ‚æ”»å‡» ä¸ä¼šå µä½èœœèœ‚çš„è·¯, ä½†æ˜¯ä¼šå¯¹ç»è¿‡çš„èœœèœ‚é€ æˆä¼¤å®³ è¿™ä¸ªé—®é¢˜æ¯”è¾ƒç®€å•, è§£æ³•ä¹Ÿå‡ ä¹éƒ½å†™åœ¨äº†é—®é¢˜æè¿°é‡Œé¢ python class Bee(Insect): \"\"\"A Bee moves from place to place, following exits and stinging ants.\"\"\" def blocked(self): \"\"\"Return True if this Bee cannot advance to the next Place.\"\"\" if self.place.ant is None: return False if not self.place.ant.blocks_path: return False return True class NinjaAnt(Ant): \"\"\"NinjaAnt does not block the path and damages all bees in its place. This class is optional. \"\"\" name = 'Ninja' damage = 1 food_cost = 5 blocks_path = False implemented = True # Change to True to view in the GUI def action(self, gamestate): for bee in self.place.bees[:]: bee.reduce_health(self.damage) ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:6:1","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#optional-problem-1"},{"categories":["Course"],"content":" Optional Problem 2 The LaserAnt shoots out a powerful laser, damaging all that dare to stand in its path. Both Bees and Ants, of all types, are at risk of being damaged by LaserAnt. When a LaserAnt takes its action, it will damage all Insects in its place (excluding itself, but including its container if it has one) and the Places in front of it, excluding the Hive. If that were it, LaserAnt would be too powerful for us to contain. The LaserAnt has a base damage of 2. But, LaserAntâ€™s laser comes with some quirks. The laser is weakened by 0.25 each place it travels away fromLaserAntâ€™s place. Additionally, LaserAnt has limited battery. Each time LaserAnt actually damages an Insect its laserâ€™s total damage goes down by 0.0625 (1/16). If LaserAntâ€™s damage becomes negative due to these restrictions, it simply does 0 damage instead. æ¿€å…‰ğŸœ, æ³¨æ„å‡ ä¸ªç‰¹æ€§: ä¼¤å®³è‡ªå·±æ ¼å­æ‰€åœ¨çš„æ‰€æœ‰ç”Ÿç‰©, ç”šè‡³åŒ…æ‹¬æ•´æ¡è·¯å¾„ä¸Šçš„æ‰€æœ‰ç”Ÿç‰© ä½†æ˜¯æ¯æ¬¡å¯¹å…¶ä»–ç”Ÿç‰©é€ æˆä¼¤å®³çš„æ—¶å€™ä¼¤å®³ä¼šè¡°å‡, æ¯æ¬¡å‡å» 0.0625 æ¿€å…‰çš„å¨åŠ›è·Ÿå®ƒç¦»æ¿€å…‰èšğŸœçš„è·ç¦»ä¹Ÿæœ‰å…³ç³», è·ç¦»æ¯å¤šä¸€ä¸ªæ ¼å­, å°±ä¼šå‡å» 0.25 åªè¦å¤„ç†å¥½ä¸¤ä¸ªå‡½æ•°å³å¯ calculate_damage : è¿™ä¸ªè¦æ³¨æ„çš„åœ°æ–¹æ˜¯, å¦‚æœç®—å‡ºæ¥çš„ä¼¤å®³ \u003c 0, é‚£ä¹ˆä½ å°±éœ€è¦è¿”å› 0 insects_in_front : è¿™ä¸ªè¦è¿”å›ä¸€ä¸ª dict è¡¨ç¤ºæ¯ä¸ªç”Ÿç‰©è·ç¦»æ¿€å…‰ğŸœçš„è·ç¦». æˆ‘è¿™äº†æ˜¯åˆ†æˆå½“å‰æ ¼å­å’Œå‰©ä¸‹çš„æ ¼å­è¿™æ ·æ¥å¤„ç†, ä¸€è¾¹éå†æ‰€æœ‰æ ¼å­ä¸€è¾¹è®¡ç®—è·ç¦»å’ŒæŠŠç”Ÿç‰©åŠ åˆ°æˆ‘ä»¬çš„ dicté‡Œ. python class LaserAnt(ThrowerAnt): name = 'Laser' food_cost = 10 implemented = True # Change to True to view in the GUI damage = 2 def __init__(self, health=1): super().__init__(health) self.insects_shot = 0 self.current_damage = LaserAnt.damage def insects_in_front(self): \"\"\"Return a dict contains every Insect\"\"\" dis = {} for bee in self.place.bees: dis[bee] = 0 # take care of the ContainerAnt if self.place.ant is not self: dis[self.place.ant] = 0 pos = self.place.entrance distance = 1 while pos.entrance is not None: if not pos.is_hive: for bee in pos.bees: dis[bee] = distance if pos.ant is not None: dis[pos.ant] = distance # take care of the ContainerAnt if pos.ant.is_container and pos.ant.ant_contained is not None: dis[pos.ant.ant_contained] = distance distance += 1 pos = pos.entrance return dis def calculate_damage(self, distance): damage_result = self.damage - 0.0625 * self.insects_shot - 0.25 * distance return damage_result if damage_result \u003e 0 else 0 def action(self, gamestate): insects_and_distances = self.insects_in_front() for insect, distance in insects_and_distances.items(): damage = self.calculate_damage(distance) insect.reduce_health(damage) if damage: self.insects_shot += 1 ","date":"2022-03-10","objectID":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/:6:2","series":null,"tags":["Course"],"title":"CS61A çš„é¡¹ç›®ä¸‰ä¹‹ Ants vs SomeBees å®ç° (2021-Fall)","uri":"/zh-cn/proj3.ants-vs-somebees-of-cs61a-of-ucb/#optional-problem-2"},{"categories":["Course"],"content":"UCB CS61A çš„é¢˜ç›®ç­”æ¡ˆ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/"},{"categories":["Course"],"content":" Trees ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#trees"},{"categories":["Course"],"content":" Q1: Prune Min Write a function that prunes a Tree t mutatively. t and its branches always have zero or two branches. For the trees with two branches, reduce the number of branches from two to one by keeping the branch that has the smaller label value. Do nothing with trees with zero branches. Prune the tree in a direction of your choosing (top down or bottom up). The result should be a linear tree. é€’å½’çš„ç»†èŠ‚: å¶å­ç»“ç‚¹ : ç›´æ¥è¿”å› åªæœ‰ä¸€ä¸ªåˆ†æ”¯ : è™½ç„¶å½“å‰èŠ‚ç‚¹æ»¡è¶³æ¡ä»¶, ä½†æ˜¯å®ƒçš„å­æ ‘é‡Œå¯èƒ½æœ‰ä¸ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹, æ‰€ä»¥æˆ‘ä»¬è¦é€’å½’è£å‰ªåˆ†æ”¯ æœ‰ä¸¤ä¸ªåˆ†æ”¯ : æ‰¾åˆ°è¾ƒå°çš„åˆ†æ”¯, æŠŠè¾ƒå¤§çš„åˆ†æ”¯è£å‰ªæ‰(ç”¨ del) python def prune_min(t): \"\"\"Prune the tree mutatively. \"\"\" # base case: the leaf node has 0 children if t.is_leaf(): return # go deeper if it has 1 child if len(t.branches) == 1: prune_min(t.branches[0]) left, right = t.branches[0], t.branches[1] if left.label \u003c right.label: del t.branches[1] # prune right branch prune_min(left) else: del t.branches[0] # prune left branch prune_min(right) ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q1-prune-min"},{"categories":["Course"],"content":" Regex ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#regex"},{"categories":["Course"],"content":" Q4: Address First Line Write a regular expression that parses strings and returns any expressions which contain the first line of a US mailing address. US mailing addresses typically contain a block number, which is a sequence of 3-5 digits, following by a street name. The street name can consist of multiple words but will always end with a street type abbreviation, which itself is a sequence of 2-5 English letters. The street name can also optionally start with a cardinal direction (â€œNâ€, â€œEâ€, â€œWâ€, â€œSâ€). Everything should be properly capitalized. Proper capitalization means that the first letter of each name is capitalized. It is fine to have things like â€œWeirdCApitalizationâ€ match. See the doctests for some examples. æˆ‘ä»¬åœ¨è¿™é‡Œè¦åŒ¹é…ç¾å›½çš„é‚®ä»¶åœ°å€, ä¸‹é¢æ˜¯å…³äºè¿™ä¸ªçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç»†èŠ‚: å¼€å¤´æœ‰ 3 - 5 ä¸ªæ•°å­— ç„¶åæ˜¯ä¸€ä¸ªè¡—é“çš„åå­—, å¯èƒ½ä¼šæœ‰å¤šä¸ªå•è¯, ä½†æ˜¯ç»“å°¾ä¸€å®šæ˜¯è¡—é“ç±»å‹çš„ç¼©å†™(2 - 5 ä¸ªè‹±æ–‡å­—æ¯) ä½†æ˜¯è¡—é“åå­—ä¹Ÿæœ‰å¯èƒ½æ˜¯ â€œNâ€, â€œEâ€, â€œWâ€, â€œSâ€ è¿™å››ä¸ªå­—æ¯å¼€å¤´ ps. ä¸Šé¢è¯´åˆ°çš„æ˜¯ â€œproperly capitalizedâ€œ çš„å•è¯, å…·ä½“å®šä¹‰å¯ä»¥çœ‹é—®é¢˜æè¿°. æˆ‘çš„ç†è§£å°±æ˜¯å•è¯çš„å¼€å¤´ä¸€å®šè¦æ˜¯å¤§å†™, åé¢å°±éšä¾¿äº†~~ ä¸‹é¢æˆ‘ä»¬åˆ†è§£é—®é¢˜, æŠŠæ•´ä¸ªè¦åŒ¹é…çš„åœ°å€åˆ†ä¸ºä¸Šé¢æåˆ°çš„å‡ ä¸ªéƒ¨åˆ†: åŒºå· : è¿™ä¸ªç®€å•, \\d{2,5} å³å¯ å¯èƒ½çš„ â€œNâ€, â€œEâ€, â€œWâ€, â€œSâ€ å¼€å¤´, è¿™ä¸ªä¹Ÿç®€å•, ç”¨ (?:[NSWE] )? æ³¨æ„é‡Œé¢æœ‰ä¸€ä¸ªç©ºæ ¼ ç„¶åå°±æ˜¯è¡—é“åå­—è¦æ€ä¹ˆå†™äº†, è¡—é“åå­—å¯èƒ½åŒ…å«å¤šä¸ªå•è¯, æ¯ä¸ªå•è¯éƒ½è¦æ±‚å¼€å¤´å¤§å†™, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ•´åˆå‡ºè¿™æ ·çš„æ­£åˆ™è¡¨è¾¾å¼: [A-Z][A-Za-z]*(?: [A-Z][A-Za-z]*)*. é¦–å…ˆè¦æœ‰ä¸€ä¸ªå•è¯, ç„¶ååé¢å¯ä»¥æœ‰ä»»æ„ä¸ªç©ºæ ¼ + å•è¯çš„ç»„åˆ æœ€åæ˜¯è¦æœ‰è¡—é“ç±»å‹çš„ç¼©å†™, æ³¨æ„è¿™é‡Œä»ç„¶è¦æ˜¯å•è¯å¼€å¤´å¤§å†™, å…¶ä»–ä»»æ„, æœ¬æ¥æ˜¯ 2 - 5 ä¸ªå­—æ¯, ç°åœ¨å»æ‰äº†å¼€å¤´çš„ç¬¬ä¸€ä¸ªå¤§å†™å­—æ¯ä¹‹å, å‰©ä¸‹ 1 - 4 ä¸ªå­—æ¯. [A-Z][A-Za-z]{1,4}\\b. æœ€åçš„ \\b æ˜¯è®©æ­£åˆ™è¡¨è¾¾å¼åªåŒ¹é…å•è¯çš„ç»“å°¾. python def address_oneline(text): \"\"\" Finds and returns expressions in text that represent the first line of a US mailing address. \"\"\" block_number = r'\\d{3,5}' cardinal_dir = r'(?:[NSWE] )?' # whitespace is important! street = r'[A-Z][A-Za-z]*(?: [A-Z][A-Za-z]*)*' type_abbr = r' [A-Z][A-Za-z]{1,4}\\b' street_name = f\"{cardinal_dir}{street}{type_abbr}\" return re.findall(f\"{block_number} {street_name}\", text) ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q4-address-first-line"},{"categories":["Course"],"content":" SQL ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#sql"},{"categories":["Course"],"content":" Q5: Opening Times Youâ€™d like to have lunch before 1pm. Create a opening table with the names of all Pizza places that open before 1pm, listed in reverse alphabetical order. æ‰¾åˆ°å¼€åº—æ—¶é—´åœ¨ä¸‹åˆä¸€ç‚¹å‰çš„, æ³¨æ„æ•°æ®åº“é‡Œçš„æ—¶é—´æ˜¯ 24 å°æ—¶åˆ¶ sql CREATE TABLE opening AS SELECT name FROM pizzas WHERE open \u003c 13 ORDER BY name DESC; ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q5-opening-times"},{"categories":["Course"],"content":" Q6: Double Pizza If two meals are more than 6 hours apart, then thereâ€™s nothing wrong with going to the same pizza place for both, right? Create a double table with three columns. The first columns is the earlier meal, the second is the later meal, and the third is the name of a pizza place. Only include rows that describe two meals that are more than 6 hours apart and a pizza place that is open for both of the meals. The rows may appear in any order. è€ƒå¯Ÿè¡¨çš„è”åˆ, æ³¨æ„ç»†èŠ‚: ä¸¤é¡¿é¥­ä¹‹é—´é—´éš”è¦è¶…è¿‡å…­ä¸ªå°æ—¶ ç¬¬ä¸€é¡¿é¥­çš„å¼€å§‹æ—¶é—´åˆ°ç¬¬äºŒé¡¿é¥­çš„ç»“æŸæ—¶é—´è¦åœ¨é¥­åº—çš„è¥ä¸šæ—¶é—´å†… sql create TABLE double AS SELECT m1.meal, m2.meal, p.name FROM meals AS m1, meals AS m2, pizzas AS p WHERE m2.time - m1.time \u003e 6 AND m1.time \u003e= p.open AND m2.time \u003c= p.close; ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:3:2","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q6-double-pizza"},{"categories":["Course"],"content":" Objects ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:4:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#objects"},{"categories":["Course"],"content":" Q7: Player First, letâ€™s implement the Player class. Fill in the debate and speech methods, that take in another Player other, and implement the correct behavior as detailed above. Here are two additional things to keep in mind: In the debate method, you should call the provided random function, which returns a random float between 0 and 1. The player should gain 50 popularity if the random number is smaller than the probability described above, and lose 50 popularity otherwise. Neither playersâ€™ popularity should ever become negative. If this happens, set it equal to 0 instead. è®¡ç®—æ–¹æ³•åœ¨è§„åˆ™é‡Œé¢å·²ç»ç»™å‡º, è¿™é‡Œè¦æ³¨æ„ speech æ–¹æ³•é‡Œé¢è¦ä¿®æ”¹ votes å’Œ popularity python class Player: def __init__(self, name): self.name = name self.votes = 0 self.popularity = 100 def debate(self, other): prob1 = max(0.1, self.popularity / (self.popularity + other.popularity)) #prob2 = max(0.1, other.popularity / (self.popularity + other.popularity)) if random() \u003e prob1: self.popularity -= 50 else: self.popularity += 50 if self.popularity \u003c 0: self.popularity = 0 def speech(self, other): self.votes += (self.popularity // 10) self.popularity += (self.popularity // 10) other.popularity -= (other.popularity // 10) def choose(self, other): return self.speech ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:4:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q7-player"},{"categories":["Course"],"content":" Q8: Game Now, implement the Game class. Fill in the play method, which should alternate between the two players, starting with p1, and have each player take one turn at a time. The choose method in the Player class returns the method, either debate or speech, that should be called to perform the action. In addition, fill in the winner property method, which should return the player with more votes, or None if the players are tied. æ ¹æ® self.turn æ˜¯å¥‡æ•°è¿˜æ˜¯å¶æ•°æ¥å†³å®šå½“å‰è½®åˆ°è°, æ³¨æ„ choose æ–¹æ³•è¿”å›çš„ä»ç„¶æ˜¯å‡½æ•°, æ‰€ä»¥ä½ éœ€è¦ç»™ä»–å‚æ•°æ‰è¡Œ python class Game: def __init__(self, player1, player2): self.p1 = player1 self.p2 = player2 self.turn = 0 def play(self): while not self.game_over: if self.turn % 2 == 0: self.p1.choose(self.p2)(self.p2) else: self.p2.choose(self.p1)(self.p1) self.turn += 1 return self.winner @property def game_over(self): return max(self.p1.votes, self.p2.votes) \u003e= 50 or self.turn \u003e= 10 @property def winner(self): if self.p1.votes \u003e self.p2.votes: return self.p1 else: return self.p2 ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q8-game"},{"categories":["Course"],"content":" Q9: New Players The choose method in the Player class is boring, because it always returns the speech method. Letâ€™s implement two new classes that inherit from Player, but have more interesting choose methods. Implement the choose method in the AggressivePlayer class, which returns the debate method if the playerâ€™s popularity is less than or equal to otherâ€™s popularity, and speech otherwise. Also implement the choose method in the CautiousPlayer class, which returns the debate method if the playerâ€™s popularity is 0, and speech otherwise. ç¿»è¯‘ä¸€ä¸‹é¢˜ç›®çš„æ„æ€å³å¯ :) python class AggressivePlayer(Player): def choose(self, other): if self.popularity \u003c= other.popularity: return self.debate else: return self.speech class CautiousPlayer(Player): def choose(self, other): if self.popularity == 0: return self.debate else: return self.speech ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:4:3","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q9-new-players"},{"categories":["Course"],"content":" Tree Recursion Define the function add_trees, which takes in two trees and returns a new tree where each corresponding node from the first tree is added with the node from the second tree. If a node at any particular position is present in one tree but not the other, it should be present in the new tree as well. Hint: You may want to use the built-in zip function to iterate over multiple sequences at once. è¿™ä¸€é¢˜è¦æˆ‘ä»¬æŠŠä¸€æ£µæ ‘åˆå¹¶åˆ°å¦å¤–ä¸€æ£µæ ‘ä¸Šå». æ³¨æ„åŒºåˆ†è°æ˜¯ä¸»ä½“(å¯¹åé¢æ€è€ƒå¦‚ä½•é€’å½’è§£å†³å¾ˆæœ‰ç”¨). å¦‚ä½•ç”¨é€’å½’è§£å†³? base case: æˆ‘ä»¬æ˜¯æŠŠæ ‘ t2 åŠ åˆ°æ ‘ t1 ä¸Š, é‚£å¦‚æœ t2 æ˜¯ None çš„è¯ä¸å°±ä¸ç”¨åŠ äº†å— ? æ˜¯çš„, è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬çš„ä¸€ä¸ª base case ğŸ¤— åœ¨ t2 ä¸ä¸ºç©ºçš„åŸºç¡€ä¸Š, å¦‚æœ t1 å› ä¸ºç©ºå‘¢ ? æ˜¾ç„¶, è¿™ä¸ªæ—¶å€™ä¸¤æ£µæ ‘ç›¸åŠ çš„ç»“æœå°±æ˜¯ t2, æ‰€ä»¥æˆ‘ä»¬è¿”å› t2 å³å¯. é€’å½’åˆ†è§£ è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä¿è¯ t1 å’Œ t2 éƒ½æ˜¯éç©ºçš„, ä½†æ˜¯æˆ‘ä»¬æ— æ³•ä¿è¯ä»–ä»¬ä¸¤ä¸ªçš„å­©å­æ•°ç›®æ˜¯ä¸€æ ·å¤šçš„, æ‰€ä»¥æˆ‘ä»¬æ— æ³•æ ¹æ®æç¤ºé‡Œä½¿ç”¨ zip. å› ä¸º zip åœ¨å¤„ç†ä¸¤ä¸ªä¸¤ä¸ªä¸ä¸€æ ·é•¿çš„åºåˆ—çš„æ—¶å€™, é•¿çš„åºåˆ—å¤šçš„éƒ¨åˆ†æ˜¯è¢«å¿½ç•¥çš„. è¿™é‡Œåº”è¯¥ç”¨ itertools é‡Œé¢çš„ zip_longest, å¦‚æœä¸€ä¸ªåºåˆ—å·²ç»ä¸ºç©ºä¼šè¿”å› None. è¿™æ ·æˆ‘ä»¬æ‰èƒ½ä¿è¯è¿™æ ·é€’å½’è°ƒç”¨æœ€åå¯ä»¥å›åˆ°æˆ‘ä»¬å‰é¢è®¨è®ºçš„ base case ä¸­. é‚£æˆ‘ä»¬åœ¨å½“å‰èŠ‚ç‚¹åšçš„äº‹æƒ…å°±æ˜¯: ç›¸åŠ ä¸¤ä¸ªèŠ‚ç‚¹çš„ label, ç„¶åå¯¹ä»–ä»¬çš„å­æ ‘éƒ½é€’å½’è°ƒç”¨å³å¯. ğŸš€ python def add_trees(t1, t2): # base case: no need to add_trees anymore if t2 is None: return t1 if t1 is None: return t2 else: # both of t1 and t2 are not None # however, the number of children may not equal return Tree(t1.label + t2.label, [add_trees(x, y) for x, y in zip_longest(t1.branches, t2.branches)]) ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:5:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#tree-recursion"},{"categories":["Course"],"content":" Linked Lists ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:6:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#linked-lists"},{"categories":["Course"],"content":" Q11: Fold Left Write the left fold function by filling in the blanks. è¿™ä¸ªæ˜¯è‡ªé¡¶å‘ä¸‹è®¡ç®—çš„, ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨è¿›å…¥æ›´æ·±å±‚çš„é€’å½’è°ƒç”¨ä¹‹å‰ä¼šå…ˆè®¡ç®—ç»“æœ, å¹¶å°†è¿™ä¸ªç»“æœä¼ é€’ä¸‹å», å½“æˆ‘ä»¬åˆ°è¾¾äº†ç©ºç»“ç‚¹(è¯´æ˜æˆ‘ä»¬åšå®Œäº†æ‰€æœ‰çš„è¿ç®—)å°±å¾—åˆ°äº†ç»“æœ. æ‰€ä»¥ base case é‡Œé¢çš„ z å·²ç»ä¸æ˜¯ä¸€å¼€å§‹çš„ z äº†, è€Œæ˜¯æˆ‘ä»¬æœ€åè¦å¾—åˆ°çš„è¿ç®—ç»“æœçš„ z python def foldl(link, fn, z): \"\"\" Left fold \u003e\u003e\u003e lst = Link(3, Link(2, Link(1))) \u003e\u003e\u003e foldl(lst, sub, 0) # (((0 - 3) - 2) - 1) -6 \u003e\u003e\u003e foldl(lst, add, 0) # (((0 + 3) + 2) + 1) 6 \u003e\u003e\u003e foldl(lst, mul, 1) # (((1 * 3) * 2) * 1) 6 \"\"\" if link is Link.empty: return z z = fn(z, link.first) return foldl(link.rest, fn, z) ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:6:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q11-fold-left"},{"categories":["Course"],"content":" Q12: Fold Right Now write the right fold function. å…¶å®è¿™ä¸ªé—®é¢˜ä¼šæ¯” Q1 æ›´ä¸ºç®€å•, æ›´ç¬¦åˆæˆ‘ä»¬å¯¹é€’å½’çš„è®¤çŸ¥. æˆ‘ä»¬ä»æœ€åº•å±‚é€å±‚è¿”å›ç»“æœè¿ç®—. å¯ä»¥çœ‹ä¸‹é¢çš„ä¾‹å­ç†è§£ä¸€ä¸‹ python def foldr(link, fn, z): \"\"\" Right fold \u003e\u003e\u003e lst = Link(3, Link(2, Link(1))) \u003e\u003e\u003e foldr(lst, sub, 0) # (3 - (2 - (1 - 0))) 2 \u003e\u003e\u003e foldr(lst, add, 0) # (3 + (2 + (1 + 0))) 6 \u003e\u003e\u003e foldr(lst, mul, 1) # (3 * (2 * (1 * 1))) 6 \"\"\" if link.rest is Link.empty: return fn(link.first, z) return fn(link.first, foldr(link.rest, fn, z)) ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:6:2","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q12-fold-right"},{"categories":["Course"],"content":" Regex ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:7:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#regex-1"},{"categories":["Course"],"content":" Q13: Basic URL Validation In this problem, we will write a regular expression which matches a URL. URLs look like the following: For example, in the link https://cs61a.org/resources/#regular-expressions, we would have: Scheme: https Domain Name: cs61a.org Path to the file: /resources/ Anchor: #regular-expressions The port and parameters are not present in this example and you will not be required to match them for this problem. You can reference this documentation from MDN if youâ€™re curious about the various parts of a URL. For this problem, a valid domain name consists of any sequence of letters, numbers, dashes, and periods. For a URL to be â€œvalid,â€ it must contain a valid domain name and will optionally have a scheme, path, and anchor. A valid scheme will either be http or https. Valid paths start with a slash and then must be a valid path to a file or directory. This means they should match something like /composingprograms.html or path/to/file but not /composing.programs.html/. A valid anchor starts with #. While they are more complicated, for this problem assume that valid anchors will then be followed by letters, numbers, hyphens, or underscores. Hint 1: You can use \\ to escape special characters in regex. \u003eHint 2: The provided code already handles making the scheme, path, and anchor optional by using non-capturing groups. è¦å­¦ä¼šå°†å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œæ‹†è§£, ä¸€ä¸ªéƒ¨åˆ†ä¸€ä¸ªéƒ¨åˆ†çš„å®Œæˆ. é¢˜ç›®å·²ç»ä¸ºæˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªå·¥ä½œ. æ¥ä¸‹æ¥æˆ‘è®²è§£ä¸€ä¸‹æ¯ä¸ªéƒ¨åˆ†çš„è®¾è®¡è¦ç‚¹ scheme : è¿™ä¸ªç®€å•, è¦ä¹ˆæ˜¯ http è¦ä¹ˆæ˜¯ https, æˆ‘ä»¬å¯ä»¥ç”¨ (?:...) æ¥å†™ domain : www å¯ä»¥æœ‰ä¹Ÿå¯ä»¥æ²¡æœ‰, å¯ä»¥ç”¨ (?:...)? æ¥è¡¨è¾¾è¿™ç‚¹ path to the file: åŒ…å«ä¸‹é¢ä¸‰ç§å¯èƒ½çš„æ ¼å¼: /path/to/file.extension, /path, /file.extension anchor : è¿™ä¸ªå¯èƒ½åŒ…æ‹¬å­—æ¯ã€æ•°å­—ã€çŸ­æ¨ªçº¿ -, ä¸‹åˆ’çº¿ _ python def match_url(text): scheme = r'(?:https|http)://' domain = r'(?:\\w+\\.)?\\w+\\.\\w+' path = r'(?:/\\w+|/(\\w+/)*)(\\w+\\.\\w+)?' anchor = r'#[\\w\\-_]*' return bool(re.match(rf\"^(?:{scheme})?{domain}(?:{path})?(?:{anchor})?$\", text)) ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:7:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q13-basic-url-validation"},{"categories":["Course"],"content":" BNF ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:8:0","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#bnf"},{"categories":["Course"],"content":" Q14: Simple CSV CSV, which stands for â€œComma Separated Values,â€ is a file format to store columnar information. We will write a BNF grammar for a small subset of CSV, which we will call SimpleCSV. Create a grammar that reads SimpleCSV, where a file contains rows of words separated by commas. Words are characters [a-zA-Z] (and may be blank!) Spaces are not allowed in the file. å†™ä¸€ä¸ªç®€å•çš„ csv æ–‡ä»¶çš„ BNF, è¿™é‡Œè¯´çš„ç®€å•æ˜¯å› ä¸º: å€¼åªèƒ½æ˜¯å•è¯, åˆ†éš”ç¬¦ä¸€å®šæ˜¯ , ç»†èŠ‚: æœ‰å¯èƒ½æœ‰ ,,, çš„æƒ…å†µå‡ºç°, æ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨ word é‡Œé¢ç”¨ | æ¥ç®—ä¸Šä¸æ”¾ä»»ä½•å­—ç¬¦çš„æƒ…å†µ text lines: line (newline line)* | line newline | line line: word (\",\" word)* word: WORD | newline: \"\\n\" %import common.WORD ","date":"2022-03-03","objectID":"/zh-cn/lab14-cs61a-of-ucb/:8:1","series":null,"tags":["Course"],"title":"Lab14 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab14-cs61a-of-ucb/#q14-simple-csv"},{"categories":["Course"],"content":"The simple solutions of hw10 of CS61A of UCB","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" BNF ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#bnf"},{"categories":["Course"],"content":" Q1: Grouping and Pipes In this question, you will add support for grouping and piping. Recall that grouping allows for an entire regular expression to be treated as a single unit, and piping allows for a pattern to match an expression on either side. Combined, these will let us create patterns which match multiple strings! Define the group and pipe expressions in your grammar. A group consists of any regex expression surrounded by parentheses (()). A pipe operator consists of a regex expression, followed by a pipe (|) character, and lastly followed by another regex expression. For example, r\"apples\" would match exactly the phrase â€œapplesâ€ in an input. If we wanted our pattern from before to match â€œorangesâ€ as well, we could expand our rstring to do so using groupings and pipes: r\"(apples)|(oranges)\". Hint: note that groups and pipes are valid regex expressions on their own! You may need to update a previously defined expression. ç»™æœ¬æ¥ç”¨æ¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„ BNF æ·»åŠ åŠŸèƒ½: group å’Œ pipe. å…¶å®æ€ä¹ˆå®ç°è¿™ä¸€å†™å·²ç»åœ¨æè¿°é‡Œé¢ç»™å‡ºäº†, æˆ‘è¿™é‡Œå°±æä¸€ç‚¹: group å’Œ pipe æœ¬èº«ä¹Ÿæ˜¯ ?regex çš„ä¸€éƒ¨åˆ†, æ‰€ä»¥è¦æŠŠä»–ä»¬åŠ åˆ° ?regex é‡Œé¢ text ?start: rstring rstring: \"r\\\"\" regex* \"\\\"\" ?regex: character | word | group | pipe group: \"(\" regex* \")\" pipe: regex \"|\" regex character: LETTER | NUMBER word: WORD %ignore /\\s+/ %import common.LETTER %import common.NUMBER %import common.WORD ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#q1-grouping-and-pipes"},{"categories":["Course"],"content":" Q2: Classes Now, we will add support for character classes. Recall that character classes allow for the pattern to match any singular character defined within the class. The class itself consists either of individual characters, or ranges of characters. Specifically, we define the following: A range consists of either NUMBERs or LETTERs separated by a hyphen (-). A class expression consists of any number of characters or character ranges surrounded by square brackets ([]). Note that for this question, a range may only consist of either NUMBERs or LETTERs; this means that while [0-9] and [A-Z] are valid ranges, [0-Z] would not be a valid range. In addition, the characters and ranges in a class may appear in any order and any number of times. For example, [ad-fc0-9], [ad-f0-9c], [a0-9d-fc], and [0-9ad-fc] are all valid classes. è¿™æ¬¡è¦åŠ ä¸Šçš„åŠŸèƒ½æ˜¯ ?-? å’Œ [] çš„åŠŸèƒ½, å…·ä½“æ€ä¹ˆåšåŒæ ·åœ¨é—®é¢˜æè¿°é‡Œé¢ç»™å‡ºäº†. è¿™é‡Œè®²ä¸€ä¸‹æ³¨æ„çš„ç‚¹: range çš„ - å·¦å³ä¸¤è¾¹è¦æ˜¯å¯¹åº”çš„, æ‰€ä»¥ character \"-\" character è¿™ç§å†™æ³•æ˜¯é”™çš„ åœ¨ [] é‡Œ, è¦ä¹ˆæ˜¯ range, è¦ä¹ˆæ˜¯ character, å¯ä»¥ç”¨ (range|character) è¡¨ç¤ºï¼Œåé¢ç”¨ * è¡¨ç¤º any number [] æœ¬èº«ä¹Ÿæ˜¯åˆæ³•çš„æ­£åˆ™è¡¨è¾¾å¼, æ‰€ä»¥è¦æ”¾åœ¨ ?regex é‡Œé¢ text ?start: rstring rstring: \"r\\\"\" regex* \"\\\"\" ?regex: character | word | group | pipe | class group: \"(\" regex* \")\" pipe: regex \"|\" regex range: NUMBER \"-\" NUMBER | LETTER \"-\" LETTER class: \"[\" (range|character)* \"]\" character: LETTER | NUMBER word: WORD %ignore /\\s+/ %import common.LETTER %import common.NUMBER %import common.WORD ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#q2-classes"},{"categories":["Course"],"content":" Q3: Quantifiers Lastly, we will add support for quantifiers. Recall that quantifiers allow for a pattern to match a specified number of a unit. Specifically, we define the following: A plus_quant expression consists of a group, a character, or a class, followed by a plus symbol (+). A star_quant expression consists of a group, a character, or a class, followed by a star symbol (*). A num_quant expression consists of either a group, a character, or a class, followed by one of the following: a NUMBER enclosed in curly braces ({}); a range of NUMBERs (separated by a comma (,), which may potentially be open on only one side. For example, {2,7}, {2,}, and {,7} are valid numeric quantifiers. {,} is not valid. Hint: these three quantifiers share many similarities. Consider defining additional expressions in this question! å¯ä»¥å‘ç°è¿™ä¸‰ä¸ª _quant éƒ½æ˜¯ group æˆ–è€… character æˆ–è€… classå¼€å¤´, æ‰€ä»¥è¿™é‡Œå¯ä»¥å®šä¹‰ä¸€ä¸ª ?tmp: class | group | character é¿å…é‡å¤. åŒæ—¶å®šä¹‰ ?quants: plus_quant | star_quant | num_quant, æ”¾åœ¨ ?regex é‡Œ è¿™é‡Œ num_quant éœ€è¦æšä¸¾ä¸‹é¢è¿™å‡ ç§æƒ…å†µ {NUMBER, NUMBER} or {NUMBER} -\u003e (NUMBER (\",\", NUMBER)?) {NUMBER,} -\u003e (NUMBER \",\") {,NUMBER} -\u003e (\",\" NUMBER) text rstring: \"r\\\"\" regex* \"\\\"\" ?regex: character | word | group | pipe | class | quants group: \"(\" regex* \")\" pipe: regex \"|\" regex range: NUMBER \"-\" NUMBER | LETTER \"-\" LETTER class: \"[\" range* character* range* character* \"]\" ?tmp: class | group | character plus_quant: tmp \"+\" star_quant: tmp \"*\" num_quant: tmp \"{\" ((NUMBER (\",\" NUMBER)?) | (NUMBER \",\") | (\",\" NUMBER)) \"}\" ?quants: plus_quant | star_quant | num_quant character: LETTER | NUMBER word: WORD %ignore /\\s+/ %import common.LETTER %import common.NUMBER %import common.WORD ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:1:3","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#q3-quantifiers"},{"categories":["Course"],"content":" SQL ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#sql"},{"categories":["Course"],"content":" Q4: Size of Dogs The FÃ©dÃ©ration Cynologique Internationale classifies a standard poodle as over 45 cm and up to 60 cm. The sizes table describes this and other such classifications, where a dog must be over the min and less than or equal to the max in height to qualify as a size. Create a size_of_dogs table with two columns, one for each dogâ€™s name and another for its size. è¦æ ¹æ®ç‹—çš„ä½“å‹å¤§å°æ¥å†³å®šå®ƒçš„ size. è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ select ... from ... where çš„å†™æ³•. æˆ‘ä»¬è¿™é‡Œå¯ä»¥æŠŠä¸¤ä¸ªè¡¨è¿æ¥èµ·æ¥å¾—åˆ°æ‰€æœ‰å¯èƒ½çš„ç»“æœ, ç„¶åç”¨ where æ¥é€‰å‡ºç¬¦åˆæ¡ä»¶çš„. æ³¨æ„è¿™é‡Œç”¨ alias ä¼šæ¯”è¾ƒç®€æ´ mysql CREATE TABLE size_of_dogs AS SELECT d.name, s.size FROM dogs as d, sizes as s where d.height \u003c= s.max and d.height \u003e s.min; ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#q4-size-of-dogs"},{"categories":["Course"],"content":" Q5: By Parent Height Create a table by_parent_height that has a column of the names of all dogs that have a parent, ordered by the height of the parent from tallest parent to shortest parent. ç”¨ ORDER BY æ¥è¿›è¡Œæ’åº, æ³¨æ„æ˜¯é™åºæ‰€ä»¥ç”¨ DESC mysql CREATE TABLE siblings AS SELECT p1.child AS dogone, p2.child AS dogtwo, s1.size AS dogonesize, s2.size AS dogtwosize FROM parents AS p1, parents AS p2, size_of_dogs AS s1, size_of_dogs AS s2 WHERE p1.parent = p2.parent AND p1.child \u003c p2.child AND p1.child = s1.name AND p2.child = s2.name; -- Use `\u003c` to filter the result -- `!=` is not enough, you will get `barack clinton` and `clinton barack` in the same time ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#q5-by-parent-height"},{"categories":["Course"],"content":" Q6: Sentences There are two pairs of siblings that have the same size. Create a table that contains a row with a string for each of these pairs. Each string should be a sentence describing the siblings by their size. Each sibling pair should appear only once in the output, and siblings should be listed in alphabetical order (e.g. \"barack plus clinton...\" instead of \"clinton plus barack...\"), as follows: Hint: First, create a helper table containing each pair of siblings. This will make comparing the sizes of siblings when constructing the main table easier. Hint: If you join a table with itself, use AS within the FROM clause to give each table an alias. Hint: In order to concatenate two strings into one, use the || operator. å®Œæˆäº† Q5 ä¹‹åè¿™ä¸€é¢˜å°±å¾ˆç®€å•äº†. mysql CREATE TABLE sentences AS SELECT \"The two siblings, \" || dogone || \" plus \" || dogtwo || \" have the same size: \" || dogonesize FROM siblings WHERE dogonesize = dogtwosize AND dogone \u003c dogtwo; ","date":"2022-03-02","objectID":"/zh-cn/hw10-of-cs61a-of-ucb/:2:3","series":null,"tags":["Course"],"title":"Hw10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw10-of-cs61a-of-ucb/#q6-sentences"},{"categories":["Course"],"content":"the simple solutions for lab12 of CS61A of UCB","date":"2022-03-02","objectID":"/zh-cn/lab12-ca61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab12 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab12-ca61a-of-ucb/"},{"categories":["Course"],"content":" Regular Expressions ","date":"2022-03-02","objectID":"/zh-cn/lab12-ca61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab12 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab12-ca61a-of-ucb/#regular-expressions"},{"categories":["Course"],"content":" Q1: Calculator Ops Write a regular expression that parses strings written in the 61A Calculator language and returns any expressions which have two numeric operands, leaving out the parentheses around them. å†™ä¸€ä¸ªç¬¦åˆ (operand operator1 operator2) æ ¼å¼çš„æ­£åˆ™è¡¨è¾¾å¼. è¿™ä¸ªæ˜¯æ¯”è¾ƒç®€å•çš„, å› ä¸ºè¿™é‡Œçš„è¿ç®—ç¬¦åªæœ‰ +, -, *, /. æˆ‘ä»¬ç”¨ [] æ‹¬èµ·æ¥å°±å¯ä»¥, ä½†æ˜¯è¦æ³¨æ„**- éœ€è¦ç”¨ \\ è½¬ä¹‰** python def calculator_ops(calc_str): \"\"\" Finds expressions from the Calculator language that have two numeric operands and returns the expression without the parentheses. \"\"\" return re.findall(r'[+\\-*/] \\d+ \\d+', calc_str) ","date":"2022-03-02","objectID":"/zh-cn/lab12-ca61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab12 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab12-ca61a-of-ucb/#q1-calculator-ops"},{"categories":["Course"],"content":" BNF ","date":"2022-03-02","objectID":"/zh-cn/lab12-ca61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab12 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab12-ca61a-of-ucb/#bnf"},{"categories":["Course"],"content":" Q3: Linked List BNF In this problem, weâ€™re going to define a BNF that parses integer Linked Lists created in Python. We wonâ€™t be handling Link.empty. For reference, here are some examples of Linked Lists: Your implementation should be able to handle nested Linked Lists, such as the third example below. Link(2) Link(12, Link(2)) Link(5, Link(7, Link(Link(8, Link(9))))) è¦å†™ä¸€ä¸ªèƒ½åŒ¹é…é“¾è¡¨(é™¤äº†ç©ºç»“ç‚¹çš„)çš„ Context-free grammar. ä¾‹å­å·²ç»åœ¨é—®é¢˜çš„æè¿°é‡Œé¢ç»™å‡ºäº† æ€è·¯æ˜¯è¿™æ ·çš„: é“¾è¡¨çš„å¼€å¤´è‚¯å®šæ˜¯ Link(, ç„¶åæˆ‘ä»¬å¯ä»¥æŠŠé“¾è¡¨é‡Œé¢åˆ†ä¸º link_first å’Œ link_rest éƒ¨åˆ†, ä»–ä»¬è¦ä¹ˆæ˜¯æ•°å­—, è¦ä¹ˆå°±æ˜¯å¦ä¸€ä¸ªé“¾è¡¨. è‡³äºé“¾è¡¨çš„è¯­æ³•æ˜¯è¿™æ ·çš„: link_first å’Œ link_rest æœ‰å¯èƒ½æ˜¯é“¾è¡¨ä¹Ÿæœ‰å¯èƒ½æ˜¯æ™®é€šçš„æ•°å­—; link_rest å¯èƒ½æ˜¯ç©ºçš„. æ ¹æ®è¿™äº›è§„åˆ™, æˆ‘ä»¬å¯ä»¥å†™å‡º BNF text link: \"Link(\" link_first \")\" | \"Link(\" link_first \",\" link_rest \")\" ?link_first: NUMBER | link ?link_rest: NUMBER | link %ignore /\\s+/ %import common.NUMBER ","date":"2022-03-02","objectID":"/zh-cn/lab12-ca61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab12 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab12-ca61a-of-ucb/#q3-linked-list-bnf"},{"categories":["Course"],"content":" Q4: Tree BNF Now, we will define a BNF to parse Trees with integer leaves created in Python. Here are some examples of Trees: Your implementation should be able to handle Trees with no branches and one or more branches. Tree(2) Tree(6, [Tree(1), Tree(3, [Tree(1), Tree(2)])]) ç»™æ ‘å®šä¹‰ä¸€ä¸ª CFG: tree_node: å¯ä»¥æ˜¯åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹çš„æ ‘, ä¹Ÿå¯ä»¥æ˜¯æœ‰ç»“ç‚¹è¿˜æœ‰åˆ†æ”¯çš„æ ‘, æ³¨æ„åˆ†æ”¯å¯ä»¥æœ‰ä»»æ„ä¸ª(åŒ…æ‹¬ 0), æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ + ?label: å°±æ˜¯æ•°å­—, ç›´æ¥ç”¨ NUMBER å³å¯ branches: å¯ä»¥æ˜¯åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹, æˆ–è€…æœ‰å¤šä¸ªèŠ‚ç‚¹(æ­¤æ—¶æˆ‘ä»¬è¦æŠŠ , å·åŒ¹é…è¿›å») text tree_node: \"Tree(\" label \")\" | \"Tree(\" label \",\" branches* \")\" ?label: NUMBER branches: \"[\" tree_node \"]\" | \"[\" tree_node \",\" tree_node+ \"]\" %ignore /\\s+/ %import common.NUMBER ","date":"2022-03-02","objectID":"/zh-cn/lab12-ca61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Lab12 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab12-ca61a-of-ucb/#q4-tree-bnf"},{"categories":["Course"],"content":"The simple solutions of hw09 of CS61A of UCB","date":"2022-03-01","objectID":"/zh-cn/hw09-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Hw09 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw09-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" Q2: Roman Numerals Write a regular expression that finds any string of letters that resemble a Roman numeral and arenâ€™t part of another word. A Roman numeral is made up of the letters I, V, X, L, C, D, M and is at least one letter long. For the purposes of this problem, donâ€™t worry about whether or not a Roman numeral is valid. For example, â€œVIIIIIâ€ is not a Roman numeral, but it is fine if your regex matches it. è¦æˆ‘ä»¬å†™æ­£åˆ™è¡¨è¾¾å¼, æ³¨æ„é¢˜ç›®ç»™å‡ºçš„å…³é”®ä¿¡æ¯: å¯èƒ½å‡ºç°çš„å­—ç¬¦æ˜¯ I, V, X, L, C, D, M, è¡¨ç¤ºæˆ–è¿™ä¸ªå…³ç³»å¯ä»¥ç”¨ [] è‡³å°‘ä¼šå‡ºç° 1 ä¸ªå­—ç¬¦. è¡¨è¾¾è‡³å°‘æœ‰ä¸€ä¸ªåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ç”¨ + è¿™äº›å­—æ¯å‡ºç°çš„æ—¶å€™ä¸èƒ½æ˜¯å…¶ä»–å•è¯çš„ä¸€éƒ¨åˆ†. è¿™ä¸ªå¯ä»¥ç”¨ \\b. æ ¹æ®æ–‡æ¡£é‡Œè¯´çš„, å®ƒæ˜¯ç”¨æ¥åŒ¹é…å•è¯å¼€å¤´æˆ–è€…æ˜¯ç»“å°¾çš„(Matches the empty string, but only at the beginning or end of a word) python def roman_numerals(text): \"\"\" Finds any string of letters that could be a Roman numeral (made up of the letters I, V, X, L, C, D, M). \"\"\" return re.findall(r'\\b[IVXLCDM]+\\b', text) ","date":"2022-03-01","objectID":"/zh-cn/hw09-of-cs61a-of-ucb/:0:1","series":null,"tags":["Course"],"title":"Hw09 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw09-of-cs61a-of-ucb/#q2-roman-numerals"},{"categories":["Course"],"content":" Q3: CS Classes On reddit.com, there is an /r/berkeley subreddit for discussions about everything UC Berkeley. However, there is such a large amount of CS-related posts that those posts are auto-tagged so that readers can choose to ignore them or read only them. Write a regular expression that finds strings that resemble a CS class- starting with â€œCSâ€, followed by a number, and then optionally followed by â€œAâ€, â€œBâ€, or â€œCâ€. Your search should be case insensitive, so both â€œCS61Aâ€ and â€œcs61aâ€ would match. æå–æ­£åˆ™è¡¨è¾¾å¼çš„å…³é”®ä¿¡æ¯: ä¸ç®¡æ˜¯å¼€å¤´çš„ CS è¿˜æ˜¯æœ«å°¾çš„ ABC éƒ½æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„. ç”¨ [] æšä¸¾å³å¯ CS å’Œåé¢çš„æ•°å­—ä¹‹é—´å¯èƒ½æœ‰ç©ºæ ¼, è¿™ä¸ªæˆ‘ä»¬ç”¨ ? å³å¯. python def cs_classes(post): \"\"\" Returns strings that look like a Berkeley CS class, starting with \"CS\", followed by a number, optionally ending with A, B, or C and potentially with a space between \"CS\" and the number. Case insensitive. \"\"\" return bool(re.search(r'[Cc][Ss] ?\\d+[ABCabc]?', post)) ","date":"2022-03-01","objectID":"/zh-cn/hw09-of-cs61a-of-ucb/:0:2","series":null,"tags":["Course"],"title":"Hw09 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw09-of-cs61a-of-ucb/#q3-cs-classes"},{"categories":["Course"],"content":" Q4: Time for Times Youâ€™re given a body of text and told that within it are some times. Write a regular expression which, for a few examples, would match the following: text ['05:24', '7:23', '23:59', '12:22', '00:00'] but would not match these invalid â€œtimesâ€ text ['05:64', '70:23'] You may find non-capturing groups helpful to use for this question. ä¹Ÿå°±æ˜¯è¦åŒ¹é…æ—¶é—´çš„æ ¼å¼, è€Œä¸”è¦æ˜¯æœ‰æ•ˆæ—¶é—´(00:00 ~ 23:59), æ³¨æ„è¦å¤„ç†ä¸‹é¢å››ä¸ªæ•°å­—çš„å…³ç³» ç¬¬ä¸€ä½: å¯ä»¥æœ‰å‰å¯¼ 0 æˆ–è€…çœç•¥, 1 ä¹Ÿæ˜¯åˆæ³•çš„. éš¾ç‚¹åœ¨äº 2, å› ä¸ºæˆ‘ä»¬çŸ¥é“å½“æ ¼å¼æ˜¯ 2?:?? çš„æ—¶å€™æœ€å¤šåªèƒ½åˆ° 23:59 ç¬¬äºŒä½: è¿™ä¸ªåœ¨å¼€å¤´ä¸æ˜¯ 2 çš„æ—¶å€™å°±æ˜¯ 0 ~ 9 ç¬¬ä¸‰ä½å’Œç¬¬å››ä½: 00 ~ 59 è¿™ä¹ˆä¸€æƒ³è¿™ä¸€é“é¢˜è¿˜æŒºå¤æ‚ :( ç„¶åæˆ‘å»çœ‹çœ‹æç¤ºå‘ç°äº†ä¸€ä¸ªå¥½ç”¨çš„å†™æ³• (?:...), è¡¨ç¤ºæˆ‘ä»¬æƒ³åŒ¹é…ä½†æ˜¯ä¸æŠŠ () é‡Œçš„ç»“æœä¿å­˜ä¸‹æ¥è¿”å›. è¿˜æœ‰æœ«å°¾çš„ AM å°±å¯ä»¥ç”¨ (?:AM)? æ¥å¤„ç† python def match_time(text): return re.findall(r'(?:[01]?\\d|2[0-3]):[0-5][0-9](?:AM)?', text) ","date":"2022-03-01","objectID":"/zh-cn/hw09-of-cs61a-of-ucb/:0:3","series":null,"tags":["Course"],"title":"Hw09 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw09-of-cs61a-of-ucb/#q4-time-for-times"},{"categories":["Course"],"content":" Q5: Most Common Area Code Write a function which takes in a body of text and finds the most common area code. Area codes must be part of a valid phone number. To solve this problem, we will first write a regular expression which finds valid phone numbers and captures the area code. See the docstring of area_codes for specifics on what qualifies as a valid phone number. å¤§å®¶éƒ½çŸ¥é“ç”µè¯å‰é¢ä¼šæœ‰åŒºå·, ç°åœ¨è¿™ä¸€é¢˜è¦æ±‚æˆ‘ä»¬æ‰¾åˆ°å‡ºç°æ¬¡æ•°æœ€å¤šçš„åŒºå·, é¦–å…ˆè¦åŒ¹é…æ‰€æœ‰çš„ç”µè¯å·ç çš„åŒºå·(area_codes). ç„¶åè¿”å›å‡ºç°æ¬¡æ•°æœ€å¤šçš„åŒºå·å°±å¥½äº†. æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹å¾: ç”µè¯å·ç æœ‰ 10 ä½ åŒºå·æ˜¯å‰ä¸‰ä½, æœ‰çš„ä¼šç”¨æ‹¬å· () æ‹¬èµ·æ¥æœ‰çš„ä¸ä¼š åŒºå·å’Œç”µè¯å·ç ä¹‹é—´ä»¥åŠç”µè¯å·ç çš„å‰ä¸‰ä½å’Œåå››ä½ä¹‹é—´å¯èƒ½æœ‰ç©ºæ ¼æˆ–è€…æ˜¯ - æ€ä¹ˆè¡¨ç¤ºå¯èƒ½å‡ºç°çš„ () å‘¢? å…¶å®ç”¨ä¸Šä¸€é¢˜çš„ (?:...)? è¿™ç§æ ¼å¼å°±å¯ä»¥ ğŸ¤— python def area_codes(text): \"\"\" Finds all phone numbers in text and captures the area code. Phone numbers have 10 digits total and may have parentheses around the area code, and hyphens or spaces after the third and sixth digits. \"\"\" return re.findall(r'(?:\\()?(\\d{3})(?:\\)?)(?: |-)?\\d{3}(?: |-)?\\d{4}\\b', text) def most_common_code(text): \"\"\" Takes in an input string which contains at least one phone number (and may contain more) and returns the most common area code among all phone numbers in the input. If there are multiple area codes with the same frequency, return the first one that appears in the input text. \"\"\" area_codes_list = area_codes(text) cnts = [area_codes_list.count(e) for e in area_codes_list] # count every area_code max_cnt_idx = cnts.index(max(cnts)) # get the index of the max value return area_codes_list[max_cnt_idx] ","date":"2022-03-01","objectID":"/zh-cn/hw09-of-cs61a-of-ucb/:0:4","series":null,"tags":["Course"],"title":"Hw09 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw09-of-cs61a-of-ucb/#q5-most-common-area-code"},{"categories":["Course"],"content":"the simple solutions for lab11 of CS61A of UCB","date":"2022-03-01","objectID":"/zh-cn/lab11-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab11 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab11-cs61a-of-ucb/"},{"categories":["Course"],"content":" Context ","date":"2022-03-01","objectID":"/zh-cn/lab11-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab11 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab11-cs61a-of-ucb/#context"},{"categories":["Course"],"content":" Problem 1 Important: Your code for this part should go in buffer.py. Your job in this part is to implement the current and pop_first methods of the Buffer class. current should return the current token of the current line weâ€™re on in the Buffer instance without removing it. If there are no more tokens in the current line, then current should move onto the next valid line, and return the first token of this line. If there are no more tokens left to return from the entire source (weâ€™ve reached the end of all input lines), then current should return None (this logic is already provided for you in the except StopIteration block). If we call current multiple times in a row, we should get the same result since calls to current wonâ€™t change what token weâ€™re returning. You may find self.index helpful while implementing these functions, but you are not required to reference it in your solution. Hint: What instance attribute can we use to keep track of where we are in the current line? Hint: If weâ€™ve reached the end of the current line, then self.more_on_line() will return False. In that case, how do we â€œresetâ€ our position to the beginning of the next line? pop_first should return the current token of the Buffer instance, and move onto the next potential token (to be returned on the next call to pop_first). If there are no more tokens left to return from the entire source (weâ€™ve reached the end of all input lines), then pop_first should return None. Hint: Do we need to update anything to move onto the next potential token? è¦åœ¨ buffer.py æ–‡ä»¶é‡Œé¢å®ç°ä¸¤ä¸ªå‡½æ•°: current å’Œ pop_first å‡½æ•° å…¶ä¸­ current å‡½æ•°æœ‰ä¸‹é¢å‡ ä¸ªè¦æ±‚: è¿”å›çš„æ˜¯å½“å‰è¡Œå¯¹åº”ä½ç½®çš„ token, å¦‚æœæ²¡æœ‰äº†æ‰ä¼šç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªæœ‰æ•ˆçš„è¡Œ, ç„¶åè¿”å›é‚£ä¸€è¡Œçš„ç¬¬ä¸€ä¸ª token. å…³äºè¿™ä¸ªå®ƒå·²ç»æä¾›äº†ä¸€ä¸ªå‡½æ•° self.more_on_line() æ¥åˆ¤æ–­å½“å‰è¡Œæ˜¯å¦è¿˜æœ‰ token æˆ‘ä»¬æ²¡æœ‰å¤„ç† å¦‚æœæ•´ä¸ªæ–‡ä»¶å·²ç»è¯»å–å®Œäº†å°±è¿”å› None. è¿™ä¹Ÿä¹Ÿç®€å•, æˆ‘ä»¬çŸ¥é“å½“ä¸€ä¸ª iterator æˆ‘ä»¬è¯»å–å®Œçš„æ—¶å€™è¿”å›çš„æ˜¯ StopIteration åœ¨åŒä¸€è¡Œå†…å¤šæ¬¡è°ƒç”¨çš„æ—¶å€™, ç»“æœåº”è¯¥ä¸€æ ·. **æ˜¾ç„¶æˆ‘ä»¬è¿™é‡Œå¯ä»¥ç”¨ self.index è¿™ä¸ªå˜é‡æ¥æ§åˆ¶. è‡³äº pop_first å‡½æ•°æ¯”è¾ƒç®€å•, å› ä¸ºå®ƒè°ƒç”¨ä¸€ä¸‹ current å‡½æ•°å’Œå¢åŠ  self.index å³å¯ python class Buffer: \"\"\"A Buffer provides a way of accessing a sequence of tokens across lines. Its constructor takes an iterator, called \"the source\", that returns the next line of tokens as a list each time it is queried, or None to indicate the end of data. The Buffer in effect concatenates the sequences returned from its source and then supplies the items from them one at a time through its pop_first() method, calling the source for more sequences of items only when needed. In addition, Buffer provides a current method to look at the next item to be supplied, without sequencing past it. The __str__ method prints all tokens read so far, up to the end of the current line, and marks the current token with \u003e\u003e. \"\"\" def __init__(self, source): self.index = 0 self.source = source self.current_line = () self.current() def pop_first(self): \"\"\"Remove the next item from self and return it. If self has exhausted its source, returns None.\"\"\" current = self.current() self.index += 1 return current def current(self): \"\"\"Return the current element, or None if none exists.\"\"\" # if there are any token in current line we don't return while not self.more_on_line(): self.index = 0 try: self.current_line = next(self.source) except StopIteration: self.current_line = () return None return self.current_line[self.index] def more_on_line(self): return self.index \u003c len(self.current_line) ","date":"2022-03-01","objectID":"/zh-cn/lab11-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab11 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab11-cs61a-of-ucb/#problem-1"},{"categories":["Course"],"content":" Internal Representations ","date":"2022-03-01","objectID":"/zh-cn/lab11-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab11 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab11-cs61a-of-ucb/#internal-representations"},{"categories":["Course"],"content":" Problem 2 Important: Your code for this part should go in scheme_reader.py. Your job in this part is to write the parsing functionality, which consists of two mutually recursive functions:scheme_read and read_tail. Each function takes in a single src parameter, which is a Buffer instance. scheme_read removes enough tokens from src to form a single expression and returns that expression in the correct internal representation. read_tail expects to read the rest of a list or Pair, assuming the open parenthesis of that list or Pair has already been removed by scheme_read. It will read expressions (and thus remove tokens) until the matching closing parenthesis ) is seen. This list of expressions is returned as a linked list of Pair instances. In short, scheme_read returns the next single complete expression in the buffer and read_tail returns the rest of a list or Pair in the buffer. Both functions mutate the buffer, removing the tokens that have already been processed. The behavior of both functions depends on the first token currently in src. They should be implemented as follows: scheme_read: If the current token is the string \"nil\", return the nil object. If the current token is (, the expression is a pair or list. Call read_tail on the rest of src and return its result. If the current token is ', the rest of the buffer should be processed as a quote expression. You will implement this portion in the next problem. If the next token is not a delimiter, then it must be a primitive expression (i.e. a number, boolean). Return it. Provided If none of the above cases apply, raise an error. Provided read_tail: If there are no more tokens, then the list is missing a close parenthesis and we should raise an error. Provided If the token is ), then weâ€™ve reached the end of the list or pair. Remove this token from the buffer and return the nil object. If none of the above cases apply, the next token is the operator in a combination. For example, src could contain + 2 3). To parse this: scheme_read the next complete expression in the buffer. Call read_tail to read the rest of the combination until the matching closing parenthesis. Return the results as a Pair instance, where the first element is the next complete expression from (1) and the second element is the rest of the combination from (2). è¿™ä¸€é¢˜çš„ä»£ç å’Œä¸‹ä¸€é¢˜çš„æ”¾åœ¨ä¸€èµ· :) ","date":"2022-03-01","objectID":"/zh-cn/lab11-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab11 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab11-cs61a-of-ucb/#problem-2"},{"categories":["Course"],"content":" Problem 3 Important: Your code for this part should go in scheme_reader.py. Your task in this problem is to complete the implementation of scheme_read by allowing the function to now be able to handle quoted expressions. In Scheme, quoted expressions such as '\u003cexpr\u003e are equivalent to (quote \u003cexpr\u003e). That means that we need to wrap the expression following ' (which you can get by recursively calling scheme_read) into the quote special form, which is a Scheme list (as with all special forms). In our representation, a Pair represents a Scheme list. You should therefore wrap the expression following ' in a Pair. For example, 'bagel, or [\"'\", \"bagel\"] after being tokenized, should be represented as Pair('quote', Pair('bagel', nil)). '(1 2) (or [\"'\", \"(\", 1, 2, \")\"]) should be represented as Pair('quote', Pair(Pair(1, Pair(2, nil)), nil)). è¿™ä¸ªè¦æˆ‘ä»¬å®ç° Scheme ä¸­çš„ ' æœºåˆ¶, å…¶å®ä»»åŠ¡æè¿°ä¸­çš„ which you can get by recursively calling scheme_read å·²ç»å‘Šè¯‰æˆ‘ä»¬æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜çš„äº†, æ–°å»ºä¸€ä¸ª Pair, å®ƒçš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯ quote, å‰©ä¸‹çš„å…ƒç´ æˆ‘ä»¬è°ƒç”¨ scheme_reader å³å¯, å› ä¸ºå…¶å®è·Ÿåœ¨ ' åé¢çš„æ˜¯ expression, è€Œ scheme_read å°±æ˜¯å¤„ç†è¿™ä¸ªçš„. python def scheme_read(src): \"\"\"Read the next expression from SRC, a Buffer of tokens. \"\"\" if src.current() is None: raise EOFError val = src.pop_first() # Get and remove the first token if val == 'nil': return nil elif val == '(': return read_tail(src) elif val == \"'\": return Pair('quote', Pair(scheme_read(src), nil)) elif val not in DELIMITERS: return val else: raise SyntaxError('unexpected token: {0}'.format(val)) def read_tail(src): \"\"\"Return the remainder of a list in SRC, starting before an element or ). \"\"\" try: if src.current() is None: raise SyntaxError('unexpected end of file') elif src.current() == ')': src.pop_first() return nil else: return Pair(scheme_read(src), read_tail(src)) except EOFError: raise SyntaxError('unexpected end of file') ","date":"2022-03-01","objectID":"/zh-cn/lab11-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Lab11 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab11-cs61a-of-ucb/#problem-3"},{"categories":["Course"],"content":"The simple solutions of hw08 of CS61A of UCB","date":"2022-02-28","objectID":"/zh-cn/hw08-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Hw08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw08-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" Q1: My Filter Write a procedure my-filter, which takes a predicate func and a list lst, and returns a new list containing only elements of the list that satisfy the predicate. The output should contain the elements in the same order that they appeared in the original list. Note: Make sure that you are not just calling the built-in filter function in Scheme - we are asking you to re-implement this! å†™ä¸€ä¸ªå¯ä»¥ç”¨åœ¨åˆ—è¡¨ä¸Šçš„è¿‡æ»¤å‡½æ•°, å¦‚æœ func å¯¹å…ƒç´ çš„åˆ¤æ–­ç»“æœæ˜¯ #t, æˆ‘ä»¬å°±ä¿ç•™è¿™ä¸ªå…ƒç´  base case: ç©ºåˆ—è¡¨, å¦åˆ™æˆ‘ä»¬å°±é€’å½’åˆ†è§£å¤„ç†è¿™ä¸ªé—®é¢˜, å¦‚æœå½“å‰çš„å…ƒç´ çš„å€¼ç¬¦åˆæ¡ä»¶å°±æŠŠå®ƒåŒ…æ‹¬è¿›å»å¦åˆ™æ’é™¤æ‰ scheme (define (my-filter func lst) (cond ((null? lst) '()) ((func (car lst)) (cons (car lst) (my-filter func (cdr lst)))) (else (my-filter func (cdr lst)))) ) ","date":"2022-02-28","objectID":"/zh-cn/hw08-of-cs61a-of-ucb/:0:1","series":null,"tags":["Course"],"title":"Hw08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw08-of-cs61a-of-ucb/#q1-my-filter"},{"categories":["Course"],"content":" Q2: Interleave Implement the function interleave, which takes a two lists s1 and s2 as arguments. interleave should return a new list that interleaves the elements of the two lists. (In other words, the resulting list should contain elements alternating between s1 and s2.) If one of the input lists to interleave is shorter than the other, then interleave should alternate elements from both lists until one list has no more elements, and then the remaining elements from the longer list should be added to the end of the new list. è¿”å›ä¸€ä¸ªæ–°çš„åˆ—è¡¨, é‡Œé¢æ˜¯ä¸¤ä¸ªè¾“å…¥çš„åˆ—è¡¨çš„å…ƒç´ äº¤æ›¿å‡ºç°åçš„ç»“æœ. ç”¨é€’å½’çš„æ€è·¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜: å½“ä¸¤ä¸ªåˆ—è¡¨éƒ½ç©ºçš„æ—¶å€™æ˜¾ç„¶è¦æ·»åŠ çš„æ˜¯ nil. è‡³äºå¦‚ä½•é€’å½’åˆ†è§£é—®é¢˜: æˆ‘ä»¬å¯ä»¥é‡‡ç”¨è½®æµäº¤æ¢ s1 å’Œ s2 è¿™ä¸¤ä¸ªå‚æ•°. ä¸‹é¢å‡è®¾æˆ‘ä»¬å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸º first_param, ç¬¬äºŒä¸ªå‚æ•°ä¸º second_param. æˆ‘ä»¬åœ¨é€’å½’åˆ†è§£çš„æ—¶å€™å°±æ¯æ¬¡éƒ½å–å½“å‰ç¬¬ä¸€ä¸ªåˆ—è¡¨çš„ (car first_param), ç„¶åæˆ‘ä»¬é€’å½’è°ƒç”¨ (interleave second_param (cdr first_param)). **ç›¸å½“äºæ¯æ¬¡æˆ‘ä»¬é€’å½’è°ƒç”¨éƒ½ä¼šå¾€ç»“æœé‡Œæ·»åŠ ä¸€ä¸ªç¬¬ä¸€ä¸ªåˆ—è¡¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ . é‚£ä¹ˆå¦‚æœè¿™ä¸ªç¬¬ä¸€ä¸ªåˆ—è¡¨ä¸ºç©ºå‘¢?, æˆ‘ä»¬é€’å½’è°ƒç”¨ (interleave second_param first_param). scheme (define (interleave s1 s2) (cond ((and (null? s1) (null? s2)) nil) ; base case: return nil if both are empty ((null? s1) (interleave s2 s1)) ; change the positions of s1 and s2 (else (cons (car s1) (interleave s2 (cdr s1))))) ; we always insert (car s1) to the result :) ) ","date":"2022-02-28","objectID":"/zh-cn/hw08-of-cs61a-of-ucb/:0:2","series":null,"tags":["Course"],"title":"Hw08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw08-of-cs61a-of-ucb/#q2-interleave"},{"categories":["Course"],"content":" Q3: Accumulate Fill in the definition for the procedure accumulate, which merges the first n natural numbers (ie. 1 to n, inclusive) according to the following parameters: merger: a function of two arguments start: a number with which we start merging with n: the number of natural numbers to merge term: a function of one argument that computes the nth term of a sequence For example, we can find the product of all the numbers from 1 to 5 by using the multiplication operator as the merger, and starting our product at 1: ç®—å‰ n ä¸ªæ•°å­—çš„â€œå’Œâ€(ç”¨åŒºé—´è¡¨ç¤ºæ˜¯ [1, n]), ç»™å®šçš„å‚æ•°åŒ…æ‹¬èµ·å§‹å€¼æ˜¯å¤šå°‘, ä¸¤ä¸ªæ•°ä¹‹é—´å¦‚ä½•ç®—â€œå’Œâ€, ä»¥åŠå¦‚ä½•ç®—å‡ºç¬¬ i ä¸ªæ•°å­—çš„å€¼ éš¾ç‚¹åœ¨äº, Scheme é‡Œé¢ä¹Ÿæ²¡æœ‰ while å¾ªç¯, æˆ‘ä»¬å¾—æŠŠè¿™ä¸ªç®—æ³•æ”¹ä¸ºé€’å½’çš„ç‰ˆæœ¬. é¦–å…ˆå…ˆæƒ³ä¸€ä¸‹ base case æ˜¯ä»€ä¹ˆ, æ˜¾ç„¶æ˜¯ n = 1 çš„æ—¶å€™, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ ¹æ® merge æ¥ç®— start å’Œ term(i) çš„â€œå’Œâ€, å…¶ä»–æƒ…å†µæˆ‘ä»¬é€’å½’åˆ†è§£å¤„ç† n - 1 è¿™ä¸ªå­é—®é¢˜ scheme (define (accumulate merger start n term) (cond ((= n 1) (merger (term n) start)) ; base case: n = 1 (else (merger (term n) (accumulate merger start (- n 1) term)))) ) ","date":"2022-02-28","objectID":"/zh-cn/hw08-of-cs61a-of-ucb/:0:3","series":null,"tags":["Course"],"title":"Hw08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw08-of-cs61a-of-ucb/#q3-accumulate"},{"categories":["Course"],"content":" Q4: No Repeats Implement no-repeats, which takes a list of numbers lst as input and returns a list that has all of the unique elements of lst in the order that they first appear, but no repeats. For example, (no-repeats (list 5 4 5 4 2 2))evaluates to (5 4 2). Hint: How can you make the first time you see an element in the input list be the first and only time you see the element in the resulting list you return? Hint: You may find it helpful to use the my-filter procedure with a helper lambda function to use as a filter. To test if two numbers are equal, use the = procedure. To test if two numbers are not equal, use the notprocedure in combination with =. è¿™ä¸€é¢˜è¦æ±‚æˆ‘ä»¬å¯¹åˆ—è¡¨åšå»é‡å·¥ä½œ, æç¤ºè¯´æ˜¯ç”¨ Q1 çš„ my-filter å‡½æ•° æ˜¾ç„¶ base case æ˜¯åˆ—è¡¨ä¸ºç©ºçš„æ—¶å€™, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ç›´æ¥è¿”å› nil, è€Œå¦‚æœä¸æ˜¯ç©º, æˆ‘ä»¬å°±è¦åœ¨ (cdr lst) ä¸­åˆ é™¤æ‰€æœ‰å€¼ä¸º (car lst) çš„å…ƒç´ , è¿™ä¸ªåˆšå¥½å¯ä»¥ç”¨æˆ‘ä»¬åœ¨ Q1 ä¸­å†™çš„ my-filter å‡½æ•° (ps. å› ä¸ºå¤šäº†ä¸€ç»„æ‹¬å·æ‰¾ bug æ‰¾äº†å¥½ä¹… ğŸ˜¢) scheme (define (no-repeats lst) (cond ((null? lst) nil) (else (cons (car lst) (no-repeats ; choose the elements that are not equal to `car lst` (my-filter (lambda (x) (not (= x (car lst)))) (cdr lst)))))) ) ","date":"2022-02-28","objectID":"/zh-cn/hw08-of-cs61a-of-ucb/:0:4","series":null,"tags":["Course"],"title":"Hw08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw08-of-cs61a-of-ucb/#q4-no-repeats"},{"categories":["Course"],"content":"The simple solutions of hw06 of CS61A of UCB","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" OOP ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#oop"},{"categories":["Course"],"content":" Q1: Vending Machine In this question youâ€™ll create a vending machine that only outputs a single product and provides change when needed. Create a class called VendingMachine that represents a vending machine for some product. A VendingMachineobject returns strings describing its interactions. Remember to match exactly the strings in the doctests â€“ including punctuation and spacing! Fill in the VendingMachine class, adding attributes and methods as appropriate, such that its behavior matches the following doctests: According to the wiki, a vending machine is an automated machine that provides items to consumers after cash, or other forms of payment are inserted into the machine or otherwise made è¿™é‡Œè¯´çš„ vending machine å…¶å®ä¹Ÿå°±æ˜¯å¸¸è§çš„è‡ªåŠ¨å”®è´§æœº, æˆ‘ä»¬è¦ä¸ºå…¶å†™ä¸€ä¸ªç±»å®ç°åº”è¯¥æœ‰çš„åŠŸèƒ½. è¿™é‡Œçš„è¦æ±‚æ›´ä¸ºç®€å•, å› ä¸ºæˆ‘ä»¬è¦å®ç°çš„è‡ªåŠ¨å”®è´§æœºåªæœ‰ä¸€æ ·ä¸œè¥¿å¯ä»¥å–, è€Œä¸”æ¯æ¬¡åªä¼šä¹°ä¸€ä»¶. æ³¨æ„ä¸‹é¢è¦å®ç°å‡½æ•°çš„é€»è¾‘å³å¯: restock, è¡¥å……å•†å“, è¿™ä¸ªæ¯”è¾ƒç®€å• add_funds å•†å“æœ‰åº“å­˜çš„æ—¶å€™æ‰ä¼šè®°ä½ä½ ä»˜äº†å¤šå°‘é’± å•†å“æ²¡æœ‰åº“å­˜çš„æ—¶å€™ç›´æ¥é€€æ¬¾ç»™ä½  vend å•†å“æœ‰åº“å­˜çš„æ—¶å€™ ä½ æ”¯ä»˜çš„é’±ğŸ’°å¦‚æœè¶³å¤Ÿå°±å¯ä»¥ä¹° ğŸ’° ä¸å¤Ÿçš„è¯ä¼šå‘Šè¯‰ä½ è¿˜å·®å¤šå°‘é’± ä¸è¦å¿˜è®°è´­ä¹°æˆåŠŸååº“å­˜è¦ - 1 å•†å“æ²¡æœ‰åº“å­˜ æç¤ºè¦è¡¥å……è´§ç‰© python class VendingMachine: \"\"\"A vending machine that vends some product for some price. \"\"\" def __init__(self, product, price): self.product = product self.price = price self.balance = 0 self.stocks = 0 def restock(self, num): \"\"\"Restock num items to our vending machine\"\"\" self.stocks += num return f\"Current {self.product} stock: {self.stocks}\" def add_funds(self, fund): \"\"\"Add funds to balance, return funds if no stocks\"\"\" if self.stocks != 0: self.balance += fund return f\"Current balance: ${self.balance}\" else: return f\"Nothing left to vend. Please restock. Here is your ${fund}.\" def vend(self): \"\"\"Vend a product\"\"\" if self.stocks == 0: return 'Nothing left to vend. Please restock.' else: if self.balance \u003c self.price: return f\"You must add ${self.price - self.balance} more funds.\" else: change = self.balance - self.price self.balance = 0 self.stocks -= 1 if change == 0: return f\"Here is your {self.product}.\" else: return f\"Here is your {self.product} and ${change} change.\" ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q1-vending-machine"},{"categories":["Course"],"content":" Q2: Mint A mint is a place where coins are made. In this question, youâ€™ll implement a Mint class that can output a Coin with the correct year and worth. Each Mint instance has a year stamp. The update method sets the year stamp to the present_year class attribute of the Mint class. The create method takes a subclass of Coin and returns an instance of that class stamped with the mintâ€™s year (which may be different from Mint.present_year if it has not been updated.) A Coinâ€™s worth method returns the cents value of the coin plus one extra cent for each year of age beyond 50. A coinâ€™s age can be determined by subtracting the coinâ€™s year from the present_year class attribute of the Mint class. è¿™ä¸€é¢˜è¦æˆ‘ä»¬å®ç°é“¸å¸å‚çš„ç±», å¯ä»¥åˆ¶é€ å‡ºå¹´ä»½å’Œé¢å€¼éƒ½æ­£ç¡®çš„ç¡¬å¸. python class Mint: \"\"\"A mint creates coins by stamping on years. \"\"\" present_year = 2021 def __init__(self): self.update() def create(self, kind): return kind(self.year) def update(self): self.year = Mint.present_year class Coin: def __init__(self, year): self.year = year def worth(self): age = Mint.present_year - self.year if age \u003e 50: return self.cents + (age - 50) else: return self.cents ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q2-mint"},{"categories":["Course"],"content":" Linked Lists ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#linked-lists"},{"categories":["Course"],"content":" Q3: Store Digits Write a function store_digits that takes in an integer n and returns a linked list where each element of the list is a digit of n. Important: Do not use any string manipulation functions like str and reversed ç®€å•æ¥è¯´, å°±æ˜¯è¦æŠŠæ•´æ•° n çš„æ¯ä¸€ä½å­˜å‚¨åˆ°é“¾è¡¨é‡Œé¢. è¿™ä¸ªç”¨è¿­ä»£çš„æ–¹æ³•åšå°±å¾ˆç®€å•, æˆ‘ä»¬å¯ä»¥æ¯æ¬¡ %10 æ¥è·å¾—æœ€åä¸€ä½, é‡‡ç”¨é“¾è¡¨çš„å¤´æ’æ³•æ¥æ„å»ºé“¾è¡¨, å¤´æ’æ³•å°±æ˜¯æ¯æ¬¡æˆ‘ä»¬éƒ½æ–°å»ºç»“ç‚¹æ’å…¥åˆ°é“¾è¡¨çš„å¼€å¤´. è¿™é‡Œç”¨äº†å“¨å…µç»“ç‚¹. python def store_digits(n): \"\"\"Stores the digits of a positive number n in a linked list. \"\"\" sentinel = Link(0) while n \u003e 0: all_but_last, last = n // 10, n % 10 # every time we insert node in the front of the linklist new_node = Link(n % 10, sentinel.rest) sentinel.rest = new_node n = all_but_last return sentinel.rest ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q3-store-digits"},{"categories":["Course"],"content":" Q4: Mutable Mapping Implement deep_map_mut(fn, link), which applies a function fn onto all elements in the given linked list link. If an element is itself a linked list, apply fn to each of its elements, and so on. Your implementation should mutate the original linked list. Do not create any new linked lists. Hint: The built-in isinstance function may be useful. text \u003e\u003e\u003e s = Link(1, Link(2, Link(3, Link(4)))) \u003e\u003e\u003e isinstance(s, Link) True \u003e\u003e\u003e isinstance(s, int) False å¯¹åµŒå¥—é“¾è¡¨çš„æ¯ä¸ªå…ƒç´ åº”ç”¨ fn å‡½æ•°, æ˜¾ç„¶è¿™ä¸ªè¦ç”¨é€’å½’æ–¹æ³•æ¥è§£å†³. å…·ä½“è§£é¢˜æ€è·¯å¯ä»¥çœ‹ä¸‹é¢çš„ä»£ç  python def deep_map_mut(fn, link): \"\"\"Mutates a deep link by replacing each item found with the result of calling fn on the item. Does NOT create new Links (so no use of Link's constructor) \"\"\" # base case 1. do thing if it is empty if link is Link.empty: return # base case 2. if it is an integer if isinstance(link, int): link = fn(link) if isinstance(link.first, int): link.first = fn(link.first) else: deep_map_mut(fn, link.first) deep_map_mut(fn, link.rest) ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q4-mutable-mapping"},{"categories":["Course"],"content":" Q5: Two List Implement a function two_list that takes in two lists and returns a linked list. The first list contains the values that we want to put in the linked list, and the second list contains the number of each corresponding value. Assume both lists are the same size and have a length of 1 or greater. Assume all elements in the second list are greater than 0. æœ‰ä¸¤ä¸ªåˆ—è¡¨: ä¸€ä¸ªè¡¨ç¤ºå€¼, ä¸€ä¸ªè¡¨ç¤ºè¿™ä¸ªå€¼åº”è¯¥é‡å¤æ’å…¥å‡ æ¬¡. ç”¨è¿™ç§æ–¹å¼æ„å»ºä¸€ä¸ªé“¾è¡¨, ç”¨é“¾è¡¨çš„å°¾æ’æ³•å³å¯(æ¯æ¬¡æŠŠæ–°çš„èŠ‚ç‚¹æ’å…¥åˆ°é“¾è¡¨æœ«å°¾). è¿™é‡ŒåŒæ ·ç”¨äº†å“¨å…µç»“ç‚¹ python def two_list(vals, amounts): \"\"\" Returns a linked list according to the two lists that were passed in. Assume vals and amounts are the same size. Elements in vals represent the value, and the corresponding element in amounts represents the number of this value desired in the final linked list. Assume all elements in amounts are greater than 0. Assume both lists have at least one element. \"\"\" idx = 0 sentinel = Link(0) pos = sentinel while idx \u003c len(vals): val, amount = vals[idx], amounts[idx] for _ in range(amount): new_node = Link(val) pos.rest = new_node pos = pos.rest idx += 1 return sentinel.rest ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:2:3","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q5-two-list"},{"categories":["Course"],"content":" Extra Questions ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#extra-questions"},{"categories":["Course"],"content":" Q6: Next Virahanka Fibonacci Object Implement the next method of the VirFib class. For this class, the value attribute is a Fibonacci number. The next method returns a VirFib instance whose value is the next Fibonacci number. The next method should take only constant time. Note that in the doctests, nothing is being printed out. Rather, each call to .next() returns a VirFib instance. The way each VirFib instance is displayed is determined by the return value of its __repr__ method. Hint: Keep track of the previous number by setting a new instance attribute inside next. You can create new instance attributes for objects at any point, even outside the __init__ method. è¿™é¢˜è¦æ±‚æˆ‘ä»¬å†™ä¸€ä¸ªç±», æ¯æ¬¡è°ƒç”¨å®ƒçš„æ–¹æ³•å°±å¯ä»¥ç®—å‡ºä¸‹ä¸€ä¸ªæ–æ³¢é‚£å¥‘æ•° ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q6-next-virahanka-fibonacci-object"},{"categories":["Course"],"content":" Q7: Is BST Write a function is_bst, which takes a Tree t and returns True if, and only if, t is a valid binary search tree, which means that: Each node has at most two children (a leaf is automatically a valid binary search tree) The children are valid binary search trees For every node, the entries in that nodeâ€™s left child are less than or equal to the label of the node For every node, the entries in that nodeâ€™s right child are greater than the label of the node An example of a BST is: Note that, if a node has only one child, that child could be considered either the left or right child. You should take this into consideration. Hint: It may be helpful to write helper functions bst_min and bst_max that return the minimum and maximum, respectively, of a Tree if it is a valid binary search tree. å†™ä¸€ä¸ªå‡½æ•°åˆ¤æ–­è¾“å…¥æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘, æ ¹æ®æç¤ºæˆ‘ä»¬éœ€è¦å…ˆå®ç°ä¸¤ä¸ªè¾…åŠ©å‡½æ•°: bst_min å’Œ bst_max, è¿”å›è¾“å…¥çš„æ ‘çš„æœ€å°å’Œæœ€å¤§å€¼ å†™ä»£ç è¦æ³¨æ„ä¸‹é¢å‡ ç‚¹: å·¦å­æ ‘æœ€å°å€¼ \u003c= å½“å‰èŠ‚ç‚¹. è€Œä¸æ˜¯ \u003c å½“å‰èŠ‚ç‚¹å¦‚æœåªæœ‰ä¸€ä¸ªå­æ ‘, é‚£ä¹ˆåœ¨é‚£è¾¹éƒ½å¯ä»¥, è¿™é‡Œè¦åšä¸¤ç§æƒ…å†µçš„åˆ¤å®š python def is_bst(t): \"\"\"Returns True if the Tree t has the structure of a valid BST. \"\"\" def bst_min(t): \"\"\"Return the min value of the tree t\"\"\" if t.is_leaf(): return t.label sub_branch_min = min([bst_min(b) for b in t.branches]) return min(t.label, sub_branch_min) def bst_max(t): \"\"\"Return the max value of the tree t\"\"\" if t.is_leaf(): return t.label sub_branch_max = max([bst_max(b) for b in t.branches]) return max(t.label, sub_branch_max) # base case 1. a leaf node is a BST if t.is_leaf(): return True # base case 2. each node has at most 2 children if len(t.branches) \u003e 2: return False # base case 3. a node with a single child # it can be considered either the left or the right if len(t.branches) == 1: return (bst_max(t.branches[0]) \u003c t.label or bst_min(t.branches[0]) \u003e t.label) \\ and is_bst(t.branches[0]) left_max = bst_max(t.branches[0]) right_min = bst_min(t.branches[1]) return left_max \u003c= t.label \u003c right_min and is_bst(t.branches[0]) and is_bst(t.branches[1]) ","date":"2022-02-27","objectID":"/zh-cn/hw06-of-cs61a-of-ucb/:3:2","series":null,"tags":["Course"],"title":"Hw06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw06-of-cs61a-of-ucb/#q7-is-bst"},{"categories":["Course"],"content":"the simple solutions for lab10 of CS61A of UCB","date":"2022-02-27","objectID":"/zh-cn/lab10-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab10-cs61a-of-ucb/"},{"categories":["Course"],"content":" Q2: Over or Under Define a procedure over-or-under which takes in a number num1 and a number num2 and returns the following: -1 if num1 is less than num2 0 if num1 is equal to num2 1 if num1 is greater than num2 Challenge: Implement this in 2 different ways using if and cond! text (define (over-or-under num1 num2) 'YOUR-CODE-HERE ) ä»£ç å…¶å®æœ¬èº«ä¸éš¾, ä¸»è¦æ˜¯é€‚åº” scheme è¯­è¨€çš„å†™æ³•, æ¡ä»¶åˆ†æ”¯æœ‰ä¸¤ç§å†™æ³•: (if \u003cpredicate\u003e \u003cconsequent\u003e \u003calternative\u003e) (cond (\u003ccondition\u003e \u003cconsequent\u003e) ...) scheme (define (over-or-under num1 num2) (if (\u003c num1 num2) (print -1)) (if (= num1 num2) (print 0)) (if (\u003e num1 num2) (print 1)) ) (define (over-or-under num1 num2) (cond ( (\u003c num1 num2) (print -1) ) ( (= num1 num2) (print 0) ) ( (\u003e num1 num2) (print 1) )) ) ","date":"2022-02-27","objectID":"/zh-cn/lab10-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab10-cs61a-of-ucb/#q2-over-or-under"},{"categories":["Course"],"content":" Q3: Make Adder Write the procedure make-adder which takes in an initial number, num, and then returns a procedure. This returned procedure takes in a number inc and returns the result of num + inc. Hint: To return a procedure, you can either return a lambda expression or define another nested procedure. Remember that Scheme will automatically return the last clause in your procedure. You can find documentation on the syntax of lambda expressions in the 61A scheme specification! å®ç°é«˜é˜¶å‡½æ•°çš„åŠŸèƒ½, ä¾æ—§æ˜¯é”»ç‚¼ scheme è¯­è¨€çš„æŒæ¡ç¨‹åº¦çš„. é¢˜ç›®éƒ½æ˜¯ä¹‹å‰è¯¾ä¸Šè®²è¿‡çš„. è¿™é‡Œæˆ‘ç”¨åŒ¿åå‡½æ•°æ¥å®ç° scheme (define (make-adder num) (lambda (inc) (+ num inc)) ) ","date":"2022-02-27","objectID":"/zh-cn/lab10-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab10-cs61a-of-ucb/#q3-make-adder"},{"categories":["Course"],"content":" Q4: Compose Write the procedure composed, which takes in procedures f and g and outputs a new procedure. This new procedure takes in a number x and outputs the result of calling f on g of x. ç”¨ scheme è¯­è¨€å®ç°ç¬¦åˆæ•°å­¦ä¸­çš„å¤åˆå‡½æ•°, ä¹Ÿå°±æ˜¯é«˜é˜¶å‡½æ•°. è¿™é‡ŒåŒæ ·å¯ä»¥ç”¨ lambda å‡½æ•° scheme (define (composed f g) (lambda (x) (f (g x) ) ) ) ","date":"2022-02-27","objectID":"/zh-cn/lab10-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Lab10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab10-cs61a-of-ucb/#q4-compose"},{"categories":["Course"],"content":" Q5: Make a List In this problem you will create the list with the following box-and-pointer diagram: Challenge: try to create this list in multiple ways, and using multiple list constructors!è¦æ±‚ é¢˜ç›®è¦æ±‚æˆ‘ä»¬æŒ‰ç…§ç»™å®šçš„é“¾è¡¨ç»“æ„æ¥ç”Ÿæˆå¯¹åº”çš„é“¾è¡¨. ä¸»è¦è€ƒå¯Ÿçš„æ˜¯å¯¹ scheme è¯­è¨€ä¸­ list çš„æŒæ¡. å¯ä»¥æœ‰å¤šç§å®ç°æ–¹å¼ cons çš„æ–¹å¼, è¿™ä¸ªæ–¹å¼å¾ˆå®¹æ˜“çœ¼èŠ±, æœ€å¥½æ˜¯å†™å®Œä¹‹ååœ¨è¿™é‡Œ éªŒè¯ä¸€ä¸‹. è¿™é‡Œæˆ‘çœŸçš„å†™å¾—å¤´æœ‰ç‚¹æ™• ğŸ˜¢ list çš„æ–¹å¼, è¿™ä¸ªä»£ç ä¼šæ¯”è¾ƒçŸ­, æ³¨æ„æˆ‘ä»¬æ¯æ¬¡åœ¨è°ƒç”¨ (list ...) ç›¸å½“äºåœ¨é“¾è¡¨ä¸­å¤šåˆ›å»ºäº†ä¸€ä¸ªæ–¹å‘ scheme (define lst (cons (cons 1 nil) (cons 2 (cons (cons 3 (cons 4 nil)) (cons 5 nil)))) ) (define lst (list (list 1) 2 (list 3 4) 5) ) ","date":"2022-02-27","objectID":"/zh-cn/lab10-cs61a-of-ucb/:1:3","series":null,"tags":["Course"],"title":"Lab10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab10-cs61a-of-ucb/#q5-make-a-list"},{"categories":["Course"],"content":" Q6: Remove Implement a procedure remove that takes in a list and returns a new list with all instances of item removed from lst. You may assume the list will only consist of numbers and will not have nested lists. Hint: You might find the built-in filter procedure useful (though it is definitely possible to complete this question without it). You can find information about how to use filter in the 61A Scheme builtin specification! è¿™ä¸€é¢˜å°±æ˜¯è¦æˆ‘ä»¬åœ¨ scheme çš„åˆ—è¡¨ä¸­ç§»é™¤æ‰å€¼ç­‰äº item çš„å…ƒç´ ç„¶åè¿”å›æ–°çš„è¿™ä¸ªåˆ—è¡¨. å…¶å® scheme çš„åˆ—è¡¨ä¹Ÿå°±æ˜¯é“¾è¡¨. æ‰€ä»¥è¿™ä¸€é¢˜ç­‰æ•ˆäºæˆ‘ä»¬è¦åœ¨é“¾è¡¨ä¸­ç§»é™¤æŒ‡å®šå€¼çš„å…ƒç´ . æ˜¾ç„¶, è¿™å¯ä»¥ç”¨é€’å½’æ¥è§£å†³! è€Œä¸”è¿™ä¸€é“é¢˜è¯´æ²¡æœ‰åµŒå¥—åˆ—è¡¨çš„æƒ…å†µå­˜åœ¨, è¿™ä¸€é“é¢˜å°±æ›´ç®€å•äº† ! æ˜¾ç„¶ base case å°±æ˜¯é“¾è¡¨ä¸ºç©ºçš„æƒ…å†µ, æˆ‘ä»¬ç›´æ¥è¿”å›ç©º. å¦åˆ™: å½“å‰èŠ‚ç‚¹çš„å€¼ = item, æˆ‘ä»¬åˆ é™¤å®ƒ, é€’å½’å¤„ç†å­é“¾è¡¨ å½“å‰èŠ‚ç‚¹çš„å€¼ != item, æˆ‘ä»¬ä¿ç•™å®ƒ, é€’å½’å¤„ç†å­é“¾è¡¨ scheme (define (remove item lst) (cond ( (null? lst) '() ) ; base case ( (= item (car lst)) (remove item (cdr lst))) ; exclude item ( else (cons (car lst) (remove item (cdr lst))))) ; include item ) ","date":"2022-02-27","objectID":"/zh-cn/lab10-cs61a-of-ucb/:1:4","series":null,"tags":["Course"],"title":"Lab10 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab10-cs61a-of-ucb/#q6-remove"},{"categories":["Course"],"content":"the simple solutions for lab09 of CS61A of UCB","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/"},{"categories":["Course"],"content":" Recursion and Tree Recursion ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#recursion-and-tree-recursion"},{"categories":["Course"],"content":" Q1: Subsequences A subsequence of a sequence S is a subset of elements from S, in the same order they appear in S. Consider the list [1, 2, 3]. Here are a few of itâ€™s subsequences [], [1, 3], [2], and [1, 2, 3]. Write a function that takes in a list and returns all possible subsequences of that list. The subsequences should be returned as a list of lists, where each nested list is a subsequence of the original input. In order to accomplish this, you might first want to write a function insert_into_all that takes an item and a list of lists, adds the item to the beginning of each nested list, and returns the resulting list. è¿™ä¸€é“é¢˜è¦æ±‚æˆ‘ä»¬è¿”å›ä¸€ä¸ªåˆ—è¡¨çš„æ‰€æœ‰å¯èƒ½å­åºåˆ—, è¿”å›çš„æ ¼å¼æ˜¯åˆ—è¡¨çš„åˆ—è¡¨, æ¯ä¸€ä¸ªéƒ½æ˜¯å¯èƒ½çš„å­åºåˆ— é¢˜ç›®è¦æ±‚æˆ‘ä»¬é¦–å…ˆå®Œæˆä¸€ä¸ªå‡½æ•°: åŠŸèƒ½æ˜¯æŠŠ item æ·»åŠ åˆ°åµŒå¥—åˆ—è¡¨çš„æ¯ä¸ªå­åˆ—è¡¨çš„å¼€å¤´, è¿™ä¸ªå…¶å®ç”¨ list comprehension å°±å¯ä»¥äº†. python def insert_into_all(item, nested_list): \"\"\"Return a new list consisting of all the lists in nested_list, but with item added to the front of each. You can assume that nested_list is a list of lists. \"\"\" return [[item] + l for l in nested_list] è¿™å…¶å®æ˜¯é¢˜ç›®ç»™æˆ‘ä»¬çš„æç¤º, æˆ‘ä»¬ç°åœ¨æ€è€ƒæœ‰äº†è¿™ä¸ªå‡½æ•°æˆ‘ä»¬è¦æ€ä¹ˆæ‰¾åˆ°æ‰€æœ‰å¯èƒ½çš„å­åºåˆ—å‘¢? æˆ‘ä»¬å¯ä»¥é€’å½’åˆ†è§£é—®é¢˜: å°†è¦å¤„ç†çš„å…ƒç´ åˆ†ä¸ºã€Œå½“å‰å…ƒç´ ã€+ã€Œæ‰€æœ‰å‰©ä¸‹çš„å…ƒç´ ã€ï¼Œå¹¶ä¸”å‡è®¾ã€Œæ‰€æœ‰å‰©ä¸‹çš„å…ƒç´ ã€çš„æ‰€æœ‰å¯èƒ½å­åºåˆ—ï¼ˆç”¨ tmp è¡¨ç¤ºï¼‰å·²ç»æ±‚è§£å‡ºæ¥äº†ï¼ˆä½ ä¼šå‘ç°é€’å½’å‡½æ•°ç»å¸¸æ˜¯è¿™æ ·æ€è€ƒçš„ï¼‰. é‚£ä¹ˆé—®é¢˜å°±å˜æˆäº†å¦‚ä½•å¾—åˆ°åŒ…å«ã€Œå½“å‰å…ƒç´ ã€çš„å­åºåˆ—ï¼Œä¸€ä¸ªå¯è¡Œçš„åŠæ³•æ˜¯â€”â€”æŠŠå½“å‰å…ƒç´ åŠ åˆ° tmp ä¸­çš„æ¯ä¸ªå­åºåˆ—ã€‚ç„¶åå†å°†è¿™ä¸ªæ–°å¾—åˆ°çš„åˆ—è¡¨å’Œ tmp æ‹¼æ¥èµ·æ¥å³å¯ã€‚è¿™åˆšå¥½å°±ç”¨ä¸Šäº†é¢˜ç›®è®©æˆ‘ä»¬å®ç°çš„ insert_into_all() å‡½æ•°. æœ€åæˆ‘ä»¬è¦æ€è€ƒä»€ä¹ˆæ˜¯ base case. æ˜¾ç„¶å¦‚æœä¸€ä¸ªç©ºçš„åˆ—è¡¨çš„å­åºåˆ—ä¸ºç©ºåˆ—è¡¨; å¦‚æœåˆ—è¡¨é•¿åº¦ä¸º 1, åˆ™å­˜åœ¨ä¸¤ä¸ªå¯èƒ½å­åºåˆ— - å®ƒè‡ªå·± + ç©ºåˆ—è¡¨. æœ€åæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºè¿™æ ·çš„ä»£ç  python def subseqs(s): \"\"\"Return a nested list (a list of lists) of all subsequences of S. The subsequences can appear in any order. You can assume S is a list. \"\"\" if len(s) \u003c= 1: return [[], s] if s !=[] else [[]] else: tmp = subseqs(s[1:]) return insert_into_all(s[0], tmp) + tmp ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q1-subsequences"},{"categories":["Course"],"content":" Q2: Non-Decreasing Subsequences Just like the last question, we want to write a function that takes a list and returns a list of lists, where each individual list is a subsequence of the original input. This time we have another condition: we only want the subsequences for which consecutive elements are nondecreasing. For example, [1, 3, 2] is a subsequence of [1, 3, 2, 4], but since 2 \u003c 3, this subsequence would not be included in our result. Fill in the blanks to complete the implementation of the non_decrease_subseqs function. You may assume that the input list contains no negative elements. You may use the provided helper function insert_into_all, which takes in an item and a list of lists and inserts the item to the front of each list. è¿™ä¸€é“é¢˜æ˜¯åœ¨ Q1 çš„åŸºç¡€ä¸Šæ”¹ç¼–è€Œæ¥çš„, ç›¸å½“äºæå‡ºäº†ä¸€ä¸ªæ›´é«˜çš„è¦æ±‚, æˆ‘ä»¬è¦æ±‚å­åºåˆ—åŒæ—¶æ˜¯éé™åºçš„. æ ¹æ®é¢˜ç›®çš„æç¤ºï¼Œæˆ‘ä»¬ä¹Ÿè®¸ä¼šç”¨åˆ° insert_into_all å‡½æ•°, æ‰€ä»¥ä¸å¦¨æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜: å½“æˆ‘ä»¬æŠŠã€Œå½“å‰å…ƒç´ ã€åŠ åˆ°ã€Œæ‰€æœ‰å‰©ä¸‹çš„å…ƒç´ ã€çš„å­åºåˆ—ï¼ˆæ³¨æ„ï¼Œä»å®šä¹‰ä¸Šæ¥è¯´, è¿™äº›å­åºåˆ—è‚¯å®šéƒ½æ˜¯æ»¡è¶³é¢˜ç›®è¦æ±‚çš„éé™åºå­åºåˆ—ï¼‰çš„æ—¶å€™è¦æ³¨æ„ä»€ä¹ˆé—®é¢˜? æ˜¾ç„¶, ã€Œå½“å‰å…ƒç´ ã€åº”è¯¥æ¯”è¿™äº›éé™åºå­åºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¿˜è¦å°æˆ–è€…æ˜¯ç›¸ç­‰, æˆ‘ä»¬æ‰å¯ä»¥æŠŠã€Œå½“å‰å…ƒç´ ã€æ·»åŠ åˆ°å®ƒä»¬çš„å¼€å¤´. å¦‚æœä¸æ»¡è¶³è¿™ä¸ªè¦æ±‚å‘¢ï¼Ÿæˆ‘ä»¬ç›´æ¥èˆå¼ƒæ‰ã€Œå½“å‰å…ƒç´ ã€å°±å¥½. ç°åœ¨å†æ¥çœ‹ subseq_helper å‡½æ•°ï¼Œå®ƒçš„ prev å‚æ•°çš„å«ä¹‰å°±å¾ˆæ¸…æ¥šäº†ï¼Œå®ƒè¡¨ç¤ºæˆ‘ä»¬åœ¨æ„é€ å­åºåˆ—çš„æ—¶å€™å­åºåˆ—å…è®¸çš„æœ€å°å€¼ python def non_decrease_subseqs(s): \"\"\"Assuming that S is a list, return a nested list of all subsequences of S (a list of lists) for which the elements of the subsequence are strictly nondecreasing. The subsequences can appear in any order. \"\"\" def subseq_helper(s, prev): if not s: return [[]] elif s[0] \u003c prev: return subseq_helper(s[1:], prev) else: a = subseq_helper(s[1:], s[0]) # include s[0] b = subseq_helper(s[1:], prev) # exclude s[0] return insert_into_all(s[0], a) + b return subseq_helper(s, 0) ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q2-non-decreasing-subsequences"},{"categories":["Course"],"content":" Q3: Number of Trees A full binary tree is a tree where each node has either 2 branches or 0 branches, but never 1 branch. Write a function which returns the number of unique full binary tree structures that have exactly n leaves. For those interested in combinatorics, this problem does have a closed form solution): é¢˜æ„: æœ‰ n ä¸ªå¶å­ç»“ç‚¹çš„å®Œå…¨äºŒå‰æ ‘å¯èƒ½æœ‰å‡ ç§ ? ç­”æ¡ˆæ˜¯å¡ç‰¹å…°æ•°, æ‰€ä»¥æˆ‘ä»¬è¦å®ç°çš„å…¶å®æ˜¯å¡ç‰¹å…°æ•°çš„é€’å½’å†™æ³•. è‡³äºä¸ºä»€ä¹ˆæ˜¯å¡ç‰¹å…°æ•°æˆ‘ä¹Ÿæƒ³ä¸å¤§æ˜ç™½, æ¯”è¾ƒèƒ½æ¥å—çš„è§£é‡Šæ˜¯, å®Œå…¨äºŒå‰æ ‘çš„å·¦å³å­æ ‘è‚¯å®šä¹Ÿæ˜¯å®Œå…¨äºŒå‰æ ‘, å‡è®¾å·¦å­æ ‘æœ‰ 1 ä¸ªå¶å­ç»“ç‚¹, å³å­æ ‘å°±æœ‰ n - 1 ä¸ªå¶å­ç»“ç‚¹, é‚£ä¹ˆæ­¤æ—¶å°±æœ‰ f(1) * f(n - 1) ç§å¯èƒ½, ç±»ä¼¼çš„, å¦‚æœå·¦å­æ ‘æœ‰ 2 ä¸ªå¶å­ç»“ç‚¹, é‚£å°±æ˜¯ f(2) * f(n - 2), è¿™æ ·ç´¯åŠ èµ·æ¥å°±æ˜¯å¡ç‰¹å…°æ•°. ps: è¿™é‡Œçš„å®Œå…¨äºŒå‰æ ‘ä¸æ˜¯ä¸¥æ ¼æ„ä¹‰ä¸Šçš„, ç¡®åˆ‡æ¥è¯´è¿™é‡ŒæŒ‡çš„æ˜¯æ‰€æœ‰èŠ‚ç‚¹çš„åº¦åªèƒ½ä¸º 0 æˆ–è€… 2 çš„æ ‘ python def num_trees(n): \"\"\"Returns the number of unique full binary trees with exactly n leaves. E.g., \"\"\" if n == 1 or n == 2: return 1 # catalan number ans = 0 for i in range(1, n): ans += num_trees(i) * num_trees(n - i) return ans ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:1:3","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q3-number-of-trees"},{"categories":["Course"],"content":" Generators ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#generators"},{"categories":["Course"],"content":" Q4: Merge Implement merge(incr_a, incr_b), which takes two iterables incr_a and incr_b whose elements are ordered. merge yields elements from incr_a and incr_b in sorted order, eliminating repetition. You may assume incr_aand incr_b themselves do not contain repeats, and that none of the elements of either are None. You may notassume that the iterables are finite; either may produce an infinite stream of results. You will probably find it helpful to use the two-argument version of the built-in next function: next(incr, v) is the same as next(incr), except that instead of raising StopIteration when incr runs out of elements, it returns v. See the doctest for examples of behavior. merge å‡½æ•°çš„åŠŸèƒ½æ˜¯åˆå¹¶ä¸¤ä¸ªæœ‰åºçš„å¯è¿­ä»£å¯¹è±¡, åŒæ—¶è¦åšå»é‡çš„å·¥ä½œ, å¯ä»¥å‡è®¾ä¸¤ä¸ªæœ‰åºçš„å¯è¿­ä»£å¯¹è±¡æœ¬èº«æ˜¯æ²¡æœ‰å…ƒç´ é‡å¤çš„, è€Œä¸”æ²¡æœ‰ä»»ä½•ä¸€ä¸ªå…ƒç´ æ˜¯ None. åŒæ—¶ä¸å¯ä»¥å‡å®šè¿™ä¸¤ä¸ªå¯è¿­ä»£å¯¹è±¡æ˜¯æœ‰é™åºåˆ—, å®ƒä»¬å¯èƒ½æ— åºçš„(è¿™æ ·ä½ å°±ä¸èƒ½æš´åŠ›åˆå¹¶ä¸ºä¸€ä¸ªæœ‰åºå¯è¿­ä»£å¯¹è±¡å†å»é‡) å› ä¸ºä¸¤ä¸ªå¯è¿­ä»£å¯¹è±¡æœ¬èº«ä¸åŒ…å«é‡å¤å…ƒç´ , æ‰€ä»¥è¿™ä¸€é“é¢˜å¤„ç†èµ·æ¥æ¯”è¾ƒç®€å•, æˆ‘ä»¬åªè¦é‡å¤ä¸‹é¢çš„è¿‡ç¨‹: å¦‚æœä¸¤ä¸ªå¯è¿­ä»£å¯¹è±¡éƒ½æ˜¯éç©º å„å–ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ¯”è¾ƒ å¦‚æœä¸€æ ·å¤§: è¿”å›ä¸€ä¸ª, åŒæ—¶ä¸¤ä¸ª iterator éƒ½è¦å¾€åç§»åŠ¨ å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒå°: è¿”å›å°çš„è¿™ä¸ª, ç§»åŠ¨å°çš„è¿™ä¸ªå¯è¿­ä»£å¯¹è±¡çš„ iterator, å¤§çš„å…ƒç´ çš„ iterator ä¸åŠ¨ å¦‚æœé‡å¤ä¸Šé¢çš„æ“ä½œå¯¼è‡´å…¶ä¸­ä¸€ä¸ªå·²ç»ç©ºäº†, é‚£ä¹ˆæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ¯”è¾ƒç®€å•äº†, æ­¤æ—¶æˆ‘ä»¬åªè¦ç”¨ while å¾ªç¯ä¸æ–­ä»æŸä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ä¸­è¿”å›å…ƒç´ å³å¯. ä»£ç å¦‚ä¸‹: python def merge(incr_a, incr_b): \"\"\"Yield the elements of strictly increasing iterables incr_a and incr_b, removing repeats. Assume that incr_a and incr_b have no repeats. incr_a or incr_b may or may not be infinite sequences. \"\"\" iter_a, iter_b = iter(incr_a), iter(incr_b) next_a, next_b = next(iter_a, None), next(iter_b, None) # both are non-empty while next_a is not None and next_b is not None: val_a, val_b = next_a, next_b if val_a == val_b: yield next_a next_a, next_b = next(iter_a, None), next(iter_b, None) elif val_a \u003c val_b: yield next_a next_a = next(iter_a, None) else: yield next_b next_b = next(iter_b, None) # incr_a is not empty while next_a: yield next_a next_a = next(iter_a, None) # incr_b is not empty while next_b: yield next_b next_b = next(iter_b, None) ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q4-merge"},{"categories":["Course"],"content":" Objects ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#objects"},{"categories":["Course"],"content":" Q5: Bank Account Implement the class Account, which acts as a a Bank Account. Account should allow the account holder to deposit money into the account, withdraw money from the account, and view their transaction history. The Bank Account should also prevents a user from withdrawing more than the current balance. Transaction history should be stored as a list of tuples, where each tuple contains the type of transaction and the transaction amount. For example a withdrawal of 500 should be stored as (â€˜withdrawâ€™, 500) Hint: You can call the str function on an integer to get a string representation of the integer. You might find this function useful when implementing the __repr__ and __str__ methods. Hint: You can alternatively use fstrings to implement the __repr__ and __str__ methods cleanly. å®ç°ä¸€ä¸ª Account ç±», è¦æ±‚æœ‰ä»¥ä¸‹åŠŸèƒ½: å­˜æ¬¾ å–æ¬¾, é’±ä¸å¤Ÿçš„æ—¶å€™ä¸è®©å– æŸ¥çœ‹æ“ä½œå†å². è½¬è´¦å†å²æ˜¯ tuple çš„åˆ—è¡¨, æ¯ä¸ª tuple åŒ…æ‹¬äº†æ“ä½œçš„ç±»å‹å’Œè½¬è´¦çš„é‡‘é¢ æ•´ä½“ä¸Šè€Œè¨€è¿™é¢˜ä¸éš¾, çœ‹ __repr__ æˆ‘ä»¬å¯ä»¥çŸ¥é“è¦æ±‚è¿”å›å­˜æ¬¾å’Œå–æ¬¾çš„æ¬¡æ•°, è¿™é‡Œå¯ä»¥ç”¨ä¸¤ä¸ªå˜é‡æ¥è®°ä½. python class Account: \"\"\"A bank account that allows deposits and withdrawals. It tracks the current account balance and a transaction history of deposits and withdrawals. \"\"\" interest = 0.02 def __init__(self, account_holder): self.balance = 0 self.holder = account_holder self.transactions = [] self.withdraw_cnt = 0 self.deposit_cnt = 0 def deposit(self, amount): \"\"\"Increase the account balance by amount, add the deposit to the transaction history, and return the new balance. \"\"\" self.balance += amount self.transactions.append(('deposit', amount)) self.deposit_cnt += 1 return self.balance def withdraw(self, amount): \"\"\"Decrease the account balance by amount, add the withdraw to the transaction history, and return the new balance. \"\"\" if self.balance \u003e amount: self.balance -= amount self.transactions.append(('withdraw', amount)) self.withdraw_cnt += 1 return self.balance # prevent illegal withdraw return self.balance def __str__(self): return f\"{self.holder}'s Balance: ${self.balance}\" def __repr__(self): return f\"Accountholder: {self.holder}, Deposits: {self.deposit_cnt}, Withdraws: {self.withdraw_cnt}\" ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q5-bank-account"},{"categories":["Course"],"content":" Mutable Lists ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:4:0","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#mutable-lists"},{"categories":["Course"],"content":" Q6: Trade In the integer market, each participant has a list of positive integers to trade. When two participants meet, they trade the smallest non-empty prefix of their list of integers. A prefix is a slice that starts at index 0. Write a function trade that exchanges the first m elements of list first with the first n elements of list second, such that the sums of those elements are equal, and the sum is as small as possible. If no such prefix exists, return the string 'No deal!' and do not change either list. Otherwise change both lists and return 'Deal!'. A partial implementation is provided. Hint: You can mutate a slice of a list using slice assignment. To do so, specify a slice of the list [i:j] on the left-hand side of an assignment statement and another list on the right-hand side of the assignment statement. The operation will replace the entire given slice of the list from i inclusive to j exclusive with the elements from the given list. The slice and the given list need not be the same length. text \u003e\u003e\u003e a = [1, 2, 3, 4, 5, 6] \u003e\u003e\u003e b = a \u003e\u003e\u003e a[2:5] = [10, 11, 12, 13] \u003e\u003e\u003e a [1, 2, 10, 11, 12, 13, 6] \u003e\u003e\u003e b [1, 2, 10, 11, 12, 13, 6] Additionally, recall that the starting and ending indices for a slice can be left out and Python will use a default value. lst[i:] is the same as lst[i:len(lst)], and lst[:j] is the same as lst[0:j]. é¢˜æ„: äº¤æ¢ä¸¤ä¸ªåˆ—è¡¨çš„å¼€å¤´å‡ ä¸ªå…ƒç´ (m å’Œ n å¯ä»¥ä¸ç­‰é•¿), ä½¿å¾—ä¸¤è¾¹è¢«ç”¨æ¥äº¤æ¢çš„å­åˆ—è¡¨çš„å’Œ(å‰ç¼€å’Œ)æ˜¯ä¸€æ ·çš„, è€Œä¸”è¿™ä¸ªå’Œè¦è¶Šå°è¶Šå¥½. åœ¨ä»£ç é‡Œå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†äº¤æ¢å…ƒç´ çš„å‡½æ•°, æˆ‘ä»¬è¦åšçš„å°±æ˜¯è®© m å’Œ n åœåœ¨æ­£ç¡®çš„ä½ç½®(ä»–ä»¬çš„å’Œä¸€æ ·), è¿™é‡Œç”¨ while å¾ªç¯æ¥å®ç°, åªè¦ä¸¤ä¸ªçš„ç´¢å¼•æ˜¯æœ‰æ•ˆçš„(ä¸ç„¶ä»–ä»¬ä¼šä¸€ç›´å¢åŠ , while å¾ªç¯å°±ä¼šå˜ä¸ºæ­»å¾ªç¯)è€Œä¸”å‰ç¼€å’Œä¸æƒ³ç­‰, æˆ‘ä»¬ç§»åŠ¨ m æˆ–è€… n æŒ‡é’ˆ. python def trade(first, second): \"\"\"Exchange the smallest prefixes of first and second that have equal sum. \"\"\" m, n = 1, 1 equal_prefix = lambda: sum(first[:m]) == sum(second[:n]) while m \u003c= len(first) and n \u003c= len(second) and not equal_prefix(): if sum(first[:m]) \u003c sum(second[:n]): m += 1 else: n += 1 if equal_prefix(): first[:m], second[:n] = second[:n], first[:m] return 'Deal!' else: return 'No deal!' ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:4:1","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q6-trade"},{"categories":["Course"],"content":" Q7: Shuffle Define a function shuffle that takes a sequence with an even number of elements (cards) and creates a new list that interleaves the elements of the first half with the elements of the second half. To interleave two sequences s0 and s1 is to create a new sequence such that the new sequence contains (in this order) the first element of s0, the first element of s1, the second element of s0, the second element of s1, and so on. If the two lists are not the same length, then the leftover elements of the longer list should still appear at the end. Note: If youâ€™re running into an issue where the special heart / diamond / spades / clubs symbols are erroring in the doctests, feel free to copy paste the below doctests into your file as these donâ€™t use the special characters and should not give an â€œillegal multibyte sequenceâ€ error. è¿™ä¸€é“é¢˜å°±æ˜¯è¦æˆ‘ä»¬å®Œæˆæ´—ç‰Œçš„åŠŸèƒ½, æ´—ç‰Œçš„æ„æ€æ˜¯å‰ä¸€åŠå’Œåä¸€åŠçš„å…ƒç´ äº¤æ›¿å‡ºç°, ä¸¾ä¾‹æ¥è¯´:[0, 1, 2, 3, 4, 5] = [0, 3, 1, 4, 2, 5]. ä½ å¯ä»¥çœ‹åˆ°å¥‡æ•°ç´¢å¼•çš„æ˜¯åä¸€åŠçš„å…ƒç´ , å¶æ•°ç´¢å¼•çš„æ˜¯å‰ä¸€åŠå…ƒç´ . è¿™ä¸€é“é¢˜çš„å…³é”®åœ¨äºå¼„æ¸…æ¥šæ´—ç‰Œä¹‹åçš„ç´¢å¼•å’ŒåŸæ¥çš„ç´¢å¼•å¯¹åº”çš„å…³ç³», æ€»ç»“æ¥æ¥è¯´:[0, 1, ..., len(cards) // 2, len(cards) // 2 + 1, ...]. ä½ å¯ä»¥å‘ç°å‰ä¸€åŠå’Œåä¸€åŠå¯¹åº”ä½ç½®çš„å…ƒç´ çš„ç´¢å¼•ç›¸å·® len(cards) // 2 python def shuffle(cards): \"\"\"Return a shuffled list that interleaves the two halves of cards. \"\"\" assert len(cards) % 2 == 0, 'len(cards) must be even' half = len(cards) // 2 shuffled = [] for i in range(half): shuffled.append(cards[i]) shuffled.append(cards[i + half]) return shuffled ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q7-shuffle"},{"categories":["Course"],"content":" Linked Lists ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:5:0","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#linked-lists"},{"categories":["Course"],"content":" Q8: Insert Implement a function insert that takes a Link, a value, and an index, and inserts the value into the Link at the given index. You can assume the linked list already has at least one element. Do not return anything â€“ insert should mutate the linked list. Note: If the index is out of bounds, you should raise an IndexError with: text raise IndexError('Out of bounds!') æ ¹æ®æŒ‡å®šçš„ç´¢å¼• index åœ¨é“¾è¡¨ä¸­æ’å…¥å…ƒç´ , å¦‚æœç´¢å¼•éæ³•, æŠ›å‡ºé”™è¯¯ è¿™ä¸€é¢˜æœ‰ç‚¹å¥‡æ€ªçš„åœ°æ–¹åœ¨äº, å®ƒè¦æ±‚æˆ‘ä»¬åœ¨åŸæ¥çš„é“¾è¡¨ä¸Šè¿›è¡Œä¿®æ”¹, ä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦åœ¨é“¾è¡¨çš„å¼€å¤´è¿›è¡Œæ’å…¥ä¸€ä¸ªæ–°èŠ‚ç‚¹, ä¼šæ— æ³•é€šè¿‡å®ƒçš„ link is other_link çš„åˆ¤æ–­(å› ä¸ºæ’å…¥åé“¾è¡¨å¤´æ˜¯ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹), æ‰€ä»¥æˆ‘è¿™é‡Œæƒ³çš„åŠæ³•æ˜¯æ¯æ¬¡åœ¨æ’å…¥å‰æˆ‘ä»¬æ‹·è´å½“å‰ç»“ç‚¹, ç„¶åä¿®æ”¹å½“å‰ç»“ç‚¹çš„å€¼ä¸ºæƒ³è¦æ’å…¥çš„å€¼, è¿™æ ·ç­‰æ•ˆäºæˆ‘ä»¬åšäº†æ’å…¥ python def insert(link, value, index): \"\"\"Insert a value into a Link at the given index. \"\"\" pos = link current_index = 0 while pos is not Link.empty: if current_index == index: # make a copy of current node, and modify the current node's value \\ # which is equal to insert a new node :) current_copy = Link(pos.first, pos.rest) origin_next = pos.rest pos.first = value pos.rest = current_copy #print(f\"link: {link.first}\") return pos = pos.rest current_index += 1 raise IndexError('Out of bounds!') ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:5:1","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q8-insert"},{"categories":["Course"],"content":" Q9: Deep Linked List Length A linked list that contains one or more linked lists as elements is called a deep linked list. Write a function deep_len that takes in a (possibly deep) linked list and returns the deep length of that linked list. The deep length of a linked list is the total number of non-link elements in the list, as well as the total number of elements contained in all contained lists. See the functionâ€™s doctests for examples of the deep length of linked lists. Hint: Use isinstance to check if something is an instance of an object. Deep Linked List Length å…¶å®å°±æ˜¯ä¸€ä¸ªå¯èƒ½åŒ…å«é“¾è¡¨ä¸ºç»“ç‚¹çš„åµŒå¥—é“¾è¡¨ç»“æ„. è¿™ä¸€é“é¢˜è¦æ±‚æˆ‘ä»¬ç®—è¿™ç§åµŒå¥—åˆ—è¡¨ä¸€å…±æœ‰å¤šå°‘ä¸ªå…ƒç´ . å…¶å®å°±æ˜¯ä¹‹å‰åšçš„æ‘Šå¹³é“¾è¡¨çš„é‚£ç§é¢˜ç›®. æ˜¾ç„¶, è¿™æ˜¯ç¬¦åˆé€’å½’çš„åµŒå¥—ç»“æ„, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨é€’å½’çš„åŠæ³•è§£å†³. base case å°±æ˜¯ç©ºé“¾è¡¨æˆ–è€…å®ƒæ˜¯ä¸€ä¸ªå…ƒç´ è€Œä¸æ˜¯é“¾è¡¨. å…¶ä»–æƒ…å†µæˆ‘ä»¬å°±é€’å½’å¤„ç†é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å’Œé™¤äº†ç¬¬ä¸€ä¸ªç»“ç‚¹ä»¥å¤–çš„å­é“¾è¡¨ ğŸ¤— python def deep_len(lnk): \"\"\" Returns the deep length of a possibly deep linked list. \"\"\" # base case 1. an empty node if lnk is Link.empty: return 0 # base case 2. an integer elif isinstance(lnk, int): return 1 else: return deep_len(lnk.first) + deep_len(lnk.rest) ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:5:2","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q9-deep-linked-list-length"},{"categories":["Course"],"content":" Q10: Linked Lists as Strings Kevin and Jerry like different ways of displaying the linked list structure in Python. While Kevin likes box and pointer diagrams, Jerry prefers a more futuristic way. Write a function make_to_string that returns a function that converts the linked list to a string in their preferred style. Hint: You can convert numbers to strings using the str function, and you can combine strings together using +. text \u003e\u003e\u003e str(4) '4' \u003e\u003e\u003e 'cs ' + str(61) + 'a' 'cs 61a' ç®€å•æ¥è¯´å°±æ˜¯æƒ³è¦æ ¹æ®ä¸åŒäººçš„éœ€æ±‚æ¥æ‰“å°é“¾è¡¨, å…·ä½“æ ¼å¼å°±æ˜¯ front + å½“å‰ç»“ç‚¹çš„å€¼ + mid + å­é“¾è¡¨çš„ + back è¿™æ · python def make_to_string(front, mid, back, empty_repr): \"\"\" Returns a function that turns linked lists to strings. \"\"\" def printer(lnk): if lnk is Link.empty: return empty_repr else: return front + str(lnk.first) + mid + printer(lnk.rest) + back return printer ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:5:3","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q10-linked-lists-as-strings"},{"categories":["Course"],"content":" Trees ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:6:0","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#trees"},{"categories":["Course"],"content":" Q11: Long Paths Implement long_paths, which returns a list of all paths in a tree with length at least n. A path in a tree is a list of node labels that starts with the root and ends at a leaf. Each subsequent element must be from a label of a branch of the previous valueâ€™s node. The length of a path is the number of edges in the path (i.e. one less than the number of nodes in the path). Paths are ordered in the output list from left to right in the tree. See the doctests for some examples. è¿”å›ä¸€ä¸ªåµŒå¥—åˆ—è¡¨, æ¯ä¸ªå­åˆ—è¡¨è¡¨ç¤ºé•¿åº¦è‡³å°‘ä¸º n çš„è·¯å¾„. è¿™é‡Œè¯´çš„è·¯å¾„ä¸€å®šæ˜¯å¶å­ç»“ç‚¹çš„è·¯å¾„ ! è·¯å¾„çš„é•¿åº¦å¯ä»¥ç†è§£ä¸ºä»æ ¹ç»“ç‚¹å‡ºå‘åˆ°è¾¾å¶å­ç»“ç‚¹ç»è¿‡çš„è¾¹æ•°. è¿™ä¸€é“é¢˜å…¶å®æ˜¯ç»å…¸çš„é€’å½’ä¸å›æº¯é—®é¢˜, æˆ‘ä»¬è¦ä¸ºå…¶å†™ä¸€ä¸ª helper å‡½æ•°, è¦è®°ä½æˆ‘ä»¬å½“å‰ç»è¿‡çš„ç‚¹çš„è·¯å¾„, ä»¥åŠè·¯å¾„çš„é•¿åº¦. é€’å½’ä¸å›æº¯çš„æ¨¡æ¿å¤§æ¦‚å¦‚ä¸‹: python def function_name(p): # base case ... dothing thing ... # recursively solve this problem recall what you have done æ”¾åˆ°æˆ‘ä»¬è¿™é‡Œå°±æ˜¯æˆ‘ä»¬è¦åœ¨å¾€æ›´æ·±å±‚é€’å½’çš„æ—¶å€™åŠ ä¸Šå½“å‰èŠ‚ç‚¹çš„ label, å½“æˆ‘ä»¬å›æº¯çš„æ—¶å€™æ’¤é”€æˆ‘ä»¬å¯¹ä¹‹å‰çš„æ·»åŠ . ä»£ç å¦‚ä¸‹: python def long_paths(t, n): \"\"\"Return a list of all paths in t with length at least n. \"\"\" path_list = [] def helper(t, current_path, length): nonlocal path_list if t.is_leaf(): current_path.append(t.label) if length \u003e= n: # warning: we need to pass a copy instead fo a ref path_list.append(current_path[:]) current_path.pop() return current_path.append(t.label) for b in t.branches: helper(b, current_path, length + 1) current_path.pop() helper(t, [], 0) return path_list ","date":"2022-02-26","objectID":"/zh-cn/lab09-cs61a-of-ucb/:6:1","series":null,"tags":["Course"],"title":"Lab09 é¢˜è§£ (UCB CS61A@2021-Fall)","uri":"/zh-cn/lab09-cs61a-of-ucb/#q11-long-paths"},{"categories":["Course"],"content":"the simple solutions for lab08 of CS61A of UCB","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/"},{"categories":["Course"],"content":" Q2: Convert Link Write a function convert_link that takes in a linked list and returns the sequence as a Python list. You may assume that the input list is shallow; that is none of the elements is another linked list. Try to find both an iterative and recursive solution for this problem! è¿­ä»£çš„ç®—æ³•å¾ˆç®€å•, æˆ‘ä»¬åªè¦åˆ›å»ºä¸€ä¸ª result list æ¥å­˜å‚¨ç»“æœ, éå†é“¾è¡¨çš„åŒæ—¶è®°ä½è®¿é—®è¿‡çš„æ•°å³å¯ python def convert_link(link): \"\"\"Takes a linked list and returns a Python list with the same elements. \"\"\" result = [] while link is not Link.empty: result.append(int(link.first)) link = link.rest return result é€’å½’çš„ç®—æ³•ä¹Ÿç®€å•, base case å°±æ˜¯æˆ‘ä»¬é‡åˆ°äº†ç©ºç»“ç‚¹çš„æ—¶å€™, è¿™ä¸ªæ—¶å€™è¿”å›çš„æ˜¯ç©ºçš„å€¼, å…¶ä»–æƒ…å†µæˆ‘ä»¬é€’å½’åˆ†è§£: å½“å‰ç»“ç‚¹ + é“¾è¡¨çš„å‰©ä½™ç»“ç‚¹ python def convert_link(link): \"\"\"Takes a linked list and returns a Python list with the same elements. \"\"\" # recursive solution if link is Link.empty: return [] else: return [int(link.first)] + convert_link(link.rest) ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:0:1","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#q2-convert-link"},{"categories":["Course"],"content":" Trees ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#trees"},{"categories":["Course"],"content":" Q4: Square Write a function label_squarer that mutates a Tree with numerical labels so that each label is squared. éå†æ ‘çš„æ‰€æœ‰èŠ‚ç‚¹, å°†å®ƒçš„ label éƒ½æ”¹ä¸º label çš„å¹³æ–¹ python def label_squarer(t): \"\"\"Mutates a Tree t by squaring all its elements. \"\"\" # base case if t.is_leaf(): t.label = t.label ** 2 # check every branch for b in t.branches: t.label = t.label ** 2 # change the current node's label label_squarer(b) # change branches ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#q4-square"},{"categories":["Course"],"content":" Q5: Cumulative Mul Write a function cumulative_mul that mutates the Tree t so that each nodeâ€™s label becomes the product of its label and all labels in the subtrees rooted at the node. è¿™ä¸€é¢˜çš„æ„æ€æ˜¯: æˆ‘ä»¬è¦è®©æ¯ä¸ªèŠ‚ç‚¹çš„ label ç­‰äºå®ƒçš„æ‰€æœ‰å­©å­èŠ‚ç‚¹çš„ label çš„ä¹˜ç§¯, æ˜¾ç„¶, è¿™æ˜¯ä¸€ä¸ªé€’å½’é—®é¢˜ base case å°±æ˜¯å¶å­ç»“ç‚¹, æ­¤æ—¶è¿”å›å¶å­èŠ‚ç‚¹çš„ label. é€’å½’åˆ†è§£é—®é¢˜å°±æ˜¯éå†èŠ‚ç‚¹çš„æ¯ä¸€ä¸ªå­æ ‘, è·å¾—æ¯ä¸ªå­èŠ‚ç‚¹è¿”å›å€¼å†ä¹˜ä»¥å½“å‰ç»“ç‚¹çš„ label. æ³¨æ„æˆ‘è¿™é‡Œç”¨åˆ°äº† math.prod è¿™ä¸ªå‡½æ•°è¿”å›å¯è¿­ä»£å¯¹è±¡çš„è¿ä¹˜ç»“æœ, å¦‚æœä½ ä¹Ÿè¦è¿™æ ·ä½¿ç”¨, ä½ åº”è¯¥åœ¨æ–‡ä»¶çš„å¼€å¤´å†™ import math python def cumulative_mul(t): \"\"\"Mutates t so that each node's label becomes the product of all labels in \"\"\" # base case if t.is_leaf(): return t.label # get all label value in subtree vals = [cumulative_mul(b) for b in t.branches] # calculate t.label *= math.prod(vals) ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#q5-cumulative-mul"},{"categories":["Course"],"content":" Q6: Add Leaves Implement add_d_leaves, a function that takes in a Tree instance t and a number v. We define the depth of a node in t to be the number of edges from the root to that node. The depth of root is therefore 0. For each node in the tree, you should add d leaves to it, where d is the depth of the node. Every added leaf should have a label of v. If the node at this depth has existing branches, you should add these leaves to the end of that list of branches. For example, you should be adding 1 leaf with label v to each node at depth 1, 2 leaves to each node at depth 2, and so on. Here is an example of a tree t(shown on the left) and the result after add_d_leaves is applied with v as 5. ç¿»è¯‘ä¸€ä¸‹è¿™ä¸€é“é¢˜çš„æ„æ€: æˆ‘ä»¬è¦æ ¹æ®ç»“ç‚¹åœ¨æ ‘ä¸­çš„é«˜åº¦(æ ¹ç»“ç‚¹é«˜åº¦ä¸º 0)æ¥ç»™ç»“ç‚¹æ·»åŠ å­èŠ‚ç‚¹, è¿™é‡Œè¯´çš„ç¬¦åˆæ¡ä»¶æ˜¯ label ä¸º v. é«˜åº¦ä¸º d å°±å¢åŠ  d ä¸ªå­èŠ‚ç‚¹. è¿™é¢˜ç¬¬ä¸€ä¸ªå›°éš¾æ˜¯è¦å¦‚ä½•è·å–å½“å‰ç»“ç‚¹çš„é«˜åº¦, å› ä¸ºæœ‰äº†é«˜åº¦æˆ‘ä»¬æ‰èƒ½çŸ¥é“è¦å¢åŠ å¤šå°‘ä¸ªå­èŠ‚ç‚¹, æˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå‚æ•°è¡¨ç¤ºå½“å‰ç»“ç‚¹çš„é«˜åº¦. æ¯å½“æˆ‘ä»¬å¾€æ ‘çš„æ›´æ·±ä¸€å±‚å‰è¿›çš„æ—¶å€™æˆ‘ä»¬å°±å°†å®ƒ +1. base case å°±æ˜¯åœ¨å¶å­ç»“ç‚¹, æˆ‘ä»¬æ ¹æ®å®ƒçš„é«˜åº¦å¢åŠ å­ç»“ç‚¹. ç„¶åå¯¹äºå½“å‰çš„èŠ‚ç‚¹, æˆ‘ä»¬éœ€è¦å¯¹å®ƒçš„æ¯ä¸ªå­©å­èŠ‚ç‚¹é‡å¤è¿™ä¸ªæ­¥éª¤, åŒæ—¶ä¹Ÿè¦åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦éœ€è¦æ·»åŠ å­èŠ‚ç‚¹ python def add_d_leaves(t, v): \"\"\"Add d leaves containing v to each node at every depth d. \"\"\" def helper(t, v, depth): # base case if t.is_leaf(): for i in range(depth): t.branches.append(Tree(v)) return # check every branch for b in t.branches: helper(b, v, depth + 1) # check current node for i in range(depth): t.branches.append(Tree(v)) helper(t, v, 0) ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:1:3","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#q6-add-leaves"},{"categories":["Course"],"content":" Optional Questions ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#optional-questions"},{"categories":["Course"],"content":" Q7: Every Other Implement every_other, which takes a linked list s. It mutates s such that all of the odd-indexed elements (using 0-based indexing) are removed from the list. For example: text \u003e\u003e\u003e s = Link('a', Link('b', Link('c', Link('d')))) \u003e\u003e\u003e every_other(s) \u003e\u003e\u003e s.first 'a' \u003e\u003e\u003e s.rest.first 'c' \u003e\u003e\u003e s.rest.rest is Link.empty True If s contains fewer than two elements, s remains unchanged. Do not return anything! every_other should mutate the original list. æˆ‘ä»¬å¯ä»¥ç”¨è¿­ä»£çš„æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªé—®é¢˜, é¦–å…ˆè¦å¤„ç†çš„æ˜¯é•¿åº¦çš„é—®é¢˜, å¦‚æœé“¾è¡¨çš„é•¿åº¦å°äº 2, é‚£ä¹ˆç›´æ¥è¿”å›. å¦åˆ™æˆ‘ä»¬å°±ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘å½“å‰ä½ç½®å’Œä¸Šä¸€ä¸ªè®¿é—®çš„ä½ç½®, å½“æˆ‘ä»¬è¦åˆ é™¤ç´¢å¼•ä¸ºå¥‡æ•°(ç´¢å¼•ä» 0 å¼€å§‹)çš„ç‚¹çš„æ—¶å€™å°±è®©ä¸Šä¸€ä¸ªèŠ‚ç‚¹ç›´æ¥æŒ‡å‘å½“å‰è¿™ä¸ªèŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹å³å¯. python def every_other(s): \"\"\"Mutates a linked list so that all the odd-indiced elements are removed \"\"\" # if it contains fewer than 2, do nothing if s is Link.empty or s.rest is Link.empty: return last_pos, pos = s, s.rest current_index = 1 # start from 2nd position while pos is not Link.empty: if current_index % 2 == 1: last_pos.rest = pos.rest last_pos = pos pos = pos.rest current_index += 1 ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#q7-every-other"},{"categories":["Course"],"content":" Q8: Prune Small Complete the function prune_small that takes in a Tree t and a number n and prunes t mutatively. If t or any of its branches has more than n branches, the n branches with the smallest labels should be kept and any other branches should be pruned, or removed, from the tree. è¿™ä¸€é“é¢˜è¦æˆ‘ä»¬è£å‰ªè¿™æ£µæ ‘, å…·ä½“è¦æ±‚æ˜¯æ‰è§åˆ°æ¯ä¸ªèŠ‚ç‚¹æœ€å¤š n ä¸ªå­æ ‘, å¦‚æœè¶…è¿‡äº† n å°±ä¼˜å…ˆç§»é™¤ label æ¯”è¾ƒå¤§çš„, å…¶å®è¿™ä¸€é“é¢˜å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä»£ç , åªè¦æŒ–ç©ºå¡«å†™å°±å¥½äº†. ä¸éš¾ç›¸å¤„, æˆ‘ä»¬åº”è¯¥è‡ªé¡¶å‘ä¸‹(ä»æ ¹èŠ‚ç‚¹å‡ºå‘)è£å‰ª, æ‰€ä»¥ç¬¬ä¸€ä¸ª while å¾ªç¯è¦å®Œæˆçš„åŠ¨ä½œæ˜¯å¦‚æœåˆ†æ”¯æ•° \u003e n, é‚£ä¹ˆæ‰¾åˆ°æœ€å¤§çš„åˆ æ‰ è€Œåé¢çš„ for å¾ªç¯åˆ™æ˜¯è¦è®©æˆ‘ä»¬åˆ°å­æ ‘ä¸­é€’å½’è£å‡ python def prune_small(t, n): \"\"\"Prune the tree mutatively, keeping only the n branches of each node with the smallest label. \"\"\" while len(t.branches) \u003e n: largest = max(t.branches, key=lambda x: x.label) t.branches.remove(largest) for b in t.branches: prune_small(b, n) ","date":"2022-02-24","objectID":"/zh-cn/lab08-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Lab08 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab08-cs61a-of-ucb/#q8-prune-small"},{"categories":["Course"],"content":"the simple solutions for lab07 of CS61A of UCB","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/"},{"categories":["Course"],"content":" Accounts ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#accounts"},{"categories":["Course"],"content":" Q2: Retirement Add a time_to_retire method to the Account class. This method takes in an amount and returns how many years the holder would need to wait in order for the current balance to grow to at least amount, assuming that the bank adds balance times the interest rate to the total balance at the end of every year. é—®é¢˜æè¿°å¦‚ä¸‹: æ¯ä¸€å¹´ä½ çš„ balance éƒ½ä¼šæœ‰åˆ©æ¯, é—®ä½ å“ªä¸€å¹´ä½ è¾¾åˆ°äº† amount å¯ä»¥é€€ä¼‘äº†, ç”¨ä»£ç æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹å³å¯ python def time_to_retire(self, amount): \"\"\"Return the number of years until balance would grow to amount.\"\"\" assert self.balance \u003e 0 and amount \u003e 0 and self.interest \u003e 0 year, curAmount = 0, self.balance while True: year += 1 curAmount *= (1 + self.interest) if curAmount \u003e amount: return year ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q2-retirement"},{"categories":["Course"],"content":" Q3: FreeChecking Implement the FreeChecking class, which is like the Account class from lecture except that it charges a withdraw fee after 2 withdrawals. If a withdrawal is unsuccessful, it still counts towards the number of free withdrawals remaining, but no fee for the withdrawal will be charged. å’Œæ™®é€šçš„ withdraw æ–¹æ³•ç›¸æ¯”, æˆ‘ä»¬è¦é¢å¤–æ£€æŸ¥ä¸€ä¸ªå‚æ•° - free_withdrawals, å®ƒè¡¨ç¤ºæˆ‘ä»¬å¯ä»¥åœ¨ä¸æ”¯ä»˜æ¶ˆè´¹çš„æƒ…å†µä¸‹å–æ¬¾çš„æ¬¡æ•°. è¿™é‡Œè¦æ³¨æ„ä¸¤ä¸ªç‚¹: å–æ¬¾å¤±è´¥ä¹Ÿä¼šæ‰£å…è´¹æ¬¡æ•° åœ¨è¦æ”¯ä»˜å°è´¹çš„æƒ…å†µä¸‹, å¾—å°è´¹+ä½™é¢\u003eå–æ¬¾é‡‘é¢æ‰èƒ½æˆåŠŸå–æ¬¾ æ³¨æ„å¥½è¿™ä¸¤ä¸ªç‚¹å†™å‡ºä»£ç å°±æ²¡æœ‰ä»€ä¹ˆéš¾åº¦äº† python def withdraw(self, amount): if self.free_withdrawals \u003e 0: if amount \u003e self.balance: self.free_withdrawals -= 1 return \"Insufficient funds\" if amount \u003e self.max_withdrawal: self.free_withdrawals -= 1 return \"Can't withdraw that amount\" self.free_withdrawals -= 1 self.balance = self.balance - amount else: if amount + self.withdraw_fee \u003e self.balance: self.free_withdrawals -= 1 return \"Insufficient funds\" if amount + self.withdraw_fee \u003e self.max_withdrawal: self.free_withdrawals -= 1 return \"Can't withdraw that amount\" self.balance = self.balance - amount - self.withdraw_fee ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q3-freechecking"},{"categories":["Course"],"content":" Magic: the Lambda-ing ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#magic-the-lambda-ing"},{"categories":["Course"],"content":" Descriptionä¸‹é¢è¦å®ç°çš„æ˜¯ä¸€ä¸ªå¡ç‰Œæ¸¸æˆ, ä¸¤ä¸ªç©å®¶éƒ½æœ‰ä¸€å‰¯å¡ç‰Œ, å¹¶ä¸”æŒæœ‰æ‰‹ç‰Œ. åŒæ–¹ç©å®¶éœ€è¦åœ¨æ¯ä¸ªå›åˆä¸­æ‰“å‡ºä¸€å¼ æ‰‹ç‰Œ. æ¯å¼ æ‰‹ç‰Œéƒ½æœ‰æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›, èƒ½é‡é«˜çš„äººè·èƒœ. èƒ½é‡è®¡ç®—æ–¹å¼å¦‚ä¸‹ $$(æŒæœ‰æ‰‹ç‰Œçš„æ”»å‡»åŠ›)-(å¯¹æ–¹å¡ç‰Œçš„é˜²å¾¡åŠ›)/2$$ ç¬¬ä¸€ä¸ªèƒœåˆ© 8 å›åˆä»¥ä¸Šçš„äººè·å¾—æ¸¸æˆçš„èƒœåˆ©. åŒæ—¶è¿˜æœ‰ä¸‹é¢å‡ å¼ ç‰¹æ®Šå¡ç‰Œ: AI å¡: å¼ºåˆ¶è®©å¯¹æ‰‹å‡ºçš„å¡ç‰Œçš„æ”»å‡»åŠ›å‡å»å®ƒçš„é˜²å¾¡åŠ›, ç„¶åè®©å®ƒçš„é˜²å¾¡åŠ› * 2 Tutor å¡: å¼ºåˆ¶è®©å¯¹æ‰‹å¼ƒä¸‰å¼ å¡ç‰Œå¹¶é‡æ–°æŠ½ä¸‰å¼ ç‰Œ TA å¡: å¼ºåˆ¶äº¤æ¢å¯¹æ‰‹å‡ºçš„å¡ç‰Œçš„æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ› Instructor å¡: æ ¹æ®å¯¹æ‰‹å‡ºçš„å¡ç‰Œæ¥å¢åŠ è‡ªå·±å¡ç‰Œå †é‡Œé¢çš„å¡ç‰Œçš„æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›, ç„¶ååˆ é™¤å¯¹æ‰‹å¡ç‰Œå †é‡Œæ‰€æœ‰è·Ÿä»–å‡ºçš„å¡èº«æ(æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›)ä¸€æ ·çš„ ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#description"},{"categories":["Course"],"content":" Q4: Making Cards To play a card game, weâ€™re going to need to have cards, so letâ€™s make some! Weâ€™re gonna implement the basics of the Card class first. First, implement the Card class constructor in classes.py. This constructor takes three arguments: a string as the name of the card an integer as the attack value of the card an integer as the defense value of the card Each Card instance should keep track of these values using instance attributes called name, attack, and defense. You should also implement the power method in Card, which takes in another card as an input and calculates the current cardâ€™s power. Refer to the Rules of the Game if youâ€™d like a refresher on how power is calculated. åœ¨æœ¬ä½“ä¸­æˆ‘ä»¬è¦å®Œæˆæ„é€ å‡½æ•°çš„ä»£ç å’Œè®¡ç®—èƒ½é‡çš„å‡½æ•°, å…¶å®å°±æ˜¯æŠŠä¸Šé¢çš„è§„åˆ™ç¿»è¯‘æˆä»£ç , å¾ˆç®€å•. python class Card: cardtype = 'Staff' def __init__(self, name, attack, defense): \"\"\" Create a Card object with a name, attack, and defense. \"\"\" self.name = name self.attack = attack self.defense = defense def power(self, opponent_card): \"\"\" Calculate power as: (player card's attack) - (opponent card's defense)/2 \"\"\" return self.attack - opponent_card.defense / 2 ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q4-making-cards"},{"categories":["Course"],"content":" Q5: Making a Player Now that we have cards, we can make a deck, but we still need players to actually use them. Weâ€™ll now fill in the implementation of the Player class. A Player instance has three instance attributes: name is the playerâ€™s name. When you play the game, you can enter your name, which will be converted into a string to be passed to the constructor. deck is an instance of the Deck class. You can draw from it using its .draw() method. hand is a list of Card instances. Each player should start with 5 cards in their hand, drawn from their deck. Each card in the hand can be selected by its index in the list during the game. When a player draws a new card from the deck, it is added to the end of this list. Complete the implementation of the constructor for Player so that self.hand is set to a list of 5 cards drawn from the playerâ€™s deck. Next, implement the draw and play methods in the Player class. The draw method draws a card from the deck and adds it to the playerâ€™s hand. The play method removes and returns a card from the playerâ€™s hand at the given index. Call deck.draw() when implementing Player.__init__ and Player.draw. Donâ€™t worry about how this function works - leave it all to the abstraction! åœ¨è¿™ä¸€é¢˜ä¸­è¿›ä¸€æ­¥å¯¹æ‰‹ç‰Œå®Œå–„äº†æè¿°, æˆ‘ä»¬ä¸€å¼€å§‹æœ‰ 5 å¼ æ‰‹ç‰Œ. æˆ‘ä»¬éœ€è¦å®Œæˆä¸‹é¢çš„åŠŸèƒ½: æ„é€ å‡½æ•°, åœ¨è¿™é‡Œè¦ä» deck ä¸­å–å‡º 5 å¼ æ‰‹ç‰Œ, ä¸ºäº†ä»£ç çš„ç®€æ´æˆ‘ä»¬è¿™é‡Œå¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ List comprehension draw å‡½æ•°, ä»å¡ç‰Œå †å–ä¸€å¼ ç‰Œåˆ°æ‰‹ç‰Œ, è¿™ä¸ªç›´æ¥ç”¨ deck.draw() å³å¯ play å‡½æ•°, å…¶å®å°±æ˜¯å‡ºç‰Œå‡½æ•°, æˆ‘ä»¬éœ€è¦æ ¹æ®ç´¢å¼•å‡ºç‰Œ, è®°å¾—æŠŠç‰Œåˆ æ‰, è¦åŒºåˆ† python ä¸­çš„ .remove() å’Œ .pop() æ–¹æ³• python def __init__(self, deck, name): \"\"\"Initialize a Player object. \"\"\" self.deck = deck self.name = name self.hand = [deck.draw() for i in range(5)] def draw(self): \"\"\"Draw a card from the player's deck and add it to their hand. \"\"\" assert not self.deck.is_empty(), 'Deck is empty!' self.hand.append(self.deck.draw()) def play(self, card_index): \"\"\"Remove and return a card from the player's hand at the given index. \"\"\" card = self.hand[card_index] self.hand.pop(card_index) return card ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:2:3","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q5-making-a-player"},{"categories":["Course"],"content":" Optional Questions","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#optional-questions"},{"categories":["Course"],"content":" Q6: AIs: Defenders Implement the effect method for AIs, which reduces the opponent cardâ€™s attack by the opponent cardâ€™s defense, and then doubles the opponent cardâ€™s defense. Note: The opponent cardâ€™s resulting attack value cannot be negative. è¿™ä¸ªé—®é¢˜è¦æˆ‘ä»¬å®ç°å‰é¢æåˆ°è¿‡çš„ AI å¡çš„åŠŸèƒ½, å°±æŒ‰ç…§é‚£ä¸ªåŠŸèƒ½å†™ä»£ç å³å¯, æ³¨æ„å¦‚æœæ”»å‡»åŠ›ç®—å‡ºæ¥å°äº 0, æˆ‘ä»¬éœ€è¦æŠŠå®ƒè®¾ç½®ä¸º 0 python def effect(self, opponent_card, player, opponent): \"\"\" Reduce the opponent's card's attack by its defense, then double its defense. \"\"\" opponent_card.attack -= opponent_card.defense if opponent_card.attack \u003c 0: opponent_card.attack = 0 opponent_card.defense *= 2 ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q6-ais-defenders"},{"categories":["Course"],"content":" Q7: Tutors: Flummox Implement the effect method for TAs, which swaps the attack and defense of the opponentâ€™s card. ä¹Ÿå°±æ˜¯å®ç°ä¸Šé¢çš„ Tutor å¡, æ³¨æ„è¿™é‡Œæˆ‘ä»¬è¦å¦‚ä½•å®ç°å¼ƒç‰Œ, æˆ‘ä»¬ä¸åº”è¯¥ç ´åå°è£…, ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦å‡è£…ä¸çŸ¥é“å†…éƒ¨å®ç°ç»†èŠ‚, é‚£ä¹ˆæŸ¥çœ‹ Player ç±»æœ‰ä»€ä¹ˆæ–¹æ³•æˆ‘ä»¬å¯ä»¥ä½¿ç”¨. æ˜¾ç„¶, æˆ‘ä»¬å¯ä»¥ç”¨ play æŠŠå‰ä¸‰å¼ ç‰Œæ‰“å‡ºå», ç„¶åä»ç‰Œå †é‡Œ draw ä¸‰å¼ ç‰Œå‡ºæ¥ python def effect(self, opponent_card, player, opponent): \"\"\" Discard the first 3 cards in the opponent's hand and have them draw the same number of cards from their deck. \"\"\" # discard 3 cards for i in range(3): opponent.play(i) # draw 3 cards for i in range(3): opponent.draw() # You should add your implementation above this. print('{} discarded and re-drew 3 cards!'.format(opponent.name)) ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:3:2","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q7-tutors-flummox"},{"categories":["Course"],"content":" Q8: TAs: Shift Implement the effect method for TAs, which swaps the attack and defense of the opponentâ€™s card. TA å¡çš„åŠŸèƒ½å¾ˆç®€å•, æ— éå°±æ˜¯äº¤æ¢æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›è€Œå·², åœ¨ python ä¸­è¦å®ç°è¿™ä¸ªåŠŸèƒ½æ˜¯ååˆ†ç®€æ´çš„ python def effect(self, opponent_card, player, opponent): \"\"\" Swap the attack and defense of an opponent's card. \"\"\" opponent_card.attack, opponent_card.defense = opponent_card.defense, opponent_card.attack ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:3:3","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q8-tas-shift"},{"categories":["Course"],"content":" Q9: The Instructor Arrives A new challenger has appeared! Implement the effect method for the Instructors, who add the opponent cardâ€™s attack and defense to all cards in the playerâ€™s deck and then removes all cards in the opponentâ€™s deck that have the same attack or defense as the opponentâ€™s card. Note: If you mutate a list while iterating through it, you may run into trouble. Try iterating through a copy of the list instead. You can use slicing to make a copy of a list: text \u003e\u003e\u003e original = [1, 2, 3, 4] \u003e\u003e\u003e copy = original[:] \u003e\u003e\u003e copy [1, 2, 3, 4] \u003e\u003e\u003e copy is original False ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦å®ç°ä¸Šé¢çš„ Instructor å¡, ç›¸æ¯”äºå…¶ä»–ä¸‰ä¸ªå¡æ¥è¯´, è¿™ä¸ªçš„åŠŸèƒ½ç¨å¾®å¤æ‚äº›, ä½†æ˜¯ä¹Ÿè¿˜å¥½. å…³é”®ä¹‹å¤„åœ¨äºå¦‚ä½•ä¸€è¾¹éå†åˆ—è¡¨, ä¸€è¾¹åˆ é™¤è‡ªå·±æƒ³è¦çš„å…ƒç´ . å¯ä»¥æŸ¥çœ‹è¿™é‡Œé¢çš„å›ç­”çŸ¥é“æ”¹æ€ä¹ˆåš, çŸ¥é“äº†è¿™ä¸€ç‚¹ä¹‹ååšè¿™ä¸€é¢˜å°±ä¸éš¾äº† python def effect(self, opponent_card, player, opponent): \"\"\" Adds the attack and defense of the opponent's card to all cards in the player's deck, then removes all cards in the opponent's deck that share an attack or defense stat with the opponent's card. \"\"\" orig_opponent_deck_length = len(opponent.deck.cards) # add the attack and defense of the opponent's card ... for card in player.deck.cards: card.attack += opponent_card.attack card.defense += opponent_card.defense # remove all cards in the opponent's deck that share ... for card in opponent.deck.cards[:]: if card.attack == opponent_card.attack and card.defense == opponent_card.defense: opponent.deck.cards.remove(card) # You should add your implementation above this. discarded = orig_opponent_deck_length - len(opponent.deck.cards) if discarded: print('{} cards were discarded from {}\\'s deck!'.format(discarded, opponent.name)) return ","date":"2022-02-24","objectID":"/zh-cn/lab07-cs61a-of-ucb/:3:4","series":null,"tags":["Course"],"title":"Lab07 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab07-cs61a-of-ucb/#q9-the-instructor-arrives"},{"categories":["Course"],"content":"The simple solutions of hw05 of CS61A of UCB","date":"2022-02-22","objectID":"/zh-cn/hw05-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Hw05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw05-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" Q1: Generate Permutations Given a sequence of unique elements, a permutation of the sequence is a list containing the elements of the sequence in some arbitrary order. For example, [2, 1, 3], [1, 3, 2], and [3, 2, 1] are some of the permutations of the sequence [1, 2, 3]. Implement gen_perms, a generator function that takes in a sequence seq and returns a generator that yields all permutations of seq. For this question, assume that seq will not be empty. Permutations may be yielded in any order. Note that the doctests test whether you are yielding all possible permutations, but not in any particular order. The built-in sorted function takes in an iterable object and returns a list containing the elements of the iterable in non-decreasing order. Hint: If you had the permutations of all the elements in seq not including the first element, how could you use that to generate the permutations of the full seq? Hint: Remember, itâ€™s possible to loop over generator objects because generators are iterators! é¢˜æ„å°±æ˜¯è¦æˆ‘ä»¬è¿”å›ä¸€ä¸ª generator, è¿™ä¸ª generator ä¼šä¸€ä¸ªä¸ªè¿”å›åˆ—è¡¨çš„æ‰€æœ‰æ’åˆ—ç»„åˆ. è¿™ä¸ª Hint æ˜æ‘†ç€æˆ‘ä»¬è¦ç”¨é€’å½’çš„æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜. å¾ˆå®¹æ˜“æƒ³åˆ°è¿™ä¸€é“é¢˜çš„ base case, å¦‚ä¸‹ python def gen_perms(seq): if len(seq) \u003c= 1: yield seq ... ç°åœ¨çš„é—®é¢˜å°±æ˜¯è¦å¦‚ä½•è¿‡æ¸¡åˆ°å­é—®é¢˜, æ ¹æ®æç¤ºæˆ‘ä»¬å¯ä»¥çŒœ: æˆ‘ä»¬åº”è¯¥é€’å½’å¤„ç†é™¤äº†ç¬¬ä¸€ä¸ªä½ç½®ä»¥å¤–çš„å…ƒç´ , å†æ ¹æ®é¢˜ç›®çš„å¦ä¸€ä¸ªæç¤º, æˆ‘ä»¬åº”è¯¥å‡å®šæˆ‘ä»¬çš„ gen_perms(seq) å°±æ˜¯è¿”å› seq çš„å…¨æ’åˆ—, é‚£æˆ‘ä»¬åªè¦å°†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ’å…¥åˆ°å…¨æ’åˆ—çš„ä»»æ„ä¸€ä¸ªä½ç½®å³å¯. ä¸¾ä¸ªä¾‹å­æ¥è¯´, æ¯”å¦‚æˆ‘ä»¬å¤„ç† [1, 2, 3] çš„å…¨æ’åˆ—, å‡è®¾æˆ‘ä»¬ç°åœ¨å·²ç»å¾—åˆ°äº† [2, 3] çš„å…¨æ’åˆ—â€”â€”[[2, 3], [3, 2]], é‚£ä¹ˆæˆ‘ä»¬åªè¦å°† 1 æ’å…¥åˆ° [2, 3] çš„ä¸åŒä½ç½®, æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ° [1, 2, 3], [2, 1, 3], [2, 3, 1], ç„¶åæˆ‘ä»¬å¯¹ [3, 2] è¿›è¡ŒåŒæ ·çš„æ­¥éª¤. è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†æ‰€æœ‰çš„å…¨æ’åˆ—, ç„¶åæˆ‘ä»¬å¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ä»£ç  python def gen_perms(seq): \"\"\"Generates all permutations of the given sequence. Each permutation is a list of the elements in SEQ in a different order. The permutations may be yielded in any order. \u003e\u003e\u003e perms = gen_perms([100]) \u003e\u003e\u003e type(perms) \u003cclass 'generator'\u003e \u003e\u003e\u003e next(perms) [100] \u003e\u003e\u003e try: #this piece of code prints \"No more permutations!\" if calling next would cause an error ... next(perms) ... except StopIteration: ... print('No more permutations!') No more permutations! \u003e\u003e\u003e sorted(gen_perms([1, 2, 3])) # Returns a sorted list containing elements of the generator [[1, 2, 3], [1, 3, 2], [2, 1, 3], [2, 3, 1], [3, 1, 2], [3, 2, 1]] \u003e\u003e\u003e sorted(gen_perms((10, 20, 30))) [[10, 20, 30], [10, 30, 20], [20, 10, 30], [20, 30, 10], [30, 10, 20], [30, 20, 10]] \u003e\u003e\u003e sorted(gen_perms(\"ab\")) [['a', 'b'], ['b', 'a']] \"\"\" # This problem requires list type, see example above if type(seq) != list: seq = list(seq) # base case if len(seq) \u003c= 1: yield seq else: # iterate every permutation in the generator for perm in gen_perms(seq[1:]): # enumerate every position for insertation for i in range(len(seq)): yield perm[:i] + seq[:1] + perm[i:] ","date":"2022-02-22","objectID":"/zh-cn/hw05-of-cs61a-of-ucb/:0:1","series":null,"tags":["Course"],"title":"Hw05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw05-of-cs61a-of-ucb/#q1-generate-permutations"},{"categories":["Course"],"content":" Q2: Yield Paths Define a generator function path_yielder which takes in a tree t, a value value, and returns a generator object which yields each path from the root of t to a node that has label value. Each path should be represented as a list of the labels along that path in the tree. You may yield the paths in any order. We have provided a skeleton for you. You do not need to use this skeleton, but if your implementation diverges significantly from it, you might want to think about how you can get it to fit the skeleton. é¢˜ç›®è®©æˆ‘ä»¬è¿”å›ä»æ ¹ç»“ç‚¹å‡ºå‘åˆ°è¾¾æ‰€æœ‰æ ‡ç­¾ä¸º value çš„è·¯å¾„. æ³¨æ„ç»™æˆ‘ä»¬çš„æç¤º, æˆ‘ä»¬è¦å®ç°çš„å‡½æ•°åº”è¯¥å¦‚ä¸‹æ‰€ç¤º: python def path_yielder(t, value): \"*** YOUR CODE HERE ***\" for _______________ in _________________: for _______________ in _________________: \"*** YOUR CODE HERE ***\" å¦‚æœä½ ä»”ç»†è§‚å¯Ÿ, æˆ–è®¸å¯ä»¥å‘ç°è¿™ä¸€é¢˜çš„ä»£ç è·Ÿ Q1 ç«Ÿæ˜¯å¦‚æ­¤ç›¸ä¼¼, ç°åœ¨æˆ‘ä»¬å¼€å§‹æ€è€ƒå¦‚ä½•æ¥è§£å†³è¿™ä¸ªé—®é¢˜. é¦–å…ˆè¦å¤„ç†ä»€ä¹ˆæ˜¯ base case, æ˜¾ç„¶å½“æˆ‘ä»¬é‡åˆ° label æ˜¯ value çš„ç»“ç‚¹æ—¶å€™å°±åˆ°è¾¾äº† base case å¯ä»¥è¿”å›. è€Œå°†è¿™ä¸ªé—®é¢˜åˆ†è§£ä¸ºæ›´ç®€å•çš„å­é—®é¢˜çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•, æˆ‘ä»¬è¦ä»å½“å‰ç»“ç‚¹å‡ºå‘, éå†å®ƒçš„æ¯ä¸€ä¸ªå­æ ‘, åªè¦è·¯å¾„ä¸Šæœ‰å°±è¿”å›, æ³¨æ„è¿™é‡Œæˆ‘ä»¬è¿”å›çš„æ˜¯å­è·¯å¾„(ä¸åŒ…æ‹¬å½“å‰ç»“ç‚¹), ç„¶åæˆ‘ä»¬åŠ ä¸Šå½“å‰ç»“ç‚¹çš„ label å³å¯. ç”¨ä¸€ä¸ªä¾‹å­æ¥è¯´, çœ‹ä¸‹é¢çš„ docstring é‡Œé¢çš„ä¾‹å­, å‡è®¾æˆ‘ä»¬ç°åœ¨è¦æ‰¾åˆ°æ‰€æœ‰åˆ°è¾¾ label ä¸º 3 çš„æ‰€æœ‰è·¯å¾„, æˆ‘ä»¬ä»æ ¹ç»“ç‚¹ 1 å‡ºå‘, æ£€æŸ¥çš„å®ƒçš„æ¯ä¸€ä¸ªå­æ ‘, åˆ†åˆ«æ˜¯ 2 å’Œ 5. ç„¶åæˆ‘ä»¬æ¥ç€å¯¹ 2 è¿™ä¹ˆå¤„ç†, åœ¨ 2 çš„ç¬¬ä¸€ä¸ªå­æ ‘ä¸­æˆ‘ä»¬æ‰¾åˆ°äº† 3, æ­¤æ—¶æˆ‘ä»¬ yield [3]. å½“æˆ‘ä»¬å›æº¯åˆ° 2 çš„æ—¶å€™åŠ ä¸Š 2, æˆ‘ä»¬åˆå¾—åˆ°äº†å­è·¯å¾„ [2, 3], æœ€åæˆ‘ä»¬æ¥ç€å›æº¯åˆ°æ ¹ç»“ç‚¹, å¾—åˆ° [1] + [2, 3] = [1, 2, 3] ä»£ç å¦‚ä¸‹: python def path_yielder(t, value): \"\"\"Yields all possible paths from the root of t to a node with the label value as a list. \u003e\u003e\u003e t1 = tree(1, [tree(2, [tree(3), tree(4, [tree(6)]), tree(5)]), tree(5)]) \u003e\u003e\u003e print_tree(t1) 1 2 3 4 6 5 5 \u003e\u003e\u003e next(path_yielder(t1, 6)) [1, 2, 4, 6] \u003e\u003e\u003e path_to_5 = path_yielder(t1, 5) \u003e\u003e\u003e sorted(list(path_to_5)) [[1, 2, 5], [1, 5]] \u003e\u003e\u003e t2 = tree(0, [tree(2, [t1])]) \u003e\u003e\u003e print_tree(t2) 0 2 1 2 3 4 6 5 5 \u003e\u003e\u003e path_to_2 = path_yielder(t2, 2) \u003e\u003e\u003e sorted(list(path_to_2)) [[0, 2], [0, 2, 1, 2]] \"\"\" if label(t) == value: yield [label(t)] for b in branches(t): for path in path_yielder(b, value): yield [label(t)] + path ","date":"2022-02-22","objectID":"/zh-cn/hw05-of-cs61a-of-ucb/:0:2","series":null,"tags":["Course"],"title":"Hw05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw05-of-cs61a-of-ucb/#q2-yield-paths"},{"categories":["Course"],"content":" Q3: Preorder Define the function preorder, which takes in a tree as an argument and returns a list of all the entries in the tree in the order that print_tree would print them. The following diagram shows the order that the nodes would get printed, with the arrows representing function calls. åˆæ˜¯æ ‘çš„å…ˆåºéå†é—®é¢˜, è¿™çœŸçš„æ˜¯ä¸€ä¸ªååˆ†ç»å…¸çš„é—®é¢˜. æˆ‘ä»¬è¦é€’å½’è®¿é—®è¿™ä¸€æ£µæ ‘çš„æ‰€æœ‰ç»“ç‚¹, ä»æ ¹ç»“ç‚¹å‡ºå‘, æ³¨æ„æˆ‘ä»¬æ˜¯å…ˆè®°ä½æ ¹ç»“ç‚¹çš„å€¼å†å»çœ‹å®ƒçš„å­æ ‘, å¹¶é€’å½’å¼å¤„ç†è¿™æ ·çš„é—®é¢˜. python def preorder(t): \"\"\"Return a list of the entries in this tree in the order that they would be visited by a preorder traversal (see problem description). \u003e\u003e\u003e numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])]) \u003e\u003e\u003e preorder(numbers) [1, 2, 3, 4, 5, 6, 7] \u003e\u003e\u003e preorder(tree(2, [tree(4, [tree(6)])])) [2, 4, 6] \"\"\" result = [] def helper(t): if t is not None: result.append(label(t)) for b in branches(t): helper(b) helper(t) return result ","date":"2022-02-22","objectID":"/zh-cn/hw05-of-cs61a-of-ucb/:0:3","series":null,"tags":["Course"],"title":"Hw05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw05-of-cs61a-of-ucb/#q3-preorder"},{"categories":["Course"],"content":" Q4: Generate Preorder Similarly to preorder in Question 3, define the function generate_preorder, which takes in a tree as an argument and now instead yields the entries in the tree in the order that print_tree would print them. Hint: How can you modify your implementation of preorder to yield from your recursive calls instead of returning them? ä»æ—§æ˜¯å…ˆåºéå†çš„é—®é¢˜, æ•´ä½“è§£æ³•ä¸Šå¾ˆåƒ Q3, åªæ˜¯ç°åœ¨æˆ‘ä»¬ä¸éœ€è¦ç”¨ä¸€ä¸ª result æ¥å­˜å‚¨éå†çš„åºåˆ—, å› ä¸ºæˆ‘ä»¬è¦è¿”å›çš„æ˜¯ generator. ä½†è¿™ä¸ªç®—æ³•çš„é€»è¾‘è¿˜æ˜¯ä¸€è‡´çš„, å…ˆçœ‹æ ¹ç»“ç‚¹, ç„¶åå»çœ‹å®ƒçš„å­æ ‘çš„ç»“ç‚¹. å¦‚æœæƒ³å¯¹ yield from æœ‰æ›´æ·±çš„äº†è§£, æˆ‘ä»¬å¯ä»¥çœ‹çœ‹è¿™ä¸ªäººçš„è¿™ç¯‡æ–‡ç«  python def generate_preorder(t): \"\"\"Yield the entries in this tree in the order that they would be visited by a preorder traversal (see problem description). \u003e\u003e\u003e numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])]) \u003e\u003e\u003e gen = generate_preorder(numbers) \u003e\u003e\u003e next(gen) 1 \u003e\u003e\u003e list(gen) [2, 3, 4, 5, 6, 7] \"\"\" yield label(t) for b in branches(t): yield from generate_preorder(b) ","date":"2022-02-22","objectID":"/zh-cn/hw05-of-cs61a-of-ucb/:0:4","series":null,"tags":["Course"],"title":"Hw05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw05-of-cs61a-of-ucb/#q4-generate-preorder"},{"categories":["Course"],"content":" Q5: Remainder Generator Like functions, generators can also be higher-order. For this problem, we will be writing remainders_generator, which yields a series of generator objects. remainders_generator takes in an integer m, and yields m different generators. The first generator is a generator of multiples of m, i.e. numbers where the remainder is 0. The second is a generator of natural numbers with remainder 1 when divided by m. The last generator yields natural numbers with remainder m - 1 when divided by m. Hint: To create a generator of infinite natural numbers, you can call the naturals function thatâ€™s provided in the starter code. Hint: Consider defining an inner generator function. Each yielded generator varies only in that the elements of each generator have a particular remainder when divided by m. What does that tell you about the argument(s) that the inner function should take in? è¿™ä¸ªé—®é¢˜å¦‚æœä½ å¯¹ python çš„ generator ä¸€ç‚¹éƒ½ä¸äº†è§£çš„è¯, ä¸€æ—¶è¦å†™å‡ºè¿™æ ·çš„ä»£ç æ˜¯æ¯”è¾ƒå›°éš¾çš„, æˆ‘ä¼šæ¨èä½ å…ˆé˜…è¯»è¿™ä¸ªæ•™ç¨‹. åœ¨é˜…è¯»ä¸Šé¢çš„ææ–™ä¹‹åæˆ‘ä»¬å¼€å§‹ä»¥å‰æ¥æƒ³è¿™ä¸ªé—®é¢˜è¦æ€ä¹ˆè§£å†³. å…¶å®å®ƒå°±æ˜¯è¦è¿”å› m ä¸ª generator, ç¬¬ i ä¸ª generator é‡Œé¢åˆ†åˆ«æ˜¯é™¤ä»¥ m å¾—åˆ°ä½™æ•°ä¸º i çš„æ‰€æœ‰æ•°. æ³¨æ„, æˆ‘ä»¬è¦çš„æ˜¯æ‰€æœ‰æ•°, æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç°è±¡æˆ‘ä»¬è¦æ€ä¹ˆå¾—åˆ°ç¬¬ä¸€ä¸ª generator, å…¶ä»– generator å…¶å®éƒ½æ˜¯ç±»ä¼¼çš„. æˆ‘ä»¬åªè¦ç”¨ä¸€ä¸ª while True æ­»å¾ªç¯æ¥ä¸€ç›´æ‰¾å°±è¡Œ, å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯ yield, å®ƒæ¯æ¬¡æ‰¾åˆ°ä¸€ä¸ªå°±ä¼šæš‚åœæ‰§è¡Œå¹¶è¿”å›é‚£ä¸ªæ•°. è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†è¿™ä¸ªæ— é™äº§ç”Ÿæˆ‘ä»¬æƒ³è¦çš„æ•°çš„ generator python def helper(i, m): num = 1 # loop variable while True: if num % m == i: yield num num += 1 # you can give it a test \u003e\u003e\u003e it = helper(2, 3) \u003e\u003e\u003e next(it) 2 # 2 % 3 == 2 \u003e\u003e\u003e next(it) 5 # 5 % 3 == 2 \u003e\u003e\u003e next(it) 8 # 8 % 3 == 2 é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•å¾—åˆ°ä¸€ä¸ª generator çš„ list å‘¢, ä¹Ÿå¾ˆç®€å•, æˆ‘ä»¬ç”¨ for å¾ªç¯å°±å¥½äº† python def remainders_generator(m): \"\"\" Yields m generators. The ith yielded generator yields natural numbers whose remainder is i when divided by m. \u003e\u003e\u003e import types \u003e\u003e\u003e [isinstance(gen, types.GeneratorType) for gen in remainders_generator(5)] [True, True, True, True, True] \u003e\u003e\u003e remainders_four = remainders_generator(4) \u003e\u003e\u003e for i in range(4): ... print(\"First 3 natural numbers with remainder {0} when divided by 4:\".format(i)) ... gen = next(remainders_four) ... for _ in range(3): ... print(next(gen)) First 3 natural numbers with remainder 0 when divided by 4: 4 8 12 First 3 natural numbers with remainder 1 when divided by 4: 1 5 9 First 3 natural numbers with remainder 2 when divided by 4: 2 6 10 First 3 natural numbers with remainder 3 when divided by 4: 3 7 11 \"\"\" def helper(i, m): num = 1 # loop variable while True: if num % m == i: yield num num += 1 for i in range(m): yield helper(i, m) ","date":"2022-02-22","objectID":"/zh-cn/hw05-of-cs61a-of-ucb/:0:5","series":null,"tags":["Course"],"title":"Hw05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw05-of-cs61a-of-ucb/#q5-remainder-generator"},{"categories":["Course"],"content":"the simple solutions for lab06 of CS61A of UCB","date":"2022-02-20","objectID":"/zh-cn/lab06-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab06-cs61a-of-ucb/"},{"categories":["Course"],"content":" Mutability Write a function which takes in a list lst, an argument entry, and another argument elem. This function will check through each item in lst to see if it is equal to entry. Upon finding an item equal to entry, the function should modify the list by placing elem into lst right after the item. At the end of the function, the modified list should be returned. See the doctests for examples on how this function is utilized. Important: Use list mutation to modify the original list. No new lists should be created or returned. Note: If the values passed into entry and elem are equivalent, make sure youâ€™re not creating an infinitely long list while iterating through it. If you find that your code is taking more than a few seconds to run, the function may be in a loop of inserting new values. æ³¨æ„æˆ‘ä»¬ä¸èƒ½ for å¾ªç¯æ¥ä¸€è¾¹éå†è¿™ä¸ª list ä¸€è¾¹è¿›è¡Œä¿®æ”¹, æˆ‘è®°å¾—æˆ‘ä¹‹å‰åœ¨ã€ŠEffective Pythonã€‹çœ‹è¿‡è¿™ä¸€ç‚¹. å…¶å®è‡ªå·± debug å°±å¯ä»¥å‘ç°, å› ä¸ºä¸€å¼€å§‹ç”¨ for i in range(len(lst)) çš„æ—¶å€™å°±å›ºå®šäº†, ä½†å…¶å®ä½ åœ¨ for å¾ªç¯é‡Œé¢ä¼šæ’å…¥æ–°çš„å€¼, è¿™ä¸ª list å…¶å®æ˜¯å˜å¾—æ›´é•¿çš„(ä½†æ˜¯ i è¿˜æ˜¯åœ¨åŸæ¥çš„èŒƒå›´é‡Œ), æ‰€ä»¥åé¢è¶…è¿‡æœ¬æ¥é•¿åº¦çš„å…ƒç´ å°±ä¼šçœ‹ä¸åˆ°. æ³¨æ„ä¸‹é¢è¿™ä¸ªä»£ç æ˜¯é”™è¯¯çš„ğŸ™…â€â™‚ï¸ python def insert_items(lst, entry, elem): is_the_same = (entry == elem) while True: no_entry = True for i in range(len(lst)): if lst[i] == entry: if i == len(lst) - 1: lst.append(elem) else: lst.insert(i + 1, elem) no_entry = False # avoid infinite loop if is_the_same: i += 1 if no_entry: return lst æ­£ç¡®çš„è§£æ³•åº”è¯¥æ˜¯ç”¨ while å¾ªç¯æ­é… list.index(x[, start[, end]]) æ–¹æ³•, ä»£ç å¦‚ä¸‹: python def insert_items(lst, entry, elem): \"\"\"Inserts elem into lst after each occurence of entry and then returns lst. \u003e\u003e\u003e test_lst = [1, 5, 8, 5, 2, 3] \u003e\u003e\u003e new_lst = insert_items(test_lst, 5, 7) \u003e\u003e\u003e new_lst [1, 5, 7, 8, 5, 7, 2, 3] \u003e\u003e\u003e double_lst = [1, 2, 1, 2, 3, 3] \u003e\u003e\u003e double_lst = insert_items(double_lst, 3, 4) \u003e\u003e\u003e double_lst [1, 2, 1, 2, 3, 4, 3, 4] \u003e\u003e\u003e large_lst = [1, 4, 8] \u003e\u003e\u003e large_lst2 = insert_items(large_lst, 4, 4) \u003e\u003e\u003e large_lst2 [1, 4, 4, 8] \u003e\u003e\u003e large_lst3 = insert_items(large_lst2, 4, 6) \u003e\u003e\u003e large_lst3 [1, 4, 6, 4, 6, 8] \u003e\u003e\u003e large_lst3 is large_lst True \u003e\u003e\u003e # Ban creating new lists \u003e\u003e\u003e from construct_check import check \u003e\u003e\u003e check(HW_SOURCE_FILE, 'insert_items', ... ['List', 'ListComp', 'Slice']) True \"\"\" pos, cnt = 0, 0 for i in lst: if i == entry: cnt += 1 while cnt \u003e 0: idx = lst.index(entry, pos) pos = idx + 1 if idx == len(lst) - 1: lst.append(elem) else: lst.insert(idx + 1, elem) cnt -= 1 return lst ","date":"2022-02-20","objectID":"/zh-cn/lab06-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab06-cs61a-of-ucb/#mutability"},{"categories":["Course"],"content":" Iterators ","date":"2022-02-20","objectID":"/zh-cn/lab06-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab06-cs61a-of-ucb/#iterators"},{"categories":["Course"],"content":" Q4: Count Occurrences Implement count_occurrences, which takes in an iterator t and returns the number of times the value x appears in the first n elements of t. A value appears in a sequence of elements if it is equal to an entry in the sequence. Note: You can assume that t will have at least n elements. è¿™ä¸€é“é¢˜ä¸»è¦æ˜¯è¦è®©æˆ‘ä»¬å­¦ä¼šä½¿ç”¨ iter å’Œ next è¿™ä¸¤ä¸ªå‡½æ•°. æˆ‘ä»¬å¯ä»¥ç”¨ while n \u003e 0 æ¥æ§åˆ¶åªè®¿é—®å‰ n ä¸ªä½ç½®, åšä¸€ä¸ªç®€å•çš„åˆ¤è¯»æ¥è®¡æ•°å³å¯ python def count_occurrences(t, n, x): \"\"\"Return the number of times that x appears in the first n elements of iterator t. \u003e\u003e\u003e s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7]) \u003e\u003e\u003e count_occurrences(s, 10, 9) 3 \u003e\u003e\u003e s2 = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7]) \u003e\u003e\u003e count_occurrences(s2, 3, 10) 2 \u003e\u003e\u003e s = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5]) \u003e\u003e\u003e count_occurrences(s, 1, 3) 1 \u003e\u003e\u003e count_occurrences(s, 4, 2) 3 \u003e\u003e\u003e next(s) 2 \u003e\u003e\u003e s2 = iter([4, 1, 6, 6, 7, 7, 8, 8, 2, 2, 2, 5]) \u003e\u003e\u003e count_occurrences(s2, 6, 6) 2 \"\"\" it = iter(t) cnt = 0 while n \u003e 0: val = next(it) if val == x: cnt += 1 n -= 1 return cnt ","date":"2022-02-20","objectID":"/zh-cn/lab06-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab06-cs61a-of-ucb/#q4-count-occurrences"},{"categories":["Course"],"content":" Q5: Repeated Implement repeated, which takes in an iterator t and returns the first value in t that appears k times in a row. Note: You can assume that the iterator t will have a value that appears at least k times in a row. If you are receiving a StopIteration, your repeated function is likely not identifying the correct value. Your implementation should iterate through the items in a way such that if the same iterator is passed into repeated twice, it should continue in the second call at the point it left off in the first. An example of this behavior is in the doctests. æˆ‘ä»¬åœ¨è¿™ä¸ªé—®é¢˜é‡è¦è§£å†³ä¸¤ä¸ªé—®é¢˜: å¦‚ä½•æ‰¾åˆ°è¿ç»­çš„ k ä¸ªå€¼ ? éœ€è¦è®¾ç½® last_val æ¥è®°ä½ä¸Šä¸€ä¸ªå€¼æ˜¯ä»€ä¹ˆ, è¿™æ ·æ‰èƒ½å’Œå½“å‰çš„å€¼è¿›è¡Œå¯¹æ¯”. ç”¨ä¸€ä¸ª while True: æ¥ä¸æ–­æ‰¾å³å¯(é¢˜ç›®ä¿è¯ä¸€å®šæ‰¾å¾—åˆ°, æ‰€ä»¥ä¸ç”¨æ€•æ­»å¾ªç¯) å¦‚ä½•ä¿è¯ä¸‹ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™è¦ä»ä¸Šä¸€æ¬¡ç¦»å¼€çš„ä½ç½®å¼€å§‹ ? å¦‚æœè®¤çœŸçœ‹è¿‡è¯¾ç¨‹çš„äººå¯èƒ½è®°å¾—è¦æ€ä¹ˆåš, æˆ‘ä»¬åº”è¯¥ç”¨é«˜é˜¶å‡½æ•°, åœ¨ repeated é‡Œé¢å†å®šä¹‰ä¸€ä¸ªå‡½æ•°, å°†å˜é‡ç»‘å®šåˆ°è¿™ä¸ªåµŒå¥—çš„å‡½æ•°ä¸Š. è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¿è¯æ¯æ¬¡éƒ½å¯ä»¥ä»ä¸Šä¸€æ¬¡çš„ä½ç½®å¼€å§‹. å¿˜äº†çš„å¯ä»¥çœ‹çœ‹è¿™ä¸ªé“¾æ¥ çš„ 2.4.4 Local state python def repeated(t, k): \"\"\"Return the first value in iterator T that appears K times in a row. Iterate through the items such that if the same iterator is passed into the function twice, it continues in the second call at the point it left off in the first. \u003e\u003e\u003e s = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7]) \u003e\u003e\u003e repeated(s, 2) 9 \u003e\u003e\u003e s2 = iter([10, 9, 10, 9, 9, 10, 8, 8, 8, 7]) \u003e\u003e\u003e repeated(s2, 3) 8 \u003e\u003e\u003e s = iter([3, 2, 2, 2, 1, 2, 1, 4, 4, 5, 5, 5]) \u003e\u003e\u003e repeated(s, 3) 2 \u003e\u003e\u003e repeated(s, 3) 5 \u003e\u003e\u003e s2 = iter([4, 1, 6, 6, 7, 7, 8, 8, 2, 2, 2, 5]) \u003e\u003e\u003e repeated(s2, 3) 2 \"\"\" assert k \u003e 1 last_val, it = None, iter(t) def helper(k): nonlocal last_val nonlocal it cnt = 0 while True: val = next(it) if last_val is None or val != last_val: last_val, cnt = val, 1 else: cnt += 1 if cnt == k: return val return helper(k) ","date":"2022-02-20","objectID":"/zh-cn/lab06-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Lab06 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab06-cs61a-of-ucb/#q5-repeated"},{"categories":["Course"],"content":"The simple solutions of hw04 of CS61A of UCB","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/"},{"categories":["Course"],"content":" Mobiles ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#mobiles"},{"categories":["Course"],"content":" Q2: Weights Implement the planet data abstraction by completing the planet constructor and the size selector so that a planet is represented using a two-element list where the first element is the string 'planet' and the second element is its size. ä»é—®é¢˜çš„æè¿°ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ä»€ä¹ˆæ˜¯ planet. å°±æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 2 çš„ list, å†…å®¹æ˜¯ ['planet', size]. å¯ä»¥å‚è€ƒ mobile å‡½æ•°, è¿™ä¸¤ä¸ªå‡½æ•°çš„ä»£ç æ˜¯å¾ˆç±»ä¼¼çš„ python def planet(size): \"\"\"Construct a planet of some size.\"\"\" assert size \u003e 0 return ['planet', size] def size(w): \"\"\"Select the size of a planet.\"\"\" assert is_planet(w), 'must call size on a planet' return w[1] ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q2-weights"},{"categories":["Course"],"content":" Q3: Balanced Implement the balanced function, which returns whether m is a balanced mobile. A mobile is balanced if both of the following conditions are met: The torque applied by its left arm is equal to that applied by its right arm. The torque of the left arm is the length of the left rod multiplied by the total weight hanging from that rod. Likewise for the right. For example, if the left arm has a length of 5, and there is a mobile hanging at the end of the left arm of weight 10, the torque on the left side of our mobile is 50. Each of the mobiles hanging at the end of its arms is balanced. Planets themselves are balanced, as there is nothing hanging off of them. è¿™ä¸ªé—®é¢˜éœ€è¦ç”¨é€’å½’çš„æ–¹æ³•æ¥è§£å†³. æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ª mobile å¹³è¡¡çš„æ¡ä»¶å¦‚ä¸‹ å®ƒæ˜¯ planet, æ ¹æ®æè¿°å¯ä»¥çŸ¥é“æœ¬èº«æ˜¯å¹³è¡¡çš„ å®ƒæ˜¯ arm, å¹¶ä¸” total_weight(left_arm) == total_weight(right_arm). å¹¶ä¸”å®ƒçš„æ‰€æœ‰å­æ ‘éƒ½è¦ç¬¦åˆè¿™ä¸ªå¹³è¡¡çš„æ¡ä»¶. æ³¨æ„ä¸è¦æ¼æ‰å¯¹å­æ ‘çš„åˆ¤æ–­ å†™å‡ºä»£ç çš„å…³é”®: è¦åŒºåˆ†å¼€ arm, planet, mobile è¿™ä¸‰ä¸ªæ¦‚å¿µå¹¶ä¸”è¦èƒ½å¤ŸçŸ¥é“ç”¨ä»€ä¹ˆå¯¹åº”çš„å‡½æ•°æ¥å¤„ç†. ğŸ˜¢ python def balanced(m): \"\"\"Return whether m is balanced. \u003e\u003e\u003e t, u, v = examples() \u003e\u003e\u003e balanced(t) True \u003e\u003e\u003e balanced(v) True \u003e\u003e\u003e w = mobile(arm(3, t), arm(2, u)) \u003e\u003e\u003e balanced(w) False \u003e\u003e\u003e balanced(mobile(arm(1, v), arm(1, w))) False \u003e\u003e\u003e balanced(mobile(arm(1, w), arm(1, v))) False \u003e\u003e\u003e from construct_check import check \u003e\u003e\u003e # checking for abstraction barrier violations by banning indexing \u003e\u003e\u003e check(HW_SOURCE_FILE, 'balanced', ['Index']) True \"\"\" # planet is balanced if is_planet(m): return True left_arm, right_arm = left(m), right(m) # end(...arm) will is a mobile or a planet left_val = length(left_arm) * total_weight(end(left_arm)) right_val = length(right_arm) * total_weight(end(right_arm)) return left_val == right_val and balanced(end(left_arm)) and balanced(end(right_arm)) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q3-balanced"},{"categories":["Course"],"content":" Q4: Totals Implement totals_tree, which takes in a mobile or planet and returns a tree whose root is the total weight of the input. For a planet, totals_tree should return a leaf. For a mobile, totals_tree should return a tree whose label is that mobileâ€™s total weight, and whose branches are totals_trees for the ends of its arms. As a reminder, the description of the tree data abstraction can be found here. æˆ‘ä»¬åœ¨è¿™ä¸ªé—®é¢˜ä¸­æƒ³è¦æŠŠ mobile è½¬æ¢ä¸º tree. é€’å½’è§£æ³•çš„ base case æ˜¯å½“æˆ‘ä»¬é‡åˆ°å¶å­ç»“ç‚¹è€Œä¸”æ˜¯ planet çš„æ—¶å€™. å¦åˆ™æˆ‘ä»¬å°±é€’å½’åˆ†æå®ƒçš„å­æ ‘ python def totals_tree(m): \"\"\"Return a tree representing the mobile with its total weight at the root. \u003e\u003e\u003e t, u, v = examples() \u003e\u003e\u003e print_tree(totals_tree(t)) 3 2 1 \u003e\u003e\u003e print_tree(totals_tree(u)) 6 1 5 3 2 \u003e\u003e\u003e print_tree(totals_tree(v)) 9 3 2 1 6 1 5 3 2 \u003e\u003e\u003e from construct_check import check \u003e\u003e\u003e # checking for abstraction barrier violations by banning indexing \u003e\u003e\u003e check(HW_SOURCE_FILE, 'totals_tree', ['Index']) True \"\"\" if is_planet(m): return tree(size(m)) return tree(total_weight(m), [totals_tree(i) for i in [end(left(m)), end(right(m))]]) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:1:3","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q4-totals"},{"categories":["Course"],"content":" More trees ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#more-trees"},{"categories":["Course"],"content":" Q5: Replace Loki at Leaf Define replace_loki_at_leaf, which takes a tree t and a value lokis_replacement. replace_loki_at_leaf returns a new tree thatâ€™s the same as t except that every leaf label equal to \"loki\" has been replaced with lokis_replacement. If you want to learn about the Norse mythology referenced in this problem, you can read about it here. é€’å½’è§£æ³•çš„ base case ä»ç„¶æ˜¯å¶å­ç»“ç‚¹, æˆ‘ä»¬è¦æ£€æŸ¥å®ƒçš„ label æ˜¯å¦ä¸º â€™lokiâ€™. å¦‚æœæ˜¯çš„è¯, æˆ‘ä»¬å°±åˆ›å»ºä¸€ä¸ªæ–°çš„å¶å­ç»“ç‚¹å¹¶è¿”å›. å¦åˆ™æˆ‘ä»¬è¿”å›æœ¬æ¥çš„å¶å­ç»“ç‚¹å³å¯. python def replace_loki_at_leaf(t, lokis_replacement): \"\"\"Returns a new tree where every leaf value equal to \"loki\" has been replaced with lokis_replacement. \u003e\u003e\u003e yggdrasil = tree('odin', ... [tree('balder', ... [tree('loki'), ... tree('freya')]), ... tree('frigg', ... [tree('loki')]), ... tree('loki', ... [tree('sif'), ... tree('loki')]), ... tree('loki')]) \u003e\u003e\u003e laerad = copy_tree(yggdrasil) # copy yggdrasil for testing purposes \u003e\u003e\u003e print_tree(replace_loki_at_leaf(yggdrasil, 'freya')) odin balder freya freya frigg freya loki sif freya freya \u003e\u003e\u003e laerad == yggdrasil # Make sure original tree is unmodified True \"\"\" if is_leaf(t): if label(t) == 'loki': return tree(lokis_replacement) return t return tree(label(t), [replace_loki_at_leaf(b, lokis_replacement) for b in branches(t)]) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q5-replace-loki-at-leaf"},{"categories":["Course"],"content":" Q6: Has Path Write a function has_path that takes in a tree t and a string word. It returns True if there is a path that starts from the root where the entries along the path spell out the word, and False otherwise. (This data structure is called a trie, and it has a lot of cool applications, such as autocomplete). You may assume that every nodeâ€™s labelis exactly one character. ä»€ä¹ˆæ˜¯è¿™é“é¢˜çš„ base case ? æˆ‘ä»¬è¦è®°ä½ä»æ ¹ç»“ç‚¹å‡ºå‘åˆ°å½“å‰æ‰€åœ¨ç»“ç‚¹ä¸€è·¯ç»è¿‡çš„ç»“ç‚¹æ‹¼èµ·æ¥çš„å­—ç¬¦ä¸²æ˜¯ä»€ä¹ˆ. ä¸¾ä¾‹æ¥è¯´, åœ¨ä¸€å¼€å§‹çš„æ—¶å€™æˆ‘ä»¬åœ¨æ ¹ç»“ç‚¹, æˆ‘ä»¬çš„å­—ç¬¦ä¸²æ˜¯ label(t). ä¹Ÿå°±æ˜¯ h. å½“æˆ‘ä»¬åˆ°äº†æ ¹ç»“ç‚¹çš„ç¬¬ä¸€ä¸ªå­ç»“ç‚¹çš„æ—¶å€™, æˆ‘ä»¬å°±å¾—åˆ°äº† h + i = hi. ä¸ºäº†å®ç°è¿™æ ·çš„åŠŸèƒ½æˆ‘ä»¬å¯ä»¥å¦å¤–å†™ä¸ªé€’å½’å‡½æ•°. ç„¶ååœ¨ has_path é‡Œé¢è°ƒç”¨å³å¯. ä¸€ä¸ªæé«˜æ•ˆç‡çš„æ–¹æ³•æ˜¯å¦‚æœæˆ‘ä»¬å½“å‰å¾—åˆ°çš„å­—ç¬¦ä¸²ä¸æ˜¯ç›®æ ‡å­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†(å¼€å¤´ä½ç½®), é‚£ä¹ˆæˆ‘ä»¬æ˜¾ç„¶æ²¡æœ‰å¿…è¦ç»§ç»­åˆ°æ›´æ·±çš„å­æ ‘é‡Œé¢å¯»æ‰¾. è¿™ä¹Ÿæ˜¯é€’å½’çš„å‰ªææ“ä½œ. æ€ä¹ˆæŠŠé—®é¢˜åˆ†è§£ä¸ºæ›´ç®€å•çš„å­é—®é¢˜ ? æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ python æä¾›çš„ any å‡½æ•°, åªè¦ä»»æ„ä¸€ä¸ªå­æ ‘ä¸Šå­˜åœ¨è¿™æ ·çš„è·¯å¾„å³å¯. python def has_path(t, word): \"\"\"Return whether there is a path in a tree where the entries along the path spell out a particular word. \u003e\u003e\u003e greetings = tree('h', [tree('i'), ... tree('e', [tree('l', [tree('l', [tree('o')])]), ... tree('y')])]) \u003e\u003e\u003e print_tree(greetings) h i e l l o y \u003e\u003e\u003e has_path(greetings, 'h') True \u003e\u003e\u003e has_path(greetings, 'i') False \u003e\u003e\u003e has_path(greetings, 'hi') True \u003e\u003e\u003e has_path(greetings, 'hello') True \u003e\u003e\u003e has_path(greetings, 'hey') True \u003e\u003e\u003e has_path(greetings, 'bye') False \u003e\u003e\u003e has_path(greetings, 'hint') False \"\"\" assert len(word) \u003e 0, 'no path for empty word.' def helper(t, cur): if cur == word: return True if cur not in word: return False return any([helper(b, cur + label(b)) for b in branches(t)]) return helper(t, label(t)) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q6-has-path"},{"categories":["Course"],"content":" Trees ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#trees"},{"categories":["Course"],"content":" Q7: Preorder Define the function preorder, which takes in a tree as an argument and returns a list of all the entries in the tree in the order that print_tree would print them. The following diagram shows the order that the nodes would get printed, with the arrows representing function calls. å…ˆåºéå†æ˜¯éå†æ ‘çš„ä¸€ä¸ªåŸºæœ¬æ–¹æ³•. æˆ‘ä»¬è¦å…ˆè®°ä½æ ¹ç»“ç‚¹çš„å€¼å†å»è®¿é—®å®ƒçš„å­æ ‘ä¸Šçš„ç»“ç‚¹. python def preorder(t): \"\"\"Return a list of the entries in this tree in the order that they would be visited by a preorder traversal (see problem description). \u003e\u003e\u003e numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])]) \u003e\u003e\u003e preorder(numbers) [1, 2, 3, 4, 5, 6, 7] \u003e\u003e\u003e preorder(tree(2, [tree(4, [tree(6)])])) [2, 4, 6] \"\"\" result = [] def helper(t): if t is not None: result.append(label(t)) for b in branches(t): helper(b) helper(t) return result ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q7-preorder"},{"categories":["Course"],"content":" Data Abstraction ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:4:0","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#data-abstraction"},{"categories":["Course"],"content":" Q8: Interval Abstraction Acknowledgements. This interval arithmetic example is based on a classic problem from Structure and Interpretation of Computer Programs, Section 2.1.4. Introduction. Alyssa P. Hacker is designing a system to help people solve engineering problems. One feature she wants to provide in her system is the ability to manipulate inexact quantities (such as measurements from physical devices) with known precision, so that when computations are done with such approximate quantities the results will be numbers of known precision. For example, if a measured quantity x lies between two numbers a and b, Alyssa would like her system to use this range in computations involving x. Alyssaâ€™s idea is to implement interval arithmetic as a set of arithmetic operations for combining â€œintervalsâ€ (objects that represent the range of possible values of an inexact quantity). The result of adding, subracting, multiplying, or dividing two intervals is also an interval, one that represents the range of the result. Alyssa suggests the existence of an abstraction called an â€œintervalâ€ that has two endpoints: a lower bound and an upper bound. She also presumes that, given the endpoints of an interval, she can create the interval using data abstraction. Using this constructor and the appropriate selectors, she defines the following operations: Alyssaâ€™s program is incomplete because she has not specified the implementation of the interval abstraction. She has implemented the constructor for you; fill in the implementation of the selectors. è¿™é“é¢˜çš„è®¡ç®—ç³»ç»Ÿå…¶å®æ˜¯ç”¨æ¥è®¡ç®—ç”µé˜»çš„. æˆ‘ä»¬çŸ¥é“ç”µé˜»ä¼šå­˜åœ¨è¯¯å·®(æ¯”å¦‚ $\\pm5%$), æ‰€ä»¥çœŸæ­£çš„ç”µé˜»å€¼åº”è¯¥æ˜¯åœ¨ä¸€ä¸ªåŒºé—´é‡Œé¢çš„. è¿™å°±æ˜¯è¿™ä¸ªæ‰€è°“çš„çš„ interval è¡¨ç¤ºçš„. æ‰€ä»¥ interval å…¶å®ä¹Ÿå°±æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 2 çš„ list è€Œå·². è¦å¾—åˆ°å®ƒä¸¤ä¾§çš„èŒƒå›´æˆ‘ä»¬åªè¦æ ¹æ®ç´¢å¼•è¿”å› x[0] æˆ– x[1] å³å¯. python def interval(a, b): \"\"\"Construct an interval from a to b.\"\"\" assert a \u003c= b, 'Lower bound cannot be greater than upper bound' return [a, b] def lower_bound(x): \"\"\"Return the lower bound of interval x.\"\"\" return x[0] def upper_bound(x): \"\"\"Return the upper bound of interval x.\"\"\" return x[1] ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:4:1","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q8-interval-abstraction"},{"categories":["Course"],"content":" Q9: Interval Arithmetic After implementing the abstraction, Alyssa decided to implement a few interval arithmetic functions. This is her current implementation for interval multiplication. Unfortunately there are some data abstraction violations, so your task is to fix this code before someone sets it on fire. python def mul_interval(x, y): \"\"\"Return the interval that contains the product of any value in x and any value in y.\"\"\" p1 = x[0] * y[0] p2 = x[0] * y[1] p3 = x[1] * y[0] p4 = x[1] * y[1] return [min(p1, p2, p3, p4), max(p1, p2, p3, p4)] è¿™é‡Œé¢æœ‰å¾ˆå¤šè¿åäº†æ•°æ®æŠ½è±¡åŸåˆ™çš„æ“ä½œ, æ¯”å¦‚æˆ‘ä»¬è®¿é—®ç”µé˜»çš„ä¸Šä¸‹ç•Œçš„æ—¶å€™ä¸åº”è¯¥ç›´æ¥ç”¨ x[0] æˆ– x[1]. âš ï¸ è¿™å…¶å®æ˜¯ç ´åäº†å°è£…æ€§, ä¸‡ä¸€ä»¥åæˆ‘ä»¬æ¢ä¸ªä¸€ä¸ªå®ç°ç”µé˜»çš„æ–¹å¼, è¿™ä¸ªä»£ç å°±ç”¨ä¸äº†äº†. æ‰€ä»¥æ­£ç¡®çš„æ–¹æ³•åº”è¯¥æ˜¯ç”¨å‰é¢å®ç°çš„ lower_bound() å’Œ upper_bound() è¿™ä¸¤ä¸ªå‡½æ•°. é™¤æ­¤ä¹‹å¤–, æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ª interval çš„æ—¶å€™ä¹Ÿåº”è¯¥ç”¨ interval è¿™ä¸ªæ„é€ å‡½æ•°. python def mul_interval(x, y): \"\"\"Return the interval that contains the product of any value in x and any value in y.\"\"\" p1 = lower_bound(x) * lower_bound(y) p2 = lower_bound(x) * upper_bound(y) p3 = upper_bound(x) * lower_bound(y) p4 = upper_bound(x) * upper_bound(y) return interval(min(p1, p2, p3, p4), max(p1, p2, p3, p4)) Interval Subtraction Using a similar approach as mul_interval and add_interval, define a subtraction function for intervals. If you find yourself repeating code, see if you can reuse functions that have already been implemented. è¿™ä¸ªä»£ç å¦‚æœå’Œ mul_interval çš„å‡ ä¹ä¸€æ¨¡ä¸€æ ·, åªæ˜¯æ¢äº†ä¸ªæ“ä½œç¬¦è€Œå·². å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·ç”¨çš„æ˜¯ vim ä½œä¸ºç¼–è¾‘å™¨, é‚£ä¹ˆç”¨ \u003cctrl-v\u003e é€‰ä¸­å››ä¸ª * ä¹‹åæˆ‘ä»¬ç”¨ r- å°±å¯ä»¥å¿«é€Ÿæ›¿æ¢æ‰äº†. python def sub_interval(x, y): \"\"\"Return the interval that contains the difference between any value in x and any value in y.\"\"\" p1 = lower_bound(x) - lower_bound(y) p2 = lower_bound(x) - upper_bound(y) p3 = upper_bound(x) - lower_bound(y) p4 = upper_bound(x) - upper_bound(y) return interval(min(p1, p2, p3, p4), max(p1, p2, p3, p4)) Interval Division Alyssa implements division below by multiplying by the reciprocal of y. A systems programmer looks over Alyssaâ€™s shoulder and comments that it is not clear what it means to divide by an interval that spans zero. Add an assertstatement to Alyssaâ€™s code to ensure that no such interval is used as a divisor: æ£€æŸ¥æ˜¯å¦é™¤æ•° \u003e 0 python def div_interval(x, y): \"\"\"Return the interval that contains the quotient of any value in x divided by any value in y. Division is implemented as the multiplication of x by the reciprocal of y.\"\"\" assert lower_bound(y) \u003e 0, \"AssertionError!\" reciprocal_y = interval(1 / upper_bound(y), 1 / lower_bound(y)) return mul_interval(x, reciprocal_y) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q9-interval-arithmetic"},{"categories":["Course"],"content":" Q9: Interval Arithmetic After implementing the abstraction, Alyssa decided to implement a few interval arithmetic functions. This is her current implementation for interval multiplication. Unfortunately there are some data abstraction violations, so your task is to fix this code before someone sets it on fire. python def mul_interval(x, y): \"\"\"Return the interval that contains the product of any value in x and any value in y.\"\"\" p1 = x[0] * y[0] p2 = x[0] * y[1] p3 = x[1] * y[0] p4 = x[1] * y[1] return [min(p1, p2, p3, p4), max(p1, p2, p3, p4)] è¿™é‡Œé¢æœ‰å¾ˆå¤šè¿åäº†æ•°æ®æŠ½è±¡åŸåˆ™çš„æ“ä½œ, æ¯”å¦‚æˆ‘ä»¬è®¿é—®ç”µé˜»çš„ä¸Šä¸‹ç•Œçš„æ—¶å€™ä¸åº”è¯¥ç›´æ¥ç”¨ x[0] æˆ– x[1]. âš ï¸ è¿™å…¶å®æ˜¯ç ´åäº†å°è£…æ€§, ä¸‡ä¸€ä»¥åæˆ‘ä»¬æ¢ä¸ªä¸€ä¸ªå®ç°ç”µé˜»çš„æ–¹å¼, è¿™ä¸ªä»£ç å°±ç”¨ä¸äº†äº†. æ‰€ä»¥æ­£ç¡®çš„æ–¹æ³•åº”è¯¥æ˜¯ç”¨å‰é¢å®ç°çš„ lower_bound() å’Œ upper_bound() è¿™ä¸¤ä¸ªå‡½æ•°. é™¤æ­¤ä¹‹å¤–, æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ª interval çš„æ—¶å€™ä¹Ÿåº”è¯¥ç”¨ interval è¿™ä¸ªæ„é€ å‡½æ•°. python def mul_interval(x, y): \"\"\"Return the interval that contains the product of any value in x and any value in y.\"\"\" p1 = lower_bound(x) * lower_bound(y) p2 = lower_bound(x) * upper_bound(y) p3 = upper_bound(x) * lower_bound(y) p4 = upper_bound(x) * upper_bound(y) return interval(min(p1, p2, p3, p4), max(p1, p2, p3, p4)) Interval Subtraction Using a similar approach as mul_interval and add_interval, define a subtraction function for intervals. If you find yourself repeating code, see if you can reuse functions that have already been implemented. è¿™ä¸ªä»£ç å¦‚æœå’Œ mul_interval çš„å‡ ä¹ä¸€æ¨¡ä¸€æ ·, åªæ˜¯æ¢äº†ä¸ªæ“ä½œç¬¦è€Œå·². å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·ç”¨çš„æ˜¯ vim ä½œä¸ºç¼–è¾‘å™¨, é‚£ä¹ˆç”¨ é€‰ä¸­å››ä¸ª * ä¹‹åæˆ‘ä»¬ç”¨ r- å°±å¯ä»¥å¿«é€Ÿæ›¿æ¢æ‰äº†. python def sub_interval(x, y): \"\"\"Return the interval that contains the difference between any value in x and any value in y.\"\"\" p1 = lower_bound(x) - lower_bound(y) p2 = lower_bound(x) - upper_bound(y) p3 = upper_bound(x) - lower_bound(y) p4 = upper_bound(x) - upper_bound(y) return interval(min(p1, p2, p3, p4), max(p1, p2, p3, p4)) Interval Division Alyssa implements division below by multiplying by the reciprocal of y. A systems programmer looks over Alyssaâ€™s shoulder and comments that it is not clear what it means to divide by an interval that spans zero. Add an assertstatement to Alyssaâ€™s code to ensure that no such interval is used as a divisor: æ£€æŸ¥æ˜¯å¦é™¤æ•° \u003e 0 python def div_interval(x, y): \"\"\"Return the interval that contains the quotient of any value in x divided by any value in y. Division is implemented as the multiplication of x by the reciprocal of y.\"\"\" assert lower_bound(y) \u003e 0, \"AssertionError!\" reciprocal_y = interval(1 / upper_bound(y), 1 / lower_bound(y)) return mul_interval(x, reciprocal_y) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#interval-subtraction"},{"categories":["Course"],"content":" Q9: Interval Arithmetic After implementing the abstraction, Alyssa decided to implement a few interval arithmetic functions. This is her current implementation for interval multiplication. Unfortunately there are some data abstraction violations, so your task is to fix this code before someone sets it on fire. python def mul_interval(x, y): \"\"\"Return the interval that contains the product of any value in x and any value in y.\"\"\" p1 = x[0] * y[0] p2 = x[0] * y[1] p3 = x[1] * y[0] p4 = x[1] * y[1] return [min(p1, p2, p3, p4), max(p1, p2, p3, p4)] è¿™é‡Œé¢æœ‰å¾ˆå¤šè¿åäº†æ•°æ®æŠ½è±¡åŸåˆ™çš„æ“ä½œ, æ¯”å¦‚æˆ‘ä»¬è®¿é—®ç”µé˜»çš„ä¸Šä¸‹ç•Œçš„æ—¶å€™ä¸åº”è¯¥ç›´æ¥ç”¨ x[0] æˆ– x[1]. âš ï¸ è¿™å…¶å®æ˜¯ç ´åäº†å°è£…æ€§, ä¸‡ä¸€ä»¥åæˆ‘ä»¬æ¢ä¸ªä¸€ä¸ªå®ç°ç”µé˜»çš„æ–¹å¼, è¿™ä¸ªä»£ç å°±ç”¨ä¸äº†äº†. æ‰€ä»¥æ­£ç¡®çš„æ–¹æ³•åº”è¯¥æ˜¯ç”¨å‰é¢å®ç°çš„ lower_bound() å’Œ upper_bound() è¿™ä¸¤ä¸ªå‡½æ•°. é™¤æ­¤ä¹‹å¤–, æˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ª interval çš„æ—¶å€™ä¹Ÿåº”è¯¥ç”¨ interval è¿™ä¸ªæ„é€ å‡½æ•°. python def mul_interval(x, y): \"\"\"Return the interval that contains the product of any value in x and any value in y.\"\"\" p1 = lower_bound(x) * lower_bound(y) p2 = lower_bound(x) * upper_bound(y) p3 = upper_bound(x) * lower_bound(y) p4 = upper_bound(x) * upper_bound(y) return interval(min(p1, p2, p3, p4), max(p1, p2, p3, p4)) Interval Subtraction Using a similar approach as mul_interval and add_interval, define a subtraction function for intervals. If you find yourself repeating code, see if you can reuse functions that have already been implemented. è¿™ä¸ªä»£ç å¦‚æœå’Œ mul_interval çš„å‡ ä¹ä¸€æ¨¡ä¸€æ ·, åªæ˜¯æ¢äº†ä¸ªæ“ä½œç¬¦è€Œå·². å¦‚æœä½ è·Ÿæˆ‘ä¸€æ ·ç”¨çš„æ˜¯ vim ä½œä¸ºç¼–è¾‘å™¨, é‚£ä¹ˆç”¨ é€‰ä¸­å››ä¸ª * ä¹‹åæˆ‘ä»¬ç”¨ r- å°±å¯ä»¥å¿«é€Ÿæ›¿æ¢æ‰äº†. python def sub_interval(x, y): \"\"\"Return the interval that contains the difference between any value in x and any value in y.\"\"\" p1 = lower_bound(x) - lower_bound(y) p2 = lower_bound(x) - upper_bound(y) p3 = upper_bound(x) - lower_bound(y) p4 = upper_bound(x) - upper_bound(y) return interval(min(p1, p2, p3, p4), max(p1, p2, p3, p4)) Interval Division Alyssa implements division below by multiplying by the reciprocal of y. A systems programmer looks over Alyssaâ€™s shoulder and comments that it is not clear what it means to divide by an interval that spans zero. Add an assertstatement to Alyssaâ€™s code to ensure that no such interval is used as a divisor: æ£€æŸ¥æ˜¯å¦é™¤æ•° \u003e 0 python def div_interval(x, y): \"\"\"Return the interval that contains the quotient of any value in x divided by any value in y. Division is implemented as the multiplication of x by the reciprocal of y.\"\"\" assert lower_bound(y) \u003e 0, \"AssertionError!\" reciprocal_y = interval(1 / upper_bound(y), 1 / lower_bound(y)) return mul_interval(x, reciprocal_y) ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#interval-division"},{"categories":["Course"],"content":" Q10: Par Diff After considerable work, Alyssa P. Hacker delivers her finished system. Several years later, after she has forgotten all about it, she gets a frenzied call from an irate user, Lem E. Tweakit. It seems that Lem has noticed that theformula for parallel resistors can be written in two algebraically equivalent ways: text par1(r1, r2) = (r1 * r2) / (r1 + r2) or text par2(r1, r2) = 1 / (1/r1 + 1/r2) He has written the following two programs, each of which computes the parallel_resistors formula differently: python def par2(r1, r2): one = interval(1, 1) rep_r1 = div_interval(one, r1) rep_r2 = div_interval(one, r2) return div_interval(one, add_interval(rep_r1, rep_r2)) Lem points out that Alyssaâ€™s program gives different answers for the two ways of computing. Find two intervals r1 and r2 that demonstrate the difference in behavior between par1 and par2 when passed into each of the two functions. Demonstrate that Lem is right. Investigate the behavior of the system on a variety of arithmetic expressions. Make some intervals r1 and r2, and show that par1 and par2 can give different results. å¦‚æœä½ æƒ³çŸ¥é“è¿™ä¸ªçš„è¯¦ç»†è§£é‡Šçš„è¯, å¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ª é“¾æ¥ python def check_par(): \"\"\"Return two intervals that give different results for parallel resistors. \u003e\u003e\u003e r1, r2 = check_par() \u003e\u003e\u003e x = par1(r1, r2) \u003e\u003e\u003e y = par2(r1, r2) \u003e\u003e\u003e lower_bound(x) != lower_bound(y) or upper_bound(x) != upper_bound(y) True \"\"\" r1 = interval(5, 7) r2 = interval(5, 7) return r1, r2 ","date":"2022-02-20","objectID":"/zh-cn/hw04-of-cs61a-of-ucb/:4:3","series":null,"tags":["Course"],"title":"Hw04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/hw04-of-cs61a-of-ucb/#q10-par-diff"},{"categories":["Course"],"content":"the simple solutions for lab05 of CS61A of UCB","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/"},{"categories":["Course"],"content":" Lists ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#lists"},{"categories":["Course"],"content":" Q1: Factors List Write factors_list, which takes a number n and returns a list of its factors in ascending order. æˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™ä¹ˆä¸€ä¸ªåŸºæœ¬çš„æ•°å­¦äº‹å®: ä¸€ä¸ªæ•°å­—çš„å› å­æœ€å¤§ä»…å¯èƒ½ä¸ºå®ƒçš„ä¸€åŠ(å½“è¿™ä¸ªæ•°å­—æ˜¯å¶æ•°çš„æ—¶å€™). æ‰€ä»¥æˆ‘ä»¬çš„ for å¾ªç¯åªè¦éå†åˆ° n // 2 + 1 å³å¯ python def factors_list(n): \"\"\"Return a list containing all the numbers that divide `n` evenly, except for the number itself. Make sure the list is in ascending order. \u003e\u003e\u003e factors_list(6) [1, 2, 3] \u003e\u003e\u003e factors_list(8) [1, 2, 4] \u003e\u003e\u003e factors_list(28) [1, 2, 4, 7, 14] \"\"\" all_factors = [] # the biggest number which can divide `n` evenly will be `n // 2` for i in range(1, n // 2 + 1): if n % i == 0: all_factors.append(i) return all_factors ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:1:1","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#q1-factors-list"},{"categories":["Course"],"content":" Q2: Flatten Write a function flatten that takes a list and â€œflattensâ€ it. The list could be a deep list, meaning that there could be a multiple layers of nesting within the list. For example, one use case of flatten could be the following: text \u003e\u003e\u003e lst = [1, [[2], 3], 4, [5, 6]] \u003e\u003e\u003e flatten(lst) [1, 2, 3, 4, 5, 6] Make sure your solution does not mutate the input list. æ˜¾ç„¶è¿™ä¸ªé—®é¢˜å¤©ç„¶å¤åˆé€’å½’æ±‚è§£çš„æ€§è´¨, å¯¹äºåµŒå¥—çš„ list, æˆ‘ä»¬éœ€è¦é€’å½’åˆ†è§£å®ƒ. é‚£ä¹ˆè¿™åˆå›åˆ°äº†æ€ä¹ˆå¤„ç†é€’å½’åˆ†è§£çš„é—®é¢˜: ä»€ä¹ˆæ˜¯ base case ? å¦‚æœæ˜¯ç©ºçš„ list å°±è¿”å› [] æ€ä¹ˆé€’å½’åˆ†è§£ä¸ºæ›´ç®€å•çš„å­é—®é¢˜ ? ä¹Ÿå°±æ˜¯æˆ‘ä»¬è¦å¦‚ä½•ç¼©å°é—®é¢˜çš„è§„æ¨¡, æˆ‘ä»¬å¯ä»¥æ¯æ¬¡å°è¯•å¤„ç†åµŒå¥— list çš„ç¬¬ä¸€ä¸ªä½ç½®çš„å…ƒç´ , æ ¹æ®å®ƒä»¬æ˜¯ä¸æ˜¯ list å¯ä»¥åˆ†è§£å‡ºä¸¤ç§æƒ…å†µ. æœ€åæˆ‘ä»¬å¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ä»£ç : python def flatten(s): \"\"\"Returns a flattened version of list s. \u003e\u003e\u003e flatten([1, 2, 3]) # normal list [1, 2, 3] \u003e\u003e\u003e x = [1, [2, 3], 4] # deep list \u003e\u003e\u003e flatten(x) [1, 2, 3, 4] \u003e\u003e\u003e x # Ensure x is not mutated [1, [2, 3], 4] \u003e\u003e\u003e x = [[1, [1, 1]], 1, [1, 1]] # deep list \u003e\u003e\u003e flatten(x) [1, 1, 1, 1, 1, 1] \u003e\u003e\u003e x [[1, [1, 1]], 1, [1, 1]] \"\"\" if s == []: return [] elif type(s[0]) == list: return flatten(s[0]) + flatten(s[1:]) else: return s[:1] + flatten(s[1:]) ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:1:2","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#q2-flatten"},{"categories":["Course"],"content":" Data Abstraction ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#data-abstraction"},{"categories":["Course"],"content":" Q3: Distance We will now implement the function distance, which computes the distance between two city objects. Recall that the distance between two coordinate pairs (x1, y1) and (x2, y2) can be found by calculating the sqrt of (x1 - x2)**2 + (y1 - y2)**2. We have already imported sqrt for your convenience. Use the latitude and longitude of a city as its coordinates; youâ€™ll need to use the selectors to access this info! æˆ‘ä»¬åªè¦åˆ†åˆ«å¯¹ä¼ è¿›æ¥çš„å‚æ•°è°ƒç”¨ get_lat å’Œ get_lon å¾—åˆ°å€¼ç„¶åè®¡ç®—å³å¯ python def distance(city_a, city_b): \"\"\" \u003e\u003e\u003e city_a = make_city('city_a', 0, 1) \u003e\u003e\u003e city_b = make_city('city_b', 0, 2) \u003e\u003e\u003e distance(city_a, city_b) 1.0 \u003e\u003e\u003e city_c = make_city('city_c', 6.5, 12) \u003e\u003e\u003e city_d = make_city('city_d', 2.5, 15) \u003e\u003e\u003e distance(city_c, city_d) 5.0 \"\"\" x = (get_lat(city_a) - get_lat(city_b)) ** 2 y = (get_lon(city_a) - get_lon(city_b)) ** 2 return sqrt(x + y) ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#q3-distance"},{"categories":["Course"],"content":" Q4: Closer city Next, implement closer_city, a function that takes a latitude, longitude, and two cities, and returns the name of the city that is relatively closer to the provided latitude and longitude. You may only use the selectors and constructors introduced above and the distance function you just defined for this question. Hint: How can you use your distance function to find the distance between the given location and each of the given cities? æ ¹æ®æç¤ºå’Œæˆ‘ä»¬åœ¨ Q3 ä¸­çš„ distance å‡½æ•°, æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬åº”è¯¥æ ¹æ® lat å’Œ lon å»ºç«‹ä¸€ä¸ªè™šæ‹Ÿçš„åŸå¸‚, ç„¶åä½¿ç”¨ distance å‡½æ•°æ¥è®¡ç®—è·ç¦». è¿™æ ·æ‰ä¸ç”¨å†™å¤§é‡é‡å¤çš„ä»£ç  python def closer_city(lat, lon, city_a, city_b): \"\"\" Returns the name of either city_a or city_b, whichever is closest to coordinate (lat, lon). If the two cities are the same distance away from the coordinate, consider city_b to be the closer city. \u003e\u003e\u003e berkeley = make_city('Berkeley', 37.87, 112.26) \u003e\u003e\u003e stanford = make_city('Stanford', 34.05, 118.25) \u003e\u003e\u003e closer_city(38.33, 121.44, berkeley, stanford) 'Stanford' \u003e\u003e\u003e bucharest = make_city('Bucharest', 44.43, 26.10) \u003e\u003e\u003e vienna = make_city('Vienna', 48.20, 16.37) \u003e\u003e\u003e closer_city(41.29, 174.78, bucharest, vienna) 'Bucharest' \"\"\" tmp = make_city('tmp', lat, lon) if distance(tmp, city_a) \u003c distance(tmp, city_b): return get_name(city_a) else: return get_name(city_b) ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:2:2","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#q4-closer-city"},{"categories":["Course"],"content":" Trees ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#trees"},{"categories":["Course"],"content":" Q6: Finding Berries! The squirrels on campus need your help! There are a lot of trees on campus and the squirrels would like to know which ones contain berries. Define the function berry_finder, which takes in a tree and returns True if the tree contains a node with the value 'berry' and False otherwise. Hint: To iterate through each of the branches of a particular tree, you can consider using a for loop to get each branch. è¿™æ˜¯ä¸€é“å¾ˆç»å…¸çš„æ ‘çš„é€’å½’é¢˜ç›®. æˆ‘ä»¬è¦åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹ä¸­æ‰¾åˆ° label ä¸º berry çš„ç‚¹, ç”¨é€’å½’çš„æ€è·¯å¦‚ä¸‹: ä»€ä¹ˆæ˜¯ base case ? æ˜¾ç„¶ä¸ºå¶å­ç»“ç‚¹çš„æ—¶å€™æ˜¯ base case, è¿™ä¸ªæ—¶å€™æˆ‘ä»¬çœ‹å®ƒçš„ label æ˜¯ä¸æ˜¯ æ€ä¹ˆåˆ†è§£ä¸ºæ›´ç®€å•çš„å­é—®é¢˜ ? å®¹æ˜“æƒ³åˆ°, æˆ‘ä»¬åªè¦æœ‰ä»»ä½•ä¸€ä¸ªåˆ†æ”¯çš„æŸä¸ªèŠ‚ç‚¹å­˜åœ¨ berry å³å¯, æˆ–è€…è¯´æˆ‘ä»¬å½“å‰åˆ†æ”¯çš„ label ä¸º berry. python def berry_finder(t): \"\"\"Returns True if t contains a node with the value 'berry' and False otherwise. \u003e\u003e\u003e scrat = tree('berry') \u003e\u003e\u003e berry_finder(scrat) True \u003e\u003e\u003e sproul = tree('roots', [tree('branch1', [tree('leaf'), tree('berry')]), tree('branch2')]) \u003e\u003e\u003e berry_finder(sproul) True \u003e\u003e\u003e numbers = tree(1, [tree(2), tree(3, [tree(4), tree(5)]), tree(6, [tree(7)])]) \u003e\u003e\u003e berry_finder(numbers) False \u003e\u003e\u003e t = tree(1, [tree('berry',[tree('not berry')])]) \u003e\u003e\u003e berry_finder(t) True \"\"\" if is_leaf(t): return label(t) == 'berry' return any([berry_finder(b) for b in branches(t)]) or label(t) == 'berry' ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#q6-finding-berries"},{"categories":["Course"],"content":" Q7: Sprout leaves Define a function sprout_leaves that takes in a tree, t, and a list of leaves, leaves. It produces a new tree that is identical to t, but where each old leaf node has new branches, one for each leaf in leaves. For example, say we have the tree t = tree(1, [tree(2), tree(3, [tree(4)])]): text 1 / \\ 2 3 | 4 If we call sprout_leaves(t, [5, 6]), the result is the following tree: text 1 / \\ 2 3 / \\ | 5 6 4 / \\ 5 6 è¿™åŒæ ·æ˜¯è¦ç”¨é€’å½’è§£å†³çš„é¢˜ç›®, æ˜¾ç„¶ base case å°±æ˜¯å¶å­ç»“ç‚¹, å½“æˆ‘ä»¬é‡åˆ°å¶å­ç»“ç‚¹çš„æ—¶å€™è¦æŠŠ leaves æ·»åŠ ä¸Šå». å¦‚æœæ˜¯åˆ†æ”¯, é‚£ä¹ˆæˆ‘ä»¬å°±è¦æ£€æŸ¥å®ƒçš„æ¯ä¸€ä¸ªå­æ ‘. python def sprout_leaves(t, leaves): \"\"\"Sprout new leaves containing the data in leaves at each leaf in the original tree t and return the resulting tree. \u003e\u003e\u003e t1 = tree(1, [tree(2), tree(3)]) \u003e\u003e\u003e print_tree(t1) 1 2 3 \u003e\u003e\u003e new1 = sprout_leaves(t1, [4, 5]) \u003e\u003e\u003e print_tree(new1) 1 2 4 5 3 4 5 \u003e\u003e\u003e t2 = tree(1, [tree(2, [tree(3)])]) \u003e\u003e\u003e print_tree(t2) 1 2 3 \u003e\u003e\u003e new2 = sprout_leaves(t2, [6, 1, 2]) \u003e\u003e\u003e print_tree(new2) 1 2 3 6 1 2 \"\"\" if is_leaf(t): return tree(label(t), [tree(leaf) for leaf in leaves]) return tree(label(t), [sprout_leaves(b, leaves) for b in branches(t)]) ","date":"2022-02-19","objectID":"/zh-cn/lab05-cs61a-of-ucb/:3:2","series":null,"tags":["Course"],"title":"Lab05 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab05-cs61a-of-ucb/#q7-sprout-leaves"},{"categories":["Course"],"content":"the simple solutions for lab04 of CS61A of UCB","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/"},{"categories":["Course"],"content":" Intro æˆ‘å‘ç°è§£å†³é€’å½’çš„é—®é¢˜çœŸçš„å¾ˆæœ‰æ„æ€, æˆ‘å–œæ¬¢è¿™ç§è§£å†³é—®é¢˜çš„æ–¹å¼, ä»£ç è¶³å¤Ÿç®€æ´è€Œä¸”åšå‡ºæ¥å¾ˆç›´è§‚, è¿™ä¹Ÿæ˜¯æˆ‘å†™ä¸‹è¿™ç¯‡æ–‡ç« çš„åŸå› . ğŸ“’ å¦‚ä½•è§£å†³å¥½é€’å½’çš„é—®é¢˜ ? æƒ³æ¸…æ¥šä»€ä¹ˆæ˜¯ base case ? æ€ä¹ˆæŠŠå½“å‰çš„é—®é¢˜åˆ†è§£ä¸ºæ›´ç®€å•çš„é—®é¢˜ ? æ—¶åˆ»è¦è®°ä½æˆ‘ä»¬å®šä¹‰çš„å‡½æ•°çš„å®šä¹‰ åé¢æˆ‘ä¹Ÿä¼šæŒ‰ç…§è¿™ä¸ªæ€è·¯æ¥è§£å†³è¿™ä¸ª lab ä¸­çš„é€’å½’é—®é¢˜ ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:1:0","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#intro"},{"categories":["Course"],"content":" Recursion ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:2:0","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#recursion"},{"categories":["Course"],"content":" Q2: Summation Write a recursive implementation of summation, which takes a positive integer n and a function term. It applies term to every number from 1 to n including n and returns the sum. Important: Use recursion; the tests will fail if you use any loops (for, while). ä»€ä¹ˆæ˜¯è¿™ä¸€é¢˜çš„ base case ? è¿™ä¸ªå¾ˆå®¹æ˜“æƒ³åˆ°, å› ä¸ºæˆ‘ä»¬è¦å¤„ç†ä» 1 åˆ° n, æ˜¾ç„¶å½“ n = 1 çš„æ—¶å€™å°±æ˜¯æˆ‘ä»¬çš„ base case, æ­¤æ—¶è¿”å› term(n) æ€ä¹ˆæŠŠå½“å‰çš„é—®é¢˜åˆ†è§£ä¸ºæ›´ç®€å•çš„é—®é¢˜ ? å› ä¸ºæ˜¯ä» 1 åˆ° n, æˆ‘ä»¬æ¯æ¬¡è®© n - 1 æ¥ç¼©å°é—®é¢˜çš„è§„æ¨¡, å°±ä¼šä¸€ç›´åˆ°è¾¾ base case python def summation(n, term): \"\"\"Return the sum of numbers 1 through n (including n) wÃ­th term applied to each number. Implement using recursion! \u003e\u003e\u003e summation(5, lambda x: x * x * x) # 1^3 + 2^3 + 3^3 + 4^3 + 5^3 225 \u003e\u003e\u003e summation(9, lambda x: x + 1) # 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + 10 54 \u003e\u003e\u003e summation(5, lambda x: 2**x) # 2^1 + 2^2 + 2^3 + 2^4 + 2^5 62 \u003e\u003e\u003e # Do not use while/for loops! \u003e\u003e\u003e from construct_check import check \u003e\u003e\u003e # ban iteration \u003e\u003e\u003e check(HW_SOURCE_FILE, 'summation', ... ['While', 'For']) True \"\"\" assert n \u003e= 1 # base case: n = 1 if n == 1: return term(n) else: return term(n) + summation(n - 1, term) ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:2:1","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#q2-summation"},{"categories":["Course"],"content":" Tree Recursion ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:3:0","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#tree-recursion"},{"categories":["Course"],"content":" Q3: Pascalâ€™s Triangle Hereâ€™s a part of the Pascalâ€™s trangle: text 1 1 1 1 2 1 1 3 3 1 1 4 6 4 1 Every number in Pascalâ€™s triangle is defined as the sum of the item above it and the item above and to the left of it. Use 0 if the item does not exist. Define the procedure pascal(row, column) which takes a row and a column, and finds the value of the item at that position in Pascalâ€™s triangle. Rows and columns are zero-indexed; that is, the first row is row 0 instead of 1 and the first column is column 0 instead of column 1. For example, the item at row 2, column 1 in Pascalâ€™s triangle is 2. è¿™ä¸ªé—®é¢˜æ˜¯å¾ˆç»å…¸çš„å¸•æ–¯å¡ä¸‰è§’å½¢é—®é¢˜äº†, æ ¹æ®å®šä¹‰æˆ‘ä»¬å¯ä»¥çŸ¥é“åœ¨ Pascal(i, j) è¿™ä¸ªä½ç½®, è¦å¾—åˆ°å®ƒçš„å€¼æˆ‘ä»¬å¯ä»¥ç”¨ Pascal(i - 1, j) + Pascal(i - 1, j - 1) æ¥è®¡ç®—, æ˜¾ç„¶è¿™ä¸ªå®šä¹‰å¼å¤©ç„¶ç»™å‡ºäº†é€’å½’åˆ†è§£å­é—®é¢˜çš„æ–¹å¼. é‚£ä¹ˆæˆ‘ä»¬å‰©ä¸‹è¦è§£å†³çš„å°±æ˜¯ã€Œä»€ä¹ˆæ˜¯ base case ?ã€, æ˜¾ç„¶åªè¦æ˜¯åœ¨ç¬¬ä¸€åˆ—(j = 0)æˆ–è€…è¯´è¡Œå·å’Œåˆ—å·(i == j)ç›¸ç­‰, é‚£ä¹ˆå°±æ˜¯ 1. å†çœ‹çœ‹ä¸Šé¢çš„å¸•æ–¯å¡ä¸‰è§’å½¢ç¤ºä¾‹, ä½ ä¼šå‘ç°è¿™ä¸¤ä¸ª base case + é€’å½’åˆ†è§£å­é—®é¢˜çš„æ–¹å¼æˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å‡ºæ‰€æœ‰çš„æƒ…å†µ. æ³¨æ„æˆ‘ä»¬è¿˜è¦è€ƒè™‘åˆ°ç´¢å¼•éæ³•çš„æƒ…å†µ(j \u003e i) python def pascal(row, column): \"\"\"returns the value of the item in pascal's triangle whose position is specified by row and column. \u003e\u003e\u003e pascal(0, 0) 1 \u003e\u003e\u003e pascal(0, 5) # empty entry; outside of pascal's triangle 0 \u003e\u003e\u003e pascal(3, 2) # row 3 (1 3 3 1), column 2 3 \u003e\u003e\u003e pascal(4, 2) # row 4 (1 4 6 4 1), column 2 6 \"\"\" # in pascal's triangle, \\ # pascal(i, j) = pascal(i - 1, j - 1) + pascal(i - 1, j) # base case 1. empty entry if column \u003e row: return 0 # base case 2. pascal(i, 0) if column == 0: return 1 # base case 3. pascal(i, i) elif row == column: return 1 return pascal(row - 1, column) + pascal(row - 1, column - 1) ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:3:1","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#q3-pascals-triangle"},{"categories":["Course"],"content":" Q4: Insect Combinatorics Consider an insect in an M by N grid. The insect starts at the bottom left corner, (0, 0), and wants to end up at the top right corner, (M-1, N-1). The insect is only capable of moving right or up. Write a function paths that takes a grid length and width and returns the number of different paths the insect can take from the start to the goal. (There is a closed-form solution to this problem, but try to answer it procedurally using recursion.) For example, the 2 by 2 grid has a total of two ways for the insect to move from the start to the goal. For the 3 by 3 grid, the insect has 6 diferent paths (only 3 are shown above). Hint: What happens if we hit the top or rightmost edge? ä»é¢˜ç›®ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“æˆ‘ä»¬åªèƒ½å‘ä¸Šèµ°æˆ–è€…å‘å³èµ°, ä¹Ÿå°±æ˜¯è¯´å‡è®¾æˆ‘ä»¬å¤„åœ¨ path(i, j) è¿™ä¸ªä½ç½®, é‚£ä¹ˆæˆ‘ä»¬åªå¯èƒ½æ˜¯ä»å·¦è¾¹æˆ–è€…æ˜¯ä»ä¸‹è¾¹æ¥çš„, é‚£ä¹ˆèµ°åˆ° path(i, j) æœ‰å‡ ç§èµ°æ³•å‘¢ ? æ˜¾ç„¶, å®ƒç­‰äº path(i, j - 1) + path(i - 1, j). (è¿™é‡Œå·¦ä¸‹è§’æ‰æ˜¯ (0, 0)). é‚£ä¹ˆæˆ‘ä»¬å‰©ä¸‹è¦è§£å†³çš„å°±æ˜¯ã€Œä»€ä¹ˆæ˜¯ base case ?ã€, ä¹Ÿå°±æ˜¯ä¸€ç›´å¾€ä¸Šèµ°å’Œä¸€ç›´å¾€å³èµ°è¿™ä¸¤ç§, éƒ½åªæœ‰ 1 ä¸­èµ°æ³•. å¦‚ä¸‹é¢è¿™ä¸ªè¡¨æ ¼æ‰€ç¤º: 1 1 1 1 1 å†æ ¹æ®ä¸Šé¢çš„å…¬å¼å¯ä»¥çŸ¥é“, å®Œæ•´çš„åº”è¯¥æ˜¯è¿™æ ·: 1 3 6 1 2 3 1 1 1 è¿™é‡Œä¸ºäº†å¤„ç†é—®é¢˜æ–¹ä¾¿, æˆ‘ä»¬è®©ç´¢å¼•ä» 1 å¼€å§‹ ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:3:2","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#q4-insect-combinatorics"},{"categories":["Course"],"content":" List Comprehensions ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:4:0","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#list-comprehensions"},{"categories":["Course"],"content":" Q5: Couple Implement the function couple, which takes in two lists and returns a list that contains lists with i-th elements of two sequences coupled together. You can assume the lengths of two sequences are the same. Try using a list comprehension. Hint: You may find the built in range function helpful. è¿™ä¸ªé—®é¢˜ç®€å•, å› ä¸ºä¸¤ä¸ªæ˜¯ç­‰é•¿çš„ list, æ‰€ä»¥æˆ‘ä»¬åªè¦ç”¨åŒä¸€ä¸ªç´¢å¼•ä»ä¸¤ä¸ª list ä¸­å–æ•°å³å¯ python def couple(s, t): \"\"\"Return a list of two-element lists in which the i-th element is [s[i], t[i]]. \u003e\u003e\u003e a = [1, 2, 3] \u003e\u003e\u003e b = [4, 5, 6] \u003e\u003e\u003e couple(a, b) [[1, 4], [2, 5], [3, 6]] \u003e\u003e\u003e c = ['c', 6] \u003e\u003e\u003e d = ['s', '1'] \u003e\u003e\u003e couple(c, d) [['c', 's'], [6, '1']] \"\"\" assert len(s) == len(t) return [[s[i], t[i]] for i in range(len(s))] ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:4:1","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#q5-couple"},{"categories":["Course"],"content":" Q6: Coordinates Implement a function coords that takes a function fn, a sequence seq, and a lower and upper bound on the output of the function. coords then returns a list of coordinate pairs (lists) such that: Each (x, y) pair is represented as [x, fn(x)] The x-coordinates are elements in the sequence The result contains only pairs whose y-coordinate is within the upper and lower bounds (inclusive) See the doctest for examples. Note: your answer can only be one line long. You should make use of list comprehensions! è¿™ä¸ªå…¶å®ä¹Ÿå®¹æ˜“, å°±æ˜¯å¤šäº†ä¸€ä¸ª if è¯­å¥æ¥è¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„ç»“æœè€Œå·² python def coords(fn, seq, lower, upper): \"\"\" \u003e\u003e\u003e seq = [-4, -2, 0, 1, 3] \u003e\u003e\u003e fn = lambda x: x**2 \u003e\u003e\u003e coords(fn, seq, 1, 9) [[-2, 4], [1, 1], [3, 9]] \"\"\" \"*** YOUR CODE HERE ***\" return [[i, fn(i)] for i in seq if lower \u003c= fn(i) \u003c= upper] ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:4:2","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#q6-coordinates"},{"categories":["Course"],"content":" Q7: Riffle Shuffle A common way of shuffling cards is known as the riffle shuffle. The shuffle produces a new configuration of cards in which the top card is followed by the middle card, then by the second card, then the card after the middle, and so forth. Write a list comprehension that riffle shuffles a sequence of items. You can assume the sequence contains an even number of items. Hint: There are two ways you can write this as a single list comprension: 1) You may find the expression k%2, which evaluates to 0 on even numbers and 1 on odd numbers, to be alternatively access the beginning and middle of the deck. 2) You can utilize an if expression in your comprehension for the odd and even numbers respectively. è¿™ä¸€ä¸ªé—®é¢˜ä¼šç¨å¾®éš¾ä¸€ç‚¹, æˆ‘ä»¬å…¶å®æ˜¯è¦æƒ³åŠæ³•å¾—åˆ°æ­£ç¡®çš„ç´¢å¼•, æ˜¾ç„¶ç´¢å¼•ä¸ºå¥‡æ•°å’Œå¶æ•°çš„æ—¶å€™æƒ…å†µå¹¶ä¸ç›¸åŒ. æˆ‘ä»¬å¯ä»¥çœ‹å¦‚ä¸‹çš„è¡¨æ ¼æ‰¾ä¸€ä¸‹è§„å¾‹â¬‡ï¸: Origin index 0 1 2 3 Real index for deck[â€¦] 0 2 1 3 Guess ? (M = 2) 0 M 2 // 2 ? M + 1 = M + 3 // 2 ? å¥‡æ•°: 0, 1, 2, â€¦ å¶æ•°: M+0, M+1, M+2, â€¦ é€šè¿‡ä¸Šé¢çš„è§‚å¯Ÿæˆ‘ä»¬å°±å¯ä»¥å†™å‡ºå¦‚ä¸‹çš„ä»£ç â¬‡ï¸: python def riffle(deck): \"\"\"Produces a single, perfect riffle shuffle of DECK, consisting of DECK[0], DECK[M], DECK[1], DECK[M+1], ... where M is position of the second half of the deck. Assume that len(DECK) is even. \u003e\u003e\u003e riffle([3, 4, 5, 6]) [3, 5, 4, 6] \u003e\u003e\u003e riffle(range(20)) [0, 10, 1, 11, 2, 12, 3, 13, 4, 14, 5, 15, 6, 16, 7, 17, 8, 18, 9, 19] \"\"\" return [deck[i // 2 + (i % 2) * (len(deck) // 2)] for i in range(len(deck))] ","date":"2022-02-03","objectID":"/zh-cn/lab04-cs61a-of-ucb/:4:3","series":null,"tags":["Course"],"title":"Lab04 é¢˜è§£ (UCB CS61A@2021 Fall)","uri":"/zh-cn/lab04-cs61a-of-ucb/#q7-riffle-shuffle"},{"categories":["Tool"],"content":"Explain how to use hammerspoon to manage windows","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/","series":null,"tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/"},{"categories":["Tool"],"content":" å¼•è¨€ è™½ç„¶ macOS è‡ªå¸¦çª—å£ç®¡ç†è¿™ä¸ªåŠŸèƒ½, ä½†æ˜¯å®é™…ä¸Šæ˜¯ç”¨ä¸‹æ¥å‘ç°è¿˜æ˜¯å¾ˆéš¾å—çš„. åŠŸèƒ½ä¸è¶³ä»¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚. æ‰€ä»¥æˆ‘å¸¸å¸¸å‘ç°è‡ªå·±åœ¨ç”¨é¼ æ ‡æ‹–åŠ¨çª—å£å’Œé‡æ–°è°ƒæ•´çª—å£å¤§å°. é•¿æ­¤ä»¥å¾€, æˆ‘è§‰å¾—è¿™æ ·æ•ˆç‡å®åœ¨å¤ªä½, æ°å¥½å‰é˜µå­åœ¨çœ‹ MIT-Missing-Semester çš„è¯¾, é‡Œé¢æåˆ°äº† hammerspoon è¿™ä¸ªå·¥å…·. æˆ‘å»ç¨å¾®äº†è§£äº†ä¸€ä¸‹å‘ç°è¿™å·¥å…·çœŸçš„ä¸é”™. ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:1:0","series":null,"tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/#å¼•è¨€"},{"categories":["Tool"],"content":" ä»€ä¹ˆæ˜¯ hammerspoon ? æ ¹æ®å®˜æ–¹æ–‡æ¡£ä»‹ç», hammerspoon æ˜¯ macOS ä¸Šä¸€ä¸ªç”¨äºè‡ªåŠ¨åŒ–çš„å·¥å…·, å……å½“äº† Lua è¯­è¨€å’Œæ“ä½œç³»ç»Ÿçš„ç³»ç»Ÿè°ƒç”¨ä¹‹é—´çš„æ¡¥æ¢. ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Lua è¯­è¨€å’Œ hammerspoon æä¾›çš„ API æ¥æ¥å®Œæˆå¾ˆå¤šè‡ªåŠ¨åŒ–æ“ä½œ. ç›®å‰æˆ‘è¿˜åªçœ‹äº†çª—å£ç®¡ç†ç›¸å…³çš„. å› ä¸ºè¦ç”¨åˆ° Lua è¯­è¨€, ä½†æ˜¯æˆ‘åˆæ ¹æœ¬æ²¡æœ‰æ¥è§¦è¿‡è¿™ä¸ªè¯­è¨€, æ‰€ä»¥æˆ‘å¤§æ¦‚è·Ÿç€ Learn Lua in Y minutes ç¨å¾®å­¦ä¹ äº†ä¸€ä¸‹. ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:2:0","series":null,"tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/#ä»€ä¹ˆæ˜¯-hammerspoon-"},{"categories":["Tool"],"content":" æ€ä¹ˆç®¡ç†çª—å£? æˆ‘ä¸»è¦æƒ³è¦æœ‰ä¸‹é¢çš„å‡ ä¸ªåŠŸèƒ½ å¯ä»¥æŠŠçª—å£ç§»åŠ¨åˆ°å±å¹•çš„å·¦è¾¹æˆ–è€…æ˜¯å³è¾¹(1 / 2 å±å¹•) å¯ä»¥æŠŠçª—å£å¼„æˆå…¨å±çš„ å¯ä»¥æŠŠçª—å£ç§»åŠ¨åˆ°å·¦ä¸Šè§’/å³ä¸Šè§’/å·¦ä¸‹è§’/å³ä¸‹è§’(1 / 4 å±å¹•) æŠŠå½“å‰çš„çª—å£ç§»åŠ¨åˆ°å±å¹•ä¸­å¤® æˆ‘çš„æ–¹æ¡ˆä¸»è¦æ˜¯å†™äº†ä¸‰ä¸ª *.lua file(æˆ‘æ”¾åœ¨äº†æˆ‘çš„ github ä»“åº“ dotfiles é‡Œ) ğŸ‘‰config.lua lua MACBOOK_MONITOR = 'Built-in Retina Display' -- disable animations, default value = 0.2 hs.window.animationDuration = 0 ğŸ‘‰init.lua lua require('config') require('window') ğŸ‘‰window.lua è¿™ä¸ªæ˜¯ä¸»è¦çš„ä»£ç  lua -- half of screen -- {frame.x, frame.y, window.w, window.h} -- First two elements: we decide the position of frame -- Last two elements: we decide the size of frame hs.hotkey.bind({'alt', 'cmd'}, 'left', function() hs.window.focusedWindow():moveToUnit({0, 0, 0.5, 1}) end) hs.hotkey.bind({'alt', 'cmd'}, 'right', function() hs.window.focusedWindow():moveToUnit({0.5, 0, 0.5, 1}) end) hs.hotkey.bind({'alt', 'cmd'}, 'up', function() hs.window.focusedWindow():moveToUnit({0, 0, 1, 0.5}) end) hs.hotkey.bind({'alt', 'cmd'}, 'down', function() hs.window.focusedWindow():moveToUnit({0, 0.5, 1, 0.5}) end) -- quarter of screen --[[ u i j k --]] hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'u', function() hs.window.focusedWindow():moveToUnit({0, 0, 0.5, 0.5}) end) hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'k', function() hs.window.focusedWindow():moveToUnit({0.5, 0.5, 0.5, 0.5}) end) hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'i', function() hs.window.focusedWindow():moveToUnit({0.5, 0, 0.5, 0.5}) end) hs.hotkey.bind({'ctrl', 'alt', 'cmd'}, 'j', function() hs.window.focusedWindow():moveToUnit({0, 0.5, 0.5, 0.5}) end) -- full screen hs.hotkey.bind({'alt', 'cmd'}, 'f', function() hs.window.focusedWindow():moveToUnit({0, 0, 1, 1}) end) -- center screen hs.hotkey.bind({'alt', 'cmd'}, 'c', function() hs.window.focusedWindow():centerOnScreen() end) ä½ åº”è¯¥æŠŠä¸Šé¢ä¸‰ä¸ªæ–‡ä»¶æ”¾åœ¨ ~/.hammerspoon/ è¿™ä¸ªè·¯å¾„ä¸‹ç„¶ååœ¨ hammerspoon é‡Œé¢ç‚¹å‡» Reload config å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ğŸ¤— ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:3:0","series":null,"tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/#æ€ä¹ˆç®¡ç†çª—å£"},{"categories":["Tool"],"content":" ä»£ç è§£é‡Š hs.hotkey.bind(mods, key, pressedfn) è¿™ä¸ªä¸»è¦æ˜¯æŠŠæŒ‰é”® mods å’Œ key ç»‘å®šåˆ° pressedfn è¿™ä¸ªå‡½æ•°ä¸Š. åœ¨ä½¿ç”¨çš„æ—¶å€™å…ˆæŒ‰ä¸‹ mods å¯¹åº”çš„æŒ‰é”®ç»„åˆå¹¶ä¿æŒ, ç„¶åå†æŒ‰ä¸‹ key å¯¹åº”çš„æŒ‰é”®. æ¯”å¦‚æˆ‘ä»¬è¦è®©çª—å£å…¨å±, æˆ‘ä»¬é¦–å…ˆæŒ‰ä¸‹å¹¶ä¿æŒ alt(option) å’Œ cmd, å†æŒ‰ä¸‹ f. å°±å¯ä»¥è®©çª—å£å…¨å±äº† pressedfn è¿™ä¸ªå°±æ˜¯ç”¨ Lua è¯­è¨€å†™çš„ä¸€ä¸ªå‡½æ•° å‡½æ•°çš„å…³é”®åœ¨äº hs.window.focusedWindow():moveToUnit({...}) è¿™ä¸ªæ–¹æ³•. ä»–çš„ä¸»è¦åŠŸèƒ½æ˜¯è·å¾—å½“å‰è¢«æ¿€æ´»çš„çª—å£ç„¶ååšä¸€äº›ä½ç½®å’Œå¤§å°ä¸Šçš„ä¿®æ”¹. å‚æ•°æ˜¯ Lua è¯­è¨€é‡Œçš„ table, æˆ‘å·²ç»æŠŠå‚æ•°çš„å…·ä½“å«ä¹‰å†™åœ¨äº†æ³¨é‡Šé‡Œ, å¯ä»¥ç»“åˆä¸‹é¢æˆ‘ç”»çš„å›¾æ¥è¿›è¡Œç†è§£. ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:4:0","series":null,"tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/#ä»£ç è§£é‡Š"},{"categories":["Tool"],"content":" å‚è€ƒ Anishâ€™s Hammerspoon config ","date":"2022-01-21","objectID":"/zh-cn/how-to-manage-windows-using-hammerspoon/:5:0","series":null,"tags":["Tool"],"title":"How to Manage Windows Using Hammerspoon","uri":"/zh-cn/how-to-manage-windows-using-hammerspoon/#å‚è€ƒ"},{"categories":["macOS"],"content":"ç®€å•ä»‹ç»æ€ä¹ˆç”¨ homebrew å®‰è£…æœ¬åœ°å®‰è£…åŒ…","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/","series":null,"tags":["macOS","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/"},{"categories":["macOS"],"content":" å¼•è¨€ æœ€è¿‘æƒ³è¦åœ¨ homebrew ä¸Šé¢ä¸‹è½½ qbittorent, å‘ç°æˆ‘å³ä½¿ç”¨çš„æ˜¯ä¸­ç§‘å¤§çš„æºä¹Ÿä¸‹è½½ä¸ä¸‹æ¥, ç»ˆç«¯æ˜¾ç¤ºå¦‚ä¸‹å†…å®¹â¬‡ï¸ bash ==\u003e Downloading https://downloads.sourceforge.net/qbittorrent/qbittorrent-mac/qbittorrent-4.3.9/qbittorrent-4.3.9.dmg curl: (35) error:06FFF089:digital envelope routines:CRYPTO_internal:bad key length=# # # Error: Download failed on Cask 'qbittorrent' with message: Download failed: https://downloads.sourceforge.net/qbittorrent/qbittorrent-mac/qbittorrent-4.3.9/qbittorrent-4.3.9.dmg æ­¤æ—¶æˆ‘å°±æƒ³åˆ°è¦ä¸å¹²è„†æŠŠè¿™ä¸ªæ–‡ä»¶ä¸‹è½½ä¸‹æ¥, ç„¶åç”¨ homebrew æœ¬åœ°å®‰è£…(åº”è¯¥æ˜¯æœ‰è¿™ä¸ªåŠŸèƒ½çš„), åšäº†ä¸€ç•ªæ£€ç´¢ä¹‹å, ç»ˆäºçŸ¥é“è¦æ€ä¹ˆå¼„äº†, ä¸‹é¢æˆ‘å°†ä»¥ qbittorrent-4.3.9.dmg ä¸ºä¾‹ ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:1:0","series":null,"tags":["macOS","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/#å¼•è¨€"},{"categories":["macOS"],"content":" Step 1. è·å–è·¯å¾„æ–‡ä»¶å å¯ä»¥å…ˆè¿è¡Œ brew --cache æŸ¥çœ‹ homebrew çš„ç¼“å­˜è·¯å¾„, ä¸€èˆ¬æ¥è¯´åº”è¯¥æ˜¯åœ¨ ~/Library/Caches/Homebrew ä¸‹. homebrew ä¼šæŠŠå®‰è£…åŒ…ä¸‹è½½åˆ°é‡Œé¢çš„ downloads æ–‡ä»¶å¤¹é‡Œé¢, ä¹Ÿå°±æ˜¯åœ¨ ~/Library/Caches/Homebrew/downloads ä¸‹, è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹å¯ä»¥å‘ç°é‡Œé¢çš„æ–‡ä»¶åçš„æ ¼å¼éƒ½æ˜¯ \u003curl-hash\u003e--\u003cformula\u003e-\u003cversion\u003e, æ˜¾ç„¶, æˆ‘ä»¬ä¹Ÿè¦æŠŠæˆ‘ä»¬çš„å®‰è£…åŒ…å¼„æˆè¿™ç§æ ¼å¼æ”¾åœ¨é‡Œé¢. ğŸ“’ ä½¿ç”¨ brew --cache -s \u003cformula\u003e æ¥è·å–å¯¹åº”çš„è·¯å¾„æ–‡ä»¶å å¯¹åº”æˆ‘ä»¬è¿™ç¯‡æ–‡ç« çš„ä¾‹å­å°±æ˜¯ brew --cache -s qbittorrent, å¯ä»¥çœ‹åˆ°è¾“å‡ºå†…å®¹æ˜¯ /Users/\u003cå¯¹åº”ä½ çš„ç”¨æˆ·å\u003e/Library/Caches/Homebrew/downloads/7ee479ba2a19cf904e4c415805a6adaead76e7c191d595c016c86b72044c22fa--qbittorrent-4.3.9.dmg ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:2:0","series":null,"tags":["macOS","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/#step-1-è·å–è·¯å¾„æ–‡ä»¶å"},{"categories":["macOS"],"content":" Step 2. ç§»åŠ¨æœ¬åœ°å®‰è£…åŒ…åˆ°å¯¹åº”çš„ç›®å½•ä¸‹ åœ¨ Step 1. ä¸­æˆ‘ä»¬å·²ç»å¯ä»¥çŸ¥é“è¯¥æŠŠæ–‡ä»¶æ”¾åˆ°ä»€ä¹ˆåœ°æ–¹, æ¥ä¸‹æ¥è¦åšçš„æ— éå°±æ˜¯ç§»åŠ¨æ–‡ä»¶å¯ä»¥, å¦‚æœæ‰“å¼€æ–‡ä»¶æµè§ˆå™¨ç§»åŠ¨é‚£å°±æ…¢äº†, ç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥å¯¹åº”å‘½ä»¤å³å¯ ğŸ“’ ä½¿ç”¨ mv \u003clocal-file\u003e \"$(brew --cache -s \u003cformula\u003e)\" ç§»åŠ¨æœ¬åœ°å®‰è£…åŒ…åˆ°å¯¹åº”ç›®å½•ä¸‹ å¯¹åº”æˆ‘ä»¬çš„ä¾‹å­å°±æ˜¯ mv qbittorrent-4.3.9.dmg \"$(brew --cache -s qbittorrent)\" ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:3:0","series":null,"tags":["macOS","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/#step-2-ç§»åŠ¨æœ¬åœ°å®‰è£…åŒ…åˆ°å¯¹åº”çš„ç›®å½•ä¸‹"},{"categories":["macOS"],"content":" Step 3. å†æ¬¡è¿è¡Œ brew install æ­¤æ—¶å†æ¬¡è¿è¡Œ brew install qbittorrent å³å¯, å¯ä»¥çœ‹åˆ°å‘½ä»¤è¡Œæ‰¾åˆ°äº†ç¼“å­˜æ–‡ä»¶ğŸ¤—, è€Œä¸”å®‰è£…æˆåŠŸäº† ğŸ“’ å†æ¬¡è¿è¡Œ brew install \u003cformula\u003e bash ==\u003e Downloading https://downloads.sourceforge.net/qbittorrent/qbittorrent-mac/qbittorrent-4.3.9/qbittorrent-4.3.9.dmg Already downloaded: /Users/\u003cå¯¹åº”ä½ çš„ç”¨æˆ·å\u003e/Library/Caches/Homebrew/downloads/7ee479ba2a19cf904e4c415805a6adaead76e7c191d595c016c86b72044c22fa--qbittorrent-4.3.9.dmg ==\u003e Installing Cask qbittorrent ==\u003e Moving App 'qbittorrent.app' to '/Applications/qBittorrent.app' ğŸº qbittorrent was successfully installed! ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:4:0","series":null,"tags":["macOS","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/#step-3-å†æ¬¡è¿è¡Œ-brew-install"},{"categories":["macOS"],"content":" å‚è€ƒ homebrew æ–‡æ¡£ ","date":"2022-01-04","objectID":"/zh-cn/how-to-use-local-file-in-homebrew/:5:0","series":null,"tags":["macOS","Homebrew"],"title":"æ€ä¹ˆåœ¨ homebrew é‡Œé¢å®‰è£…æœ¬åœ°å®‰è£…åŒ…","uri":"/zh-cn/how-to-use-local-file-in-homebrew/#å‚è€ƒ"},{"categories":["Python"],"content":"ç®€å•ä»‹ç»äº†ç”¨ ipdb å¯¹ Python æ–‡ä»¶è¿›è¡Œ debug","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/"},{"categories":["Python"],"content":" å¼•è¨€ PS. æœ‰å…´è¶£çš„å¯ä»¥æŸ¥çœ‹æˆ‘ç¿»è¯‘çš„ä¸€ä¸ªé¡¹ç›® - pdb æ•™ç¨‹ ğŸ™Œ å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æˆ‘å†™ä»£ç éƒ½æ˜¯ç”¨æœ€ç®€å•çš„ debug æ–¹æ³•, æ‰‹åŠ¨åœ¨ç¨‹åºé‡Œé¢æ’å…¥ print ä»£ç æ¥çœ‹å…·ä½“çš„å˜é‡çš„å€¼, ç„¶åè‡ªå·±æ¨æ–­ç¨‹åºåˆ°åº•æ˜¯åœ¨å“ªé‡Œå‡ºé—®é¢˜ã€‚æ ¹æ® print çš„ç»“æœå¯èƒ½è¿˜è¦åˆ°åˆ«çš„åœ°æ–¹é‡å¤è¿™ä¸ªæ­¥éª¤ã€‚debug å®Œä¹‹åè¿˜å¾—å»æŠŠè¿™äº› print è¯­å¥æ³¨é‡Šæ‰ï¼Œå³æˆ‘æ˜¯ä¸€å print debugger ğŸ˜¢ æœ€è¿‘åœ¨çœ‹ MIT.Missing semester çš„è¯¾è®²åˆ° debug, é¡¿æ—¶æ„Ÿåˆ°åº”è¯¥ç³»ç»Ÿå­¦ä¹ ä¸€ä¸‹åœ¨ Python é‡Œé¢å¦‚ä½• debug, è™½ç„¶ç”¨ print ä¹Ÿå‡‘åˆ, å­¦å®Œä¹‹ååªæ¨è‡ªå·±æ²¡æœ‰æ—©ç‚¹äº†è§£ğŸ˜¢ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:1:0","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å¼•è¨€"},{"categories":["Python"],"content":" å¿«é€Ÿä¸Šæ‰‹","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:2:0","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å¿«é€Ÿä¸Šæ‰‹"},{"categories":["Python"],"content":" å®‰è£…è™½ç„¶ Python æœ‰è‡ªå¸¦çš„ pdb, ä½†æ˜¯ ipdb çš„è·Ÿå®ƒå¤§å·®ä¸å·®, è¿˜å¸¦é¢œè‰²è¾“å‡º, å½“ç„¶ç”¨è¿™ä¸ªäº†(å…¶å®å°±è·Ÿä½ åœ¨å‘½ä»¤è¡Œè¦ç”¨ python è¿˜æ˜¯ ipython ä¸€æ ·, è‚¯å®šæ˜¯é€‰æ‹© UI æ¯”è¾ƒå¥½çš„ bash $ pip install ipdb ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:2:1","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å®‰è£…"},{"categories":["Python"],"content":" å¼€å§‹ debugç›´æ¥åœ¨å‘½ä»¤è¡Œè¾“å…¥ä»¥ä¸‹å†…å®¹å³å¯, å…¶ä¸­ \u003cfilename\u003e è¡¨ç¤ºä½ è¦ debug çš„æ–‡ä»¶ bash $ python -m ipdb \u003cfilename\u003e ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:2:2","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å¼€å§‹-debug"},{"categories":["Python"],"content":" ipdb ğŸ“’ [ ] è¡¨ç¤ºæ˜¯å¯é€‰å‚æ•°, å¦‚æœæ²¡æœ‰ [ ] è¡¨ç¤ºä¸€å®šè¦ç»™è¿™ä¸ªå‚æ•° ğŸ“’ ( ) è¡¨ç¤ºæ‹¬å·é‡Œé¢çš„å¯ä»¥ä¸å†™, ç®€å†™å‘½ä»¤ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:0","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#ipdb"},{"categories":["Python"],"content":" å¸¸ç”¨ Debug æŒ‡ä»¤ l(ist) æ˜¾ç¤ºå½“å‰è¡Œé™„è¿‘çš„ä»£ç , å…·ä½“æ¥è¯´æ˜¯é™„è¿‘çš„ 11 è¡Œ, ä½†æ˜¯è®°è¿™ä¸ªå…·ä½“çš„æ•°å­—å¥½åƒä¹Ÿæ²¡å•¥æ„ä¹‰ ä¹Ÿå¯ä»¥ä½¿ç”¨ ll å‘½ä»¤, ä¼šæ˜¾ç¤ºå½“å‰æ‰€åœ¨å‡½æ•°æˆ–è€…æ˜¯å †æ ˆå¸§çš„æºä»£ç  å¯ä»¥ä¼ å…¥å‚æ•°, æ¯”å¦‚è¦çœ‹ 1 åˆ° 12 è¡Œçš„å†…å®¹å¯ä»¥ç”¨ l 1,12 s(tep) å•æ­¥æ‰§è¡Œä¸‹ä¸€æ­¥, å¦‚æœæ˜¯å‡½æ•°è°ƒç”¨, ä¼šè¿›åˆ°å‡½æ•°é‡Œä¸€æ­¥æ­¥æ‰§è¡Œ n(ext) å•æ­¥æ‰§è¡Œä¸‹ä¸€æ­¥, å¦‚æœæ˜¯å‡½æ•°è°ƒç”¨, ä¸ä¼šè¿›å»å‡½æ•°é‡Œä¸€æ­¥æ­¥æ‰§è¡Œ, å®ƒä¼šä¸€ç›´è·³åˆ°å‡½æ•°è°ƒç”¨æ‰§è¡Œå®Œæˆçš„åä¸€è¡Œ c(ontinue) ç»§ç»­æ‰§è¡Œ, ç›´åˆ°ç¨‹åºå‘ç”Ÿé”™è¯¯æˆ–è€…æ­£å¸¸é€€å‡º å¦‚æœç¨‹åºæ˜¯æ­£å¸¸é€€å‡ºçš„, é‚£ä¹ˆå°±ä¼šè¾“å‡º The program finished and will be restarted q(uit) é€€å‡º r(eturn) ç»§ç»­è¿è¡Œåˆ°å½“å‰å‡½æ•°è¿”å›ç»“æœä¸ºæ­¢ w(here) æ‰“å° Stack trace, çœ‹è°ƒç”¨è½¨è¿¹, ä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ä»æœ€å†…å±‚åˆ°æœ€å¤–å±‚çš„è°ƒç”¨å…¥å£ å¯ä»¥æ ¹æ®è¿™ä¸ªè°ƒç”¨æ ˆ, ç”¨ d(own) [count] å’Œ u(up) [count] æ¥åœ¨ä¸åŒçš„å±‚æ¬¡é—´ç§»åŠ¨ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:1","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å¸¸ç”¨-debug-æŒ‡ä»¤"},{"categories":["Python"],"content":" ç¨‹åºæ–­ç‚¹ä¸“é¢˜æ¯æ¬¡è®¾ç½®ç¨‹åºæ–­ç‚¹çš„æ—¶å€™éƒ½ä¼šè¾“å‡ºä½ å½“å‰è¿™ä¸ªç¨‹åºæ–­ç‚¹çš„åºå· ğŸ“’ åºå·é»˜è®¤ä» 1 å¼€å§‹, ä¹Ÿå°±æ˜¯åé¢æåˆ°çš„ breakpoint [count] b(reak) [line_number] åœ¨ line_number è¿™ä¸€è¡Œè®¾ç½®æ–­ç‚¹ ä¸æä¾›å‚æ•°çš„è¯å°±æ˜¯æŸ¥çœ‹æˆ‘ä»¬è®¾ç½®çš„æ‰€æœ‰ç¨‹åºæ–­ç‚¹ é«˜çº§ç”¨æ³•, ä½ è¿˜å¯ä»¥æŒ‡å®šæ–‡ä»¶! æ¯”å¦‚ä½ æƒ³åœåœ¨ util.py æ–‡ä»¶çš„ç¬¬ 10 è¡Œ, ä½ å¯ä»¥ç”¨ b util:10 é«˜çº§ç”¨æ³•, ä½ åœ¨æŒ‡å®šæ–‡ä»¶çš„åŒæ—¶, å¯ä»¥æŒ‡å®šå‡½æ•°, è¿˜æ˜¯åˆšæ‰é‚£ä¸ªä¾‹å­, æ¯”å¦‚ util.py æ–‡ä»¶é‡Œé¢æœ‰ä¸ª get_result å‡½æ•°, ä½ å¯ä»¥ç”¨ b util.get_result é«˜çº§ç”¨æ³•: ä½ è¿˜å¯ä»¥æŒ‡å®šæ»¡è¶³æŸäº›æ¡ä»¶æ‰ä¼šè®¾ç½®ç¨‹åºæ–­ç‚¹, ç”¨æ³•å¦‚ä¸‹: b ..., condition tbreak [line_number] æš‚æ—¶çš„ç¨‹åºæ–­ç‚¹, ç¬¬ä¸€æ¬¡å‘½ä¸­ä¹‹åå°±ä¼šè‡ªå·±å–æ¶ˆ disable [breakpoint count] æš‚æ—¶ä¸ç”¨è¿™ä¸ªç¨‹åºæ–­ç‚¹, å’Œ clear ä¸åŒ, ä½ åé¢å¯ä»¥é€šè¿‡ enable é‡æ–°æ¿€æ´»è¿™ä¸ªç¨‹åºæ–­ç‚¹ enable [breakpoint count] æ¿€æ´»ç¨‹åºæ–­ç‚¹ cl(ear) [breakpoint count | line_number] é€šè¿‡ç¨‹åºæ–­ç‚¹çš„åºå·æˆ–è€…æ˜¯å¯¹åº”çš„è¡Œæ¥æ¸…é™¤ç¨‹åºæ–­ç‚¹ unt(il) [line_number] è¿è¡Œå¤§äºç­‰äº line_number çš„åœ°æ–¹ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸æä¾›å‚æ•°, æ­¤æ—¶ unt(il) å‘½ä»¤ä¼šç»§ç»­è¿è¡Œç¨‹åºåˆ°è¡Œæ•°æ¯”å½“å‰è¡Œå¤§çš„é‚£ä¸€è¡Œ(æœ‰ç‚¹ç»•å£, ä½†æ„æ€å…¶å®å°±æ˜¯ä¸‹ä¸€è¡ŒğŸ§), æ­¤æ—¶å®ƒçš„åŠŸèƒ½ç±»ä¼¼äº n(ext) unt(il) å‘½ä»¤é»˜è®¤ä¼šåœåœ¨å½“å‰å‡½æ•°(æˆ–è€…æ˜¯å †æ ˆå¸§) return çš„åœ°æ–¹, è€Œ c(ontinue) ä¼šä¸€ç›´è¿è¡Œåˆ°ä¸‹å» restart [args...] - å¯ä»¥ç»™å®šä¸åŒçš„å‚æ•°å†æ¬¡é‡æ–°è¿è¡Œ debug ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:2","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#ç¨‹åºæ–­ç‚¹ä¸“é¢˜"},{"categories":["Python"],"content":" æŸ¥çœ‹å„ç§ä¿¡æ¯ h(elp) [command] ä¸çŸ¥é“å‘½ä»¤å¯ä»¥æŸ¥è¯¢ä¸€ä¸‹ p expression ç›¸å½“äº print expression, ä¹Ÿå¯ä»¥ä½¿ç”¨ pp(å¯¹åº” pprint) ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ expression æ˜¯ locals(), å¯ä»¥æŸ¥çœ‹å½“å‰æ‰€åœ¨ä½ç½®çš„ context è¦æ·±åˆ»ç†è§£è¿™é‡Œæ˜¯ expression çš„å¥½å¤„, å¦‚æœæœ¬æ¥çš„ expression ä¸å¯¹, å…¶å®ä½ å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œæƒ³è¦æ€ä¹ˆæ”¹, ç„¶åç›´æ¥è¿›è¡Œæµ‹è¯• a(rgs) - æ‰“å°å½“å‰æ‰€æœ‰çš„å˜é‡çš„å€¼ whatis expression ç›¸å½“äº type(expression) source expression æŸ¥çœ‹ expression çš„æºç ã€‚ å¸¸ç”¨çš„ expression æ˜¯å‡½æ•°å ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:3:3","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#æŸ¥çœ‹å„ç§ä¿¡æ¯"},{"categories":["Python"],"content":" å¸¸è§é—®é¢˜Q: æˆ‘çš„å˜é‡åè·Ÿå‘½ä»¤é‡å¤äº†æ€ä¹ˆåŠ, æ¯”å¦‚å˜é‡åæ˜¯ p ? A: è¿™ä¸ªå…¶å®ä¸å½±å“, ä½ è¿˜æ˜¯å¯ä»¥é€šè¿‡ p p æ¥è·å–å˜é‡åçš„å€¼. å¦‚æœä½ ç›´æ¥è¾“å…¥ p æ˜¾ç¤º p å¯¹åº”çš„å€¼çš„è¯, ä½ å¯ä»¥ä½¿ç”¨ !p, ç”¨ ! æ¥å‘Šè¯‰ ipdb åœ¨å®ƒåé¢çš„æ˜¯ python è¯­å¥ Q: æ¯æ¬¡å•æ­¥æ‰§è¡Œä¹‹åéƒ½è¦ç”¨ p expression çš„æ–¹å¼æ¥çœ‹å˜é‡çš„å€¼, æœ‰æ²¡æœ‰æ›´ä¸ºç®€ä¾¿çš„æ–¹æ³•? A: å¯ä»¥ç”¨ display expression, é‚£ä¹ˆåœ¨ expression çš„å€¼å‘ç”Ÿå˜åŠ¨çš„æ—¶å€™, å®ƒå°±ä¼šè¾“å‡ºå¯¹åº”çš„å€¼. å¦‚æœè¦å–æ¶ˆå°±ç”¨ undisplay expression Q: è§‰å¾—å‘½ä»¤æœ‰ç‚¹å°‘ä¸æ»¡è¶³è‡ªå·±çš„éœ€è¦ ? A: å¯ä»¥åœ¨ ipdb é‡Œé¢ç›´æ¥å†™ python çš„ä»£ç  ğŸ¤— Q: ä¸æƒ³ä½¿ç”¨ python -m ipdb \u003cfilename\u003e æƒ³ç›´æ¥åœ¨ä»£ç é‡Œæ’å…¥ç¨‹åºæ–­ç‚¹ ? A: è¿™ä¹Ÿæ˜¯å¯ä»¥çš„, ä½ å¯ä»¥åœ¨è¦æ’å…¥çš„è¡Œä¹‹å‰è®¾ç½®, åƒè¿™æ ·: python ... import ipdb; ipdb.set_trace(); ... ğŸ“’ å¦‚æœä½ æ˜¯ç”¨æ˜¯ Python 3.7+ çš„ç‰ˆæœ¬, å¯ä»¥æ’å…¥ breakpoint() è€Œä¸æ˜¯ import ipdb; ipdb.set_trace();, è¿™æ ·è®¾ç½®çš„å¥½å¤„æ˜¯ä½ å¯ä»¥ä¸€æ¬¡æ€§å–æ¶ˆæ‰€æœ‰çš„ç¨‹åºæ–­ç‚¹ï¼Œä½ å°±å¯ä»¥åŒºåˆ†å¼€æ­£å¸¸è¿è¡Œçš„æ¨¡å¼å’Œè°ƒè¯•ç¨‹åºçš„æ¨¡å¼ Q: -\u003e æŒ‡å‘çš„è¡Œè¿è¡Œäº†å— ? A: æ²¡æœ‰ Q: å¦‚æœæˆ‘ä¸€ç›´åœ¨è°ƒç”¨ step å‘½ä»¤, éš¾é“æˆ‘æ¯ä¸€æ¬¡éƒ½è¦è¾“å…¥ s å—, æœ‰æ²¡æœ‰æ›´å¿«æ·çš„æ–¹æ³• ? A: å¯ä»¥ç›´æ¥ä½¿ç”¨å›è½¦é”®(ENTER), ä¼šè‡ªåŠ¨é‡å¤ä¸Šä¸€æ¬¡çš„å‘½ä»¤ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:4:0","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å¸¸è§é—®é¢˜"},{"categories":["Python"],"content":" å‚è€ƒ pdb çš„å®˜æ–¹æ–‡æ¡£ ","date":"2021-12-28","objectID":"/zh-cn/how-to-debug-in-python/:5:0","series":null,"tags":["Python"],"title":"æ€ä¹ˆ debug Python ä»£ç ","uri":"/zh-cn/how-to-debug-in-python/#å‚è€ƒ"},{"categories":["Git"],"content":"ç®€å•ä»‹ç» Git LFS çš„ä½¿ç”¨æ–¹æ³•å’Œä½¿ç”¨åœºæ™¯","date":"2021-12-06","objectID":"/zh-cn/gitlfs/","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/"},{"categories":["Git"],"content":" ä»€ä¹ˆæ—¶å€™éœ€è¦ Git LFSå¦‚æœä½ åœ¨å‘½ä»¤è¡Œç”¨ git push æ·»åŠ æˆ–æ›´æ–° $\u003e$ 50MB çš„æ–‡ä»¶ï¼Œä½ ä¼šæ”¶åˆ°ä¸€ä¸ª warningï¼Œä¸è¿‡ä½ ä»ç„¶å¯ä»¥æ­£å¸¸ pushã€‚ä½†å¦‚æœ $\u003e$ 100MB çš„æ—¶å€™å°±æ— æ³• push äº†ã€‚å¦‚æœä½ æ˜¯åœ¨æµè§ˆå™¨è¦ä¸Šä¼ æ–‡ä»¶çš„è¯ï¼Œè¿™ä¸ªé™åˆ¶æ›´ä¸ºä¸¥é‡ï¼Œä¸èƒ½è¶…è¿‡ 25MBï¼Œè¿™æ˜¯ GitHub å¯¹ä»“åº“çš„é™åˆ¶ã€‚Git LFS å°±æ˜¯ç”¨äºè§£å†³è¿™ä¸ªé—®é¢˜1 ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:1:0","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#ä»€ä¹ˆæ—¶å€™éœ€è¦-git-lfs"},{"categories":["Git"],"content":" ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç”¨ Git LFSä¸‹é¢å‡ ä¸ªåœºæ™¯ä¸éœ€è¦ç”¨ æ–‡ä»¶å¤§å°æ²¡æœ‰è¶…è¿‡é™åˆ¶å½“ç„¶å°±æ²¡æœ‰å¿…è¦ç”¨äº† å¦‚æœæ˜¯è¦åˆ†å‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ¯”å¦‚ *.exeï¼‰ç­‰ï¼Œæ­¤æ—¶ç›´æ¥ç”¨ GitHub æä¾›çš„ release åŠŸèƒ½å°±å¥½äº† ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:2:0","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#ä»€ä¹ˆæ—¶å€™ä¸éœ€è¦ç”¨-git-lfs"},{"categories":["Git"],"content":" Git LFS åŸç†ä½¿ç”¨ Git LFS ä¹‹åï¼Œåœ¨ä»“åº“ä¸­å­˜å‚¨çš„å…¶å®æ˜¯å¯¹å¤§æ–‡ä»¶çš„å¼•ç”¨ï¼Œå¯ä»¥ç†è§£ä¸ºæŒ‡é’ˆã€‚è€ŒçœŸæ­£çš„å¤§æ–‡ä»¶æ‰˜ç®¡åœ¨ Git LFS çš„æœåŠ¡å™¨ä¸Šã€‚GitHub ç»™ä¸åŒç”¨æˆ·çš„æä¾›çš„å­˜å‚¨ç©ºé—´ä¸ä¸€æ ·ï¼Œå…è´¹ç”¨æˆ·å’Œ Pro ç”¨æˆ·éƒ½æ˜¯ 2 GBï¼Œè€Œå¦‚æœæ˜¯ä¼ä¸šç”¨æˆ·åˆ™ä¼šé«˜ç‚¹2 å½“æˆ‘ä»¬ç”¨ Git LFS è¿½è¸ªæŸä¸ªå¤§æ–‡ä»¶ï¼ˆæ¯”å¦‚ foo.zipï¼‰ä¹‹åï¼Œå¯ä»¥çœ‹åˆ° .gitattributes å‘ç”Ÿäº†æ”¹å˜ text foo.zip filter=lfs diff=lfs merge=lfs -text è¿™ä¸€è¡Œä½“ç°äº†å¾ˆå¤šä¿¡æ¯ foo.zipï¼Œè¿™æ˜¯ Git LFS æ­£åœ¨è¿½è¸ªçš„å¤§æ–‡ä»¶ç¬¦åˆçš„æ¨¡å¼ï¼Œè¯´æ˜¯æ¨¡å¼æ˜¯å› ä¸ºç”¨ Git LFS è¿½è¸ªå¤§æ–‡ä»¶çš„æ—¶å€™å¯ä»¥ç”¨é€šé…ç¬¦ï¼Œé‚£ä¹ˆè¿™é‡Œå°±ä¼šæ˜¯é€šé…ç¬¦çš„å½¢å¼ filter=lfsï¼šç”¨ Git LFS çš„æ–¹å¼å¯¹å¾…è¢«è¿½è¸ªçš„å¤§æ–‡ä»¶ diff=lfsï¼šç”¨ Git LFS çš„æ–¹å¼å¯¹å¾…è¢«è¿½è¸ªçš„å¤§æ–‡ä»¶ -textï¼Œè¡¨ç¤ºä¸ä¼šå°†è¿™ä¸ªå¤§æ–‡ä»¶çœ‹æˆæ˜¯æ–‡æœ¬æ–‡ä»¶ ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:3:0","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#git-lfs-åŸç†"},{"categories":["Git"],"content":" ä½¿ç”¨ Git LFS","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:4:0","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#ä½¿ç”¨-git-lfs"},{"categories":["Git"],"content":" å®‰è£… Git LFSå¦‚æœç”¨çš„æ˜¯ Macï¼Œé‚£ä¹ˆç”¨ Homebrew å°±å¯ä»¥å¾ˆæ–¹ä¾¿å®‰è£… sh $ brew install git-lfs $ git lfs install # å¦‚æœè¾“å‡ºä¸º Git LFS initialized. å°±æ˜¯æ­£å¸¸å®‰è£…å¥½äº† ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:4:1","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#å®‰è£…-git-lfs"},{"categories":["Git"],"content":" Case 1. ä» 0 å¼€å§‹é…ç½®ä½¿ç”¨ Git LFSæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹çš„ä¸åŒæ–¹å¼è®© Git LFS è¿½è¸ªä¸€ä¸ªå¤§æ–‡ä»¶æˆ–è€…æ˜¯ä¸€å †å¤§æ–‡ä»¶ æŒ‡å®šå¤§æ–‡ä»¶åç¼€åâ€”â€”git lfs track \"*.filetype\"ï¼Œå³æ‰¹é‡è¿½è¸ª *.filetype æ–‡ä»¶ æŒ‡å®šæŸä¸ªç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶â€”â€”git lfs track \"directory/*\"ï¼Œå³æ‰¹é‡è¿½è¸ª directory é‡Œé¢çš„æ–‡ä»¶ æŒ‡å®šæŸä¸ªå…·ä½“å¤§æ–‡ä»¶â€”â€”git lfs track \"path/to/file\" sh $ mkdir \u003crepo\u003e $ cd \u003crepo\u003e $ git init $ git lfs track \"*.zip\" # æ¯”å¦‚ *.zip # git lfs track ä¼šä¿®æ”¹ .gitattributes æ–‡ä»¶çš„å†…å®¹ï¼Œå¯ä»¥éªŒè¯ä¸€ä¸‹ # \u003e cat .gitattributes # *.zip filter=lfs diff=lfs merge=lfs -text ä¸‹é¢å‡å®šæœ‰ä¸€ä¸ªè¿œç¨‹ä»“åº“ä¾›æˆ‘ä»¬ä½¿ç”¨ sh $ git add . $ git commit -m \"\u003cmsg\u003e\" $ git push -u origin main æ­¤æ—¶å‘½ä»¤è¡Œä¼šæ˜¾ç¤º text uploading LFS objects ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:4:2","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#case-1-ä»-0-å¼€å§‹é…ç½®ä½¿ç”¨-git-lfs"},{"categories":["Git"],"content":" Case 2. è¦è¿½è¸ªçš„å¤§æ–‡ä»¶ä¹‹å‰ä¸å°å¿ƒåŠ åˆ° Git ä»“åº“é‡Œäº†æ­¤æ—¶åªæ˜¯ç®€å•ä½¿ç”¨ git lfs track ... è¿½è¸ªå¤§æ–‡ä»¶æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºè¿™ä¸ªå¤§æ–‡ä»¶å·²ç»å­˜åœ¨ Git ä»“åº“çš„å†å²è®°å½•é‡Œï¼Œè¿™ä¼šå¯¼è‡´ Git ä»“åº“æ— æ³•å˜å°ã€‚æ­£ç¡®çš„æ–¹æ³•æ˜¯ä½¿ç”¨ git lfs migrateï¼Œå°† Git å†å²çš„å¤§æ–‡ä»¶å˜æˆ Git LFS è¿½è¸ªçš„å¯¹è±¡3 æ¯”å¦‚å¯ä»¥ç”¨ --include=ï¼ŒGit LFS ä¼šè‡ªåŠ¨æ ¹æ®æˆ‘ä»¬æŒ‡å®šçš„æ¨¡å¼è¿›è¡Œé€‰æ‹©ã€‚ä¸‹é¢çš„ --include=\"*.txt çš„æ„æ€å°±æ˜¯é€‰ä¸­ Git ä»“åº“å†å²çš„ txt æ–‡ä»¶ æŠ€å·§ å¯ä»¥ç”¨ man git-lfs-migrate æŸ¥çœ‹æ›´å¤šä¿¡æ¯ bash $ git lfs migrate import --include=\"*.txt\" # è®©è¿œç¨‹ä»“åº“ä¹Ÿæ”¹è¿‡æ¥ $ git push --force ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:4:3","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#case-2-è¦è¿½è¸ªçš„å¤§æ–‡ä»¶ä¹‹å‰ä¸å°å¿ƒåŠ åˆ°-git-ä»“åº“é‡Œäº†"},{"categories":["Git"],"content":" Case 3. ä¸å†è·Ÿè¸ªæŸäº›æ–‡ä»¶ bash $ git lfs untrack \"*.filetype\" $ git rm --cached \"*.filetype\" ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:4:4","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#case-3-ä¸å†è·Ÿè¸ªæŸäº›æ–‡ä»¶"},{"categories":["Git"],"content":" å…¶ä»–å¸¸ç”¨å‘½ä»¤ æŸ¥çœ‹å½“å‰ Git LFS æ­£åœ¨è¿½è¸ªçš„æ–‡ä»¶ç±»å‹â€”â€”git lfs track æŸ¥çœ‹å½“å‰ Git LFS æ­£åœ¨è¿½è¸ªå“ªäº›æ–‡ä»¶â€”â€”git lfs ls-file ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:5:0","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#å…¶ä»–å¸¸ç”¨å‘½ä»¤"},{"categories":["Git"],"content":" å‚è€ƒ About large files on GitHubÂ â†©ï¸ About Git Large File StorageÂ â†©ï¸ Migrating existing repository data to LFSÂ â†©ï¸ ","date":"2021-12-06","objectID":"/zh-cn/gitlfs/:6:0","series":null,"tags":["Git"],"title":"Git LFS ä½¿ç”¨æŒ‡å—","uri":"/zh-cn/gitlfs/#å‚è€ƒ"},{"categories":["Machine-Learning"],"content":"ç®€å•ä»‹ç» Precision å’Œ Recall ä»¥åŠ F1 score çš„è®¡ç®—æ–¹å¼","date":"2021-12-05","objectID":"/zh-cn/f1score/","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/"},{"categories":["Machine-Learning"],"content":" ä»€ä¹ˆæ˜¯æ··æ·†çŸ©é˜µ æ¯ä¸€åˆ—è¡¨ç¤ºå®é™…æƒ…å†µï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºæˆ‘ä»¬çš„é¢„æµ‹ï¼Œè¿™æ ·ç»„åˆèµ·æ¥å°±å¾—åˆ°äº†ä¸€ä¸ªæ··æ·†çŸ©é˜µï¼Œæ¯”å¦‚ä¸€ä¸ªäºŒåˆ†ç±»çš„ä»»åŠ¡ï¼Œå¯ä»¥ç”»å‡ºå¦‚ä¸‹çš„æ··æ·†çŸ©é˜µâ¬‡ï¸ Positive Negative True TP = True Positive FP = False Positive False FN = False Negative TN = True Negative ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:0","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#ä»€ä¹ˆæ˜¯æ··æ·†çŸ©é˜µ"},{"categories":["Machine-Learning"],"content":" accuracy æœ‰å¤šå°‘æ ·æœ¬æˆ‘ä»¬é¢„æµ‹æ­£ç¡®äº† é¢„æµ‹æ­£ç¡®çš„å…¶å®æœ‰ä¸‹é¢ä¸¤ç§æƒ…å½¢â¬‡ï¸ TPï¼šæœ¬æ¥æ˜¯ positiveï¼Œä½ ä¹Ÿè®¤ä¸ºæ˜¯ positive çš„ TNï¼šæœ¬æ¥æ˜¯ negativeï¼Œä½ ä¹Ÿè®¤ä¸ºæ˜¯ negative çš„ é‚£ä¹ˆç”¨ TP + TNï¼ˆå…¶å®å°±æ˜¯ä¸»å¯¹è§’çº¿ï¼‰é™¤ä»¥æ€»çš„æ ·æœ¬æ•°å°±å¯ä»¥å¾—åˆ° accuracyï¼Œ ğŸ“’æˆ–è€…ç›´æ¥çœ‹è¡¨æ ¼ï¼Œå…¶å®å°±æ˜¯ $\\frac{ä¸»å¯¹è§’çº¿}{å››ä¸ªå•å…ƒæ ¼} =\\frac{TP+TN}{TP+TN+FN+FP}$ ä¸€èˆ¬æ¥è¯´ accuracy æ˜¯å¥½ç”¨çš„è¯„ä¼°æŒ‡æ ‡ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ä¸æ˜¯è¿™æ ·å­çš„ï¼Œæ¯”å¦‚æ ·æœ¬æ•°æ®ä¸å‡è¡¡çš„æ—¶å€™ ç±»åˆ« A ç±»åˆ« B åˆ¤æ–­æ˜¯ç±»åˆ« A 0 0 åˆ¤æ–­æ˜¯ç±»åˆ« B 1 99 å‡è®¾ç±»åˆ« A æœ‰ 1 ä¸ªï¼Œç±»åˆ« B æœ‰ 99 ä¸ªï¼Œå¦‚æœä¸ç®¡è¾“å…¥çš„æ˜¯ä»€ä¹ˆéƒ½è¿”å›ç±»åˆ« B çš„æ­£ç¡®ç‡æ˜¯å¤šå°‘å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ $\\frac{0+99}{0+0+1+99}=99%$ï¼Œæˆ‘ä»¬å¯ä»¥è¯´è¿™ä¸ªåˆ†ç±»å™¨æ•ˆæœå¾ˆå¥½å—ï¼Œè¿™æ˜¾ç„¶æ˜¯å¾ˆè’è°¬çš„ğŸ˜‚ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:1","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#accuracy"},{"categories":["Machine-Learning"],"content":" Precision æ‰€æœ‰é¢„æµ‹ä¸º True çš„æ ·æœ¬é‡Œé¢ï¼Œæœ‰å¤šå°‘æ˜¯çœŸçš„ positive çš„ ä»å®šä¹‰å‡ºå‘å¯ä»¥çŸ¥é“ï¼Œå…¶å®å°±æ˜¯è¡¨æ ¼ä¸­åˆ¤æ–­ä¸º True çš„è¿™ä¸€è¡Œä¸­ positive çš„æ¯”ä¾‹ï¼Œé‚£ä¹ˆå°±æ˜¯ $\\frac{TP}{TP+FP}$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:2","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#precision"},{"categories":["Machine-Learning"],"content":" Recall æ‰€æœ‰æœ¬æ¥æ˜¯ positive çš„ï¼Œæœ‰å¤šå°‘è¢«æˆ‘ä»¬æˆåŠŸé¢„æµ‹äº†å‡ºæ¥ ä»å®šä¹‰å‡ºå‘ï¼Œæ‰€æœ‰æœ¬æ¥æ˜¯ positive çš„å°±æ˜¯ Positive è¿™ä¸€åˆ—ä¹‹å’Œï¼Œæˆ‘ä»¬æˆåŠŸé¢„æµ‹çš„æ˜¯ TPï¼Œé‚£ä¹ˆå°±æ˜¯ $\\frac{TP}{TP+FN}$ ğŸ“’æˆ‘ä»¬å¸¸å¸¸è¦åœ¨ Precision å’Œ Recall ä¸­è¿›è¡Œ tradeoffï¼Œå› ä¸ºå…¶ä¸­ä¸€ä¸ªå‡é«˜ï¼Œå¦ä¸€ä¸ªå°±ä¼šé™ä½ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:1:3","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#recall"},{"categories":["Machine-Learning"],"content":" F1 score æ­£æ˜¯å› ä¸º Precision å’Œ Recall çš„äº’æ–¥ç‰¹æ€§ï¼Œåœ¨è¡¡é‡åˆ†ç±»å™¨å¥½åçš„æ—¶å€™ä¼šç»™æˆ‘ä»¬å¸¦æ¥å›°æ‰°ï¼Œç‰¹åˆ«æ˜¯ä¸¤è€…ç›¸å·®ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œäºæ˜¯å°±éœ€è¦å°†è¿™ä¸¤ä¸ªæŒ‡æ ‡åˆå¹¶èµ·æ¥ç”¨å¦ä¸€ä¸ªæŒ‡æ ‡è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯ F1 score F1 score çš„è®¡ç®—æ–¹å¼å¦‚ä¸‹ï¼š $$F1\\ score = \\frac{2PR}{P+R}$$ å…¶ä¸­ Precision = $P$ï¼› Recall = $R$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:2:0","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#f1-score"},{"categories":["Machine-Learning"],"content":" F1 score çš„ä¸åŒè®¡ç®—æ–¹æ³• Macroï¼šåˆ†åˆ«è®¡ç®—æ¯ä¸ªç±»åˆ«çš„ $P$ å’Œ $R$ï¼Œå†è®¡ç®—æ€»çš„å¹³å‡çš„ $P$ å’Œ $R$ï¼Œæœ€åç”¨è¿™ä¸ªè®¡ç®— F1 score Microï¼šåˆå¹¶å¤šä¸ªç±»åˆ«çš„ç»Ÿè®¡ç»“æœåˆ°ä¸€ä¸ªè¡¨æ ¼é‡Œé¢ï¼Œåœ¨åˆ†åˆ«ç®— $P$ å’Œ $R$ å’Œ F1 score é…åˆåé¢çš„ä¾‹å­ğŸŒ°é£Ÿç”¨ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:2:1","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#f1-score-çš„ä¸åŒè®¡ç®—æ–¹æ³•"},{"categories":["Machine-Learning"],"content":" F1 score çš„å‡ ä¸ªè§„å¾‹ F1 score æ°¸è¿œåœ¨ precision å’Œ recall ä¹‹é—´ï¼Œ F1 score ä¼šç»™ä½çš„éƒ¨åˆ†ï¼ˆ$P\\ or\\ R$ï¼‰æ›´å¤šçš„æƒé‡ï¼Œæ‰€ä»¥å¦‚æœç®—æœ¯å¹³å‡å€¼æ˜¯ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œå“ªä¸ªåˆ†ç±»å™¨çš„çŸ­æ¿æ›´çŸ­ï¼Œå®ƒçš„ F1 å°±ä¼šè¶Šå·® æƒ…å†µä¸€ï¼šæ¯”å¦‚ $P$ å’Œ $R$ åˆ†åˆ«æ˜¯ $60%$ å’Œ $60%$ï¼Œå¯ä»¥ç®—ä»–ä»¬çš„ F1 score = $60%$ æƒ…å†µäºŒï¼šæ¯”å¦‚ $P$ å’Œ $R$ åˆ†åˆ«æ˜¯ $50%$ å’Œ $70%$ï¼Œå¯ä»¥çœ‹åˆ°ä»–ä»¬å’Œä¸Šä¸€ç§æƒ…å†µçš„å¹³å‡å€¼æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ä»–ä»¬çš„ F1 score = $58.3%$ ç”± 1. å¯çŸ¥ï¼šğŸ“’ é«˜ F1 score ä¸æ„å‘³ç€åˆ†ç±»å™¨æ›´å¥½æˆ–æ›´é€‚åˆä½ çš„ä»»åŠ¡ï¼Œæœ‰æ—¶å€™ä½ å¯èƒ½æ›´å…³æ³¨ Precision æˆ–è€… Recall è¿™ä¸¤ä¸ªä¸­çš„ä¸€ä¸ª ","date":"2021-12-05","objectID":"/zh-cn/f1score/:2:2","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#f1-score-çš„å‡ ä¸ªè§„å¾‹"},{"categories":["Machine-Learning"],"content":" ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ğŸŒ° class 0 class 1 class 2 predict_class0 2 0 0 predict_class1 1 0 1 predict_class2 0 2 0 ","date":"2021-12-05","objectID":"/zh-cn/f1score/:3:0","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­"},{"categories":["Machine-Learning"],"content":" Macro çš„è®¡ç®—æ–¹å¼è¦å…ˆå¾—åˆ°æ¯ä¸€ä¸ªç±»åˆ«çš„ Precision å’Œ Recallï¼Œå…ˆç”»å‡ºè¡¨æ ¼â¬‡ï¸ class 0 Not class 0 predict_class0 2 1 predict_not_class0 0 3 class 1 Not class 1 predict_class1 0 2 predict_not_class1 2 2 class 2 Not class 2 predict_class2 0 1 predict_not_class2 2 3 å¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„ç»“æœ class 0ï¼šPrecision = $\\frac{2}{3}$ï¼›Recall = $1$ class 1ï¼šPrecision = $0$ï¼›Recall = $0$ class 2ï¼šPrecision = $0$ï¼›Recall = $0$ é‚£ä¹ˆå¹³å‡çš„ Precision å°±æ˜¯ $\\frac{2}{3} * \\frac{1}{3} = \\frac{2}{9}$ï¼›å¹³å‡çš„ Recall æ˜¯ $\\frac{1}{3}$ï¼Œä»£å…¥ F1 score çš„è®¡ç®—å…¬å¼å¯ä»¥å¾—åˆ° $\\frac{4}{15}=0.26666$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:3:1","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#macro-çš„è®¡ç®—æ–¹å¼"},{"categories":["Machine-Learning"],"content":" Micro çš„è®¡ç®—æ–¹å¼å°†ä¸‰ä¸ªè¡¨æ ¼å èµ·æ¥ï¼ˆå¯¹åº”ä½ç½®ç›¸åŠ ï¼‰ï¼Œå¯ä»¥å¾—åˆ°å¦‚ä¸‹çš„è¡¨æ ¼ class ? Not class ? predict_class? 2 4 predict_not_class? 4 8 ä»£å…¥å…¬å¼ç®—å¾— F1 score = $1/3=0.333333$ ","date":"2021-12-05","objectID":"/zh-cn/f1score/:3:2","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#micro-çš„è®¡ç®—æ–¹å¼"},{"categories":["Machine-Learning"],"content":" ä»£ç éªŒè¯ Python from sklearn.metrics import f1_score, confusion_matrix y_true = [0, 1, 2, 0, 1, 2] y_pred = [0, 2, 1, 0, 0, 1] print(confusion_matrix(y_true, y_pred)) # confusion matrix # [[2 0 0] # [1 0 1] # [0 2 0]] print(f1_score(y_true, y_pred, average='macro')) # 0.26666 print(f1_score(y_true, y_pred, average='micro')) # 0.33333 ","date":"2021-12-05","objectID":"/zh-cn/f1score/:4:0","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#ä»£ç éªŒè¯"},{"categories":["Machine-Learning"],"content":" å‚è€ƒ sklearn çš„ f1_score ä»‹ç» ","date":"2021-12-05","objectID":"/zh-cn/f1score/:5:0","series":null,"tags":["Machine-Learning"],"title":"ä»æ··æ·†çŸ©é˜µåˆ° F1 score","uri":"/zh-cn/f1score/#å‚è€ƒ"}]