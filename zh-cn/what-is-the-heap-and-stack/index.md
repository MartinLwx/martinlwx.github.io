# ä»€ä¹ˆæ˜¯å †å’Œæ ˆ


## å¼•è¨€

å¦‚æœä½ ä¸€ç›´éƒ½æ˜¯æ˜¯ç”¨åŠ¨æ€è¯­è¨€ï¼Œæ¯”å¦‚ Pythonã€Javascript è¿™ç§ï¼Œä½ å¾ˆå¯èƒ½å¹¶ä¸ä¼šæ³¨æ„åˆ°æ ˆå’Œå †çš„åŒºåˆ«ã€‚å› ä¸ºè¿™äº›è¯­è¨€æœ‰åƒåœ¾æ”¶é›†å™¨ï¼ˆGarbage collectorï¼ŒGCï¼‰å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨å¸®ä½ åšå¥½å†…å­˜ç®¡ç†ï¼Œä½ åªè¦é›†ä¸­æ³¨æ„åŠ›ç¼–ç¨‹å³å¯ã€‚åæ¶ˆæ¯æ˜¯ GC å¹¶ä¸æ˜¯æ²¡æœ‰æˆæœ¬çš„äº‹æƒ…ï¼Œå®é™…ä¸Šè®¾è®¡å†å¥½çš„ GC ç®—æ³•ï¼Œä¹Ÿä¼šé™ä½ä»£ç çš„æ€§èƒ½ã€‚å¦‚æœä½ æ¥è§¦ç¼–ç¨‹çš„æ—¶é—´è¶³å¤Ÿä¹…ï¼Œé‚£ä¹ˆæƒ³å¿…ä½ å¯èƒ½ä¼šå¬åˆ°è¿‡ä»€ä¹ˆâ€œé€’å½’å±‚æ•°å¤ªæ·±æ ˆçˆ†ç‚¸äº†â€è¿™ç§è¯ï¼Œæ­¤æ—¶ä½ å¯èƒ½ä¼šç‚¹å¼€æœç´¢å¼•æ“ç¨å¾®äº†è§£ä¸€ä¸‹æ ˆå’Œå †çš„åŒºåˆ«ï¼Œæœ‰å¯èƒ½ä½ å°±åˆšå¥½ç‚¹è¿›äº†è¿™ä¸€ç¯‡æ–‡ç«  :)

> ğŸ“’ è™½ç„¶ GC ä¼šé™ä½ä»£ç æ€§èƒ½ï¼Œä½†æ˜¯å…å»äº†å¼€å‘äººå‘˜æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„å¿ƒæ™ºè´Ÿæ‹…ï¼Œå¯ä»¥å¤§å¤§åŠ é€Ÿè½¯ä»¶å¼€å‘çš„é€Ÿåº¦ï¼Œè¿™æ˜¯ç‰ºç‰²æ€§èƒ½æ¢å–å¼€å‘é€Ÿåº¦ã€‚ä½†åˆ°äº†è½¯ä»¶åæœŸå‡ºç°æ€§èƒ½ç“¶é¢ˆçš„æ—¶å€™ï¼Œå°±ä¸å¾—ä¸ç ”ç©¶å¦‚ä½•é‡æ„ç”šè‡³é‡å†™å…³é”®éƒ¨åˆ†çš„ä»£ç æé«˜æ€§èƒ½äº†ã€‚

è¿™é‡Œçš„æ ˆå’Œå †å¹¶ä¸æ˜¯æ•°æ®ç»“æ„é‡Œé¢çš„å †å’Œæ ˆï¼Œè€Œæ˜¯æŒ‡å†…å­˜ç®¡ç†çš„ä¸¤ç§æœºåˆ¶ã€‚äº†è§£æ ˆå’Œå †çš„ç»†èŠ‚å·®å¼‚æœ‰åŠ©äºæˆ‘ä»¬ç†è§£ä¸€äº›æ¯”è¾ƒæ¥è¿‘åº•å±‚çš„ç¼–ç¨‹è¯­è¨€ï¼Œè¿™é‡Œè¯´çš„ç¼–ç¨‹è¯­è¨€*æ¯”å¦‚ Rustã€C å’Œ C++ ç­‰*ã€‚åœ¨ Rust ä¸­ï¼Œæœ€ä¸ºé‡è¦çš„æ¦‚å¿µå°±æ˜¯æ‰€æœ‰æƒçš„é—®é¢˜ï¼ŒRust çš„å¾ˆå¤šè®¾è®¡éƒ½æ˜¯å›´ç»•å®ƒå±•å¼€ï¼ŒæŒæ¡äº†æ‰€æœ‰æƒå°±èƒ½åœ¨å­¦ä¹  Rust çš„æ—¶å€™å¦‚é±¼å¾—æ°´ğŸ˜„ã€‚

## ç¨‹åºåœ¨å†…å­˜ä¸Šçš„å¸ƒå±€

æˆ‘ä»¬çŸ¥é“ï¼Œè¦è¿è¡Œä¸€ä¸ªç¨‹åºå¿…é¡»å°†ç¨‹åºåŠ è½½åˆ°å†…å­˜é‡Œé¢ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ•°æ®ä¹Ÿæ˜¯éœ€è¦è¯»å–åˆ°å†…å­˜ä¸Šçš„ï¼Œé‚£ä¹ˆä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¿™ä¸€åˆ‡åœ¨å†…å­˜ä¸Šæ˜¯å¦‚ä½•åˆ†å¸ƒçš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä¼šç»™å‡ºä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ç¤ºæ„å›¾[^1]ï¼šå¦‚ä¸‹æ‰€ç¤ºï¼š

---

![](/img/program_layout_in_memory.png)

---

åœ¨ä¸Šå›¾ä¸­ï¼Œä¸åŒéƒ¨åˆ†å­˜æ”¾çš„ä¸œè¥¿åˆ†åˆ«æ˜¯ï¼š

- textï¼šå­˜æ”¾ä»£ç 
- dataï¼šå­˜æ”¾åˆå§‹åŒ–è¿‡çš„é™æ€å˜é‡ï¼ˆInitialized static variablesï¼‰ï¼Œ*æ¯”å¦‚å…¨å±€å˜é‡ã€é™æ€å˜é‡*
- bssï¼šå­˜æ”¾æœªç»åˆå§‹åŒ–çš„é™æ€å˜é‡ï¼ˆUninitialized static dataï¼‰ï¼Œ*æ¯”å¦‚ C è¯­è¨€çš„ `static int i`*
- heap
- stack

å…³äºæ ˆå’Œå †ä¼šåœ¨åé¢è¿›è¡Œå•ç‹¬è¯´æ˜

> ğŸ“’ è¿™é‡Œè¦è®°ä½çš„å°±æ˜¯ï¼šæ ˆå’Œå †æ˜¯åœ¨å‘å½¼æ­¤é è¿‘çš„ï¼Œæ ˆæ˜¯ä»**é«˜åœ°å€ -> ä½åœ°å€**å¢é•¿ï¼Œè€Œå †æ˜¯**ä½åœ°å€ -> é«˜åœ°å€**å¢é•¿ã€‚è¿™æ ·ä½ åœ¨çœ‹æ±‡ç¼–ä»£ç çš„æ—¶å€™çœ‹åˆ°**å…¥æ ˆæ—¶ sp æŒ‡é’ˆæ˜¯åšå‡æ³•**ä½ å°±èƒ½ç†è§£äº†ã€‚


> ğŸ“’ è™½ç„¶çœ‹èµ·æ¥ï¼Œéšç€æˆ‘ä»¬ç”³è¯·å†…å­˜è¶Šæ¥è¶Šå¤šï¼Œæ ˆå’Œå †å¯èƒ½ä¼šå†²çªï¼ˆå› ä¸ºä»–ä»¬åœ¨å½¼æ­¤é è¿‘ï¼‰ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºï¼š1ï¼‰è¿™ä¸ªå¸ƒå±€æ˜¯å‘ç”Ÿåœ¨è™šæ‹Ÿå†…å­˜ä¸Šçš„ï¼Œç°åœ¨çš„å¤„ç†å™¨ä¸€èˆ¬æ˜¯ 64 ä½çš„ï¼Œå®¹é‡éå¸¸å¤§ã€‚2ï¼‰åœ¨å®ƒä»¬å†²çªä¹‹å‰ï¼Œå¾ˆæœ‰å¯èƒ½ä½ çš„ç‰©ç†å†…å­˜æ—©å°±è€—å°½äº†ï¼Œè¿˜æ˜¯å…ˆæ‹…å¿ƒè¿™ä¸ª

## æ ˆ

### æœ¯è¯­

- **Stack pointer(SP)**ï¼šå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯„å­˜å™¨ï¼Œé‡Œé¢å­˜æ”¾æ ˆé¡¶çš„åœ°å€
- **Stack frame**ï¼šå½“å‘ç”Ÿå‡½æ•°è°ƒç”¨çš„æ—¶å€™å°±ä¼šåˆ›å»º Stack frameã€‚å¯ä»¥ç†è§£ä¸ºå®ƒåŒ…å«äº†å‡½æ•°è°ƒç”¨çš„ç›¸å…³æ•°æ®ã€‚*æ¯”å¦‚å‡½æ•°çš„å‚æ•°ã€å‡½æ•°çš„è¿”å›åœ°å€ã€å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼ˆé™¤äº†åˆ†é…åœ¨å †ä¸Šçš„ï¼‰ç­‰*ã€‚ä¸€è¿ä¸²çš„ Stack frame å°±æ„æˆäº†è°ƒç”¨æ ˆï¼ˆCall stackï¼‰
- **å…¥æ ˆ**ï¼šåœ¨æ ˆä¸Šç”³è¯·ç©ºé—´
- **å‡ºæ ˆ**ï¼šåœ¨æ ˆä¸Šé‡Šæ”¾ç©ºé—´


### æ ˆä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„

æ ˆæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å…ˆè¿›åå‡ºï¼ˆLast in first out, LIFOï¼‰ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨æ ˆä¸Šç”³è¯·ç©ºé—´å’Œé‡Šæ”¾ç©ºé—´çš„æ—¶å€™çš„éµå¾ªçš„æ¨¡å¼ï¼Œè¿™ä¹Ÿæ˜¯å®ƒå«åšæ ˆçš„åŸå› ã€‚åœ¨å†…å­˜ä¸Šç”³è¯·ç©ºé—´å…¶å®å¹¶ä¸ç¥ç§˜ï¼Œå°±æ˜¯è¦æ ‡è®°å“ªäº›èŒƒå›´çš„åœ°å€æ˜¯è¿™ä¸ªç¨‹åºè¦ç”¨çš„ã€‚å¯¹æ ˆæ¥è¯´ï¼Œ**åªè¦ä¿®æ”¹ stack pointer çš„å€¼å³å¯**ï¼Œè‡ªç„¶çš„ï¼Œä»æ ˆåº•ï¼ˆä¸‹å›¾ä¸­çš„ `A`ï¼‰åˆ°æ ˆé¡¶ï¼ˆ`sp` æŒ‡å‘çš„ä½ç½®ï¼‰å°±æ˜¯æˆ‘ä»¬æ ˆä¸Šç”³è¯·äº†çš„ç©ºé—´

ä¸‹é¢çš„å›¾[^1]å°±å±•ç°äº†è¿™ä¸ªç®€å•çš„é€»è¾‘ï¼š

---

![](/img/stack_and_sp.png)

---

è¿™é‡Œä»è¦å†æ¬¡å¼ºè°ƒï¼Œæ ˆæ˜¯ä»**é«˜åœ°å€ -> ä½åœ°å€**å¢é•¿ï¼Œæ‰€ä»¥ä¸Šå›¾ä»å·¦åˆ°å³æ˜¯é«˜åœ°å€ -> ä½åœ°å€ï¼Œæ‰€ä»¥åœ¨æ ˆä¸Šç”³è¯·ç©ºé—´ï¼ˆå…¥æ ˆï¼‰çš„æ—¶å€™å®é™…ä¸Š **`sp` æ˜¯åšå‡æ³•**.


å‡½æ•°è°ƒç”¨ä¹Ÿæ˜¯ç”¨æ ˆå®Œæˆçš„:

- è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼šä¿®æ”¹ `sp` æŒ‡é’ˆ -> æ„é€ è¢«è°ƒç”¨çš„å‡½æ•°çš„ stack frameï¼Œå…¶ä¸­åŒ…æ‹¬å‡½æ•°å‚æ•°å’Œå…¶ä»–ä¸€äº›å¿…è¦çš„æ•°æ®ï¼Œå°†å…¶å…¥æ ˆ -> è¿›å…¥ Callee
- å‡½æ•°é€€å‡ºçš„æ—¶å€™ï¼šä¸Šé¢çš„è¿‡ç¨‹åè¿‡æ¥å°±è¡Œ

> ğŸ“’ åœ¨æ ˆä¸Šç”³è¯·å†…å­˜ç©ºé—´çš„æ—¶å€™éœ€è¦æ‹…å¿ƒçš„é—®é¢˜æ˜¯ï¼šä¸è¦ç”³è¯·å¤ªå¤šå¯¼è‡´æ ˆçˆ†äº†ï¼ˆä¹Ÿå°±æ˜¯å¤§åé¼é¼çš„ Stack Overflowï¼‰ã€‚è¿™ä¸€ç‚¹åœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™è¦ç‰¹åˆ«æ³¨æ„ã€‚ä½ å¯ä»¥é€‰æ‹©æ”¹æˆè¿­ä»£çš„ç®—æ³•ï¼Œä¹Ÿå¯ä»¥è€ƒè™‘å¢åŠ æ ˆçš„å¤§å°é™åˆ¶ã€‚*æ¯”å¦‚åœ¨ Python é‡Œé¢å¯ä»¥ç”¨ `sys.getrecursionlimit()` æ¥ä¿®æ”¹æ ˆçš„å¤§å°é™åˆ¶*ã€‚æœ‰çš„ç¼–ç¨‹è¯­è¨€è¿˜ä¼šå¯¹å°¾é€’å½’è¿›è¡Œä¼˜åŒ–ï¼Œæ­¤æ—¶ä¹Ÿå¯ä»¥é€‰æ‹©å°†æ™®é€šçš„é€’å½’å‡½æ•°æ”¹å†™ä¸ºå°¾é€’å½’çš„å½¢å¼ã€‚

### ä»¥æ–æ³¢é‚£å¥‘æ•°åˆ—çš„é€’å½’å‡½æ•°çœ‹æ ˆçš„å˜åŒ–

CS è¯¾ç¨‹ä¸­è®²è§£é€’å½’çš„æ—¶å€™ä¸€èˆ¬éƒ½ä¼šè®²åˆ°æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œç°åœ¨æˆ‘ä»¬ç”¨ `F(n)` è¡¨ç¤ºæ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ `n` ä¸ªå€¼ï¼Œé‚£ä¹ˆæœ‰ï¼š

- `F(0) = 0`
- `F(1) = 1`
- `F(n) = F(n - 1) + F(n - 2)`

*ä»¥ `F(4)` ä¸ºä¾‹ï¼Œé€’å½’è®¡ç®—çš„æ–¹å¼å¦‚ä¸‹ï¼š*


```
F(4) = F(3) + F(2)
     = F(2) + F(1) + F(1) + F(0)
     = F(1) + F(0) + F(1) + F(1) + F(0)
     = 3 * F(1) + 2 * F(0)
```

*å¦‚æœæˆ‘ä»¬å¿½ç•¥ä¸€äº›ç»†èŠ‚ï¼Œæ„Ÿå—å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­æ ˆçš„å˜åŒ–æƒ…å†µï¼Œé‚£ä¹ˆå¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š*

æ³¨ï¼š ä¸‹é¢çš„ `F(n)` è¡¨ç¤ºæ¯ä¸ªå‡½æ•°è‡ªå·±çš„ stack frame

```python
stack: F(4)
stack: F(4) | F(3)                  # F(4): enter F(3)
stack: F(4) | F(3) | F(2)           # F(3): enter F(2)
stack: F(4) | F(3) | F(2) | F(1)    # F(2): enter F(1), F(1) is the base case, ready to exit function call
stack: F(4) | F(3) | F(2)           # Function return, return to the body of F(2)
stack: F(4) | F(3) | F(2) | F(0)    # F(2): enter F(0), F(0) is the base case, ready to exit function call
stack: F(4) | F(3) | F(2)           # Function return, return to the body of F(2)
stack: F(4) | F(3) | F(1)           # F(3): enter F(1), F(1) is the base case, ready to exit function call 
stack: F(4) | F(3)                  # Function return, return to the body of F(3)
stack: F(4)                         # Function return, return to the body of F(4)
stack: F(4) | F(2)                  # F(4): enter F(2)
stack: F(4) | F(2) | F(1)           # F(2): enter F(1), F(1) is the base case, ready to exit function call
stack: F(4) | F(2)                  # Function return, return to the body of F(2)
stack: F(4) | F(2) | F(0)           # F(2): enter F(0), F(0) is the base case, ready to exit function call
stack: F(4) | F(2)                  # Function return, return to the body of F(2)
stack: F(4)                         # Function return, return to the body of F(4)
```

### æ ˆä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®

**æ ˆä¸Šçš„å†…å­˜ç©ºé—´ç®¡ç†æ˜¯é€šè¿‡ä¿®æ”¹ `sp` æŒ‡é’ˆçš„å€¼å®ç°çš„**ï¼Œå¾ˆå®¹æ˜“çŸ¥é“ä¸‹é¢å‡ ç‚¹ï¼š

1. æ ˆä¸Šçš„å†…å­˜ç”³è¯·å’Œé‡Šæ”¾éƒ½ååˆ†é«˜æ•ˆï¼Œä¸º `O(1)`ï¼Œåªè¦ä¿®æ”¹ `sp` çš„å€¼å³å¯
2. æ ˆçš„è¿™ç§ LIFO çš„é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œç¼–è¯‘å™¨å…¶å®å°±èƒ½å¸®æˆ‘ä»¬å¤„ç†å¥½ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬ä¸éœ€è¦å¹²é¢„è¿™ä¸ªè¿‡ç¨‹
2. ä¿®æ”¹ `sp` æŒ‡é’ˆå†³å®šè¦ç”³è¯·å¤šå¤§çš„ç©ºé—´ï¼Œæ„å‘³ç€æˆ‘ä»¬å¿…é¡»çŸ¥é“è¦ç”³è¯·çš„æ•°æ®æœ‰å¤šå¤§ï¼ˆç¼–è¯‘æ—¶è¦èƒ½ç¡®å®šï¼‰ï¼Œæ‰€ä»¥**æ ˆé€‚åˆå­˜æ”¾çš„æ•°æ®æ˜¯å›ºå®šå·²çŸ¥å¤§å°çš„**ã€‚è€Œå¤§å°ä¸å›ºå®šçš„æ•°æ®æ˜¯ç”¨å †æ¥è§£å†³çš„

## å †

æ ˆçš„ä¸è¶³ä¹‹å¤„æ˜¯ï¼š**æ— æ³•å¤„ç†å¤§å°å¯å˜çš„æ•°æ®**ï¼Œæˆ‘ä»¬æ— æ³•çŸ¥é“æ­¤æ—¶ `sp` çš„å€¼è¦ä¿®æ”¹ä¸ºå¤šå°‘ã€‚

å¦‚ä½•åœ¨å¤§å°å¯å˜çš„æ•°æ®å’Œæ ˆä¹‹é—´æ­å»ºèµ·æ¡¥æ¢å‘¢ï¼Ÿè¿™å°±éœ€è¦ç”¨åˆ°æŒ‡é’ˆäº†ã€‚è™½ç„¶**å®é™…å­˜å‚¨çš„æ•°æ®å¤§å°æœªçŸ¥**ï¼Œä½†æ˜¯æŒ‡é’ˆçš„å¤§å°æ˜¯å›ºå®šå·²çŸ¥çš„ï¼ˆåªè¦ä¿è¯å¯»å€èŒƒå›´èƒ½è¦†ç›–åˆ°æ•´ä¸ªå†…å­˜å°±è¡Œï¼Œä¸€èˆ¬è·Ÿæœºå™¨å­—é•¿ç›¸ç­‰ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬**å¯ä»¥åœ¨æ ˆä¸Šå­˜å‚¨ä¸€ä¸ªå›ºå®šå¤§å°çš„æŒ‡é’ˆ**ï¼Œè®©è¿™ä¸ªå®ƒæŒ‡å‘å †ä¸Šå­˜å‚¨çš„çœŸæ­£æ•°æ®ã€‚

### å †ä¸Šçš„å†…å­˜ç®¡ç†æ˜¯å¦‚ä½•è¿›è¡Œçš„

æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œåœ¨å †ä¸Šç”³è¯·å†…å­˜å…¶å®å°±æ˜¯åœ¨å †ä¸Šæ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºé—´ï¼Œå¹¶è¿”å›è¿™ä¸ªä½ç½®çš„æŒ‡é’ˆï¼Œè€ŒåæŒ‡é’ˆå…¥æ ˆã€‚

åé¢æˆ‘ä»¬æƒ³è¦è®¿é—®è¿™ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œå°±å¯¹æŒ‡é’ˆè§£å¼•ç”¨å³å¯ã€‚C è¯­è¨€æˆ–è€… Rust é‡Œé¢çš„ `*` æ“ä½œç¬¦å°±æ˜¯ç”¨æ¥å¹²è¿™ä¸ªçš„ã€‚ä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œï¼Œä»¥å‰éš¾æ‡‚çš„æŒ‡é’ˆæ˜¯ä¸æ˜¯ç¨å¾®èƒ½ç†è§£ä¸€ç‚¹äº† :)

ä¸åŒäºæ ˆé‡Œé¢ç®€å•ä¿®æ”¹ `sp` æŒ‡é’ˆå³å¯ï¼Œå †ä¸Šçš„å†…å­˜ç®¡ç†å¤æ‚å¾—å¤šã€‚åŒ…æ‹¬ä¸‹é¢å‡ ç‚¹ï¼š

1. å †ä¸Šå¯ä»¥åˆ†é…çš„å†…å­˜çš„ä½ç½®æ˜¯ä»»æ„çš„ã€å¤§å°ä¹Ÿæ˜¯ä»»æ„çš„ï¼ˆä¸è¶…è¿‡ç‰©ç†å†…å­˜å¤§å°å³å¯ï¼‰ï¼Œè€Œæ ˆåªè¦éµå¾ªå…ˆè¿›åå‡ºå°±è¡Œã€‚ä¸ºäº†ç®¡ç†å †ä¸Šå·²åˆ†é…å’Œå¾…åˆ†é…å †ç©ºé—´ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ç›¸åº”çš„ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œè¿™å°±ç»™å †ä¸Šçš„å†…å­˜ç®¡ç†å¸¦æ¥å¾ˆå¤§çš„å›°éš¾
2. åœ¨å †ä¸Šç”³è¯·ç©ºé—´çš„æ•ˆç‡ä¹Ÿæ¯”è¾ƒä½ã€‚æœ€åŸºæœ¬çš„ï¼Œæˆ‘ä»¬èµ·ç è¦æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§å°çš„ç©ºé—´ï¼Œè¿™ä¸ªæ‰¾çš„è¿‡ç¨‹è‚¯å®šæ˜¯æ¯”ç›´æ¥ä¿®æ”¹ `sp` çš„å€¼è€—æ—¶çš„ã€‚
3. è¿˜è¦å¤„ç†å¥½ã€Œç¢ç‰‡åŒ–ã€çš„é—®é¢˜ã€‚å› ä¸ºå †ä¸Šç”³è¯·ç©ºé—´æ˜¯è¿™è¾¹åˆ†é…ä¸€å—é‚£è¾¹åˆ†é…ä¸€å—ï¼Œåœ¨é‡å¤çš„ç”³è¯·ç©ºé—´å’Œé‡Šæ”¾ç©ºé—´çš„è¿‡ç¨‹ä¸­ï¼Œä¼šåœ¨å†…å­˜é‡Œé¢ç•™ä¸‹å¾ˆå¤šç¢ç‰‡ã€‚æç«¯çš„æƒ…å†µæ˜¯ï¼šç¢ç‰‡åŠ èµ·æ¥çš„å¯åˆ†é…å¤§å°æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬æ•£è½åœ¨å†…å­˜å„ä¸ªåœ°æ–¹æ— æ³•åˆ©ç”¨ä»è€Œå¯¼è‡´äº†å†…å­˜ä¸è¶³

> ğŸ“’ å †ä¸Šå¯ä»¥åˆ†é…çš„å†…å­˜æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯éœ€è¦æ›´è‰¯å¥½çš„ç®¡ç†æœºåˆ¶æ¥å¤„ç†è¿™ç§æ¯”è¾ƒå¤æ‚çš„æƒ…å†µã€‚**å¯¹å¼€å‘äººå‘˜æ¥è¯´ï¼Œä¹Ÿé€ æˆäº†ä¸€å®šçš„è´Ÿæ‹…ï¼Œæˆ‘ä»¬æ— æ³•ä¾èµ–ç¼–è¯‘å™¨è‡ªåŠ¨å¸®æˆ‘ä»¬å¤„ç†ï¼Œè€Œæ˜¯è¦è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜**ï¼Œ*æ¯”å¦‚åœ¨ C è¯­è¨€ä¸­ä½ è¿›è¡Œäº† `malloc()` å‡½æ•°ç”³è¯·ç©ºé—´ä¹‹åè¦æ˜¯å¿˜è®°ç”¨ `free()` é‡Šæ”¾ï¼Œé‚£ä¹ˆä½ çš„ç¨‹åºå°±ä¼šå­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜*ã€‚æ›´åˆ«è°ˆè¿˜æœ‰å…¶ä»–çš„è¯¸å¦‚æ‚¬å‚æŒ‡é’ˆç­‰é—®é¢˜ã€‚

### å †ä¸Šå­˜æ”¾çš„æ˜¯ä»€ä¹ˆæ•°æ®

å¯¹å †ä¸Šå†…å­˜ç©ºé—´çš„åˆ†é…æœ‰ä¸€å®šäº†è§£ä¹‹åï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºä¸‹é¢çš„å‡ ä¸ªç»“è®ºï¼š

1. å †ä¸Šå­˜æ”¾çš„æ˜¯å®¹é‡å¯å˜çš„æ•°æ®ã€‚æ›´çµæ´»çš„åŒæ—¶ï¼Œä»£ä»·æ˜¯ç‰ºç‰²äº†ä¸€ç‚¹æ€§èƒ½
2. æœ‰æ—¶å€™ä¹Ÿå¯ä»¥æ˜¯å›ºå®šå¤§å°çš„æ•°æ®ï¼Œä½†æ˜¯ä½ ä¸æƒ³æ”¾åœ¨æ ˆä¸Šã€‚ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§æƒ…å†µï¼Ÿæ¯”å¦‚ï¼Œåœ¨ Rust é‡Œé¢ï¼Œæ ˆä¸Šçš„æ•°æ®æ˜¯é»˜è®¤ç”Ÿæˆæ‹·è´ï¼Œæœ‰æ—¶å€™å‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä½ å¯èƒ½æƒ³è¦æŠŠå¾ˆå¤§çš„æ•°æ®æ”¾åœ¨å †ä¸Šï¼Œé¿å…å¤šæ¬¡æ‹·è´å¸¦æ¥çš„å¼€é”€ã€‚ä¸çŸ¥é“çœ‹åˆ°è¿™é‡Œä½ ä»¬æœ‰æ²¡æœ‰æƒ³åˆ°æˆ‘ä»¬å¸¸å¸¸è¯´å‡½æ•°å‚æ•°ä¼ é€’å¼•ç”¨æ¯”ä¼ é€’å€¼æ•ˆç‡æ›´é«˜è¿™ä¸ªä¼˜åŒ–å‘¢ï¼Ÿ


## æ€»ç»“

1. æ ˆå’Œå †éƒ½æ˜¯å†…å­˜ç®¡ç†é‡Œé¢çš„æ¦‚å¿µï¼Œä»–ä»¬è·Ÿæ•°æ®ç»“æ„é‡Œçš„æ ˆå’Œå †çš„æ¦‚å¿µä¸ä¸€æ ·ã€‚æ ˆä¹‹æ‰€ä»¥å«åšæ ˆæ˜¯å› ä¸ºæˆ‘ä»¬åœ¨è¿›è¡Œå†…å­˜ç”³è¯·å’Œåˆ†é…çš„æ—¶å€™éƒ½éµå¾ª LIFO æ¨¡å¼ï¼Œè€Œå †è¿™ä¸ªåå­—åˆ™æ˜¯ä½“ç°äº†å †ä¸Šé¢çš„æ•°æ®æ¯«æ— ç»„ç»‡ã€‚
2. é€šå¸¸æ¥è¯´ï¼Œåœ¨æ ˆä¸Šç”³è¯·å’Œé‡Šæ”¾å†…å­˜ç©ºé—´æ˜¯æ¯”è¾ƒé«˜æ•ˆçš„ã€‚ä¸ºæ­¤ï¼ŒRust é‡Œé¢é»˜è®¤éƒ½æ˜¯åœ¨æ ˆä¸Šæ“ä½œ
3. æ ˆä¸Šä¸€èˆ¬æ”¾ã€Œå›ºå®šå¤§å°ã€çš„æ•°æ®ï¼Œå †ä¸Šä¸€èˆ¬æ”¾ã€Œå¤§å°å¯å˜ã€çš„æ•°æ®ã€‚ä½†æ˜¯æœ‰æ—¶å€™å‡ºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä¹Ÿä¼šåœ¨å †ä¸Šå­˜æ”¾å›ºå®šå¤§å°çš„æ•°æ®

åœ¨ CS è¿™é—¨å­¦ç§‘é‡Œé¢ï¼Œç»å¸¸å¯ä»¥çœ‹åˆ°åˆ†å±‚çš„è®¾è®¡ï¼Œæ¯”å¦‚è®¡ç®—æœºç½‘ç»œçš„ OSI æ¨¡å‹ã€‚åŒ…æ‹¬ç¼–ç¨‹è¯­è¨€æœ¬èº«ä¹Ÿå¯ä»¥åˆ†ä¸ºé«˜çº§è¯­è¨€å’Œä½çº§è¯­è¨€ã€‚6.172 æ€§èƒ½å·¥ç¨‹çš„è€å¸ˆè¯´çš„ä¸€å¥è¯åˆ†äº«ç»™ä½ ä»¬â€”â€” â€œ**å¾ˆå¤šæ—¶å€™ä½ è¦å­¦å¥½è¿™ä¸€å±‚çš„ä¸œè¥¿æ˜¯å¿…é¡»äº†è§£ä¸‹é¢ä¸€å±‚çš„ä¸œè¥¿ï¼Œä½ ä¸ä¸€å®šè¦ä¼šç”¨ä¸‹ä¸€å±‚çš„ä¸œè¥¿ï¼Œä½†æ˜¯çŸ¥é“ä¸‹ä¸€å±‚çš„ç»†èŠ‚ä¼šå¸®åŠ©ä½ å­¦è¿™ä¸€å±‚**â€ã€‚è‡³å°‘å¯¹æˆ‘æ¥è¯´ï¼ŒçŸ¥é“äº†æ ˆå’Œå †çš„åŒºåˆ«ä¹‹åï¼Œä¸‹é¢çš„å‡ ä¸ªé—®é¢˜åœ¨æˆ‘çœ‹æ¥æœ‰äº†å¾ˆåˆç†çš„è§£é‡Šï¼š

1. C/C++ è¯­è¨€çš„æŒ‡é’ˆæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„ï¼Ÿä»–ä»¬ä¸ºä»€ä¹ˆå­˜åœ¨ï¼Ÿ
2. ä¸ºä»€ä¹ˆå°¾é€’å½’ä¼˜åŒ–ä¼šå­˜åœ¨ï¼Ÿä¸ºä»€ä¹ˆåœ¨å†™é€’å½’å‡½æ•°çš„æ—¶å€™éƒ½è¦è€ƒè™‘é€’å½’å±‚æ•°å¤ªæ·±çš„é—®é¢˜ï¼Ÿ
3. ä¸ºä»€ä¹ˆ Rust é»˜è®¤æ•°æ®æ”¾åœ¨æ ˆä¸Šï¼Ÿ
4. ä¸ºä»€ä¹ˆä»¥å‰ä¼šçœ‹åˆ° C/C++ ä¼ é€’å‡½æ•°å‚æ•°çš„æ—¶å€™è¦ç”¨å¼•ç”¨è¿™ç§è¯´æ³•ï¼Œè¯´è¿™æ ·ä¼šæ¯”è¾ƒå¿«ï¼Ÿ

> ğŸ“’ åœ¨ CS é‡Œé¢ï¼Œæˆ‘è®¤ä¸ºæœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯å°è£…ã€‚é€å±‚å°è£…ï¼Œå¯¹ä¸Šä¸€å±‚éšè—ç»†èŠ‚çš„è¿™ç§è®¾è®¡å®åœ¨å¾ˆä¸é”™ã€‚

é€‰æ‹©å¸¦æœ‰ GC å¥½ä¸Šæ‰‹ä½†æ•ˆç‡è¾ƒä½çš„è¯­è¨€è¿˜æ˜¯é€‰æ‹©è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜è®©ä»£ç æ•ˆç‡æ›´é«˜å‘¢ï¼Ÿè¿™ç‚¹å…¶å®å–å†³äºä½ æ‰‹å¤´çš„å·¥ä½œã€‚å¦‚æœè¦å¼€å‘é€Ÿåº¦å½“ç„¶æ˜¯å‰è€…äº†ï¼Œå¦‚æœæ³¨é‡æ€§èƒ½é‚£å°±æ˜¯åè€…ã€‚å½“ç„¶ï¼Œå¤¹åœ¨ä¸­é—´çš„æ˜¯æ²¡æœ‰ GC + åŸºæœ¬ä¸ç”¨è‡ªå·±æ‰‹åŠ¨ç®¡ç†å†…å­˜ + æ•ˆç‡é«˜çš„ Rust è¯­è¨€ğŸš€ï¼Œè¦ä¸å­¦ç‚¹ RustğŸ˜‰


> âš ï¸ æœ¬æ–‡åœ¨ç»„ç»‡çš„æ—¶å€™å¯ä»¥å¿½ç•¥äº†ä¸€äº›ç»†èŠ‚ï¼Œæˆ‘åªè®²äº†æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„å‡ ç‚¹ã€‚å¦‚æœæƒ³è¦äº†è§£æ›´å¤šï¼Œå€¼å¾—ä¸€çœ‹çš„ææ–™åŒ…æ‹¬[^1]å’Œ[^2]ã€‚

## å‚è€ƒèµ„æ–™

[^1]: [6.172. Performance engineering of software systems - Lecture 11 && Lecture 12](https://ocw.mit.edu/courses/6-172-performance-engineering-of-software-systems-fall-2018/video_galleries/lecture-videos/)
[^2]: [CS110L. System programming - Memory Safety](https://www.youtube.com/watch?v=TfPJUoO-edk)

     
